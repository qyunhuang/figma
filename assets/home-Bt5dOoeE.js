/**
 * name: figma
 * version: v0.0.0
 * description: 
 * author: 
 */
import{d as k,r as v,k as d,o as r,l as y,q as z,t as T,M as B,H as E,S as j,v as D,C as F,T as L,P as H,x as G,y as A,w as N,F as I,z as M,u as h,g as P,A as $,B as O,D as m,E as S,G as V,I as W,J as q,K as J,L as K}from"./lucide-vue-next-MQtFzFvt.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as x}from"./fabric-B-Dms2P0.js";import{v as w}from"./uuid-C6aID195.js";import"./@bassist/progress-DxCYE3TM.js";const U={class:"popover-container"},Q=k({__name:"Popover",setup(e,{expose:t}){const s=v(!1),o=v(null),n=()=>{s.value=!s.value};return t({closePopover:()=>{s.value=!1}}),(p,_)=>(r(),d("div",U,[y("div",{onClick:n,class:"popover-trigger"},[T(p.$slots,"trigger",{},void 0)]),s.value?(r(),d("div",{key:0,class:"popover-content",ref_key:"popoverContent",ref:o},[T(p.$slots,"content",{},void 0)],512)):z("",!0)]))}}),R=g(Q,[["__scopeId","data-v-6ce73c40"]]),X={class:"tool-belt"},Y=["onClick"],Z={key:0},ee=["onClick"],te={class:"bg-[#1e1e1e]"},oe=["onClick"],ne={class:"ml-3 text-white text-[13px]"},se=k({__name:"ToolBelt",props:{selectedToolRef:{},setSelectedToolRef:{type:Function}},setup(e){const t=e,s=v([]),o=v(1),n=v([{name:"move",selectedIndex:0,options:[{icon:B,name:"Move",type:"move"},{icon:E,name:"Hand tool",type:"hand"}]},{name:"shape",selectedIndex:0,options:[{icon:j,name:"Rectangle",type:"rect"},{icon:D,name:"Line",type:"line"},{icon:F,name:"Ellipse",type:"ellipse"},{icon:L,name:"Triangle",type:"triangle"}]},{name:"creation",selectedIndex:0,options:[{icon:H,name:"Pen",type:"pen"},{icon:G,name:"Pencil",type:"pencil"}]},{name:"text",selectedIndex:0,options:[{icon:A,name:"Text",type:"text"}]}]);function i(l){o.value=l;const c=n.value[l];t.setSelectedToolRef(c.options[c.selectedIndex].type)}function p(l,c,a){o.value=c,n.value[c].selectedIndex=a,t.setSelectedToolRef(l),s.value[c]&&s.value[c].closePopover()}function _(l){s.value.forEach((c,a)=>{a!==l&&c.closePopover()})}return N(()=>t.selectedToolRef,l=>{const c=n.value.findIndex(a=>a.options.some(u=>u.type===l));c!==-1&&(o.value=c)}),(l,c)=>(r(),d("div",X,[(r(!0),d(I,null,M(h(n),(a,u)=>(r(),d("div",{key:a.name,class:"icon-group"},[y("div",{class:O(["icon-container",{"selected-group":h(o)===u}]),onClick:f=>i(u)},[(r(),P($(a.options[a.selectedIndex].icon),{size:20,"stroke-width":1,color:h(o)===u?"white":"black"},null,8,["color"]))],10,Y),a.options.length>1?(r(),d("div",Z,[m(R,{ref_for:!0,ref_key:"popoverRefs",ref:s},{trigger:S(()=>[y("div",{class:"select-container",onClick:f=>_(u)},[m(h(J),{size:12,"stroke-width":1})],8,ee)]),content:S(()=>[y("div",te,[(r(!0),d(I,null,M(a.options,(f,b)=>(r(),d("div",{key:f.type,class:"shape-tool-item",onClick:C=>p(f.type,u,b)},[m(h(V),{size:12,"stroke-width":1,color:"white",style:W({opacity:a.selectedIndex===b?1:0})},null,8,["style"]),(r(),P($(f.icon),{size:16,"stroke-width":1,class:"ml-1",color:"white"})),y("div",ne,q(f.name),1)],8,oe))),128))])]),_:2},1536)])):z("",!0)]))),128))]))}}),ce=g(se,[["__scopeId","data-v-ca054d9d"]]),le={},ae={class:"bg-white w-[300px]"};function re(e,t){return r(),d("div",ae)}const ie=g(le,[["render",re]]),ue={},de={class:"bg-white w-[300px]"};function ve(e,t){return r(),d("div",de)}const _e=g(ue,[["render",ve]]),pe=(e,t)=>{switch(e){case"rect":return fe(t);case"triangle":return me(t);case"ellipse":return he(t);case"line":return ye(t);case"text":return ge(t,"Tap to Type");default:return null}},fe=e=>new x.fabric.Rect({left:e.x,top:e.y,width:100,height:100,fill:"#d9d9d9",objectId:w()}),me=e=>new x.fabric.Triangle({left:e.x,top:e.y,width:100,height:100,fill:"#d9d9d9",objectId:w()}),he=e=>new x.fabric.Ellipse({left:e.x,top:e.y,rx:100,ry:100,fill:"#d9d9d9",objectId:w()}),ye=e=>new x.fabric.Line([e.x,e.y,e.x+100,e.y+100],{stroke:"#d9d9d9",strokeWidth:2,objectId:w()}),ge=(e,t)=>new x.fabric.IText(t,{left:e.x,top:e.y,fill:"#d9d9d9",fontFamily:"Helvetica",fontSize:36,fontWeight:"400",objectId:w()}),xe=({fabricRef:e,canvasRef:t})=>{if(!t.value){console.error("Canvas element is not available.");return}const s=t.value;if(!s){console.error("Canvas is not available.");return}const o=new x.fabric.Canvas(t.value,{width:s.clientWidth,height:s.clientHeight,backgroundColor:"#f5f5f5"});return e.value=o,o},be=({options:e,canvas:t,selectedShapeRef:s,shapeRef:o})=>{const n=t.getPointer(e.e),i=t.findTarget(e.e,!1);t.isDrawingMode=!1,i&&i.type===s.value?(t.setActiveObject(i),i.setCoords()):(o.value=pe(s.value,n),o.value&&(o.value.set({visible:!1}),t.add(o.value)))},we=({options:e,canvas:t,selectedShapeRef:s,shapeRef:o})=>{var i,p,_,l,c,a,u,f,b,C;const n=t.getPointer(e.e);switch(o.value&&o.value.set({visible:!0}),s==null?void 0:s.value){case"rect":(_=o.value)==null||_.set({width:n.x-(((i=o.value)==null?void 0:i.left)||0),height:n.y-(((p=o.value)==null?void 0:p.top)||0)});break;case"ellipse":(a=o.value)==null||a.set({rx:Math.abs(n.x-(((l=o.value)==null?void 0:l.left)||0))/2,ry:Math.abs(n.y-(((c=o.value)==null?void 0:c.top)||0))/2});break;case"triangle":(b=o.value)==null||b.set({width:n.x-(((u=o.value)==null?void 0:u.left)||0),height:n.y-(((f=o.value)==null?void 0:f.top)||0)});break;case"line":(C=o.value)==null||C.set({x2:n.x,y2:n.y});break}t.renderAll()},ke=e=>{e.value&&e.value.set({visible:!0}),e.value=null},Ce={class:"canvas-container"},Te=k({__name:"CanvasContainer",props:{onMounted:{type:Function}},setup(e){const t=v(null),s=e;return K(()=>{s.onMounted(t.value)}),(o,n)=>(r(),d("div",Ce,[y("canvas",{id:"canvas",ref_key:"canvasRef",ref:t,class:"canvas"},null,512)]))}}),Ie=g(Te,[["__scopeId","data-v-769c2f68"]]),Me={class:"container"},Pe=k({__name:"home",setup(e){const t=v(null),s=v(null),o=v(null),n=v("rect");v(null);const i=_=>{n.value=_},p=_=>{t.value=_;const l=xe({canvasRef:t,fabricRef:s});l&&(l.on("mouse:down",c=>{be({options:c,canvas:l,shapeRef:o,selectedShapeRef:n})}),l.on("mouse:move",c=>{we({options:c,canvas:l,shapeRef:o,selectedShapeRef:n})}),l.on("mouse:up",()=>{ke(o),["rect","line","ellipse","triangle","text"].includes(n.value)&&(n.value="move")}))};return(_,l)=>{const c=_e,a=ie,u=ce;return r(),d("div",Me,[m(c),m(Ie,{onMounted:p}),m(a),m(u,{selectedToolRef:h(n),setSelectedToolRef:i},null,8,["selectedToolRef"])])}}}),je=g(Pe,[["__scopeId","data-v-d3f518a4"]]);export{je as default};

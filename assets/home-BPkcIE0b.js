/**
 * name: figma
 * version: v0.0.0
 * description: 
 * author: 
 */
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-PktFt_Zw.js","assets/index-CeNfjwis.js","assets/index-DSkoI89Q.css"])))=>i.map(i=>d[i]);
var p0=Object.defineProperty;var g0=(e,t,i)=>t in e?p0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Zi=(e,t,i)=>g0(e,typeof t!="symbol"?t+"":t,i);import{h as Wc,d as ir,r as ue,c as ge,a as $t,b as ji,e as Zs,o as ce,w as es,F as Qs,f as ta,u as Xt,g as Jn,i as Wa,n as lh,j as Ae,k as Ws,l as ul,t as on,m as Hs,v as Ys,p as fl,q as Vs,s as m0,_ as Hc,x as ch,y as Ir,z as v0,A as b0,B as y0,C as of,D as w0,E as x0,G as nl,H as _0}from"./index-CeNfjwis.js";/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=({size:e,strokeWidth:t=2,absoluteStrokeWidth:i,color:s,iconNode:d,name:p,class:v,...o},{slots:r})=>Wc("svg",{...Vo,width:e||Vo.width,height:e||Vo.height,stroke:s||Vo.stroke,"stroke-width":i?Number(t)*24/Number(e):t,class:["lucide",`lucide-${S0(p??"icon")}`],...o},[...d.map(c=>Wc(...c)),...r.default?[r.default()]:[]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(e,t)=>(i,{slots:s})=>Wc(C0,{...i,iconNode:t,name:e},s);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=qe("AlignJustifyIcon",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=qe("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=qe("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=qe("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=qe("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=qe("EyeClosedIcon",[["path",{d:"m15 18-.722-3.25",key:"1j64jw"}],["path",{d:"M2 8a10.645 10.645 0 0 0 20 0",key:"1e7gxb"}],["path",{d:"m20 15-1.726-2.05",key:"1cnuld"}],["path",{d:"m4 15 1.726-2.05",key:"1dsqqd"}],["path",{d:"m9 18 .722-3.25",key:"ypw2yx"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=qe("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=qe("HandIcon",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=qe("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=qe("LockOpenIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=qe("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=qe("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=qe("MousePointer2Icon",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=qe("PenToolIcon",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=qe("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=qe("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=qe("RotateCwIcon",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=qe("SlashIcon",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=qe("SplineIcon",[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=qe("SquareDashedIcon",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=qe("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=qe("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=qe("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),R0={class:"popover-container"},z0=ir({__name:"Popover",setup(e,{expose:t}){const i=ue(!1),s=ue(null),d=()=>{i.value=!i.value};return t({closePopover:()=>{i.value=!1}}),(v,o)=>(ce(),ge("div",R0,[$t("div",{onClick:d,class:"popover-trigger"},[Zs(v.$slots,"trigger",{},void 0)]),i.value?(ce(),ge("div",{key:0,class:"popover-content",ref_key:"popoverContent",ref:s},[Zs(v.$slots,"content",{},void 0)],512)):ji("",!0)]))}}),rr=(e,t)=>{const i=e.__vccOpts||e;for(const[s,d]of t)i[s]=d;return i},q0=rr(z0,[["__scopeId","data-v-db7c9afa"]]),U0={class:"tool-belt"},W0=["onClick"],H0={key:0},Y0=["onClick"],V0={class:"bg-[#1e1e1e]"},X0=["onClick"],G0={class:"ml-3 text-white text-[13px]"},$0=ir({__name:"ToolBelt",props:{fabric:{},selectedToolRef:{},setSelectedToolRef:{type:Function},addImage:{type:Function}},setup(e){const t=e,i=ue([]),s=ue(1),d=ue([{name:"move",selectedIndex:0,options:[{icon:F0,name:"Move",type:"move"},{icon:O0,name:"Hand tool",type:"hand"}]},{name:"shape",selectedIndex:0,options:[{icon:Xa,name:"Rectangle",type:"rect"},{icon:uf,name:"Line",type:"line"},{icon:cf,name:"Ellipse",type:"ellipse"},{icon:ff,name:"Triangle",type:"triangle"},{icon:hf,name:"Image",type:"image"}]},{name:"creation",selectedIndex:0,options:[{icon:E0,name:"Pen",type:"pen"},{icon:I0,name:"Pencil",type:"pencil"}]},{name:"text",selectedIndex:0,options:[{icon:df,name:"Text",type:"text"}]}]);function p(r){s.value=r;const c=d.value[r];t.setSelectedToolRef(c.options[c.selectedIndex].type),i.value.forEach(u=>{u.closePopover()})}function v(r,c,u){if(r==="image"){const a=document.createElement("input");a.type="file",a.accept="image/*",a.onchange=l=>{var g;l.preventDefault();const n=(g=l.target.files)==null?void 0:g[0];if(!n)return;const h=new FileReader;h.onload=f=>{var y;const m=(y=f.target)==null?void 0:y.result;t.fabric&&t.addImage(m)},h.readAsDataURL(n)},a.click(),t.setSelectedToolRef("move"),a.remove()}else s.value=c,d.value[c].selectedIndex=u,t.setSelectedToolRef(r);i.value[c]&&i.value[c].closePopover()}function o(r){i.value.forEach((c,u)=>{u!==r&&c.closePopover()})}return es(()=>t.selectedToolRef,r=>{const c=d.value.findIndex(u=>u.options.some(a=>a.type===r));if(c!==-1){s.value=c;const u=d.value[c].selectedIndex,a=d.value[c].options.findIndex(l=>l.type===r);u!==a&&(d.value[c].selectedIndex=a)}},{immediate:!0}),(r,c)=>(ce(),ge("div",U0,[(ce(!0),ge(Qs,null,ta(Xt(d),(u,a)=>(ce(),ge("div",{key:u.name,class:"icon-group"},[$t("div",{class:lh(["icon-container",{"selected-group":Xt(s)===a}]),onClick:l=>p(a)},[(ce(),Jn(Wa(u.options[u.selectedIndex].icon),{size:20,"stroke-width":1,color:Xt(s)===a?"white":"black"},null,8,["color"]))],10,W0),u.options.length>1?(ce(),ge("div",H0,[Ae(q0,{ref_for:!0,ref_key:"popoverRefs",ref:i},{trigger:Ws(()=>[$t("div",{class:"select-container",onClick:l=>o(a)},[Ae(Xt(lf),{size:12,"stroke-width":1})],8,Y0)]),content:Ws(()=>[$t("div",V0,[(ce(!0),ge(Qs,null,ta(u.options,(l,n)=>(ce(),ge("div",{key:l.type,class:"shape-tool-item",onClick:h=>v(l.type,a,n)},[Ae(Xt(k0),{size:12,"stroke-width":1,color:"white",style:ul({visibility:u.selectedIndex===n?"visible":"hidden"})},null,8,["style"]),(ce(),Jn(Wa(l.icon),{size:16,"stroke-width":1,class:"ml-1",color:"white"})),$t("div",G0,on(l.name),1)],8,X0))),128))])]),_:2},1536)])):ji("",!0)]))),128))]))}}),K0=rr($0,[["__scopeId","data-v-e62a18da"]]),J0={class:"custom-input"},Z0={class:"input-container"},Q0={class:"left-slot"},tp=ir({__name:"Input",props:{value:{},leftText:{},handleChange:{type:Function}},setup(e){const t=e,i=ue(null),s=ue(t.value);es(()=>t.value,v=>{s.value=v});const d=()=>{t.handleChange(s.value)},p=()=>{d(),i.value&&i.value.blur()};return(v,o)=>(ce(),ge("div",J0,[$t("div",Z0,[$t("div",Q0,[Zs(v.$slots,"left",{},()=>[$t("span",null,on(v.leftText),1)])]),Hs($t("input",{ref_key:"inputRef",ref:i,"onUpdate:modelValue":o[0]||(o[0]=r=>Vs(s)?s.value=r:null),class:"input-field",onBlur:d,onKeydown:fl(p,["enter"])},null,544),[[Ys,Xt(s)]])])]))}}),Fs=rr(tp,[["__scopeId","data-v-a47bd4b9"]]);var De={};const ep={},ip=Object.freeze(Object.defineProperty({__proto__:null,default:ep},Symbol.toStringTag,{value:"Module"})),pc=m0(ip);(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.4.2"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var i=pc,s=new i.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=s.document,t.jsdomImplForWrapper=pc.implForWrapper,t.nodeCanvas=pc.Canvas,t.window=s,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function o(n,h){if(this.__eventListeners[n]){var g=this.__eventListeners[n];h?g[g.indexOf(h)]=!1:t.util.array.fill(g,!1)}}function r(n,h){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var g in n)this.on(g,n[g]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(h);return this}function c(n,h){var g=(function(){h.apply(this,arguments),this.off(n,g)}).bind(this);this.on(n,g)}function u(n,h){if(arguments.length===1)for(var g in n)c.call(this,g,n[g]);else c.call(this,n,h);return this}function a(n,h){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)o.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var g in n)o.call(this,g,n[g]);else o.call(this,n,h);return this}function l(n,h){if(!this.__eventListeners)return this;var g=this.__eventListeners[n];if(!g)return this;for(var f=0,m=g.length;f<m;f++)g[f]&&g[f].call(this,h||{});return this.__eventListeners[n]=g.filter(function(y){return y!==!1}),this}t.Observable={fire:l,on:r,once:u,off:a}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var o=0,r=arguments.length;o<r;o++)this._onObjectAdded(arguments[o]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(o,r,c){var u=this._objects;return c?u[r]=o:u.splice(r,0,o),this._onObjectAdded&&this._onObjectAdded(o),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var o=this._objects,r,c=!1,u=0,a=arguments.length;u<a;u++)r=o.indexOf(arguments[u]),r!==-1&&(c=!0,o.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(o,r){for(var c=this.getObjects(),u=0,a=c.length;u<a;u++)o.call(r,c[u],u,c);return this},getObjects:function(o){return typeof o>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===o})},item:function(o){return this._objects[o]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(o,r){return this._objects.indexOf(o)>-1?!0:r?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(o,!0)}):!1},complexity:function(){return this._objects.reduce(function(o,r){return o+=r.complexity?r.complexity():0,o},0)}},t.CommonMethods={_setOptions:function(o){for(var r in o)this.set(r,o[r])},_initGradient:function(o,r){o&&o.colorStops&&!(o instanceof t.Gradient)&&this.set(r,new t.Gradient(o))},_initPattern:function(o,r,c){o&&o.source&&!(o instanceof t.Pattern)?this.set(r,new t.Pattern(o,c)):c&&c()},_setObject:function(o){for(var r in o)this._set(r,o[r])},set:function(o,r){return typeof o=="object"?this._setObject(o):this._set(o,r),this},_set:function(o,r){this[o]=r},toggle:function(o){var r=this.get(o);return typeof r=="boolean"&&this.set(o,!r),this},get:function(o){return this[o]}},function(o){var r=Math.sqrt,c=Math.atan2,u=Math.pow,a=Math.PI/180,l=Math.PI/2;t.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var h=n/l;switch(h){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var h=n/l,g=1;switch(n<0&&(g=-1),h){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(n)},removeFromArray:function(n,h){var g=n.indexOf(h);return g!==-1&&n.splice(g,1),n},getRandomInt:function(n,h){return Math.floor(Math.random()*(h-n+1))+n},degreesToRadians:function(n){return n*a},radiansToDegrees:function(n){return n/a},rotatePoint:function(n,h,g){var f=new t.Point(n.x-h.x,n.y-h.y),m=t.util.rotateVector(f,g);return new t.Point(m.x,m.y).addEquals(h)},rotateVector:function(n,h){var g=t.util.sin(h),f=t.util.cos(h),m=n.x*f-n.y*g,y=n.x*g+n.y*f;return{x:m,y}},createVector:function(n,h){return new t.Point(h.x-n.x,h.y-n.y)},calcAngleBetweenVectors:function(n,h){return Math.acos((n.x*h.x+n.y*h.y)/(Math.hypot(n.x,n.y)*Math.hypot(h.x,h.y)))},getHatVector:function(n){return new t.Point(n.x,n.y).multiply(1/Math.hypot(n.x,n.y))},getBisector:function(n,h,g){var f=t.util.createVector(n,h),m=t.util.createVector(n,g),y=t.util.calcAngleBetweenVectors(f,m),x=t.util.calcAngleBetweenVectors(t.util.rotateVector(f,y),m),S=y*(x===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(f,S)),angle:y}},projectStrokeOnPoints:function(n,h,g){var f=[],m=h.strokeWidth/2,y=h.strokeUniform?new t.Point(1/h.scaleX,1/h.scaleY):new t.Point(1,1),x=function(S){var A=m/Math.hypot(S.x,S.y);return new t.Point(S.x*A*y.x,S.y*A*y.y)};return n.length<=1||n.forEach(function(S,A){var M=new t.Point(S.x,S.y),T,N;A===0?(N=n[A+1],T=g?x(t.util.createVector(N,M)).addEquals(M):n[n.length-1]):A===n.length-1?(T=n[A-1],N=g?x(t.util.createVector(T,M)).addEquals(M):n[0]):(T=n[A-1],N=n[A+1]);var W=t.util.getBisector(M,T,N),K=W.vector,P=W.angle,I,J;if(h.strokeLineJoin==="miter"&&(I=-m/Math.sin(P/2),J=new t.Point(K.x*I*y.x,K.y*I*y.y),Math.hypot(J.x,J.y)/m<=h.strokeMiterLimit)){f.push(M.add(J)),f.push(M.subtract(J));return}I=-m*Math.SQRT2,J=new t.Point(K.x*I*y.x,K.y*I*y.y),f.push(M.add(J)),f.push(M.subtract(J))}),f},transformPoint:function(n,h,g){return g?new t.Point(h[0]*n.x+h[2]*n.y,h[1]*n.x+h[3]*n.y):new t.Point(h[0]*n.x+h[2]*n.y+h[4],h[1]*n.x+h[3]*n.y+h[5])},makeBoundingBoxFromPoints:function(n,h){if(h)for(var g=0;g<n.length;g++)n[g]=t.util.transformPoint(n[g],h);var f=[n[0].x,n[1].x,n[2].x,n[3].x],m=t.util.array.min(f),y=t.util.array.max(f),x=y-m,S=[n[0].y,n[1].y,n[2].y,n[3].y],A=t.util.array.min(S),M=t.util.array.max(S),T=M-A;return{left:m,top:A,width:x,height:T}},invertTransform:function(n){var h=1/(n[0]*n[3]-n[1]*n[2]),g=[h*n[3],-h*n[1],-h*n[2],h*n[0]],f=t.util.transformPoint({x:n[4],y:n[5]},g,!0);return g[4]=-f.x,g[5]=-f.y,g},toFixed:function(n,h){return parseFloat(Number(n).toFixed(h))},parseUnit:function(n,h){var g=/\D{0,2}$/.exec(n),f=parseFloat(n);switch(h||(h=t.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return f*t.DPI/25.4;case"cm":return f*t.DPI/2.54;case"in":return f*t.DPI;case"pt":return f*t.DPI/72;case"pc":return f*t.DPI/72*12;case"em":return f*h;default:return f}},falseFunction:function(){return!1},getKlass:function(n,h){return n=t.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),t.util.resolveNamespace(h)[n]},getSvgAttributes:function(n){var h=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":h=h.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":h=h.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":h=h.concat(["offset","stop-color","stop-opacity"]);break}return h},resolveNamespace:function(n){if(!n)return t;var h=n.split("."),g=h.length,f,m=o||t.window;for(f=0;f<g;++f)m=m[h[f]];return m},loadImage:function(n,h,g,f){if(!n){h&&h.call(g,n);return}var m=t.util.createImage(),y=function(){h&&h.call(g,m,!1),m=m.onload=m.onerror=null};m.onload=y,m.onerror=function(){t.log("Error loading "+m.src),h&&h.call(g,null,!0),m=m.onload=m.onerror=null},n.indexOf("data")!==0&&f!==void 0&&f!==null&&(m.crossOrigin=f),n.substring(0,14)==="data:image/svg"&&(m.onload=null,t.util.loadImageInDom(m,y)),m.src=n},loadImageInDom:function(n,h){var g=t.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(n),t.document.querySelector("body").appendChild(g),n.onload=function(){h(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(n,h,g,f){n=n||[];var m=[],y=0,x=n.length;function S(){++y===x&&h&&h(m.filter(function(A){return A}))}if(!x){h&&h(m);return}n.forEach(function(A,M){if(!A||!A.type){S();return}var T=t.util.getKlass(A.type,g);T.fromObject(A,function(N,W){W||(m[M]=N),f&&f(A,N,W),S()})})},enlivenObjectEnlivables:function(n,h,g){var f=t.Object.ENLIVEN_PROPS.filter(function(m){return!!n[m]});t.util.enlivenObjects(f.map(function(m){return n[m]}),function(m){var y={};f.forEach(function(x,S){y[x]=m[S],h&&(h[x]=m[S])}),g&&g(y)})},enlivenPatterns:function(n,h){n=n||[];function g(){++m===y&&h&&h(f)}var f=[],m=0,y=n.length;if(!y){h&&h(f);return}n.forEach(function(x,S){x&&x.source?new t.Pattern(x,function(A){f[S]=A,g()}):(f[S]=x,g())})},groupSVGElements:function(n,h,g){var f;return n&&n.length===1?(typeof g<"u"&&(n[0].sourcePath=g),n[0]):(h&&(h.width&&h.height?h.centerPoint={x:h.width/2,y:h.height/2}:(delete h.width,delete h.height)),f=new t.Group(n,h),typeof g<"u"&&(f.sourcePath=g),f)},populateWithProperties:function(n,h,g){if(g&&Array.isArray(g))for(var f=0,m=g.length;f<m;f++)g[f]in n&&(h[g[f]]=n[g[f]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(n){var h=t.util.createCanvasElement();return h.width=n.width,h.height=n.height,h.getContext("2d").drawImage(n,0,0),h},toDataURL:function(n,h,g){return n.toDataURL("image/"+h,g)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(n,h,g){return[n[0]*h[0]+n[2]*h[1],n[1]*h[0]+n[3]*h[1],n[0]*h[2]+n[2]*h[3],n[1]*h[2]+n[3]*h[3],g?0:n[0]*h[4]+n[2]*h[5]+n[4],g?0:n[1]*h[4]+n[3]*h[5]+n[5]]},qrDecompose:function(n){var h=c(n[1],n[0]),g=u(n[0],2)+u(n[1],2),f=r(g),m=(n[0]*n[3]-n[2]*n[1])/f,y=c(n[0]*n[2]+n[1]*n[3],g);return{angle:h/a,scaleX:f,scaleY:m,skewX:y/a,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return t.iMatrix.concat();var h=t.util.degreesToRadians(n.angle),g=t.util.cos(h),f=t.util.sin(h);return[g,f,-f,g,0,0]},calcDimensionsMatrix:function(n){var h=typeof n.scaleX>"u"?1:n.scaleX,g=typeof n.scaleY>"u"?1:n.scaleY,f=[n.flipX?-h:h,0,0,n.flipY?-g:g,0,0],m=t.util.multiplyTransformMatrices,y=t.util.degreesToRadians;return n.skewX&&(f=m(f,[1,0,Math.tan(y(n.skewX)),1],!0)),n.skewY&&(f=m(f,[1,Math.tan(y(n.skewY)),0,1],!0)),f},composeMatrix:function(n){var h=[1,0,0,1,n.translateX||0,n.translateY||0],g=t.util.multiplyTransformMatrices;return n.angle&&(h=g(h,t.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(h=g(h,t.util.calcDimensionsMatrix(n))),h},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,h,g,f){f>0&&(h>f?h-=f:h=0,g>f?g-=f:g=0);var m=!0,y,x,S=n.getImageData(h,g,f*2||1,f*2||1),A=S.data.length;for(y=3;y<A&&(x=S.data[y],m=x<=0,m!==!1);y+=4);return S=null,m},parsePreserveAspectRatioAttribute:function(n){var h="meet",g="Mid",f="Mid",m=n.split(" "),y;return m&&m.length&&(h=m.pop(),h!=="meet"&&h!=="slice"?(y=h,h="meet"):m.length&&(y=m.pop())),g=y!=="none"?y.slice(1,4):"none",f=y!=="none"?y.slice(5,8):"none",{meetOrSlice:h,alignX:g,alignY:f}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?t.charWidthsCache[n]&&delete t.charWidthsCache[n]:t.charWidthsCache={}},limitDimsByArea:function(n,h){var g=Math.sqrt(h*n),f=Math.floor(h/g);return{x:Math.floor(g),y:f}},capValue:function(n,h,g){return Math.max(n,Math.min(h,g))},findScaleToFit:function(n,h){return Math.min(h.width/n.width,h.height/n.height)},findScaleToCover:function(n,h){return Math.max(h.width/n.width,h.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(h){return t.util.toFixed(h,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,h){var g=t.util.invertTransform(h),f=t.util.multiplyTransformMatrices(g,n.calcOwnMatrix());t.util.applyTransformToObject(n,f)},addTransformToObject:function(n,h){t.util.applyTransformToObject(n,t.util.multiplyTransformMatrices(h,n.calcOwnMatrix()))},applyTransformToObject:function(n,h){var g=t.util.qrDecompose(h),f=new t.Point(g.translateX,g.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",g.scaleX),n.set("scaleY",g.scaleY),n.skewX=g.skewX,n.skewY=g.skewY,n.angle=g.angle,n.setPositionByOrigin(f,"center","center")},sizeAfterTransform:function(n,h,g){var f=n/2,m=h/2,y=[{x:-f,y:-m},{x:f,y:-m},{x:-f,y:m},{x:f,y:m}],x=t.util.calcDimensionsMatrix(g),S=t.util.makeBoundingBoxFromPoints(y,x);return{x:S.width,y:S.height}},mergeClipPaths:function(n,h){var g=n,f=h;g.inverted&&!f.inverted&&(g=h,f=n),t.util.applyTransformToObject(f,t.util.multiplyTransformMatrices(t.util.invertTransform(g.calcTransformMatrix()),f.calcTransformMatrix()));var m=g.inverted&&f.inverted;return m&&(g.inverted=f.inverted=!1),new t.Group([g],{clipPath:f,inverted:m})},hasStyleChanged:function(n,h,g){return g=g||!1,n.fill!==h.fill||n.stroke!==h.stroke||n.strokeWidth!==h.strokeWidth||n.fontSize!==h.fontSize||n.fontFamily!==h.fontFamily||n.fontWeight!==h.fontWeight||n.fontStyle!==h.fontStyle||n.textBackgroundColor!==h.textBackgroundColor||n.deltaY!==h.deltaY||g&&(n.overline!==h.overline||n.underline!==h.underline||n.linethrough!==h.linethrough)},stylesToArray:function(g,h){for(var g=t.util.object.clone(g,!0),f=h.split(`
`),m=-1,y={},x=[],S=0;S<f.length;S++){if(!g[S]){m+=f[S].length;continue}for(var A=0;A<f[S].length;A++){m++;var M=g[S][A];if(M&&Object.keys(M).length>0){var T=t.util.hasStyleChanged(y,M,!0);T?x.push({start:m,end:m+1,style:M}):x[x.length-1].end++}y=M||{}}}return x},stylesFromArray:function(n,h){if(!Array.isArray(n))return n;for(var g=h.split(`
`),f=-1,m=0,y={},x=0;x<g.length;x++)for(var S=0;S<g[x].length;S++)f++,n[m]&&n[m].start<=f&&f<n[m].end&&(y[x]=y[x]||{},y[x][S]=Object.assign({},n[m].style),f===n[m].end-1&&m++);return y}}}(e),function(){var o=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function u(E,z,$,k,D,F,O,U,G,tt,Q){var ut=t.util.cos(E),pt=t.util.sin(E),St=t.util.cos(z),ot=t.util.sin(z),st=$*D*St-k*F*ot+O,it=k*D*St+$*F*ot+U,H=tt+G*(-$*D*pt-k*F*ut),vt=Q+G*(-k*D*pt+$*F*ut),yt=st+G*($*D*ot+k*F*St),bt=it+G*(k*D*ot-$*F*St);return["C",H,vt,yt,bt,st,it]}function a(E,z,$,k,D,F,O){var U=Math.PI,G=O*U/180,tt=t.util.sin(G),Q=t.util.cos(G),ut=0,pt=0;$=Math.abs($),k=Math.abs(k);var St=-Q*E*.5-tt*z*.5,ot=-Q*z*.5+tt*E*.5,st=$*$,it=k*k,H=ot*ot,vt=St*St,yt=st*it-st*H-it*vt,bt=0;if(yt<0){var Lt=Math.sqrt(1-yt/(st*it));$*=Lt,k*=Lt}else bt=(D===F?-1:1)*Math.sqrt(yt/(st*H+it*vt));var At=bt*$*ot/k,ft=-bt*k*St/$,Mt=Q*At-tt*ft+E*.5,jt=tt*At+Q*ft+z*.5,Rt=l(1,0,(St-At)/$,(ot-ft)/k),Yt=l((St-At)/$,(ot-ft)/k,(-St-At)/$,(-ot-ft)/k);F===0&&Yt>0?Yt-=2*U:F===1&&Yt<0&&(Yt+=2*U);for(var Vt=Math.ceil(Math.abs(Yt/U*2)),ie=[],Wt=Yt/Vt,te=8/3*Math.sin(Wt/4)*Math.sin(Wt/4)/Math.sin(Wt/2),Bt=Rt+Wt,Pe=0;Pe<Vt;Pe++)ie[Pe]=u(Rt,Bt,Q,tt,$,k,Mt,jt,te,ut,pt),ut=ie[Pe][5],pt=ie[Pe][6],Rt=Bt,Bt+=Wt;return ie}function l(E,z,$,k){var D=Math.atan2(z,E),F=Math.atan2(k,$);return F>=D?F-D:2*Math.PI-(D-F)}function n(E,z,$,k,D,F,O,U){var G;if(t.cachesBoundsOfCurve&&(G=o.call(arguments),t.boundsOfCurveCache[G]))return t.boundsOfCurveCache[G];var tt=Math.sqrt,Q=Math.min,ut=Math.max,pt=Math.abs,St=[],ot=[[],[]],st,it,H,vt,yt,bt,Lt,At;it=6*E-12*$+6*D,st=-3*E+9*$-9*D+3*O,H=3*$-3*E;for(var ft=0;ft<2;++ft){if(ft>0&&(it=6*z-12*k+6*F,st=-3*z+9*k-9*F+3*U,H=3*k-3*z),pt(st)<1e-12){if(pt(it)<1e-12)continue;vt=-H/it,0<vt&&vt<1&&St.push(vt);continue}Lt=it*it-4*H*st,!(Lt<0)&&(At=tt(Lt),yt=(-it+At)/(2*st),0<yt&&yt<1&&St.push(yt),bt=(-it-At)/(2*st),0<bt&&bt<1&&St.push(bt))}for(var Mt,jt,Rt=St.length,Yt=Rt,Vt;Rt--;)vt=St[Rt],Vt=1-vt,Mt=Vt*Vt*Vt*E+3*Vt*Vt*vt*$+3*Vt*vt*vt*D+vt*vt*vt*O,ot[0][Rt]=Mt,jt=Vt*Vt*Vt*z+3*Vt*Vt*vt*k+3*Vt*vt*vt*F+vt*vt*vt*U,ot[1][Rt]=jt;ot[0][Yt]=E,ot[1][Yt]=z,ot[0][Yt+1]=O,ot[1][Yt+1]=U;var ie=[{x:Q.apply(null,ot[0]),y:Q.apply(null,ot[1])},{x:ut.apply(null,ot[0]),y:ut.apply(null,ot[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[G]=ie),ie}function h(E,z,$){for(var k=$[1],D=$[2],F=$[3],O=$[4],U=$[5],G=$[6],tt=$[7],Q=a(G-E,tt-z,k,D,O,U,F),ut=0,pt=Q.length;ut<pt;ut++)Q[ut][1]+=E,Q[ut][2]+=z,Q[ut][3]+=E,Q[ut][4]+=z,Q[ut][5]+=E,Q[ut][6]+=z;return Q}function g(E){var z=0,$=0,k=E.length,D=0,F=0,O,U,G,tt=[],Q,ut,pt;for(U=0;U<k;++U){switch(G=!1,O=E[U].slice(0),O[0]){case"l":O[0]="L",O[1]+=z,O[2]+=$;case"L":z=O[1],$=O[2];break;case"h":O[1]+=z;case"H":O[0]="L",O[2]=$,z=O[1];break;case"v":O[1]+=$;case"V":O[0]="L",$=O[1],O[1]=z,O[2]=$;break;case"m":O[0]="M",O[1]+=z,O[2]+=$;case"M":z=O[1],$=O[2],D=O[1],F=O[2];break;case"c":O[0]="C",O[1]+=z,O[2]+=$,O[3]+=z,O[4]+=$,O[5]+=z,O[6]+=$;case"C":ut=O[3],pt=O[4],z=O[5],$=O[6];break;case"s":O[0]="S",O[1]+=z,O[2]+=$,O[3]+=z,O[4]+=$;case"S":Q==="C"?(ut=2*z-ut,pt=2*$-pt):(ut=z,pt=$),z=O[3],$=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=ut,O[2]=pt,ut=O[3],pt=O[4];break;case"q":O[0]="Q",O[1]+=z,O[2]+=$,O[3]+=z,O[4]+=$;case"Q":ut=O[1],pt=O[2],z=O[3],$=O[4];break;case"t":O[0]="T",O[1]+=z,O[2]+=$;case"T":Q==="Q"?(ut=2*z-ut,pt=2*$-pt):(ut=z,pt=$),O[0]="Q",z=O[1],$=O[2],O[1]=ut,O[2]=pt,O[3]=z,O[4]=$;break;case"a":O[0]="A",O[6]+=z,O[7]+=$;case"A":G=!0,tt=tt.concat(h(z,$,O)),z=O[6],$=O[7];break;case"z":case"Z":z=D,$=F;break}G||tt.push(O),Q=O[0]}return tt}function f(E,z,$,k){return Math.sqrt(($-E)*($-E)+(k-z)*(k-z))}function m(E){return E*E*E}function y(E){return 3*E*E*(1-E)}function x(E){return 3*E*(1-E)*(1-E)}function S(E){return(1-E)*(1-E)*(1-E)}function A(E,z,$,k,D,F,O,U){return function(G){var tt=m(G),Q=y(G),ut=x(G),pt=S(G);return{x:O*tt+D*Q+$*ut+E*pt,y:U*tt+F*Q+k*ut+z*pt}}}function M(E,z,$,k,D,F,O,U){return function(G){var tt=1-G,Q=3*tt*tt*($-E)+6*tt*G*(D-$)+3*G*G*(O-D),ut=3*tt*tt*(k-z)+6*tt*G*(F-k)+3*G*G*(U-F);return Math.atan2(ut,Q)}}function T(E){return E*E}function N(E){return 2*E*(1-E)}function W(E){return(1-E)*(1-E)}function K(E,z,$,k,D,F){return function(O){var U=T(O),G=N(O),tt=W(O);return{x:D*U+$*G+E*tt,y:F*U+k*G+z*tt}}}function P(E,z,$,k,D,F){return function(O){var U=1-O,G=2*U*($-E)+2*O*(D-$),tt=2*U*(k-z)+2*O*(F-k);return Math.atan2(tt,G)}}function I(E,z,$){var k={x:z,y:$},D,F=0,O;for(O=1;O<=100;O+=1)D=E(O/100),F+=f(k.x,k.y,D.x,D.y),k=D;return F}function J(E,z){for(var $=0,k=0,D=E.iterator,F={x:E.x,y:E.y},O,U,G=.01,tt=E.angleFinder,Q;k<z&&G>1e-4;)O=D($),Q=$,U=f(F.x,F.y,O.x,O.y),U+k>z?($-=G,G/=2):(F=O,$+=G,k+=U);return O.angle=tt(Q),O}function V(E){for(var z=0,$=E.length,k,D=0,F=0,O=0,U=0,G=[],tt,Q,ut,pt=0;pt<$;pt++){switch(k=E[pt],Q={x:D,y:F,command:k[0]},k[0]){case"M":Q.length=0,O=D=k[1],U=F=k[2];break;case"L":Q.length=f(D,F,k[1],k[2]),D=k[1],F=k[2];break;case"C":tt=A(D,F,k[1],k[2],k[3],k[4],k[5],k[6]),ut=M(D,F,k[1],k[2],k[3],k[4],k[5],k[6]),Q.iterator=tt,Q.angleFinder=ut,Q.length=I(tt,D,F),D=k[5],F=k[6];break;case"Q":tt=K(D,F,k[1],k[2],k[3],k[4]),ut=P(D,F,k[1],k[2],k[3],k[4]),Q.iterator=tt,Q.angleFinder=ut,Q.length=I(tt,D,F),D=k[3],F=k[4];break;case"Z":case"z":Q.destX=O,Q.destY=U,Q.length=f(D,F,O,U),D=O,F=U;break}z+=Q.length,G.push(Q)}return G.push({length:z,x:D,y:F}),G}function rt(E,z,$){$||($=V(E));for(var k=0;z-$[k].length>0&&k<$.length-2;)z-=$[k].length,k++;var D=$[k],F=z/D.length,O=D.command,U=E[k],G;switch(O){case"M":return{x:D.x,y:D.y,angle:0};case"Z":case"z":return G=new t.Point(D.x,D.y).lerp(new t.Point(D.destX,D.destY),F),G.angle=Math.atan2(D.destY-D.y,D.destX-D.x),G;case"L":return G=new t.Point(D.x,D.y).lerp(new t.Point(U[1],U[2]),F),G.angle=Math.atan2(U[2]-D.y,U[1]-D.x),G;case"C":return J(D,z);case"Q":return J(D,z)}}function at(E){var z=[],$=[],k,D,F=t.rePathCommand,O="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",U="("+O+")"+t.commaWsp,G="([01])"+t.commaWsp+"?",tt=U+"?"+U+"?"+U+G+G+U+"?("+O+")",Q=new RegExp(tt,"g"),ut,pt,St;if(!E||!E.match)return z;St=E.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ot=0,st,it=St.length;ot<it;ot++){k=St[ot],pt=k.slice(1).trim(),$.length=0;var H=k.charAt(0);if(st=[H],H.toLowerCase()==="a")for(var vt;vt=Q.exec(pt);)for(var yt=1;yt<vt.length;yt++)$.push(vt[yt]);else for(;ut=F.exec(pt);)$.push(ut[0]);for(var yt=0,bt=$.length;yt<bt;yt++)D=parseFloat($[yt]),isNaN(D)||st.push(D);var Lt=r[H.toLowerCase()],At=c[H]||H;if(st.length-1>Lt)for(var ft=1,Mt=st.length;ft<Mt;ft+=Lt)z.push([H].concat(st.slice(ft,ft+Lt))),H=At;else z.push(st)}return z}function dt(E,z){var $=[],k,D=new t.Point(E[0].x,E[0].y),F=new t.Point(E[1].x,E[1].y),O=E.length,U=1,G=0,tt=O>2;for(z=z||0,tt&&(U=E[2].x<F.x?-1:E[2].x===F.x?0:1,G=E[2].y<F.y?-1:E[2].y===F.y?0:1),$.push(["M",D.x-U*z,D.y-G*z]),k=1;k<O;k++){if(!D.eq(F)){var Q=D.midPointFrom(F);$.push(["Q",D.x,D.y,Q.x,Q.y])}D=E[k],k+1<E.length&&(F=E[k+1])}return tt&&(U=D.x>E[k-2].x?1:D.x===E[k-2].x?0:-1,G=D.y>E[k-2].y?1:D.y===E[k-2].y?0:-1),$.push(["L",D.x+U*z,D.y+G*z]),$}function nt(E,z,$){return $&&(z=t.util.multiplyTransformMatrices(z,[1,0,0,1,-$.x,-$.y])),E.map(function(k){for(var D=k.slice(0),F={},O=1;O<k.length-1;O+=2)F.x=k[O],F.y=k[O+1],F=t.util.transformPoint(F,z),D[O]=F.x,D[O+1]=F.y;return D})}t.util.joinPath=function(E){return E.map(function(z){return z.join(" ")}).join(" ")},t.util.parsePath=at,t.util.makePathSimpler=g,t.util.getSmoothPathFromPoints=dt,t.util.getPathSegmentsInfo=V,t.util.getBoundsOfCurve=n,t.util.getPointOnPath=rt,t.util.transformPath=nt}(),function(){var o=Array.prototype.slice;function r(n,h){for(var g=o.call(arguments,2),f=[],m=0,y=n.length;m<y;m++)f[m]=g.length?n[m][h].apply(n[m],g):n[m][h].call(n[m]);return f}function c(n,h){return l(n,h,function(g,f){return g>=f})}function u(n,h){return l(n,h,function(g,f){return g<f})}function a(n,h){for(var g=n.length;g--;)n[g]=h;return n}function l(n,h,g){if(!(!n||n.length===0)){var f=n.length-1,m=h?n[f][h]:n[f];if(h)for(;f--;)g(n[f][h],m)&&(m=n[f][h]);else for(;f--;)g(n[f],m)&&(m=n[f]);return m}}t.util.array={fill:a,invoke:r,min:u,max:c}}(),function(){function o(c,u,a){if(a)if(!t.isLikelyNode&&u instanceof Element)c=u;else if(u instanceof Array){c=[];for(var l=0,n=u.length;l<n;l++)c[l]=o({},u[l],a)}else if(u&&typeof u=="object")for(var h in u)h==="canvas"||h==="group"?c[h]=null:u.hasOwnProperty(h)&&(c[h]=o({},u[h],a));else c=u;else for(var h in u)c[h]=u[h];return c}function r(c,u){return o({},c,u)}t.util.object={extend:o,clone:r},t.util.object.extend(t.util,t.Observable)}(),function(){function o(l){return l.replace(/-+(.)?/g,function(n,h){return h?h.toUpperCase():""})}function r(l,n){return l.charAt(0).toUpperCase()+(n?l.slice(1):l.slice(1).toLowerCase())}function c(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(l){var n=0,h,g=[];for(n=0,h;n<l.length;n++)(h=a(l,n))!==!1&&g.push(h);return g}function a(l,n){var h=l.charCodeAt(n);if(isNaN(h))return"";if(h<55296||h>57343)return l.charAt(n);if(55296<=h&&h<=56319){if(l.length<=n+1)throw"High surrogate without following low surrogate";var g=l.charCodeAt(n+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return l.charAt(n)+l.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var f=l.charCodeAt(n-1);if(55296>f||f>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:o,capitalize:r,escapeXml:c,graphemeSplit:u}}(),function(){var o=Array.prototype.slice,r=function(){},c=function(){for(var h in{toString:1})if(h==="toString")return!1;return!0}(),u=function(h,g,f){for(var m in g)m in h.prototype&&typeof h.prototype[m]=="function"&&(g[m]+"").indexOf("callSuper")>-1?h.prototype[m]=function(y){return function(){var x=this.constructor.superclass;this.constructor.superclass=f;var S=g[y].apply(this,arguments);if(this.constructor.superclass=x,y!=="initialize")return S}}(m):h.prototype[m]=g[m],c&&(g.toString!==Object.prototype.toString&&(h.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(h.prototype.valueOf=g.valueOf))};function a(){}function l(h){for(var g=null,f=this;f.constructor.superclass;){var m=f.constructor.superclass.prototype[h];if(f[h]!==m){g=m;break}f=f.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,o.call(arguments,1)):g.call(this):console.log("tried to callSuper "+h+", method not found in prototype chain",this)}function n(){var h=null,g=o.call(arguments,0);typeof g[0]=="function"&&(h=g.shift());function f(){this.initialize.apply(this,arguments)}f.superclass=h,f.subclasses=[],h&&(a.prototype=h.prototype,f.prototype=new a,h.subclasses.push(f));for(var m=0,y=g.length;m<y;m++)u(f,g[m],h);return f.prototype.initialize||(f.prototype.initialize=r),f.prototype.constructor=f,f.prototype.callSuper=l,f}t.util.createClass=n}(),function(){var o=!!t.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];t.util.addListener=function(u,a,l,n){u&&u.addEventListener(a,l,o?!1:n)},t.util.removeListener=function(u,a,l,n){u&&u.removeEventListener(a,l,o?!1:n)};function c(u){var a=u.changedTouches;return a&&a[0]?a[0]:u}t.util.getPointer=function(u){var a=u.target,l=t.util.getScrollLeftTop(a),n=c(u);return{x:n.clientX+l.left,y:n.clientY+l.top}},t.util.isTouchEvent=function(u){return r.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function o(n,h){var g=n.style;if(!g)return n;if(typeof h=="string")return n.style.cssText+=";"+h,h.indexOf("opacity")>-1?l(n,h.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var f in h)if(f==="opacity")l(n,h[f]);else{var m=f==="float"||f==="cssFloat"?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":f;g.setProperty(m,h[f])}return n}var r=t.document.createElement("div"),c=typeof r.style.opacity=="string",u=typeof r.style.filter=="string",a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(n){return n};c?l=function(n,h){return n.style.opacity=h,n}:u&&(l=function(n,h){var g=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(g.zoom=1),a.test(g.filter)?(h=h>=.9999?"":"alpha(opacity="+h*100+")",g.filter=g.filter.replace(a,h)):g.filter+=" alpha(opacity="+h*100+")",n}),t.util.setStyle=o}(),function(){var o=Array.prototype.slice;function r(S){return typeof S=="string"?t.document.getElementById(S):S}var c,u=function(S){return o.call(S,0)};try{c=u(t.document.childNodes)instanceof Array}catch{}c||(u=function(S){for(var A=new Array(S.length),M=S.length;M--;)A[M]=S[M];return A});function a(S,A){var M=t.document.createElement(S);for(var T in A)T==="class"?M.className=A[T]:T==="for"?M.htmlFor=A[T]:M.setAttribute(T,A[T]);return M}function l(S,A){S&&(" "+S.className+" ").indexOf(" "+A+" ")===-1&&(S.className+=(S.className?" ":"")+A)}function n(S,A,M){return typeof A=="string"&&(A=a(A,M)),S.parentNode&&S.parentNode.replaceChild(A,S),A.appendChild(S),A}function h(S){for(var A=0,M=0,T=t.document.documentElement,N=t.document.body||{scrollLeft:0,scrollTop:0};S&&(S.parentNode||S.host)&&(S=S.parentNode||S.host,S===t.document?(A=N.scrollLeft||T.scrollLeft||0,M=N.scrollTop||T.scrollTop||0):(A+=S.scrollLeft||0,M+=S.scrollTop||0),!(S.nodeType===1&&S.style.position==="fixed")););return{left:A,top:M}}function g(S){var A,M=S&&S.ownerDocument,T={left:0,top:0},N={left:0,top:0},W,K={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!M)return N;for(var P in K)N[K[P]]+=parseInt(f(S,P),10)||0;return A=M.documentElement,typeof S.getBoundingClientRect<"u"&&(T=S.getBoundingClientRect()),W=h(S),{left:T.left+W.left-(A.clientLeft||0)+N.left,top:T.top+W.top-(A.clientTop||0)+N.top}}var f;t.document.defaultView&&t.document.defaultView.getComputedStyle?f=function(S,A){var M=t.document.defaultView.getComputedStyle(S,null);return M?M[A]:void 0}:f=function(S,A){var M=S.style[A];return!M&&S.currentStyle&&(M=S.currentStyle[A]),M},function(){var S=t.document.documentElement.style,A="userSelect"in S?"userSelect":"MozUserSelect"in S?"MozUserSelect":"WebkitUserSelect"in S?"WebkitUserSelect":"KhtmlUserSelect"in S?"KhtmlUserSelect":"";function M(N){return typeof N.onselectstart<"u"&&(N.onselectstart=t.util.falseFunction),A?N.style[A]="none":typeof N.unselectable=="string"&&(N.unselectable="on"),N}function T(N){return typeof N.onselectstart<"u"&&(N.onselectstart=null),A?N.style[A]="":typeof N.unselectable=="string"&&(N.unselectable=""),N}t.util.makeElementUnselectable=M,t.util.makeElementSelectable=T}();function m(S){var A=t.jsdomImplForWrapper(S);return A._canvas||A._image}function y(S){if(t.isLikelyNode){var A=t.jsdomImplForWrapper(S);A&&(A._image=null,A._canvas=null,A._currentSrc=null,A._attributes=null,A._classList=null)}}function x(S,A){S.imageSmoothingEnabled=S.imageSmoothingEnabled||S.webkitImageSmoothingEnabled||S.mozImageSmoothingEnabled||S.msImageSmoothingEnabled||S.oImageSmoothingEnabled,S.imageSmoothingEnabled=A}t.util.setImageSmoothing=x,t.util.getById=r,t.util.toArray=u,t.util.addClass=l,t.util.makeElement=a,t.util.wrapElement=n,t.util.getScrollLeftTop=h,t.util.getElementOffset=g,t.util.getNodeCanvas=m,t.util.cleanUpJsdomNode=y}(),function(){function o(u,a){return u+(/\?/.test(u)?"&":"?")+a}function r(){}function c(u,a){a||(a={});var l=a.method?a.method.toUpperCase():"GET",n=a.onComplete||function(){},h=new t.window.XMLHttpRequest,g=a.body||a.parameters;return h.onreadystatechange=function(){h.readyState===4&&(n(h),h.onreadystatechange=r)},l==="GET"&&(g=null,typeof a.parameters=="string"&&(u=o(u,a.parameters))),h.open(l,u,!0),(l==="POST"||l==="PUT")&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(g),h}t.util.request=c}(),t.log=console.log,t.warn=console.warn,function(){var o=t.util.object.extend,r=t.util.object.clone,c=[];t.util.object.extend(c,{cancelAll:function(){var m=this.splice(0);return m.forEach(function(y){y.cancel()}),m},cancelByCanvas:function(m){if(!m)return[];var y=this.filter(function(x){return typeof x.target=="object"&&x.target.canvas===m});return y.forEach(function(x){x.cancel()}),y},cancelByTarget:function(m){var y=this.findAnimationsByTarget(m);return y.forEach(function(x){x.cancel()}),y},findAnimationIndex:function(m){return this.indexOf(this.findAnimation(m))},findAnimation:function(m){return this.find(function(y){return y.cancel===m})},findAnimationsByTarget:function(m){return m?this.filter(function(y){return y.target===m}):[]}});function u(){return!1}function a(m,y,x,S){return-x*Math.cos(m/S*(Math.PI/2))+x+y}function l(m){m||(m={});var y=!1,x,S=function(){var A=t.runningAnimations.indexOf(x);return A>-1&&t.runningAnimations.splice(A,1)[0]};return x=o(r(m),{cancel:function(){return y=!0,S()},currentValue:"startValue"in m?m.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(x),g(function(A){var M=A||+new Date,T=m.duration||500,N=M+T,W,K=m.onChange||u,P=m.abort||u,I=m.onComplete||u,J=m.easing||a,V="startValue"in m?m.startValue.length>0:!1,rt="startValue"in m?m.startValue:0,at="endValue"in m?m.endValue:100,dt=m.byValue||(V?rt.map(function(nt,E){return at[E]-rt[E]}):at-rt);m.onStart&&m.onStart(),function nt(E){W=E||+new Date;var z=W>N?T:W-M,$=z/T,k=V?rt.map(function(F,O){return J(z,rt[O],dt[O],T)}):J(z,rt,dt,T),D=Math.abs(V?(k[0]-rt[0])/dt[0]:(k-rt)/dt);if(x.currentValue=V?k.slice():k,x.completionRate=D,x.durationRate=$,!y){if(P(k,D,$)){S();return}if(W>N){x.currentValue=V?at.slice():at,x.completionRate=1,x.durationRate=1,K(V?at.slice():at,1,1),I(at,1,1),S();return}else K(k,D,$),g(nt)}}(M)}),x.cancel}var n=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(m){return t.window.setTimeout(m,1e3/60)},h=t.window.cancelAnimationFrame||t.window.clearTimeout;function g(){return n.apply(t.window,arguments)}function f(){return h.apply(t.window,arguments)}t.util.animate=l,t.util.requestAnimFrame=g,t.util.cancelAnimFrame=f,t.runningAnimations=c}(),function(){function o(c,u,a){var l="rgba("+parseInt(c[0]+a*(u[0]-c[0]),10)+","+parseInt(c[1]+a*(u[1]-c[1]),10)+","+parseInt(c[2]+a*(u[2]-c[2]),10);return l+=","+(c&&u?parseFloat(c[3]+a*(u[3]-c[3])):1),l+=")",l}function r(c,u,a,l){var n=new t.Color(c).getSource(),h=new t.Color(u).getSource(),g=l.onComplete,f=l.onChange;return l=l||{},t.util.animate(t.util.object.extend(l,{duration:a||500,startValue:n,endValue:h,byValue:h,easing:function(m,y,x,S){var A=l.colorEasing?l.colorEasing(m,S):1-Math.cos(m/S*(Math.PI/2));return o(y,x,A)},onComplete:function(m,y,x){if(g)return g(o(h,h,0),y,x)},onChange:function(m,y,x){if(f){if(Array.isArray(m))return f(o(m,m,0),y,x);f(m,y,x)}}}))}t.util.animateColor=r}(),function(){function o(E,z,$,k){return E<Math.abs(z)?(E=z,k=$/4):z===0&&E===0?k=$/(2*Math.PI)*Math.asin(1):k=$/(2*Math.PI)*Math.asin(z/E),{a:E,c:z,p:$,s:k}}function r(E,z,$){return E.a*Math.pow(2,10*(z-=1))*Math.sin((z*$-E.s)*(2*Math.PI)/E.p)}function c(E,z,$,k){return $*((E=E/k-1)*E*E+1)+z}function u(E,z,$,k){return E/=k/2,E<1?$/2*E*E*E+z:$/2*((E-=2)*E*E+2)+z}function a(E,z,$,k){return $*(E/=k)*E*E*E+z}function l(E,z,$,k){return-$*((E=E/k-1)*E*E*E-1)+z}function n(E,z,$,k){return E/=k/2,E<1?$/2*E*E*E*E+z:-$/2*((E-=2)*E*E*E-2)+z}function h(E,z,$,k){return $*(E/=k)*E*E*E*E+z}function g(E,z,$,k){return $*((E=E/k-1)*E*E*E*E+1)+z}function f(E,z,$,k){return E/=k/2,E<1?$/2*E*E*E*E*E+z:$/2*((E-=2)*E*E*E*E+2)+z}function m(E,z,$,k){return-$*Math.cos(E/k*(Math.PI/2))+$+z}function y(E,z,$,k){return $*Math.sin(E/k*(Math.PI/2))+z}function x(E,z,$,k){return-$/2*(Math.cos(Math.PI*E/k)-1)+z}function S(E,z,$,k){return E===0?z:$*Math.pow(2,10*(E/k-1))+z}function A(E,z,$,k){return E===k?z+$:$*(-Math.pow(2,-10*E/k)+1)+z}function M(E,z,$,k){return E===0?z:E===k?z+$:(E/=k/2,E<1?$/2*Math.pow(2,10*(E-1))+z:$/2*(-Math.pow(2,-10*--E)+2)+z)}function T(E,z,$,k){return-$*(Math.sqrt(1-(E/=k)*E)-1)+z}function N(E,z,$,k){return $*Math.sqrt(1-(E=E/k-1)*E)+z}function W(E,z,$,k){return E/=k/2,E<1?-$/2*(Math.sqrt(1-E*E)-1)+z:$/2*(Math.sqrt(1-(E-=2)*E)+1)+z}function K(E,z,$,k){var D=1.70158,F=0,O=$;if(E===0)return z;if(E/=k,E===1)return z+$;F||(F=k*.3);var U=o(O,$,F,D);return-r(U,E,k)+z}function P(E,z,$,k){var D=1.70158,F=0,O=$;if(E===0)return z;if(E/=k,E===1)return z+$;F||(F=k*.3);var U=o(O,$,F,D);return U.a*Math.pow(2,-10*E)*Math.sin((E*k-U.s)*(2*Math.PI)/U.p)+U.c+z}function I(E,z,$,k){var D=1.70158,F=0,O=$;if(E===0)return z;if(E/=k/2,E===2)return z+$;F||(F=k*(.3*1.5));var U=o(O,$,F,D);return E<1?-.5*r(U,E,k)+z:U.a*Math.pow(2,-10*(E-=1))*Math.sin((E*k-U.s)*(2*Math.PI)/U.p)*.5+U.c+z}function J(E,z,$,k,D){return D===void 0&&(D=1.70158),$*(E/=k)*E*((D+1)*E-D)+z}function V(E,z,$,k,D){return D===void 0&&(D=1.70158),$*((E=E/k-1)*E*((D+1)*E+D)+1)+z}function rt(E,z,$,k,D){return D===void 0&&(D=1.70158),E/=k/2,E<1?$/2*(E*E*(((D*=1.525)+1)*E-D))+z:$/2*((E-=2)*E*(((D*=1.525)+1)*E+D)+2)+z}function at(E,z,$,k){return $-dt(k-E,0,$,k)+z}function dt(E,z,$,k){return(E/=k)<1/2.75?$*(7.5625*E*E)+z:E<2/2.75?$*(7.5625*(E-=1.5/2.75)*E+.75)+z:E<2.5/2.75?$*(7.5625*(E-=2.25/2.75)*E+.9375)+z:$*(7.5625*(E-=2.625/2.75)*E+.984375)+z}function nt(E,z,$,k){return E<k/2?at(E*2,0,$,k)*.5+z:dt(E*2-k,0,$,k)*.5+$*.5+z}t.util.ease={easeInQuad:function(E,z,$,k){return $*(E/=k)*E+z},easeOutQuad:function(E,z,$,k){return-$*(E/=k)*(E-2)+z},easeInOutQuad:function(E,z,$,k){return E/=k/2,E<1?$/2*E*E+z:-$/2*(--E*(E-2)-1)+z},easeInCubic:function(E,z,$,k){return $*(E/=k)*E*E+z},easeOutCubic:c,easeInOutCubic:u,easeInQuart:a,easeOutQuart:l,easeInOutQuart:n,easeInQuint:h,easeOutQuint:g,easeInOutQuint:f,easeInSine:m,easeOutSine:y,easeInOutSine:x,easeInExpo:S,easeOutExpo:A,easeInOutExpo:M,easeInCirc:T,easeOutCirc:N,easeInOutCirc:W,easeInElastic:K,easeOutElastic:P,easeInOutElastic:I,easeInBack:J,easeOutBack:V,easeInOutBack:rt,easeInBounce:at,easeOutBounce:dt,easeInOutBounce:nt}}(),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.util.object.clone,a=r.util.toFixed,l=r.util.parseUnit,n=r.util.multiplyTransformMatrices,h=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],g=["symbol","image","marker","pattern","view","svg"],f=["pattern","defs","symbol","metadata","clipPath","mask","desc"],m=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},x={stroke:"strokeOpacity",fill:"fillOpacity"},S="font-size",A="clip-path";r.svgValidTagNamesRegEx=N(h),r.svgViewBoxElementsRegEx=N(g),r.svgInvalidAncestorsRegEx=N(f),r.svgValidParentsRegEx=N(m),r.cssRules={},r.gradientDefs={},r.clipPaths={};function M(F){return F in y?y[F]:F}function T(F,O,U,G){var tt=Array.isArray(O),Q;if((F==="fill"||F==="stroke")&&O==="none")O="";else{if(F==="strokeUniform")return O==="non-scaling-stroke";if(F==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(F==="transformMatrix")U&&U.transformMatrix?O=n(U.transformMatrix,r.parseTransformAttribute(O)):O=r.parseTransformAttribute(O);else if(F==="visible")O=O!=="none"&&O!=="hidden",U&&U.visible===!1&&(O=!1);else if(F==="opacity")O=parseFloat(O),U&&typeof U.opacity<"u"&&(O*=U.opacity);else if(F==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(F==="charSpacing")Q=l(O,G)/G*1e3;else if(F==="paintFirst"){var ut=O.indexOf("fill"),pt=O.indexOf("stroke"),O="fill";(ut>-1&&pt>-1&&pt<ut||ut===-1&&pt>-1)&&(O="stroke")}else{if(F==="href"||F==="xlink:href"||F==="font")return O;if(F==="imageSmoothing")return O==="optimizeQuality";Q=tt?O.map(l):l(O,G)}}return!tt&&isNaN(Q)?O:Q}function N(F){return new RegExp("^("+F.join("|")+")\\b","i")}function W(F){for(var O in x)if(!(typeof F[x[O]]>"u"||F[O]==="")){if(typeof F[O]>"u"){if(!r.Object.prototype[O])continue;F[O]=r.Object.prototype[O]}if(F[O].indexOf("url(")!==0){var U=new r.Color(F[O]);F[O]=U.setAlpha(a(U.getAlpha()*F[x[O]],2)).toRgba()}}return F}function K(F,O){var U,G=[],tt,Q,ut;for(Q=0,ut=O.length;Q<ut;Q++)U=O[Q],tt=F.getElementsByTagName(U),G=G.concat(Array.prototype.slice.call(tt));return G}r.parseTransformAttribute=function(){function F(ft,Mt){var jt=r.util.cos(Mt[0]),Rt=r.util.sin(Mt[0]),Yt=0,Vt=0;Mt.length===3&&(Yt=Mt[1],Vt=Mt[2]),ft[0]=jt,ft[1]=Rt,ft[2]=-Rt,ft[3]=jt,ft[4]=Yt-(jt*Yt-Rt*Vt),ft[5]=Vt-(Rt*Yt+jt*Vt)}function O(ft,Mt){var jt=Mt[0],Rt=Mt.length===2?Mt[1]:Mt[0];ft[0]=jt,ft[3]=Rt}function U(ft,Mt,jt){ft[jt]=Math.tan(r.util.degreesToRadians(Mt[0]))}function G(ft,Mt){ft[4]=Mt[0],Mt.length===2&&(ft[5]=Mt[1])}var tt=r.iMatrix,Q=r.reNum,ut=r.commaWsp,pt="(?:(skewX)\\s*\\(\\s*("+Q+")\\s*\\))",St="(?:(skewY)\\s*\\(\\s*("+Q+")\\s*\\))",ot="(?:(rotate)\\s*\\(\\s*("+Q+")(?:"+ut+"("+Q+")"+ut+"("+Q+"))?\\s*\\))",st="(?:(scale)\\s*\\(\\s*("+Q+")(?:"+ut+"("+Q+"))?\\s*\\))",it="(?:(translate)\\s*\\(\\s*("+Q+")(?:"+ut+"("+Q+"))?\\s*\\))",H="(?:(matrix)\\s*\\(\\s*("+Q+")"+ut+"("+Q+")"+ut+"("+Q+")"+ut+"("+Q+")"+ut+"("+Q+")"+ut+"("+Q+")\\s*\\))",vt="(?:"+H+"|"+it+"|"+st+"|"+ot+"|"+pt+"|"+St+")",yt="(?:"+vt+"(?:"+ut+"*"+vt+")*)",bt="^\\s*(?:"+yt+"?)\\s*$",Lt=new RegExp(bt),At=new RegExp(vt,"g");return function(ft){var Mt=tt.concat(),jt=[];if(!ft||ft&&!Lt.test(ft))return Mt;ft.replace(At,function(Yt){var Vt=new RegExp(vt).exec(Yt).filter(function(te){return!!te}),ie=Vt[1],Wt=Vt.slice(2).map(parseFloat);switch(ie){case"translate":G(Mt,Wt);break;case"rotate":Wt[0]=r.util.degreesToRadians(Wt[0]),F(Mt,Wt);break;case"scale":O(Mt,Wt);break;case"skewX":U(Mt,Wt,2);break;case"skewY":U(Mt,Wt,1);break;case"matrix":Mt=Wt;break}jt.push(Mt.concat()),Mt=tt.concat()});for(var Rt=jt[0];jt.length>1;)jt.shift(),Rt=r.util.multiplyTransformMatrices(Rt,jt[0]);return Rt}}();function P(F,O){var U,G;F.replace(/;\s*$/,"").split(";").forEach(function(tt){var Q=tt.split(":");U=Q[0].trim().toLowerCase(),G=Q[1].trim(),O[U]=G})}function I(F,O){var U,G;for(var tt in F)typeof F[tt]>"u"||(U=tt.toLowerCase(),G=F[tt],O[U]=G)}function J(F,O){var U={};for(var G in r.cssRules[O])if(V(F,G.split(" ")))for(var tt in r.cssRules[O][G])U[tt]=r.cssRules[O][G][tt];return U}function V(F,O){var U,G=!0;return U=at(F,O.pop()),U&&O.length&&(G=rt(F,O)),U&&G&&O.length===0}function rt(F,O){for(var U,G=!0;F.parentNode&&F.parentNode.nodeType===1&&O.length;)G&&(U=O.pop()),F=F.parentNode,G=at(F,U);return O.length===0}function at(F,O){var U=F.nodeName,G=F.getAttribute("class"),tt=F.getAttribute("id"),Q,ut;if(Q=new RegExp("^"+U,"i"),O=O.replace(Q,""),tt&&O.length&&(Q=new RegExp("#"+tt+"(?![a-zA-Z\\-]+)","i"),O=O.replace(Q,"")),G&&O.length)for(G=G.split(" "),ut=G.length;ut--;)Q=new RegExp("\\."+G[ut]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(Q,"");return O.length===0}function dt(F,O){var U;if(F.getElementById&&(U=F.getElementById(O)),U)return U;var G,tt,Q,ut=F.getElementsByTagName("*");for(tt=0,Q=ut.length;tt<Q;tt++)if(G=ut[tt],O===G.getAttribute("id"))return G}function nt(F){for(var O=K(F,["use","svg:use"]),U=0;O.length&&U<O.length;){var G=O[U],tt=G.getAttribute("xlink:href")||G.getAttribute("href");if(tt===null)return;var Q=tt.slice(1),ut=G.getAttribute("x")||0,pt=G.getAttribute("y")||0,St=dt(F,Q).cloneNode(!0),ot=(St.getAttribute("transform")||"")+" translate("+ut+", "+pt+")",st,it=O.length,H,vt,yt,bt,Lt=r.svgNS;if(z(St),/^svg$/i.test(St.nodeName)){var At=St.ownerDocument.createElementNS(Lt,"g");for(vt=0,yt=St.attributes,bt=yt.length;vt<bt;vt++)H=yt.item(vt),At.setAttributeNS(Lt,H.nodeName,H.nodeValue);for(;St.firstChild;)At.appendChild(St.firstChild);St=At}for(vt=0,yt=G.attributes,bt=yt.length;vt<bt;vt++)H=yt.item(vt),!(H.nodeName==="x"||H.nodeName==="y"||H.nodeName==="xlink:href"||H.nodeName==="href")&&(H.nodeName==="transform"?ot=H.nodeValue+" "+ot:St.setAttribute(H.nodeName,H.nodeValue));St.setAttribute("transform",ot),St.setAttribute("instantiated_by_use","1"),St.removeAttribute("id"),st=G.parentNode,st.replaceChild(St,G),O.length===it&&U++}}var E=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function z(F){if(!r.svgViewBoxElementsRegEx.test(F.nodeName))return{};var O=F.getAttribute("viewBox"),U=1,G=1,tt=0,Q=0,ut,pt,St,ot,st=F.getAttribute("width"),it=F.getAttribute("height"),H=F.getAttribute("x")||0,vt=F.getAttribute("y")||0,yt=F.getAttribute("preserveAspectRatio")||"",bt=!O||!(O=O.match(E)),Lt=!st||!it||st==="100%"||it==="100%",At=bt&&Lt,ft={},Mt="",jt=0,Rt=0;if(ft.width=0,ft.height=0,ft.toBeParsed=At,bt&&(H||vt)&&F.parentNode&&F.parentNode.nodeName!=="#document"&&(Mt=" translate("+l(H)+" "+l(vt)+") ",St=(F.getAttribute("transform")||"")+Mt,F.setAttribute("transform",St),F.removeAttribute("x"),F.removeAttribute("y")),At)return ft;if(bt)return ft.width=l(st),ft.height=l(it),ft;if(tt=-parseFloat(O[1]),Q=-parseFloat(O[2]),ut=parseFloat(O[3]),pt=parseFloat(O[4]),ft.minX=tt,ft.minY=Q,ft.viewBoxWidth=ut,ft.viewBoxHeight=pt,Lt?(ft.width=ut,ft.height=pt):(ft.width=l(st),ft.height=l(it),U=ft.width/ut,G=ft.height/pt),yt=r.util.parsePreserveAspectRatioAttribute(yt),yt.alignX!=="none"&&(yt.meetOrSlice==="meet"&&(G=U=U>G?G:U),yt.meetOrSlice==="slice"&&(G=U=U>G?U:G),jt=ft.width-ut*U,Rt=ft.height-pt*U,yt.alignX==="Mid"&&(jt/=2),yt.alignY==="Mid"&&(Rt/=2),yt.alignX==="Min"&&(jt=0),yt.alignY==="Min"&&(Rt=0)),U===1&&G===1&&tt===0&&Q===0&&H===0&&vt===0)return ft;if((H||vt)&&F.parentNode.nodeName!=="#document"&&(Mt=" translate("+l(H)+" "+l(vt)+") "),St=Mt+" matrix("+U+" 0 0 "+G+" "+(tt*U+jt)+" "+(Q*G+Rt)+") ",F.nodeName==="svg"){for(ot=F.ownerDocument.createElementNS(r.svgNS,"g");F.firstChild;)ot.appendChild(F.firstChild);F.appendChild(ot)}else ot=F,ot.removeAttribute("x"),ot.removeAttribute("y"),St=ot.getAttribute("transform")+St;return ot.setAttribute("transform",St),ft}function $(F,O){for(;F&&(F=F.parentNode);)if(F.nodeName&&O.test(F.nodeName.replace("svg:",""))&&!F.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(F,O,U,G){if(F){nt(F);var tt=r.Object.__uid++,Q,ut,pt=z(F),St=r.util.toArray(F.getElementsByTagName("*"));if(pt.crossOrigin=G&&G.crossOrigin,pt.svgUid=tt,St.length===0&&r.isLikelyNode){St=F.selectNodes('//*[name(.)!="svg"]');var ot=[];for(Q=0,ut=St.length;Q<ut;Q++)ot[Q]=St[Q];St=ot}var st=St.filter(function(H){return z(H),r.svgValidTagNamesRegEx.test(H.nodeName.replace("svg:",""))&&!$(H,r.svgInvalidAncestorsRegEx)});if(!st||st&&!st.length){O&&O([],{});return}var it={};St.filter(function(H){return H.nodeName.replace("svg:","")==="clipPath"}).forEach(function(H){var vt=H.getAttribute("id");it[vt]=r.util.toArray(H.getElementsByTagName("*")).filter(function(yt){return r.svgValidTagNamesRegEx.test(yt.nodeName.replace("svg:",""))})}),r.gradientDefs[tt]=r.getGradientDefs(F),r.cssRules[tt]=r.getCSSRules(F),r.clipPaths[tt]=it,r.parseElements(st,function(H,vt){O&&(O(H,pt,vt,St),delete r.gradientDefs[tt],delete r.cssRules[tt],delete r.clipPaths[tt])},u(pt),U,G)}};function k(F,O){var U=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],G="xlink:href",tt=O.getAttribute(G).slice(1),Q=dt(F,tt);if(Q&&Q.getAttribute(G)&&k(F,Q),U.forEach(function(pt){Q&&!O.hasAttribute(pt)&&Q.hasAttribute(pt)&&O.setAttribute(pt,Q.getAttribute(pt))}),!O.children.length)for(var ut=Q.cloneNode(!0);ut.firstChild;)O.appendChild(ut.firstChild);O.removeAttribute(G)}var D=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");c(r,{parseFontDeclaration:function(F,O){var U=F.match(D);if(U){var G=U[1],tt=U[3],Q=U[4],ut=U[5],pt=U[6];G&&(O.fontStyle=G),tt&&(O.fontWeight=isNaN(parseFloat(tt))?tt:parseFloat(tt)),Q&&(O.fontSize=l(Q)),pt&&(O.fontFamily=pt),ut&&(O.lineHeight=ut==="normal"?1:ut)}},getGradientDefs:function(F){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],U=K(F,O),G,tt=0,Q={};for(tt=U.length;tt--;)G=U[tt],G.getAttribute("xlink:href")&&k(F,G),Q[G.getAttribute("id")]=G;return Q},parseAttributes:function(F,O,U){if(F){var G,tt={},Q,ut;typeof U>"u"&&(U=F.getAttribute("svgUid")),F.parentNode&&r.svgValidParentsRegEx.test(F.parentNode.nodeName)&&(tt=r.parseAttributes(F.parentNode,O,U));var pt=O.reduce(function(yt,bt){return G=F.getAttribute(bt),G&&(yt[bt]=G),yt},{}),St=c(J(F,U),r.parseStyleAttribute(F));pt=c(pt,St),St[A]&&F.setAttribute(A,St[A]),Q=ut=tt.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,pt[S]&&(pt[S]=Q=l(pt[S],ut));var ot,st,it={};for(var H in pt)ot=M(H),st=T(ot,pt[H],tt,Q),it[ot]=st;it&&it.font&&r.parseFontDeclaration(it.font,it);var vt=c(tt,it);return r.svgValidParentsRegEx.test(F.nodeName)?vt:W(vt)}},parseElements:function(F,O,U,G,tt){new r.ElementsParser(F,O,U,G,tt).parse()},parseStyleAttribute:function(F){var O={},U=F.getAttribute("style");return U&&(typeof U=="string"?P(U,O):I(U,O)),O},parsePointsAttribute:function(F){if(!F)return null;F=F.replace(/,/g," ").trim(),F=F.split(/\s+/);var O=[],U,G;for(U=0,G=F.length;U<G;U+=2)O.push({x:parseFloat(F[U]),y:parseFloat(F[U+1])});return O},getCSSRules:function(F){var O=F.getElementsByTagName("style"),U,G,tt={},Q;for(U=0,G=O.length;U<G;U++){var ut=O[U].textContent;ut=ut.replace(/\/\*[\s\S]*?\*\//g,""),ut.trim()!==""&&(Q=ut.split("}"),Q=Q.filter(function(pt){return pt.trim()}),Q.forEach(function(pt){var St=pt.split("{"),ot={},st=St[1].trim(),it=st.split(";").filter(function(bt){return bt.trim()});for(U=0,G=it.length;U<G;U++){var H=it[U].split(":"),vt=H[0].trim(),yt=H[1].trim();ot[vt]=yt}pt=St[0].trim(),pt.split(",").forEach(function(bt){bt=bt.replace(/^svg/i,"").trim(),bt!==""&&(tt[bt]?r.util.object.extend(tt[bt],ot):tt[bt]=r.util.object.clone(ot))})}))}return tt},loadSVGFromURL:function(F,O,U,G){F=F.replace(/^\n\s*/,"").trim(),new r.util.request(F,{method:"get",onComplete:tt});function tt(Q){var ut=Q.responseXML;if(!ut||!ut.documentElement)return O&&O(null),!1;r.parseSVGDocument(ut.documentElement,function(pt,St,ot,st){O&&O(pt,St,ot,st)},U,G)}},loadSVGFromString:function(F,O,U,G){var tt=new r.window.DOMParser,Q=tt.parseFromString(F.trim(),"text/xml");r.parseSVGDocument(Q.documentElement,function(ut,pt,St,ot){O(ut,pt,St,ot)},U,G)}})}(e),t.ElementsParser=function(o,r,c,u,a,l){this.elements=o,this.callback=r,this.options=c,this.reviver=u,this.svgUid=c&&c.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(o){o.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},o.createObjects=function(){var r=this;this.elements.forEach(function(c,u){c.setAttribute("svgUid",r.svgUid),r.createObject(c,u)})},o.findTag=function(r){return t[t.util.string.capitalize(r.tagName.replace("svg:",""))]},o.createObject=function(r,c){var u=this.findTag(r);if(u&&u.fromElement)try{u.fromElement(r,this.createCallback(c,r),this.options)}catch(a){t.log(a)}else this.checkIfDone()},o.createCallback=function(r,c){var u=this;return function(a){var l;u.resolveGradient(a,c,"fill"),u.resolveGradient(a,c,"stroke"),a instanceof t.Image&&a._originalElement&&(l=a.parsePreserveAspectRatioAttribute(c)),a._removeTransformMatrix(l),u.resolveClipPath(a,c),u.reviver&&u.reviver(c,a),u.instances[r]=a,u.checkIfDone()}},o.extractPropertyDefinition=function(r,c,u){var a=r[c],l=this.regexUrl;if(l.test(a)){l.lastIndex=0;var n=l.exec(a)[1];return l.lastIndex=0,t[u][this.svgUid][n]}},o.resolveGradient=function(r,c,u){var a=this.extractPropertyDefinition(r,u,"gradientDefs");if(a){var l=c.getAttribute(u+"-opacity"),n=t.Gradient.fromElement(a,r,l,this.options);r.set(u,n)}},o.createClipPathCallback=function(r,c){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,c.push(u)}},o.resolveClipPath=function(r,c){var u=this.extractPropertyDefinition(r,"clipPath","clipPaths"),a,l,n,h,g,f;if(u){h=[],n=t.util.invertTransform(r.calcTransformMatrix());for(var m=u[0].parentNode,y=c;y.parentNode&&y.getAttribute("clip-path")!==r.clipPath;)y=y.parentNode;y.parentNode.appendChild(m);for(var x=0;x<u.length;x++)a=u[x],l=this.findTag(a),l.fromElement(a,this.createClipPathCallback(r,h),this.options);h.length===1?u=h[0]:u=new t.Group(h),g=t.util.multiplyTransformMatrices(n,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,y);var f=t.util.qrDecompose(g);u.flipX=!1,u.flipY=!1,u.set("scaleX",f.scaleX),u.set("scaleY",f.scaleY),u.angle=f.angle,u.skewX=f.skewX,u.skewY=0,u.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),r.clipPath=u}else delete r.clipPath},o.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(o){var r=o.fabric||(o.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=c;function c(u,a){this.x=u,this.y=a}c.prototype={type:"point",constructor:c,add:function(u){return new c(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new c(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new c(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new c(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new c(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new c(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new c(this.x+(u.x-this.x)*a,this.y+(u.y-this.y)*a)},distanceFrom:function(u){var a=this.x-u.x,l=this.y-u.y;return Math.sqrt(a*a+l*l)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new c(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new c(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,a){return this.x=u,this.y=a,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var a=this.x,l=this.y;this.x=u.x,this.y=u.y,u.x=a,u.y=l},clone:function(){return new c(this.x,this.y)}}}(e),function(o){var r=o.fabric||(o.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function c(u){this.status=u,this.points=[]}r.Intersection=c,r.Intersection.prototype={constructor:c,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},r.Intersection.intersectLineLine=function(u,a,l,n){var h,g=(n.x-l.x)*(u.y-l.y)-(n.y-l.y)*(u.x-l.x),f=(a.x-u.x)*(u.y-l.y)-(a.y-u.y)*(u.x-l.x),m=(n.y-l.y)*(a.x-u.x)-(n.x-l.x)*(a.y-u.y);if(m!==0){var y=g/m,x=f/m;0<=y&&y<=1&&0<=x&&x<=1?(h=new c("Intersection"),h.appendPoint(new r.Point(u.x+y*(a.x-u.x),u.y+y*(a.y-u.y)))):h=new c}else g===0||f===0?h=new c("Coincident"):h=new c("Parallel");return h},r.Intersection.intersectLinePolygon=function(u,a,l){var n=new c,h=l.length,g,f,m,y;for(y=0;y<h;y++)g=l[y],f=l[(y+1)%h],m=c.intersectLineLine(u,a,g,f),n.appendPoints(m.points);return n.points.length>0&&(n.status="Intersection"),n},r.Intersection.intersectPolygonPolygon=function(u,a){var l=new c,n=u.length,h;for(h=0;h<n;h++){var g=u[h],f=u[(h+1)%n],m=c.intersectLinePolygon(g,f,a);l.appendPoints(m.points)}return l.points.length>0&&(l.status="Intersection"),l},r.Intersection.intersectPolygonRectangle=function(u,a,l){var n=a.min(l),h=a.max(l),g=new r.Point(h.x,n.y),f=new r.Point(n.x,h.y),m=c.intersectLinePolygon(n,g,u),y=c.intersectLinePolygon(g,h,u),x=c.intersectLinePolygon(h,f,u),S=c.intersectLinePolygon(f,n,u),A=new c;return A.appendPoints(m.points),A.appendPoints(y.points),A.appendPoints(x.points),A.appendPoints(S.points),A.points.length>0&&(A.status="Intersection"),A}}(e),function(o){var r=o.fabric||(o.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function c(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}r.Color=c,r.Color.prototype={_tryParsingColor:function(a){var l;a in c.colorNameMap&&(a=c.colorNameMap[a]),a==="transparent"&&(l=[255,255,255,0]),l||(l=c.sourceFromHex(a)),l||(l=c.sourceFromRgb(a)),l||(l=c.sourceFromHsl(a)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(a,l,n){a/=255,l/=255,n/=255;var h,g,f,m=r.util.array.max([a,l,n]),y=r.util.array.min([a,l,n]);if(f=(m+y)/2,m===y)h=g=0;else{var x=m-y;switch(g=f>.5?x/(2-m-y):x/(m+y),m){case a:h=(l-n)/x+(l<n?6:0);break;case l:h=(n-a)/x+2;break;case n:h=(a-l)/x+4;break}h/=6}return[Math.round(h*360),Math.round(g*100),Math.round(f*100)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource(),l,n,h;return l=a[0].toString(16),l=l.length===1?"0"+l:l,n=a[1].toString(16),n=n.length===1?"0"+n:n,h=a[2].toString(16),h=h.length===1?"0"+h:h,l.toUpperCase()+n.toUpperCase()+h.toUpperCase()},toHexa:function(){var a=this.getSource(),l;return l=Math.round(a[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var l=this.getSource();return l[3]=a,this.setSource(l),this},toGrayscale:function(){var a=this.getSource(),l=parseInt((a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),10),n=a[3];return this.setSource([l,l,l,n]),this},toBlackWhite:function(a){var l=this.getSource(),n=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),h=l[3];return a=a||127,n=Number(n)<Number(a)?0:255,this.setSource([n,n,n,h]),this},overlayWith:function(a){a instanceof c||(a=new c(a));var l=[],n=this.getAlpha(),h=.5,g=this.getSource(),f=a.getSource(),m;for(m=0;m<3;m++)l.push(Math.round(g[m]*(1-h)+f[m]*h));return l[3]=n,this.setSource(l),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(a,l,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?a+(l-a)*6*n:n<1/2?l:n<2/3?a+(l-a)*(2/3-n)*6:a}r.Color.fromRgb=function(a){return c.fromSource(c.sourceFromRgb(a))},r.Color.sourceFromRgb=function(a){var l=a.match(c.reRGBa);if(l){var n=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),h=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),g=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(n,10),parseInt(h,10),parseInt(g,10),l[4]?parseFloat(l[4]):1]}},r.Color.fromRgba=c.fromRgb,r.Color.fromHsl=function(a){return c.fromSource(c.sourceFromHsl(a))},r.Color.sourceFromHsl=function(a){var l=a.match(c.reHSLa);if(l){var n=(parseFloat(l[1])%360+360)%360/360,h=parseFloat(l[2])/(/%$/.test(l[2])?100:1),g=parseFloat(l[3])/(/%$/.test(l[3])?100:1),f,m,y;if(h===0)f=m=y=g;else{var x=g<=.5?g*(h+1):g+h-g*h,S=g*2-x;f=u(S,x,n+1/3),m=u(S,x,n),y=u(S,x,n-1/3)}return[Math.round(f*255),Math.round(m*255),Math.round(y*255),l[4]?parseFloat(l[4]):1]}},r.Color.fromHsla=c.fromHsl,r.Color.fromHex=function(a){return c.fromSource(c.sourceFromHex(a))},r.Color.sourceFromHex=function(a){if(a.match(c.reHex)){var l=a.slice(a.indexOf("#")+1),n=l.length===3||l.length===4,h=l.length===8||l.length===4,g=n?l.charAt(0)+l.charAt(0):l.substring(0,2),f=n?l.charAt(1)+l.charAt(1):l.substring(2,4),m=n?l.charAt(2)+l.charAt(2):l.substring(4,6),y=h?n?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(g,16),parseInt(f,16),parseInt(m,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},r.Color.fromSource=function(a){var l=new c;return l.setSource(a),l}}(e),function(o){var r=o.fabric||(o.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],a={},l="left",n="top",h="right",g="bottom",f="center",m={top:g,bottom:n,left:h,right:l,center:f},y=r.util.radiansToDegrees,x=Math.sign||function(ot){return(ot>0)-(ot<0)||+ot};function S(ot,st){var it=ot.angle+y(Math.atan2(st.y,st.x))+360;return Math.round(it%360/45)}function A(ot,st){var it=st.transform.target,H=it.canvas,vt=r.util.object.clone(st);vt.target=it,H&&H.fire("object:"+ot,vt),it.fire(ot,st)}function M(ot,st){var it=st.canvas,H=it.uniScaleKey,vt=ot[H];return it.uniformScaling&&!vt||!it.uniformScaling&&vt}function T(ot){return ot.originX===f&&ot.originY===f}function N(ot,st,it){var H=ot.lockScalingX,vt=ot.lockScalingY;return!!(H&&vt||!st&&(H||vt)&&it||H&&st==="x"||vt&&st==="y")}function W(ot,st,it){var H="not-allowed",vt=M(ot,it),yt="";if(st.x!==0&&st.y===0?yt="x":st.x===0&&st.y!==0&&(yt="y"),N(it,yt,vt))return H;var bt=S(it,st);return c[bt]+"-resize"}function K(ot,st,it){var H="not-allowed";if(st.x!==0&&it.lockSkewingY||st.y!==0&&it.lockSkewingX)return H;var vt=S(it,st)%4;return u[vt]+"-resize"}function P(ot,st,it){return ot[it.canvas.altActionKey]?a.skewCursorStyleHandler(ot,st,it):a.scaleCursorStyleHandler(ot,st,it)}function I(ot,st,it){var H=ot[it.canvas.altActionKey];if(st.x===0)return H?"skewX":"scaleY";if(st.y===0)return H?"skewY":"scaleX"}function J(ot,st,it){return it.lockRotation?"not-allowed":st.cursorStyle}function V(ot,st,it,H){return{e:ot,transform:st,pointer:{x:it,y:H}}}function rt(ot){return function(st,it,H,vt){var yt=it.target,bt=yt.getCenterPoint(),Lt=yt.translateToOriginPoint(bt,it.originX,it.originY),At=ot(st,it,H,vt);return yt.setPositionByOrigin(Lt,it.originX,it.originY),At}}function at(ot,st){return function(it,H,vt,yt){var bt=st(it,H,vt,yt);return bt&&A(ot,V(it,H,vt,yt)),bt}}function dt(ot,st,it,H,vt){var yt=ot.target,bt=yt.controls[ot.corner],Lt=yt.canvas.getZoom(),At=yt.padding/Lt,ft=yt.toLocalPoint(new r.Point(H,vt),st,it);return ft.x>=At&&(ft.x-=At),ft.x<=-At&&(ft.x+=At),ft.y>=At&&(ft.y-=At),ft.y<=At&&(ft.y+=At),ft.x-=bt.offsetX,ft.y-=bt.offsetY,ft}function nt(ot){return ot.flipX!==ot.flipY}function E(ot,st,it,H,vt){if(ot[st]!==0){var yt=ot._getTransformedDimensions()[H],bt=vt/yt*ot[it];ot.set(it,bt)}}function z(ot,st,it,H){var vt=st.target,yt=vt._getTransformedDimensions(0,vt.skewY),bt=dt(st,st.originX,st.originY,it,H),Lt=Math.abs(bt.x*2)-yt.x,At=vt.skewX,ft;Lt<2?ft=0:(ft=y(Math.atan2(Lt/vt.scaleX,yt.y/vt.scaleY)),st.originX===l&&st.originY===g&&(ft=-ft),st.originX===h&&st.originY===n&&(ft=-ft),nt(vt)&&(ft=-ft));var Mt=At!==ft;if(Mt){var jt=vt._getTransformedDimensions().y;vt.set("skewX",ft),E(vt,"skewY","scaleY","y",jt)}return Mt}function $(ot,st,it,H){var vt=st.target,yt=vt._getTransformedDimensions(vt.skewX,0),bt=dt(st,st.originX,st.originY,it,H),Lt=Math.abs(bt.y*2)-yt.y,At=vt.skewY,ft;Lt<2?ft=0:(ft=y(Math.atan2(Lt/vt.scaleY,yt.x/vt.scaleX)),st.originX===l&&st.originY===g&&(ft=-ft),st.originX===h&&st.originY===n&&(ft=-ft),nt(vt)&&(ft=-ft));var Mt=At!==ft;if(Mt){var jt=vt._getTransformedDimensions().x;vt.set("skewY",ft),E(vt,"skewX","scaleX","x",jt)}return Mt}function k(ot,st,it,H){var vt=st.target,yt=vt.skewX,bt,Lt=st.originY;if(vt.lockSkewingX)return!1;if(yt===0){var At=dt(st,f,f,it,H);At.x>0?bt=l:bt=h}else yt>0&&(bt=Lt===n?l:h),yt<0&&(bt=Lt===n?h:l),nt(vt)&&(bt=bt===l?h:l);st.originX=bt;var ft=at("skewing",rt(z));return ft(ot,st,it,H)}function D(ot,st,it,H){var vt=st.target,yt=vt.skewY,bt,Lt=st.originX;if(vt.lockSkewingY)return!1;if(yt===0){var At=dt(st,f,f,it,H);At.y>0?bt=n:bt=g}else yt>0&&(bt=Lt===l?n:g),yt<0&&(bt=Lt===l?g:n),nt(vt)&&(bt=bt===n?g:n);st.originY=bt;var ft=at("skewing",rt($));return ft(ot,st,it,H)}function F(ot,st,it,H){var vt=st,yt=vt.target,bt=yt.translateToOriginPoint(yt.getCenterPoint(),vt.originX,vt.originY);if(yt.lockRotation)return!1;var Lt=Math.atan2(vt.ey-bt.y,vt.ex-bt.x),At=Math.atan2(H-bt.y,it-bt.x),ft=y(At-Lt+vt.theta),Mt=!0;if(yt.snapAngle>0){var jt=yt.snapAngle,Rt=yt.snapThreshold||jt,Yt=Math.ceil(ft/jt)*jt,Vt=Math.floor(ft/jt)*jt;Math.abs(ft-Vt)<Rt?ft=Vt:Math.abs(ft-Yt)<Rt&&(ft=Yt)}return ft<0&&(ft=360+ft),ft%=360,Mt=yt.angle!==ft,yt.angle=ft,Mt}function O(ot,st,it,H,vt){vt=vt||{};var yt=st.target,bt=yt.lockScalingX,Lt=yt.lockScalingY,At=vt.by,ft,Mt,jt,Rt,Yt=M(ot,yt),Vt=N(yt,At,Yt),ie,Wt,te=st.gestureScale;if(Vt)return!1;if(te)Mt=st.scaleX*te,jt=st.scaleY*te;else{if(ft=dt(st,st.originX,st.originY,it,H),ie=At!=="y"?x(ft.x):1,Wt=At!=="x"?x(ft.y):1,st.signX||(st.signX=ie),st.signY||(st.signY=Wt),yt.lockScalingFlip&&(st.signX!==ie||st.signY!==Wt))return!1;if(Rt=yt._getTransformedDimensions(),Yt&&!At){var Bt=Math.abs(ft.x)+Math.abs(ft.y),Pe=st.original,me=Math.abs(Rt.x*Pe.scaleX/yt.scaleX)+Math.abs(Rt.y*Pe.scaleY/yt.scaleY),Pi=Bt/me;Mt=Pe.scaleX*Pi,jt=Pe.scaleY*Pi}else Mt=Math.abs(ft.x*yt.scaleX/Rt.x),jt=Math.abs(ft.y*yt.scaleY/Rt.y);T(st)&&(Mt*=2,jt*=2),st.signX!==ie&&At!=="y"&&(st.originX=m[st.originX],Mt*=-1,st.signX=ie),st.signY!==Wt&&At!=="x"&&(st.originY=m[st.originY],jt*=-1,st.signY=Wt)}var _e=yt.scaleX,Ee=yt.scaleY;return At?(At==="x"&&yt.set("scaleX",Mt),At==="y"&&yt.set("scaleY",jt)):(!bt&&yt.set("scaleX",Mt),!Lt&&yt.set("scaleY",jt)),_e!==yt.scaleX||Ee!==yt.scaleY}function U(ot,st,it,H){return O(ot,st,it,H)}function G(ot,st,it,H){return O(ot,st,it,H,{by:"x"})}function tt(ot,st,it,H){return O(ot,st,it,H,{by:"y"})}function Q(ot,st,it,H){return ot[st.target.canvas.altActionKey]?a.skewHandlerX(ot,st,it,H):a.scalingY(ot,st,it,H)}function ut(ot,st,it,H){return ot[st.target.canvas.altActionKey]?a.skewHandlerY(ot,st,it,H):a.scalingX(ot,st,it,H)}function pt(ot,st,it,H){var vt=st.target,yt=dt(st,st.originX,st.originY,it,H),bt=vt.strokeWidth/(vt.strokeUniform?vt.scaleX:1),Lt=T(st)?2:1,At=vt.width,ft=Math.abs(yt.x*Lt/vt.scaleX)-bt;return vt.set("width",Math.max(ft,0)),At!==ft}function St(ot,st,it,H){var vt=st.target,yt=it-st.offsetX,bt=H-st.offsetY,Lt=!vt.get("lockMovementX")&&vt.left!==yt,At=!vt.get("lockMovementY")&&vt.top!==bt;return Lt&&vt.set("left",yt),At&&vt.set("top",bt),(Lt||At)&&A("moving",V(ot,st,it,H)),Lt||At}a.scaleCursorStyleHandler=W,a.skewCursorStyleHandler=K,a.scaleSkewCursorStyleHandler=P,a.rotationWithSnapping=at("rotating",rt(F)),a.scalingEqually=at("scaling",rt(U)),a.scalingX=at("scaling",rt(G)),a.scalingY=at("scaling",rt(tt)),a.scalingYOrSkewingX=Q,a.scalingXOrSkewingY=ut,a.changeWidth=at("resizing",rt(pt)),a.skewHandlerX=k,a.skewHandlerY=D,a.dragHandler=St,a.scaleOrSkewActionName=I,a.rotationStyleHandler=J,a.fireEvent=A,a.wrapWithFixedAnchor=rt,a.wrapWithFireEvent=at,a.getLocalPoint=dt,r.controlsUtils=a}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.degreesToRadians,u=r.controlsUtils;function a(n,h,g,f,m){f=f||{};var y=this.sizeX||f.cornerSize||m.cornerSize,x=this.sizeY||f.cornerSize||m.cornerSize,S=typeof f.transparentCorners<"u"?f.transparentCorners:m.transparentCorners,A=S?"stroke":"fill",M=!S&&(f.cornerStrokeColor||m.cornerStrokeColor),T=h,N=g,W;n.save(),n.fillStyle=f.cornerColor||m.cornerColor,n.strokeStyle=f.cornerStrokeColor||m.cornerStrokeColor,y>x?(W=y,n.scale(1,x/y),N=g*y/x):x>y?(W=x,n.scale(y/x,1),T=h*x/y):W=y,n.lineWidth=1,n.beginPath(),n.arc(T,N,W/2,0,2*Math.PI,!1),n[A](),M&&n.stroke(),n.restore()}function l(n,h,g,f,m){f=f||{};var y=this.sizeX||f.cornerSize||m.cornerSize,x=this.sizeY||f.cornerSize||m.cornerSize,S=typeof f.transparentCorners<"u"?f.transparentCorners:m.transparentCorners,A=S?"stroke":"fill",M=!S&&(f.cornerStrokeColor||m.cornerStrokeColor),T=y/2,N=x/2;n.save(),n.fillStyle=f.cornerColor||m.cornerColor,n.strokeStyle=f.cornerStrokeColor||m.cornerStrokeColor,n.lineWidth=1,n.translate(h,g),n.rotate(c(m.angle)),n[A+"Rect"](-T,-N,y,x),M&&n.strokeRect(-T,-N,y,x),n.restore()}u.renderCircleControl=a,u.renderSquareControl=l}(e),function(o){var r=o.fabric||(o.fabric={});function c(u){for(var a in u)this[a]=u[a]}r.Control=c,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,a){return a.cursorStyle},getActionName:function(u,a){return a.actionName},getVisibility:function(u,a){var l=u._controlsVisibility;return l&&typeof l[a]<"u"?l[a]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,a){var l=r.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},a);return l},calcCornerCoords:function(u,a,l,n,h){var g,f,m,y,x=h?this.touchSizeX:this.sizeX,S=h?this.touchSizeY:this.sizeY;if(x&&S&&x!==S){var A=Math.atan2(S,x),M=Math.sqrt(x*x+S*S)/2,T=A-r.util.degreesToRadians(u),N=Math.PI/2-A-r.util.degreesToRadians(u);g=M*r.util.cos(T),f=M*r.util.sin(T),m=M*r.util.cos(N),y=M*r.util.sin(N)}else{var W=x&&S?x:a;M=W*.7071067812;var T=r.util.degreesToRadians(45-u);g=m=M*r.util.cos(T),f=y=M*r.util.sin(T)}return{tl:{x:l-y,y:n-m},tr:{x:l+g,y:n-f},bl:{x:l-g,y:n+f},br:{x:l+y,y:n+m}}},render:function(u,a,l,n,h){switch(n=n||{},n.cornerStyle||h.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,u,a,l,n,h);break;default:r.controlsUtils.renderSquareControl.call(this,u,a,l,n,h)}}}}(e),function(){function o(l,n){var h=l.getAttribute("style"),g=l.getAttribute("offset")||0,f,m,y,x;if(g=parseFloat(g)/(/%$/.test(g)?100:1),g=g<0?0:g>1?1:g,h){var S=h.split(/\s*;\s*/);for(S[S.length-1]===""&&S.pop(),x=S.length;x--;){var A=S[x].split(/\s*:\s*/),M=A[0].trim(),T=A[1].trim();M==="stop-color"?f=T:M==="stop-opacity"&&(y=T)}}return f||(f=l.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=l.getAttribute("stop-opacity")),f=new t.Color(f),m=f.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=m*n,{offset:g,color:f.toRgb(),opacity:y}}function r(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function c(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var u=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var n,h=this;Object.keys(l).forEach(function(g){h[g]=l[g]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,n={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(n.r1=l.coords.r1||0,n.r2=l.coords.r2||0),this.coords=n,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var n in l){var h=new t.Color(l[n]);this.colorStops.push({offset:parseFloat(n),color:h.toRgb(),opacity:h.getAlpha()})}return this},toObject:function(l){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,n,l),n},toSVG:function(l,m){var h=u(this.coords,!0),g,f,m=m||{},y,x,S=u(this.colorStops,!0),A=h.r1>h.r2,M=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),T=-this.offsetX,N=-this.offsetY,W=!!m.additionalTransform,K=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(S.sort(function(rt,at){return rt.offset-at.offset}),K==="objectBoundingBox"?(T/=l.width,N/=l.height):(T+=l.width/2,N+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(T-=l.pathOffset.x,N-=l.pathOffset.y),M[4]-=T,M[5]-=N,x='id="SVGID_'+this.id+'" gradientUnits="'+K+'"',x+=' gradientTransform="'+(W?m.additionalTransform+" ":"")+t.util.matrixToSVG(M)+'" ',this.type==="linear"?y=["<linearGradient ",x,' x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",x,' cx="',A?h.x1:h.x2,'" cy="',A?h.y1:h.y2,'" r="',A?h.r1:h.r2,'" fx="',A?h.x2:h.x1,'" fy="',A?h.y2:h.y1,`">
`]),this.type==="radial"){if(A)for(S=S.concat(),S.reverse(),g=0,f=S.length;g<f;g++)S[g].offset=1-S[g].offset;var P=Math.min(h.r1,h.r2);if(P>0){var I=Math.max(h.r1,h.r2),J=P/I;for(g=0,f=S.length;g<f;g++)S[g].offset+=J*(1-S[g].offset)}}for(g=0,f=S.length;g<f;g++){var V=S[g];y.push("<stop ",'offset="',V.offset*100+"%",'" style="stop-color:',V.color,typeof V.opacity<"u"?";stop-opacity: "+V.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(l){var n,h=t.util.object.clone(this.coords),g,f;if(this.type){for(this.type==="linear"?n=l.createLinearGradient(h.x1,h.y1,h.x2,h.y2):this.type==="radial"&&(n=l.createRadialGradient(h.x1,h.y1,h.r1,h.x2,h.y2,h.r2)),g=0,f=this.colorStops.length;g<f;g++){var m=this.colorStops[g].color,y=this.colorStops[g].opacity,x=this.colorStops[g].offset;typeof y<"u"&&(m=new t.Color(m).setAlpha(y).toRgba()),n.addColorStop(x,m)}return n}}}),t.util.object.extend(t.Gradient,{fromElement:function(l,n,h,g){var f=parseFloat(h)/(/%$/.test(h)?100:1);f=f<0?0:f>1?1:f,isNaN(f)&&(f=1);var m=l.getElementsByTagName("stop"),y,x=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",S=l.getAttribute("gradientTransform")||"",A=[],M,T,N=0,W=0,K;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(y="linear",M=r(l)):(y="radial",M=c(l)),T=m.length;T--;)A.push(o(m[T],f));K=t.parseTransformAttribute(S),a(n,M,g,x),x==="pixels"&&(N=-n.left,W=-n.top);var P=new t.Gradient({id:l.getAttribute("id"),type:y,coords:M,colorStops:A,gradientUnits:x,gradientTransform:K,offsetX:N,offsetY:W});return P}});function a(l,n,h,g){var f,m;Object.keys(n).forEach(function(y){f=n[y],f==="Infinity"?m=1:f==="-Infinity"?m=0:(m=parseFloat(n[y],10),typeof f=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(f)&&(m*=.01,g==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(m*=h.viewBoxWidth||h.width),(y==="y1"||y==="y2")&&(m*=h.viewBoxHeight||h.height)))),n[y]=m})}}(),function(){var o=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,c){if(r||(r={}),this.id=t.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){c&&c(this);return}else{var u=this;this.source=t.util.createImage(),t.util.loadImage(r.source,function(a,l){u.source=a,c&&c(u,l)},null,this.crossOrigin)}},toObject:function(r){var c=t.Object.NUM_FRACTION_DIGITS,u,a;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),a={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:o(this.offsetX,c),offsetY:o(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,a,r),a},toSVG:function(r){var c=typeof this.source=="function"?this.source():this.source,u=c.width/r.width,a=c.height/r.height,l=this.offsetX/r.width,n=this.offsetY/r.height,h="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(a=1,n&&(a+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,l&&(u+=Math.abs(l))),c.src?h=c.src:c.toDataURL&&(h=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+n+'" width="'+u+'" height="'+a+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+h+`"></image>
</pattern>
`},setOptions:function(r){for(var c in r)this[c]=r[c]},toLive:function(r){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":r.createPattern(c,this.repeat)}})}(),function(o){var r=o.fabric||(o.fabric={}),c=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var a in u)this[a]=u[a];this.id=r.Object.__uid++},_parseShadow:function(u){var a=u.trim(),l=r.Shadow.reOffsetsAndBlur.exec(a)||[],n=a.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var a=40,l=40,n=r.Object.NUM_FRACTION_DIGITS,h=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-u.angle)),g=20,f=new r.Color(this.color);return u.width&&u.height&&(a=c((Math.abs(h.x)+this.blur)/u.width,n)*100+g,l=c((Math.abs(h.y)+this.blur)/u.height,n)*100+g),u.flipX&&(h.x*=-1),u.flipY&&(h.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+c(h.x,n)+'" dy="'+c(h.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+f.toRgb()+'" flood-opacity="'+f.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},a=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==a[l]&&(u[l]=this[l])},this),u}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var o=t.util.object.extend,r=t.util.getElementOffset,c=t.util.removeFromArray,u=t.util.toFixed,a=t.util.transformPoint,l=t.util.invertTransform,n=t.util.getNodeCanvas,h=t.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(f,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(f,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(f,m){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(f),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,y),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,y),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,y),m.overlayColor&&this.setOverlayColor(m.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var f=t.devicePixelRatio;this.__initRetinaScaling(f,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(f,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(f,m,y){m.setAttribute("width",this.width*f),m.setAttribute("height",this.height*f),y.scale(f,f)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(f,m,y){return this.__setBgOverlayImage("overlayImage",f,m,y)},setBackgroundImage:function(f,m,y){return this.__setBgOverlayImage("backgroundImage",f,m,y)},setOverlayColor:function(f,m){return this.__setBgOverlayColor("overlayColor",f,m)},setBackgroundColor:function(f,m){return this.__setBgOverlayColor("backgroundColor",f,m)},__setBgOverlayImage:function(f,m,y,x){return typeof m=="string"?t.util.loadImage(m,function(S,A){if(S){var M=new t.Image(S,x);this[f]=M,M.canvas=this}y&&y(S,A)},this,x&&x.crossOrigin):(x&&m.setOptions(x),this[f]=m,m&&(m.canvas=this),y&&y(m,!1)),this},__setBgOverlayColor:function(f,m,y){return this[f]=m,this._initGradient(m,f),this._initPattern(m,f,y),this},_createCanvasElement:function(){var f=h();if(!f||(f.style||(f.style={}),typeof f.getContext>"u"))throw g;return f},_initOptions:function(f){var m=this.lowerCanvasEl;this._setOptions(f),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(f){f&&f.getContext?this.lowerCanvasEl=f:this.lowerCanvasEl=t.util.getById(f)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(f,m){return this.setDimensions({width:f},m)},setHeight:function(f,m){return this.setDimensions({height:f},m)},setDimensions:function(f,m){var y;m=m||{};for(var x in f)y=f[x],m.cssOnly||(this._setBackstoreDimension(x,f[x]),y+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(x,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(f,m){return this.lowerCanvasEl[f]=m,this.upperCanvasEl&&(this.upperCanvasEl[f]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[f]=m),this[f]=m,this},_setCssDimension:function(f,m){return this.lowerCanvasEl.style[f]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[f]=m),this.wrapperEl&&(this.wrapperEl.style[f]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(f){var m=this._activeObject,y=this.backgroundImage,x=this.overlayImage,S,A,M;for(this.viewportTransform=f,A=0,M=this._objects.length;A<M;A++)S=this._objects[A],S.group||S.setCoords(!0);return m&&m.setCoords(),y&&y.setCoords(!0),x&&x.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(f,m){var y=f,x=this.viewportTransform.slice(0);f=a(f,l(this.viewportTransform)),x[0]=m,x[3]=m;var S=a(f,x);return x[4]+=y.x-S.x,x[5]+=y.y-S.y,this.setViewportTransform(x)},setZoom:function(f){return this.zoomToPoint(new t.Point(0,0),f),this},absolutePan:function(f){var m=this.viewportTransform.slice(0);return m[4]=-f.x,m[5]=-f.y,this.setViewportTransform(m)},relativePan:function(f){return this.absolutePan(new t.Point(-f.x-this.viewportTransform[4],-f.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(f){this.stateful&&f.setupState(),f._set("canvas",this),f.setCoords(),this.fire("object:added",{target:f}),f.fire("added")},_onObjectRemoved:function(f){this.fire("object:removed",{target:f}),f.fire("removed"),delete f.canvas},clearContext:function(f){return f.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var f=this.contextContainer;return this.renderCanvas(f,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var f={},m=this.width,y=this.height,x=l(this.viewportTransform);return f.tl=a({x:0,y:0},x),f.br=a({x:m,y},x),f.tr=new t.Point(f.br.x,f.tl.y),f.bl=new t.Point(f.tl.x,f.br.y),this.vptCoords=f,f},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(f,m){var y=this.viewportTransform,x=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(f),t.util.setImageSmoothing(f,this.imageSmoothingEnabled),this.fire("before:render",{ctx:f}),this._renderBackground(f),f.save(),f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(f,m),f.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),x&&(x.canvas=this,x.shouldCache(),x._transformDone=!0,x.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(f)),this._renderOverlay(f),this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),this.fire("after:render",{ctx:f})},drawClipPathOnCanvas:function(f){var m=this.viewportTransform,y=this.clipPath;f.save(),f.transform(m[0],m[1],m[2],m[3],m[4],m[5]),f.globalCompositeOperation="destination-in",y.transform(f),f.scale(1/y.zoomX,1/y.zoomY),f.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),f.restore()},_renderObjects:function(f,m){var y,x;for(y=0,x=m.length;y<x;++y)m[y]&&m[y].render(f)},_renderBackgroundOrOverlay:function(f,m){var y=this[m+"Color"],x=this[m+"Image"],S=this.viewportTransform,A=this[m+"Vpt"];if(!(!y&&!x)){if(y){f.save(),f.beginPath(),f.moveTo(0,0),f.lineTo(this.width,0),f.lineTo(this.width,this.height),f.lineTo(0,this.height),f.closePath(),f.fillStyle=y.toLive?y.toLive(f,this):y,A&&f.transform(S[0],S[1],S[2],S[3],S[4],S[5]),f.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var M=y.gradientTransform||y.patternTransform;M&&f.transform(M[0],M[1],M[2],M[3],M[4],M[5]),f.fill(),f.restore()}if(x){f.save();var T=this.skipOffscreen;this.skipOffscreen=A,A&&f.transform(S[0],S[1],S[2],S[3],S[4],S[5]),x.render(f),this.skipOffscreen=T,f.restore()}}},_renderBackground:function(f){this._renderBackgroundOrOverlay(f,"background")},_renderOverlay:function(f){this._renderBackgroundOrOverlay(f,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(f){return this._centerObject(f,new t.Point(this.getCenterPoint().x,f.getCenterPoint().y))},centerObjectV:function(f){return this._centerObject(f,new t.Point(f.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(f){var m=this.getCenterPoint();return this._centerObject(f,m)},viewportCenterObject:function(f){var m=this.getVpCenter();return this._centerObject(f,m)},viewportCenterObjectH:function(f){var m=this.getVpCenter();return this._centerObject(f,new t.Point(m.x,f.getCenterPoint().y)),this},viewportCenterObjectV:function(f){var m=this.getVpCenter();return this._centerObject(f,new t.Point(f.getCenterPoint().x,m.y))},getVpCenter:function(){var f=this.getCenterPoint(),m=l(this.viewportTransform);return a(f,m)},_centerObject:function(f,m){return f.setPositionByOrigin(m,"center","center"),f.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(f){return this.toDatalessObject(f)},toObject:function(f){return this._toObjectMethod("toObject",f)},toDatalessObject:function(f){return this._toObjectMethod("toDatalessObject",f)},_toObjectMethod:function(f,m){var y=this.clipPath,x={version:t.version,objects:this._toObjects(f,m)};return y&&!y.excludeFromExport&&(x.clipPath=this._toObject(this.clipPath,f,m)),o(x,this.__serializeBgOverlay(f,m)),t.util.populateWithProperties(this,x,m),x},_toObjects:function(f,m){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,f,m)},this)},_toObject:function(f,m,y){var x;this.includeDefaultValues||(x=f.includeDefaultValues,f.includeDefaultValues=!1);var S=f[m](y);return this.includeDefaultValues||(f.includeDefaultValues=x),S},__serializeBgOverlay:function(f,m){var y={},x=this.backgroundImage,S=this.overlayImage,A=this.backgroundColor,M=this.overlayColor;return A&&A.toObject?A.excludeFromExport||(y.background=A.toObject(m)):A&&(y.background=A),M&&M.toObject?M.excludeFromExport||(y.overlay=M.toObject(m)):M&&(y.overlay=M),x&&!x.excludeFromExport&&(y.backgroundImage=this._toObject(x,f,m)),S&&!S.excludeFromExport&&(y.overlayImage=this._toObject(S,f,m)),y},svgViewportTransformation:!0,toSVG:function(f,m){f||(f={}),f.reviver=m;var y=[];return this._setSVGPreamble(y,f),this._setSVGHeader(y,f),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",m),this._setSVGObjects(y,m),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",m),y.push("</svg>"),y.join("")},_setSVGPreamble:function(f,m){m.suppressPreamble||f.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(f,m){var y=m.width||this.width,x=m.height||this.height,S,A='viewBox="0 0 '+this.width+" "+this.height+'" ',M=t.Object.NUM_FRACTION_DIGITS;m.viewBox?A='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(S=this.viewportTransform,A='viewBox="'+u(-S[4]/S[0],M)+" "+u(-S[5]/S[3],M)+" "+u(this.width/S[0],M)+" "+u(this.height/S[3],M)+'" '),f.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',x,'" ',A,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),`</defs>
`)},createSVGClipPathMarkup:function(f){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+m.clipPathId+`" >
`+this.clipPath.toClipPathSVG(f.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var f=this,m=["background","overlay"].map(function(y){var x=f[y+"Color"];if(x&&x.toLive){var S=f[y+"Vpt"],A=f.viewportTransform,M={width:f.width/(S?A[0]:1),height:f.height/(S?A[3]:1)};return x.toSVG(M,{additionalTransform:S?t.util.matrixToSVG(A):""})}});return m.join("")},createSVGFontFacesMarkup:function(){var f="",m={},y,x,S,A,M,T,N,W,K,P=t.fontPaths,I=[];for(this._objects.forEach(function V(rt){I.push(rt),rt._objects&&rt._objects.forEach(V)}),W=0,K=I.length;W<K;W++)if(y=I[W],x=y.fontFamily,!(y.type.indexOf("text")===-1||m[x]||!P[x])&&(m[x]=!0,!!y.styles)){S=y.styles;for(M in S){A=S[M];for(N in A)T=A[N],x=T.fontFamily,!m[x]&&P[x]&&(m[x]=!0)}}for(var J in m)f+=[`		@font-face {
`,"			font-family: '",J,`';
`,"			src: url('",P[J],`');
`,`		}
`].join("");return f&&(f=['	<style type="text/css">',`<![CDATA[
`,f,"]]>",`</style>
`].join("")),f},_setSVGObjects:function(f,m){var y,x,S,A=this._objects;for(x=0,S=A.length;x<S;x++)y=A[x],!y.excludeFromExport&&this._setSVGObject(f,y,m)},_setSVGObject:function(f,m,y){f.push(m.toSVG(y))},_setSVGBgOverlayImage:function(f,m,y){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&f.push(this[m].toSVG(y))},_setSVGBgOverlayColor:function(f,m){var y=this[m+"Color"],x=this.viewportTransform,S=this.width,A=this.height;if(y)if(y.toLive){var M=y.repeat,T=t.util.invertTransform(x),N=this[m+"Vpt"],W=N?t.util.matrixToSVG(T):"";f.push('<rect transform="'+W+" translate(",S/2,",",A/2,')"',' x="',y.offsetX-S/2,'" y="',y.offsetY-A/2,'" ','width="',M==="repeat-y"||M==="no-repeat"?y.source.width:S,'" height="',M==="repeat-x"||M==="no-repeat"?y.source.height:A,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else f.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(f){if(!f)return this;var m=this._activeObject,y,x,S;if(f===m&&f.type==="activeSelection")for(S=m._objects,y=S.length;y--;)x=S[y],c(this._objects,x),this._objects.unshift(x);else c(this._objects,f),this._objects.unshift(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(f){if(!f)return this;var m=this._activeObject,y,x,S;if(f===m&&f.type==="activeSelection")for(S=m._objects,y=0;y<S.length;y++)x=S[y],c(this._objects,x),this._objects.push(x);else c(this._objects,f),this._objects.push(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(f,m){if(!f)return this;var y=this._activeObject,x,S,A,M,T,N=0;if(f===y&&f.type==="activeSelection")for(T=y._objects,x=0;x<T.length;x++)S=T[x],A=this._objects.indexOf(S),A>0+N&&(M=A-1,c(this._objects,S),this._objects.splice(M,0,S)),N++;else A=this._objects.indexOf(f),A!==0&&(M=this._findNewLowerIndex(f,A,m),c(this._objects,f),this._objects.splice(M,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(f,m,y){var x,S;if(y)for(x=m,S=m-1;S>=0;--S){var A=f.intersectsWithObject(this._objects[S])||f.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(f);if(A){x=S;break}}else x=m-1;return x},bringForward:function(f,m){if(!f)return this;var y=this._activeObject,x,S,A,M,T,N=0;if(f===y&&f.type==="activeSelection")for(T=y._objects,x=T.length;x--;)S=T[x],A=this._objects.indexOf(S),A<this._objects.length-1-N&&(M=A+1,c(this._objects,S),this._objects.splice(M,0,S)),N++;else A=this._objects.indexOf(f),A!==this._objects.length-1&&(M=this._findNewUpperIndex(f,A,m),c(this._objects,f),this._objects.splice(M,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(f,m,y){var x,S,A;if(y)for(x=m,S=m+1,A=this._objects.length;S<A;++S){var M=f.intersectsWithObject(this._objects[S])||f.isContainedWithinObject(this._objects[S])||this._objects[S].isContainedWithinObject(f);if(M){x=S;break}}else x=m+1;return x},moveTo:function(f,m){return c(this._objects,f),this._objects.splice(m,0,f),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(f){f.dispose&&f.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),o(t.StaticCanvas.prototype,t.Observable),o(t.StaticCanvas.prototype,t.Collection),o(t.StaticCanvas.prototype,t.DataURLExporter),o(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(f){var m=h();if(!m||!m.getContext)return null;var y=m.getContext("2d");if(!y)return null;switch(f){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var f=n(this.lowerCanvasEl);return f&&f.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(f){var m=n(this.lowerCanvasEl);return m&&m.createJPEGStream(f)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(o){o.strokeStyle=this.color,o.lineWidth=this.width,o.lineCap=this.strokeLineCap,o.miterLimit=this.strokeMiterLimit,o.lineJoin=this.strokeLineJoin,o.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(o){var r=this.canvas.viewportTransform;o.save(),o.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var o=this.canvas,r=this.shadow,c=o.contextTop,u=o.getZoom();o&&o._isRetinaScaling()&&(u*=t.devicePixelRatio),c.shadowColor=r.color,c.shadowBlur=r.blur*u,c.shadowOffsetX=r.offsetX*u,c.shadowOffsetY=r.offsetY*u}},needsFullRender:function(){var o=new t.Color(this.color);return o.getAlpha()<1||!!this.shadow},_resetShadow:function(){var o=this.canvas.contextTop;o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0},_isOutSideCanvas:function(o){return o.x<0||o.x>this.canvas.getWidth()||o.y<0||o.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(o){this.canvas=o,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(o,r,c){var u=r.midPointFrom(c);return o.quadraticCurveTo(r.x,r.y,u.x,u.y),u},onMouseDown:function(o,r){this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],this._prepareForDrawing(o),this._captureDrawingPath(o),this._render())},onMouseMove:function(o,r){if(this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o))&&this._captureDrawingPath(o)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,u=c.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,c[u-2],c[u-1],!0),a.stroke(),a.restore()}},onMouseUp:function(o){return this.canvas._isMainEvent(o.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(o){var r=new t.Point(o.x,o.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(o){return this._points.length>1&&o.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(o),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(o){var r=new t.Point(o.x,o.y);return this._addPoint(r)},_render:function(o){var r,c,u=this._points[0],a=this._points[1];if(o=o||this.canvas.contextTop,this._saveAndTransform(o),o.beginPath(),this._points.length===2&&u.x===a.x&&u.y===a.y){var l=this.width/1e3;u=new t.Point(u.x,u.y),a=new t.Point(a.x,a.y),u.x-=l,a.x+=l}for(o.moveTo(u.x,u.y),r=1,c=this._points.length;r<c;r++)this._drawSegment(o,u,a),u=this._points[r],a=this._points[r+1];o.lineTo(u.x,u.y),o.stroke(),o.restore()},convertPointsToSVGPath:function(o){var r=this.width/1e3;return t.util.getSmoothPathFromPoints(o,r)},_isEmptySVGPath:function(o){var r=t.util.joinPath(o);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(o){var r=new t.Path(o,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new t.Shadow(this.shadow)),r},decimatePoints:function(o,r){if(o.length<=2)return o;var c=this.canvas.getZoom(),u=Math.pow(r/c,2),a,l=o.length-1,n=o[0],h=[n],g;for(a=1;a<l-1;a++)g=Math.pow(n.x-o[a].x,2)+Math.pow(n.y-o[a].y,2),g>=u&&(n=o[a],h.push(n));return h.push(o[l]),h},_finalizeAndAddPath:function(){var o=this.canvas.contextTop;o.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var c=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(o){this.canvas=o,this.points=[]},drawDot:function(o){var r=this.addPoint(o),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,r),c.restore()},dot:function(o,r){o.fillStyle=r.fill,o.beginPath(),o.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),o.closePath(),o.fill()},onMouseDown:function(o){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(o)},_render:function(){var o=this.canvas.contextTop,r,c,u=this.points;for(this._saveAndTransform(o),r=0,c=u.length;r<c;r++)this.dot(o,u[r]);o.restore()},onMouseMove:function(o){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(o),this._render()):this.drawDot(o))},onMouseUp:function(){var o=this.canvas.renderOnAddRemove,r,c;this.canvas.renderOnAddRemove=!1;var u=[];for(r=0,c=this.points.length;r<c;r++){var a=this.points[r],l=new t.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(l.shadow=new t.Shadow(this.shadow)),u.push(l)}var n=new t.Group(u);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=o,this.canvas.requestRenderAll()},addPoint:function(o){var r=new t.Point(o.x,o.y),c=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return r.radius=c,r.fill=u,this.points.push(r),r}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(o){this.canvas=o,this.sprayChunks=[]},onMouseDown:function(o){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(o),this.render(this.sprayChunkPoints)},onMouseMove:function(o){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o)||(this.addSprayChunk(o),this.render(this.sprayChunkPoints))},onMouseUp:function(){var o=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],c=0,u=this.sprayChunks.length;c<u;c++)for(var a=this.sprayChunks[c],l=0,n=a.length;l<n;l++){var h=new t.Rect({width:a[l].width,height:a[l].width,left:a[l].x+1,top:a[l].y+1,originX:"center",originY:"center",fill:this.color});r.push(h)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var g=new t.Group(r);this.shadow&&g.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=o,this.canvas.requestRenderAll()},_getOptimizedRects:function(o){var r={},c,u,a;for(u=0,a=o.length;u<a;u++)c=o[u].left+""+o[u].top,r[c]||(r[c]=o[u]);var l=[];for(c in r)l.push(r[c]);return l},render:function(o){var r=this.canvas.contextTop,c,u;for(r.fillStyle=this.color,this._saveAndTransform(r),c=0,u=o.length;c<u;c++){var a=o[c];typeof a.opacity<"u"&&(r.globalAlpha=a.opacity),r.fillRect(a.x,a.y,a.width,a.width)}r.restore()},_render:function(){var o=this.canvas.contextTop,r,c;for(o.fillStyle=this.color,this._saveAndTransform(o),r=0,c=this.sprayChunks.length;r<c;r++)this.render(this.sprayChunks[r]);o.restore()},addSprayChunk:function(o){this.sprayChunkPoints=[];var r,c,u,a=this.width/2,l;for(l=0;l<this.density;l++){r=t.util.getRandomInt(o.x-a,o.x+a),c=t.util.getRandomInt(o.y-a,o.y+a),this.dotWidthVariance?u=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var n=new t.Point(r,c);n.width=u,this.randomOpacity&&(n.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var o=20,r=5,c=t.util.createCanvasElement(),u=c.getContext("2d");return c.width=c.height=o+r,u.fillStyle=this.color,u.beginPath(),u.arc(o/2,o/2,o/2,0,Math.PI*2,!1),u.closePath(),u.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(o){return o.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(o){this.callSuper("_setBrushStyles",o),o.strokeStyle=this.getPattern(o)},createPath:function(o){var r=this.callSuper("createPath",o),c=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),r}}),function(){var o=t.util.getPointer,r=t.util.degreesToRadians,c=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(a,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),l,n,h;if(a.length>0&&!this.preserveObjectStacking){n=[],h=[];for(var g=0,f=this._objects.length;g<f;g++)l=this._objects[g],a.indexOf(l)===-1?n.push(l):h.push(l);a.length>1&&(this._activeObject._objects=h),n.push.apply(n,h)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,l){var n=a.calcTransformMatrix(),h=t.util.invertTransform(n),g=this.restorePointerVpt(l);return t.util.transformPoint(g,h)},isTargetTransparent:function(a,l,n){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var h=this._normalizePointer(a,{x:l,y:n}),g=Math.max(a.cacheTranslationX+h.x*a.zoomX,0),f=Math.max(a.cacheTranslationY+h.y*a.zoomY,0),S=t.util.isTransparent(a._cacheContext,Math.round(g),Math.round(f),this.targetFindTolerance);return S}var m=this.contextCache,y=a.selectionBackgroundColor,x=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(x[0],x[1],x[2],x[3],x[4],x[5]),a.render(m),m.restore(),a.selectionBackgroundColor=y;var S=t.util.isTransparent(m,l,n,this.targetFindTolerance);return S},_isSelectionKeyPressed:function(a){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(n){return a[n]===!0}):l=a[this.selectionKey],l},_shouldClearSelection:function(a,l){var n=this.getActiveObjects(),h=this._activeObject;return!l||l&&h&&n.length>1&&n.indexOf(l)===-1&&h!==l&&!this._isSelectionKeyPressed(a)||l&&!l.evented||l&&!l.selectable&&h&&h!==l},_shouldCenterTransform:function(a,l,n){if(a){var h;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?h=this.centeredScaling||a.centeredScaling:l==="rotate"&&(h=this.centeredRotation||a.centeredRotation),h?!n:n}},_getOriginFromCorner:function(a,l){var n={x:a.originX,y:a.originY};return l==="ml"||l==="tl"||l==="bl"?n.x="right":(l==="mr"||l==="tr"||l==="br")&&(n.x="left"),l==="tl"||l==="mt"||l==="tr"?n.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(n.y="top"),n},_getActionFromCorner:function(a,l,n,h){if(!l||!a)return"drag";var g=h.controls[l];return g.getActionName(n,g,h)},_setupCurrentTransform:function(a,l,n){if(l){var h=this.getPointer(a),g=l.__corner,f=l.controls[g],m=n&&g?f.getActionHandler(a,l,f):t.controlsUtils.dragHandler,y=this._getActionFromCorner(n,g,a,l),x=this._getOriginFromCorner(l,g),S=a[this.centeredKey],A={target:l,action:y,actionHandler:m,corner:g,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:h.x-l.left,offsetY:h.y-l.top,originX:x.x,originY:x.y,ex:h.x,ey:h.y,lastX:h.x,lastY:h.y,theta:r(l.angle),width:l.width*l.scaleX,shiftKey:a.shiftKey,altKey:S,original:t.util.saveObjectTransform(l)};this._shouldCenterTransform(l,y,S)&&(A.originX="center",A.originY="center"),A.original.originX=x.x,A.original.originY=x.y,this._currentTransform=A,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var l=this._groupSelector,n=new t.Point(l.ex,l.ey),h=t.util.transformPoint(n,this.viewportTransform),g=new t.Point(l.ex+l.left,l.ey+l.top),f=t.util.transformPoint(g,this.viewportTransform),m=Math.min(h.x,f.x),y=Math.min(h.y,f.y),x=Math.max(h.x,f.x),S=Math.max(h.y,f.y),A=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(m,y,x-m,S-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,m+=A,y+=A,x-=A,S-=A,t.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(m,y,x-m,S-y))},findTarget:function(a,l){if(!this.skipTargetFind){var n=!0,h=this.getPointer(a,n),g=this._activeObject,f=this.getActiveObjects(),m,y,x=c(a),S=f.length>1&&!l||f.length===1;if(this.targets=[],S&&g._findTargetCorner(h,x)||f.length>1&&!l&&g===this._searchPossibleTargets([g],h))return g;if(f.length===1&&g===this._searchPossibleTargets([g],h))if(this.preserveObjectStacking)m=g,y=this.targets,this.targets=[];else return g;var A=this._searchPossibleTargets(this._objects,h);return a[this.altSelectionKey]&&A&&m&&A!==m&&(A=m,this.targets=y),A}},_checkTarget:function(a,l,n){if(l&&l.visible&&l.evented&&l.containsPoint(a))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var h=this.isTargetTransparent(l,n.x,n.y);if(!h)return!0}else return!0},_searchPossibleTargets:function(a,l){for(var n,h=a.length,g;h--;){var f=a[h],m=f.group?this._normalizePointer(f.group,l):l;if(this._checkTarget(m,f,l)){n=a[h],n.subTargetCheck&&n instanceof t.Group&&(g=this._searchPossibleTargets(n._objects,l),g&&this.targets.push(g));break}}return n},restorePointerVpt:function(a){return t.util.transformPoint(a,t.util.invertTransform(this.viewportTransform))},getPointer:function(a,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var n=o(a),h=this.upperCanvasEl,g=h.getBoundingClientRect(),f=g.width||0,m=g.height||0,y;(!f||!m)&&("top"in g&&"bottom"in g&&(m=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(f=Math.abs(g.right-g.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,l||(n=this.restorePointerVpt(n));var x=this.getRetinaScaling();return x!==1&&(n.x/=x,n.y/=x),f===0||m===0?y={width:1,height:1}:y={width:h.width/f,height:h.height/m},{x:n.x*y.width,y:n.y*y.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),t.util.addClass(n,"upper-canvas "+a),this.wrapperEl.appendChild(n),this._copyCanvasStyle(l,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var l=this.width||a.width,n=this.height||a.height;t.util.setStyle(a,{position:"absolute",width:l+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=l,a.height=n,t.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,l){l.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,l){var n=!1,h=this.getActiveObjects(),g=[],f=[];a.forEach(function(m){h.indexOf(m)===-1&&(n=!0,m.fire("deselected",{e:l,target:m}),f.push(m))}),h.forEach(function(m){a.indexOf(m)===-1&&(n=!0,m.fire("selected",{e:l,target:m}),g.push(m))}),a.length>0&&h.length>0?n&&this.fire("selection:updated",{e:l,selected:g,deselected:f}):h.length>0?this.fire("selection:created",{e:l,selected:g}):a.length>0&&this.fire("selection:cleared",{e:l,deselected:f})},setActiveObject:function(a,l){var n=this.getActiveObjects();return this._setActiveObject(a,l),this._fireSelectionEvents(n,l),this},_setActiveObject:function(a,l){return this._activeObject===a||!this._discardActiveObject(l,a)||a.onSelect({e:l})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,l){var n=this._activeObject;if(n){if(n.onDeselect({e:a,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var l=this.getActiveObjects(),n=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:n,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(l,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){t.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var l=this._activeObject;l&&l._renderControls(a)},_toObject:function(a,l,n){var h=this._realizeGroupTransformOnObject(a),g=this.callSuper("_toObject",a,l,n);return this._unwindGroupTransformOnObject(a,h),g},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return l.forEach(function(h){n[h]=a[h]}),t.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(a,l){l&&a.set(l)},_setSVGObject:function(a,l,n){var h=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",a,l,n),this._unwindGroupTransformOnObject(l,h)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var u in t.StaticCanvas)u!=="prototype"&&(t.Canvas[u]=t.StaticCanvas[u])}(),function(){var o=t.util.addListener,r=t.util.removeListener,c=3,u=2,a=1,l={passive:!1};function n(h,g){return h.button&&h.button===g-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(o,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(h,g){var f=this.upperCanvasEl,m=this._getEventPrefix();h(t.window,"resize",this._onResize),h(f,m+"down",this._onMouseDown),h(f,m+"move",this._onMouseMove,l),h(f,m+"out",this._onMouseOut),h(f,m+"enter",this._onMouseEnter),h(f,"wheel",this._onMouseWheel),h(f,"contextmenu",this._onContextMenu),h(f,"dblclick",this._onDoubleClick),h(f,"dragover",this._onDragOver),h(f,"dragenter",this._onDragEnter),h(f,"dragleave",this._onDragLeave),h(f,"drop",this._onDrop),this.enablePointerEvents||h(f,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](f,"gesture",this._onGesture),eventjs[g](f,"drag",this._onDrag),eventjs[g](f,"orientation",this._onOrientationChange),eventjs[g](f,"shake",this._onShake),eventjs[g](f,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var h=this._getEventPrefix();r(t.document,h+"up",this._onMouseUp),r(t.document,"touchend",this._onTouchEnd,l),r(t.document,h+"move",this._onMouseMove,l),r(t.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(h,g){this.__onTransformGesture&&this.__onTransformGesture(h,g)},_onDrag:function(h,g){this.__onDrag&&this.__onDrag(h,g)},_onMouseWheel:function(h){this.__onMouseWheel(h)},_onMouseOut:function(h){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:h}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:h});var f=this;this._hoveredTargets.forEach(function(m){f.fire("mouse:out",{target:m,e:h}),m&&m.fire("mouseout",{e:h})}),this._hoveredTargets=[]},_onMouseEnter:function(h){!this._currentTransform&&!this.findTarget(h)&&(this.fire("mouse:over",{target:null,e:h}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(h,g){this.__onOrientationChange&&this.__onOrientationChange(h,g)},_onShake:function(h,g){this.__onShake&&this.__onShake(h,g)},_onLongPress:function(h,g){this.__onLongPress&&this.__onLongPress(h,g)},_onDragOver:function(h){h.preventDefault();var g=this._simpleEventHandler("dragover",h);this._fireEnterLeaveEvents(g,h)},_onDrop:function(h){return this._simpleEventHandler("drop:before",h),this._simpleEventHandler("drop",h)},_onContextMenu:function(h){return this.stopContextMenu&&(h.stopPropagation(),h.preventDefault()),!1},_onDoubleClick:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"dblclick"),this._resetTransformEventData(h)},getPointerId:function(h){var g=h.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?h.pointerId:-1},_isMainEvent:function(h){return h.isPrimary===!0?!0:h.isPrimary===!1?!1:h.type==="touchend"&&h.touches.length===0?!0:h.changedTouches?h.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(h){h.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(h)),this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();o(t.document,"touchend",this._onTouchEnd,l),o(t.document,"touchmove",this._onMouseMove,l),r(g,f+"down",this._onMouseDown)},_onMouseDown:function(h){this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();r(g,f+"move",this._onMouseMove,l),o(t.document,f+"up",this._onMouseUp),o(t.document,f+"move",this._onMouseMove,l)},_onTouchEnd:function(h){if(!(h.touches.length>0)){this.__onMouseUp(h),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();r(t.document,"touchend",this._onTouchEnd,l),r(t.document,"touchmove",this._onMouseMove,l);var f=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){o(f.upperCanvasEl,g+"down",f._onMouseDown),f._willAddMouseDown=0},400)}},_onMouseUp:function(h){this.__onMouseUp(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();this._isMainEvent(h)&&(r(t.document,f+"up",this._onMouseUp),r(t.document,f+"move",this._onMouseMove,l),o(g,f+"move",this._onMouseMove,l))},_onMouseMove:function(h){!this.allowTouchScrolling&&h.preventDefault&&h.preventDefault(),this.__onMouseMove(h)},_onResize:function(){this.calcOffset()},_shouldRender:function(h){var g=this._activeObject;return!!g!=!!h||g&&h&&g!==h?!0:(g&&g.isEditing,!1)},__onMouseUp:function(h){var g,f=this._currentTransform,m=this._groupSelector,y=!1,x=!m||m.left===0&&m.top===0;if(this._cacheTransformEventData(h),g=this._target,this._handleEvent(h,"up:before"),n(h,c)){this.fireRightClick&&this._handleEvent(h,"up",c,x);return}if(n(h,u)){this.fireMiddleClick&&this._handleEvent(h,"up",u,x),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(h);return}if(this._isMainEvent(h)){if(f&&(this._finalizeCurrentTransform(h),y=f.actionPerformed),!x){var S=g===this._activeObject;this._maybeGroupObjects(h),y||(y=this._shouldRender(g)||!S&&g===this._activeObject)}var A,M;if(g){if(A=g._findTargetCorner(this.getPointer(h,!0),t.util.isTouchEvent(h)),g.selectable&&g!==this._activeObject&&g.activeOn==="up")this.setActiveObject(g,h),y=!0;else{var T=g.controls[A],N=T&&T.getMouseUpHandler(h,g,T);N&&(M=this.getPointer(h),N(h,f,M.x,M.y))}g.isMoving=!1}if(f&&(f.target!==g||f.corner!==A)){var W=f.target&&f.target.controls[f.corner],K=W&&W.getMouseUpHandler(h,g,T);M=M||this.getPointer(h),K&&K(h,f,M.x,M.y)}this._setCursorFromEvent(h,g),this._handleEvent(h,"up",a,x),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),y?this.requestRenderAll():x||this.renderTop()}},_simpleEventHandler:function(h,g){var f=this.findTarget(g),m=this.targets,y={e:g,target:f,subTargets:m};if(this.fire(h,y),f&&f.fire(h,y),!m)return f;for(var x=0;x<m.length;x++)m[x].fire(h,y);return f},_handleEvent:function(h,g,f,m){var y=this._target,x=this.targets||[],S={e:h,target:y,subTargets:x,button:f||a,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};g==="up"&&(S.currentTarget=this.findTarget(h),S.currentSubTargets=this.targets),this.fire("mouse:"+g,S),y&&y.fire("mouse"+g,S);for(var A=0;A<x.length;A++)x[A].fire("mouse"+g,S)},_finalizeCurrentTransform:function(h){var g=this._currentTransform,f=g.target,m={e:h,target:f,transform:g,action:g.action};f._scaling&&(f._scaling=!1),f.setCoords(),(g.actionPerformed||this.stateful&&f.hasStateChanged())&&this._fire("modified",m)},_onMouseDownInDrawingMode:function(h){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(h).requestRenderAll();var g=this.getPointer(h);this.freeDrawingBrush.onMouseDown(g,{e:h,pointer:g}),this._handleEvent(h,"down")},_onMouseMoveInDrawingMode:function(h){if(this._isCurrentlyDrawing){var g=this.getPointer(h);this.freeDrawingBrush.onMouseMove(g,{e:h,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(h,"move")},_onMouseUpInDrawingMode:function(h){var g=this.getPointer(h);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:h,pointer:g}),this._handleEvent(h,"up")},__onMouseDown:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"down:before");var g=this._target;if(n(h,c)){this.fireRightClick&&this._handleEvent(h,"down",c);return}if(n(h,u)){this.fireMiddleClick&&this._handleEvent(h,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(h);return}if(this._isMainEvent(h)&&!this._currentTransform){var f=this._pointer;this._previousPointer=f;var m=this._shouldRender(g),y=this._shouldGroup(h,g);if(this._shouldClearSelection(h,g)?this.discardActiveObject(h):y&&(this._handleGrouping(h,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var x=g===this._activeObject;g.selectable&&g.activeOn==="down"&&this.setActiveObject(g,h);var S=g._findTargetCorner(this.getPointer(h,!0),t.util.isTouchEvent(h));if(g.__corner=S,g===this._activeObject&&(S||!y)){this._setupCurrentTransform(h,g,x);var A=g.controls[S],f=this.getPointer(h),M=A&&A.getMouseDownHandler(h,g,A);M&&M(h,this._currentTransform,f.x,f.y)}}this._handleEvent(h,"down"),(m||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(h){this._resetTransformEventData(),this._pointer=this.getPointer(h,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(h)||null},_beforeTransform:function(h){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:h,transform:g})},__onMouseMove:function(h){this._handleEvent(h,"move:before"),this._cacheTransformEventData(h);var g,f;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(h);return}if(this._isMainEvent(h)){var m=this._groupSelector;m?(f=this._absolutePointer,m.left=f.x-m.ex,m.top=f.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(h):(g=this.findTarget(h)||null,this._setCursorFromEvent(h,g),this._fireOverOutEvents(g,h)),this._handleEvent(h,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(h,g){var f=this._hoveredTarget,m=this._hoveredTargets,y=this.targets,x=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:f,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var S=0;S<x;S++)this.fireSyntheticInOutEvents(y[S],g,{oldTarget:m[S],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=h,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(h,g){var f=this._draggedoverTarget,m=this._hoveredTargets,y=this.targets,x=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:f,evtOut:"dragleave",evtIn:"dragenter"});for(var S=0;S<x;S++)this.fireSyntheticInOutEvents(y[S],g,{oldTarget:m[S],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=h},fireSyntheticInOutEvents:function(h,g,f){var m,y,x=f.oldTarget,S,A,M=x!==h,T=f.canvasEvtIn,N=f.canvasEvtOut;M&&(m={e:g,target:h,previousTarget:x},y={e:g,target:x,nextTarget:h}),A=h&&M,S=x&&M,S&&(N&&this.fire(N,y),x.fire(f.evtOut,y)),A&&(T&&this.fire(T,m),h.fire(f.evtIn,m))},__onMouseWheel:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"wheel"),this._resetTransformEventData()},_transformObject:function(h){var g=this.getPointer(h),f=this._currentTransform;f.reset=!1,f.shiftKey=h.shiftKey,f.altKey=h[this.centeredKey],this._performTransformAction(h,f,g),f.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(h,g,f){var m=f.x,y=f.y,x=g.action,S=!1,A=g.actionHandler;A&&(S=A(h,g,m,y)),x==="drag"&&S&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||S},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(h,g){if(!g)return this.setCursor(this.defaultCursor),!1;var f=g.hoverCursor||this.hoverCursor,m=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!m||!m.contains(g))&&g._findTargetCorner(this.getPointer(h,!0));y?this.setCursor(this.getCornerCursor(y,g,h)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(x){f=x.hoverCursor||f}),this.setCursor(f))},getCornerCursor:function(h,g,f){var m=g.controls[h];return m.cursorStyleHandler(f,m,g)}})}(),function(){var o=Math.min,r=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(c,u){var a=this._activeObject;return a&&this._isSelectionKeyPressed(c)&&u&&u.selectable&&this.selection&&(a!==u||a.type==="activeSelection")&&!u.onSelect({e:c})},_handleGrouping:function(c,u){var a=this._activeObject;a.__corner||u===a&&(u=this.findTarget(c,!0),!u||!u.selectable)||(a&&a.type==="activeSelection"?this._updateActiveSelection(u,c):this._createActiveSelection(u,c))},_updateActiveSelection:function(c,u){var a=this._activeObject,l=a._objects.slice(0);a.contains(c)?(a.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),a.size()===1&&this._setActiveObject(a.item(0),u)):(a.addWithUpdate(c),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,u)},_createActiveSelection:function(c,u){var a=this.getActiveObjects(),l=this._createGroup(c);this._hoveredTarget=l,this._setActiveObject(l,u),this._fireSelectionEvents(a,u)},_createGroup:function(c){var u=this._objects,a=u.indexOf(this._activeObject)<u.indexOf(c),l=a?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(c){var u=this._collectObjects(c),a;u.length===1?this.setActiveObject(u[0],c):u.length>1&&(a=new t.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(a,c))},_collectObjects:function(c){for(var u=[],a,l=this._groupSelector.ex,n=this._groupSelector.ey,h=l+this._groupSelector.left,g=n+this._groupSelector.top,f=new t.Point(o(l,h),o(n,g)),m=new t.Point(r(l,h),r(n,g)),y=!this.selectionFullyContained,x=l===h&&n===g,S=this._objects.length;S--&&(a=this._objects[S],!(!(!a||!a.selectable||!a.visible)&&(y&&a.intersectsWithRect(f,m,!0)||a.isContainedWithinRect(f,m,!0)||y&&a.containsPoint(f,null,!0)||y&&a.containsPoint(m,null,!0))&&(u.push(a),x))););return u.length>1&&(u=u.filter(function(A){return!A.onSelect({e:c})})),u},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(o){o||(o={});var r=o.format||"png",c=o.quality||1,u=(o.multiplier||1)*(o.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(u,o);return t.util.toDataURL(a,r,c)},toCanvasElement:function(o,r){o=o||1,r=r||{};var c=(r.width||this.width)*o,u=(r.height||this.height)*o,a=this.getZoom(),l=this.width,n=this.height,h=a*o,g=this.viewportTransform,f=(g[4]-(r.left||0))*o,m=(g[5]-(r.top||0))*o,y=this.interactive,x=[h,0,0,h,f,m],S=this.enableRetinaScaling,A=t.util.createCanvasElement(),M=this.contextTop;return A.width=c,A.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=x,this.width=c,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(A.getContext("2d"),this._objects),this.viewportTransform=g,this.width=l,this.height=n,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=S,this.contextTop=M,A}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(o,r,c){if(o){var u=typeof o=="string"?JSON.parse(o):t.util.object.clone(o),a=this,l=u.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(h){a.clear(),a._setBgOverlay(u,function(){l?a._enlivenObjects([l],function(g){a.clipPath=g[0],a.__setupCanvas.call(a,u,h,n,r)}):a.__setupCanvas.call(a,u,h,n,r)})},c),this}},__setupCanvas:function(o,r,c,u){var a=this;r.forEach(function(l,n){a.insertAt(l,n)}),this.renderOnAddRemove=c,delete o.objects,delete o.backgroundImage,delete o.overlayImage,delete o.background,delete o.overlay,this._setOptions(o),this.renderAll(),u&&u()},_setBgOverlay:function(o,r){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!o.backgroundImage&&!o.overlayImage&&!o.background&&!o.overlay){r&&r();return}var u=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",o.backgroundImage,c,u),this.__setBgOverlay("overlayImage",o.overlayImage,c,u),this.__setBgOverlay("backgroundColor",o.background,c,u),this.__setBgOverlay("overlayColor",o.overlay,c,u)},__setBgOverlay:function(o,r,c,u){var a=this;if(!r){c[o]=!0,u&&u();return}o==="backgroundImage"||o==="overlayImage"?t.util.enlivenObjects([r],function(l){a[o]=l[0],c[o]=!0,u&&u()}):this["set"+t.util.string.capitalize(o,!0)](r,function(){c[o]=!0,u&&u()})},_enlivenObjects:function(o,r,c){if(!o||o.length===0){r&&r([]);return}t.util.enlivenObjects(o,function(u){r&&r(u)},null,c)},_toDataURL:function(o,r){this.clone(function(c){r(c.toDataURL(o))})},_toDataURLWithMultiplier:function(o,r,c){this.clone(function(u){c(u.toDataURLWithMultiplier(o,r))})},clone:function(o,r){var c=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(u){u.loadFromJSON(c,function(){o&&o(u)})})},cloneWithoutData:function(o){var r=t.util.createCanvasElement();r.width=this.width,r.height=this.height;var c=new t.Canvas(r);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),o&&o(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):o&&o(c)}}),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.util.object.clone,a=r.util.toFixed,l=r.util.string.capitalize,n=r.util.degreesToRadians,h=!r.isLikelyNode,g=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:h,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(f){f&&this.setOptions(f)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(f){var m=r.perfLimitSizeTotal,y=f.width,x=f.height,S=r.maxCacheSideLimit,A=r.minCacheSideLimit;if(y<=S&&x<=S&&y*x<=m)return y<A&&(f.width=A),x<A&&(f.height=A),f;var M=y/x,T=r.util.limitDimsByArea(M,m),N=r.util.capValue,W=N(A,T.x,S),K=N(A,T.y,S);return y>W&&(f.zoomX/=y/W,f.width=W,f.capped=!0),x>K&&(f.zoomY/=x/K,f.height=K,f.capped=!0),f},_getCacheCanvasDimensions:function(){var f=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),y=m.x*f.scaleX/this.scaleX,x=m.y*f.scaleY/this.scaleY;return{width:Math.ceil(y+g),height:Math.ceil(x+g),zoomX:f.scaleX,zoomY:f.scaleY,x:y,y:x}},_updateCacheCanvas:function(){var f=this.canvas;if(this.noScaleCache&&f&&f._currentTransform){var m=f._currentTransform.target,y=f._currentTransform.action;if(this===m&&y.slice&&y.slice(0,5)==="scale")return!1}var x=this._cacheCanvas,S=this._limitCacheSize(this._getCacheCanvasDimensions()),A=S.width,M=S.height,T,N,W=S.zoomX,K=S.zoomY,P=A!==this.cacheWidth||M!==this.cacheHeight,I=this.zoomX!==W||this.zoomY!==K,J=P||I;return J?(P?(x.width=A,x.height=M):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,x.width,x.height)),T=S.x/2,N=S.y/2,this.cacheTranslationX=Math.round(x.width/2-T)+T,this.cacheTranslationY=Math.round(x.height/2-N)+N,this.cacheWidth=A,this.cacheHeight=M,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(W,K),this.zoomX=W,this.zoomY=K,!0):!1},setOptions:function(f){this._setOptions(f),this._initGradient(f.fill,"fill"),this._initGradient(f.stroke,"stroke"),this._initPattern(f.fill,"fill"),this._initPattern(f.stroke,"stroke")},transform:function(f){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&f===this.canvas.contextTop,y=this.calcTransformMatrix(!m);f.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(f){var m=r.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:a(this.left,m),top:a(this.top,m),width:a(this.width,m),height:a(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,m),scaleX:a(this.scaleX,m),scaleY:a(this.scaleY,m),angle:a(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,m),skewY:a(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(f),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,y,f),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(f){return this.toObject(f)},_removeDefaultValues:function(f){var m=r.util.getKlass(f.type).prototype,y=m.stateProperties;return y.forEach(function(x){x==="left"||x==="top"||(f[x]===m[x]&&delete f[x],Array.isArray(f[x])&&Array.isArray(m[x])&&f[x].length===0&&m[x].length===0&&delete f[x])}),f},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var f=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(f.scaleX),scaleY:Math.abs(f.scaleY)}},getTotalObjectScaling:function(){var f=this.getObjectScaling(),m=f.scaleX,y=f.scaleY;if(this.canvas){var x=this.canvas.getZoom(),S=this.canvas.getRetinaScaling();m*=x*S,y*=x*S}return{scaleX:m,scaleY:y}},getObjectOpacity:function(){var f=this.opacity;return this.group&&(f*=this.group.getObjectOpacity()),f},_set:function(f,m){var y=f==="scaleX"||f==="scaleY",x=this[f]!==m,S=!1;return y&&(m=this._constrainScale(m)),f==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):f==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):f==="shadow"&&m&&!(m instanceof r.Shadow)?m=new r.Shadow(m):f==="dirty"&&this.group&&this.group.set("dirty",m),this[f]=m,x&&(S=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(f)>-1?(this.dirty=!0,S&&this.group.set("dirty",!0)):S&&this.stateProperties.indexOf(f)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(f){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(f.save(),this._setupCompositeOperation(f),this.drawSelectionBackground(f),this.transform(f),this._setOpacity(f),this._setShadow(f,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(f)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(f),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),f.restore())},renderCache:function(f){f=f||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,f.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(f,m){if(f.save(),m.inverted?f.globalCompositeOperation="destination-out":f.globalCompositeOperation="destination-in",m.absolutePositioned){var y=r.util.invertTransform(this.calcTransformMatrix());f.transform(y[0],y[1],y[2],y[3],y[4],y[5])}m.transform(f),f.scale(1/m.zoomX,1/m.zoomY),f.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),f.restore()},drawObject:function(f,m){var y=this.fill,x=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(f)):this._renderBackground(f),this._render(f),this._drawClipPath(f,this.clipPath),this.fill=y,this.stroke=x},_drawClipPath:function(f,m){m&&(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(f,m))},drawCacheOnCanvas:function(f){f.scale(1/this.zoomX,1/this.zoomY),f.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(f){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!f&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!f){var m=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-y/2,m,y)}return!0}return!1},_renderBackground:function(f){if(this.backgroundColor){var m=this._getNonTransformedDimensions();f.fillStyle=this.backgroundColor,f.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(f)}},_setOpacity:function(f){this.group&&!this.group._transformDone?f.globalAlpha=this.getObjectOpacity():f.globalAlpha*=this.opacity},_setStrokeStyles:function(f,m){var y=m.stroke;y&&(f.lineWidth=m.strokeWidth,f.lineCap=m.strokeLineCap,f.lineDashOffset=m.strokeDashOffset,f.lineJoin=m.strokeLineJoin,f.miterLimit=m.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(f,y):(f.strokeStyle=y.toLive(f,this),this._applyPatternGradientTransform(f,y)):f.strokeStyle=m.stroke)},_setFillStyles:function(f,m){var y=m.fill;y&&(y.toLive?(f.fillStyle=y.toLive(f,this),this._applyPatternGradientTransform(f,m.fill)):f.fillStyle=y)},_setClippingProperties:function(f){f.globalAlpha=1,f.strokeStyle="transparent",f.fillStyle="#000000"},_setLineDash:function(f,m){!m||m.length===0||(1&m.length&&m.push.apply(m,m),f.setLineDash(m))},_renderControls:function(f,m){var y=this.getViewportTransform(),x=this.calcTransformMatrix(),S,A,M;m=m||{},A=typeof m.hasBorders<"u"?m.hasBorders:this.hasBorders,M=typeof m.hasControls<"u"?m.hasControls:this.hasControls,x=r.util.multiplyTransformMatrices(y,x),S=r.util.qrDecompose(x),f.save(),f.translate(S.translateX,S.translateY),f.lineWidth=1*this.borderScaleFactor,this.group||(f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(S.angle-=180),f.rotate(n(this.group?S.angle:this.angle)),m.forActiveSelection||this.group?A&&this.drawBordersInGroup(f,S,m):A&&this.drawBorders(f,m),M&&this.drawControls(f,m),f.restore()},_setShadow:function(f){if(this.shadow){var m=this.shadow,y=this.canvas,x,S=y&&y.viewportTransform[0]||1,A=y&&y.viewportTransform[3]||1;m.nonScaling?x={scaleX:1,scaleY:1}:x=this.getObjectScaling(),y&&y._isRetinaScaling()&&(S*=r.devicePixelRatio,A*=r.devicePixelRatio),f.shadowColor=m.color,f.shadowBlur=m.blur*r.browserShadowBlurConstant*(S+A)*(x.scaleX+x.scaleY)/4,f.shadowOffsetX=m.offsetX*S*x.scaleX,f.shadowOffsetY=m.offsetY*A*x.scaleY}},_removeShadow:function(f){this.shadow&&(f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0)},_applyPatternGradientTransform:function(f,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var y=m.gradientTransform||m.patternTransform,x=-this.width/2+m.offsetX||0,S=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?f.transform(this.width,0,0,this.height,x,S):f.transform(1,0,0,1,x,S),y&&f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:x,offsetY:S}},_renderPaintInOrder:function(f){this.paintFirst==="stroke"?(this._renderStroke(f),this._renderFill(f)):(this._renderFill(f),this._renderStroke(f))},_render:function(){},_renderFill:function(f){this.fill&&(f.save(),this._setFillStyles(f,this),this.fillRule==="evenodd"?f.fill("evenodd"):f.fill(),f.restore())},_renderStroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(f),f.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();f.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&f.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(f,this.strokeDashArray),this._setStrokeStyles(f,this),f.stroke(),f.restore()}},_applyPatternForTransformedGradient:function(f,m){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),x=r.util.createCanvasElement(),S,A=this.canvas.getRetinaScaling(),M=y.x/this.scaleX/A,T=y.y/this.scaleY/A;x.width=Math.ceil(M),x.height=Math.ceil(T),S=x.getContext("2d"),S.beginPath(),S.moveTo(0,0),S.lineTo(M,0),S.lineTo(M,T),S.lineTo(0,T),S.closePath(),S.translate(M/2,T/2),S.scale(y.zoomX/this.scaleX/A,y.zoomY/this.scaleY/A),this._applyPatternGradientTransform(S,m),S.fillStyle=m.toLive(f),S.fill(),f.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),f.scale(A*this.scaleX/y.zoomX,A*this.scaleY/y.zoomY),f.strokeStyle=S.createPattern(x,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var f=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",f.scaleX),this.set("scaleY",f.scaleY),this.angle=f.angle,this.skewX=f.skewX,this.skewY=0}},_removeTransformMatrix:function(f){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=r.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,f&&(this.scaleX*=f.scaleX,this.scaleY*=f.scaleY,this.cropX=f.cropX,this.cropY=f.cropY,m.x+=f.offsetLeft,m.y+=f.offsetTop,this.width=f.width,this.height=f.height),this.setPositionByOrigin(m,"center","center")},clone:function(f,m){var y=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(y,f):r.Object._fromObject("Object",y,f)},cloneAsImage:function(f,m){var y=this.toCanvasElement(m);return f&&f(new r.Image(y)),this},toCanvasElement:function(f){f||(f={});var m=r.util,y=m.saveObjectTransform(this),x=this.group,S=this.shadow,A=Math.abs,M=(f.multiplier||1)*(f.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,f.withoutTransform&&m.resetObjectTransform(this),f.withoutShadow&&(this.shadow=null);var T=r.util.createCanvasElement(),N=this.getBoundingRect(!0,!0),W=this.shadow,K,P={x:0,y:0},I,J,V;W&&(I=W.blur,W.nonScaling?K={scaleX:1,scaleY:1}:K=this.getObjectScaling(),P.x=2*Math.round(A(W.offsetX)+I)*A(K.scaleX),P.y=2*Math.round(A(W.offsetY)+I)*A(K.scaleY)),J=N.width+P.x,V=N.height+P.y,T.width=Math.ceil(J),T.height=Math.ceil(V);var rt=new r.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});f.format==="jpeg"&&(rt.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(rt.width/2,rt.height/2),"center","center");var at=this.canvas;rt.add(this);var dt=rt.toCanvasElement(M||1,f);return this.shadow=S,this.set("canvas",at),x&&(this.group=x),this.set(y).setCoords(),rt._objects=[],rt.dispose(),rt=null,dt},toDataURL:function(f){return f||(f={}),r.util.toDataURL(this.toCanvasElement(f),f.format||"png",f.quality||1)},isType:function(f){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===f},complexity:function(){return 1},toJSON:function(f){return this.toObject(f)},rotate:function(f){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",f),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(f,m){m=m||this.canvas.getPointer(f);var y=new r.Point(m.x,m.y),x=this._getLeftTopCoords();return this.angle&&(y=r.util.rotatePoint(y,x,n(-this.angle))),{x:y.x-x.x,y:y.y-x.y}},_setupCompositeOperation:function(f){this.globalCompositeOperation&&(f.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){r.runningAnimations&&r.runningAnimations.cancelByTarget(this)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),c(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object.ENLIVEN_PROPS=["clipPath"],r.Object._fromObject=function(f,m,y,x){var S=r[f];m=u(m,!0),r.util.enlivenPatterns([m.fill,m.stroke],function(A){typeof A[0]<"u"&&(m.fill=A[0]),typeof A[1]<"u"&&(m.stroke=A[1]),r.util.enlivenObjectEnlivables(m,m,function(){var M=x?new S(m[x],m):new S(m);y&&y(M)})})},r.Object.__uid=0)}(e),function(){var o=t.util.degreesToRadians,r={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(u,a,l,n,h){var g=u.x,f=u.y,m,y,x;return typeof a=="string"?a=r[a]:a-=.5,typeof n=="string"?n=r[n]:n-=.5,m=n-a,typeof l=="string"?l=c[l]:l-=.5,typeof h=="string"?h=c[h]:h-=.5,y=h-l,(m||y)&&(x=this._getTransformedDimensions(),g=u.x+m*x.x,f=u.y+y*x.y),new t.Point(g,f)},translateToCenterPoint:function(u,a,l){var n=this.translateToGivenOrigin(u,a,l,"center","center");return this.angle?t.util.rotatePoint(n,u,o(this.angle)):n},translateToOriginPoint:function(u,a,l){var n=this.translateToGivenOrigin(u,"center","center",a,l);return this.angle?t.util.rotatePoint(n,u,o(this.angle)):n},getCenterPoint:function(){var u=new t.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,a){var l=this.getCenterPoint();return this.translateToOriginPoint(l,u,a)},toLocalPoint:function(u,a,l){var n=this.getCenterPoint(),h,g;return typeof a<"u"&&typeof l<"u"?h=this.translateToGivenOrigin(n,"center","center",a,l):h=new t.Point(this.left,this.top),g=new t.Point(u.x,u.y),this.angle&&(g=t.util.rotatePoint(g,n,-o(this.angle))),g.subtractEquals(h)},setPositionByOrigin:function(u,a,l){var n=this.translateToCenterPoint(u,a,l),h=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",h.x),this.set("top",h.y)},adjustPosition:function(u){var a=o(this.angle),l=this.getScaledWidth(),n=t.util.cos(a)*l,h=t.util.sin(a)*l,g,f;typeof this.originX=="string"?g=r[this.originX]:g=this.originX-.5,typeof u=="string"?f=r[u]:f=u-.5,this.left+=n*(f-g),this.top+=h*(f-g),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function o(l){return[new t.Point(l.tl.x,l.tl.y),new t.Point(l.tr.x,l.tr.y),new t.Point(l.br.x,l.br.y),new t.Point(l.bl.x,l.bl.y)]}var r=t.util,c=r.degreesToRadians,u=r.multiplyTransformMatrices,a=r.transformPoint;r.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,n){return n?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,n){return o(this._getCoords(l,n))},intersectsWithRect:function(l,n,h,g){var f=this.getCoords(h,g),m=t.Intersection.intersectPolygonRectangle(f,l,n);return m.status==="Intersection"},intersectsWithObject:function(l,n,h){var g=t.Intersection.intersectPolygonPolygon(this.getCoords(n,h),l.getCoords(n,h));return g.status==="Intersection"||l.isContainedWithinObject(this,n,h)||this.isContainedWithinObject(l,n,h)},isContainedWithinObject:function(l,n,h){for(var g=this.getCoords(n,h),f=n?l.aCoords:l.lineCoords,m=0,y=l._getImageLines(f);m<4;m++)if(!l.containsPoint(g[m],y))return!1;return!0},isContainedWithinRect:function(l,n,h,g){var f=this.getBoundingRect(h,g);return f.left>=l.x&&f.left+f.width<=n.x&&f.top>=l.y&&f.top+f.height<=n.y},containsPoint:function(l,m,h,g){var f=this._getCoords(h,g),m=m||this._getImageLines(f),y=this._findCrossPoints(l,m);return y!==0&&y%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br,g=this.getCoords(!0,l);return g.some(function(f){return f.x<=h.x&&f.x>=n.x&&f.y<=h.y&&f.y>=n.y})||this.intersectsWithRect(n,h,!0,l)?!0:this._containsCenterOfCanvas(n,h,l)},_containsCenterOfCanvas:function(l,n,h){var g={x:(l.x+n.x)/2,y:(l.y+n.y)/2};return!!this.containsPoint(g,null,!0,h)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,h,!0,l))return!0;var g=this.getCoords(!0,l).every(function(f){return(f.x>=h.x||f.x<=n.x)&&(f.y>=h.y||f.y<=n.y)});return g&&this._containsCenterOfCanvas(n,h,l)},_getImageLines:function(l){var n={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return n},_findCrossPoints:function(l,n){var h,g,f,m,y,x=0,S;for(var A in n)if(S=n[A],!(S.o.y<l.y&&S.d.y<l.y)&&!(S.o.y>=l.y&&S.d.y>=l.y)&&(S.o.x===S.d.x&&S.o.x>=l.x?y=S.o.x:(h=0,g=(S.d.y-S.o.y)/(S.d.x-S.o.x),f=l.y-h*l.x,m=S.o.y-g*S.o.x,y=-(f-m)/(h-g)),y>=l.x&&(x+=1),x===2))break;return x},getBoundingRect:function(l,n){var h=this.getCoords(l,n);return r.makeBoundingBoxFromPoints(h)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,n){var h=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(l/this.width/h)},scaleToHeight:function(l,n){var h=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(l/this.height/h)},calcLineCoords:function(){var l=this.getViewportTransform(),n=this.padding,h=c(this.angle),g=r.cos(h),f=r.sin(h),m=g*n,y=f*n,x=m+y,S=m-y,A=this.calcACoords(),M={tl:a(A.tl,l),tr:a(A.tr,l),bl:a(A.bl,l),br:a(A.br,l)};return n&&(M.tl.x-=S,M.tl.y-=x,M.tr.x+=x,M.tr.y-=S,M.bl.x-=x,M.bl.y+=S,M.br.x+=S,M.br.y+=x),M},calcOCoords:function(){var l=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),h=this.getViewportTransform(),g=u(h,n),f=u(g,l),f=u(f,[1/h[0],0,0,1/h[3],0,0]),m=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(x,S,A){y[S]=x.positionHandler(m,f,A)}),y},calcACoords:function(){var l=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),h=u(n,l),g=this._getTransformedDimensions(),f=g.x/2,m=g.y/2;return{tl:a({x:-f,y:-m},h),tr:a({x:f,y:-m},h),bl:a({x:-f,y:m},h),br:a({x:f,y:m},h)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var n="_",h="";return!l&&this.group&&(h=this.group.transformMatrixKey(l)+n),h+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var n=this.calcOwnMatrix();if(l||!this.group)return n;var h=this.transformMatrixKey(l),g=this.matrixCache||(this.matrixCache={});return g.key===h?g.value:(this.group&&(n=u(this.group.calcTransformMatrix(!1),n)),g.key=h,g.value=n,n)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===l)return n.value;var h=this._calcTranslateMatrix(),g={angle:this.angle,translateX:h[4],translateY:h[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=l,n.value=r.composeMatrix(g),n.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,n=this.width+l,h=this.height+l;return{x:n,y:h}},_getTransformedDimensions:function(l,n){typeof l>"u"&&(l=this.skewX),typeof n>"u"&&(n=this.skewY);var h,g,f,m=l===0&&n===0;if(this.strokeUniform?(g=this.width,f=this.height):(h=this._getNonTransformedDimensions(),g=h.x,f=h.y),m)return this._finalizeDimensions(g*this.scaleX,f*this.scaleY);var y=r.sizeAfterTransform(g,f,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:n});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(l,n){return this.strokeUniform?{x:l+this.strokeWidth,y:n+this.strokeWidth}:{x:l,y:n}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),n=this._getTransformedDimensions(),h=a(n,l,!0);return h.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(o){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,o):this.canvas&&this.canvas.sendBackwards(this,o),this},bringForward:function(o){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,o):this.canvas&&this.canvas.bringForward(this,o),this},moveTo:function(o){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,o):this.canvas&&this.canvas.moveTo(this,o),this}}),function(){function o(c,u){if(u){if(u.toLive)return c+": url(#SVGID_"+u.id+"); ";var a=new t.Color(u),l=c+": "+a.toRgb()+"; ",n=a.getAlpha();return n!==1&&(l+=c+"-opacity: "+n.toString()+"; "),l}else return c+": none; "}var r=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(c){var u=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",f=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",x=c?"":this.getSvgFilter(),S=o("fill",this.fill),A=o("stroke",this.stroke);return[A,"stroke-width: ",a,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",f,"; ",S,"fill-rule: ",u,"; ","opacity: ",m,";",x,y].join("")},getSvgSpanStyles:function(c,u){var a="; ",n=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+a:"",l=c.strokeWidth?"stroke-width: "+c.strokeWidth+a:"",n=n,h=c.fontSize?"font-size: "+c.fontSize+"px"+a:"",g=c.fontStyle?"font-style: "+c.fontStyle+a:"",f=c.fontWeight?"font-weight: "+c.fontWeight+a:"",m=c.fill?o("fill",c.fill):"",y=c.stroke?o("stroke",c.stroke):"",x=this.getSvgTextDecoration(c),S=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return x&&(x="text-decoration: "+x+a),[y,l,n,h,g,f,x,m,S,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(u){return c[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,u){var a=c?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+t.util.matrixToSVG(a);return l+(u||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var u=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,u),'" y="',r(-this.height/2,u),'" width="',r(this.width,u),'" height="',r(this.height,u),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,u){u=u||{};var a=u.reviver,l=u.additionalTransform||"",n=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),h=c.indexOf("COMMON_PARTS");return c[h]=n,a?a(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,u){u=u||{};var a=u.noStyle,l=u.reviver,n=a?"":'style="'+this.getSvgStyles()+'" ',h=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=g&&g.absolutePositioned,y=this.stroke,x=this.fill,S=this.shadow,A,M=[],T,N=c.indexOf("COMMON_PARTS"),W=u.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+t.Object.__uid++,T='<clipPath id="'+g.clipPathId+`" >
`+g.toClipPathSVG(l)+`</clipPath>
`),m&&M.push("<g ",h,this.getSvgCommons(),` >
`),M.push("<g ",this.getSvgTransform(!1),m?"":h+this.getSvgCommons(),` >
`),A=[n,f,a?"":this.addPaintOrder()," ",W?'transform="'+W+'" ':""].join(""),c[N]=A,x&&x.toLive&&M.push(x.toSVG(this)),y&&y.toLive&&M.push(y.toSVG(this)),S&&M.push(S.toSVG(this)),g&&M.push(T),M.push(c.join("")),M.push(`</g>
`),m&&M.push(`</g>
`),l?l(M.join("")):M.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var o=t.util.object.extend,r="stateProperties";function c(a,l,n){var h={},g=!0;n.forEach(function(f){h[f]=a[f]}),o(a[l],h,g)}function u(a,l,n){if(a===l)return!0;if(Array.isArray(a)){if(!Array.isArray(l)||a.length!==l.length)return!1;for(var h=0,g=a.length;h<g;h++)if(!u(a[h],l[h]))return!1;return!0}else if(a&&typeof a=="object"){var f=Object.keys(a),m;if(!l||typeof l!="object"||!n&&f.length!==Object.keys(l).length)return!1;for(var h=0,g=f.length;h<g;h++)if(m=f[h],!(m==="canvas"||m==="group")&&!u(a[m],l[m]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(a){a=a||r;var l="_"+a;return Object.keys(this[l]).length<this[a].length?!0:!u(this[l],this,!0)},saveState:function(a){var l=a&&a.propertySet||r,n="_"+l;return this[n]?(c(this,n,this[l]),a&&a.stateProperties&&c(this,n,a.stateProperties),this):this.setupState(a)},setupState:function(a){a=a||{};var l=a.propertySet||r;return a.propertySet=l,this["_"+l]={},this.saveState(a),this}})}(),function(){var o=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(r,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=r.x,a=r.y,l,n,h=Object.keys(this.oCoords),g=h.length-1,f;for(this.__corner=0;g>=0;g--)if(f=h[g],!!this.isControlVisible(f)&&(n=this._getImageLines(c?this.oCoords[f].touchCorner:this.oCoords[f].corner),l=this._findCrossPoints({x:u,y:a},n),l!==0&&l%2===1))return this.__corner=f,f;return!1},forEachControl:function(r){for(var c in this.controls)r(this.controls[c],c,this)},_setCornerCoords:function(){var r=this.oCoords;for(var c in r){var u=this.controls[c];r[c].corner=u.calcCornerCoords(this.angle,this.cornerSize,r[c].x,r[c].y,!1),r[c].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,r[c].x,r[c].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var c=this.getCenterPoint(),u=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return r.translate(c.x,c.y),r.scale(1/a[0],1/a[3]),r.rotate(o(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-u.x/2,-u.y/2,u.x,u.y),r.restore(),this},drawBorders:function(r,c){c=c||{};var u=this._calculateCurrentDimensions(),a=this.borderScaleFactor,l=u.x+a,n=u.y+a,h=typeof c.hasControls<"u"?c.hasControls:this.hasControls,g=!1;return r.save(),r.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(r,c.borderDashArray||this.borderDashArray),r.strokeRect(-l/2,-n/2,l,n),h&&(r.beginPath(),this.forEachControl(function(f,m,y){f.withConnection&&f.getVisibility(y,m)&&(g=!0,r.moveTo(f.x*l,f.y*n),r.lineTo(f.x*l+f.offsetX,f.y*n+f.offsetY))}),g&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,c,u){u=u||{};var a=t.util.sizeAfterTransform(this.width,this.height,c),l=this.strokeWidth,n=this.strokeUniform,h=this.borderScaleFactor,g=a.x+l*(n?this.canvas.getZoom():c.scaleX)+h,f=a.y+l*(n?this.canvas.getZoom():c.scaleY)+h;return r.save(),this._setLineDash(r,u.borderDashArray||this.borderDashArray),r.strokeStyle=u.borderColor||this.borderColor,r.strokeRect(-g/2,-f/2,g,f),r.restore(),this},drawControls:function(r,c){c=c||{},r.save();var u=1,a,l;return this.canvas&&(u=this.canvas.getRetinaScaling()),r.setTransform(u,0,0,u,0,0),r.strokeStyle=r.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(n,h,g){l=g.oCoords[h],n.getVisibility(g,h)&&(a&&(l=t.util.transformPoint(l,a)),n.render(r,l.x,l.y,c,g))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=c,this},setControlsVisibility:function(r){r||(r={});for(var c in r)this.setControlVisible(c,r[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(o,r){r=r||{};var c=function(){},u=r.onComplete||c,a=r.onChange||c,l=this;return t.util.animate({target:this,startValue:o.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(n){o.set("left",n),l.requestRenderAll(),a()},onComplete:function(){o.setCoords(),u()}})},fxCenterObjectV:function(o,r){r=r||{};var c=function(){},u=r.onComplete||c,a=r.onChange||c,l=this;return t.util.animate({target:this,startValue:o.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(n){o.set("top",n),l.requestRenderAll(),a()},onComplete:function(){o.setCoords(),u()}})},fxRemove:function(o,r){r=r||{};var c=function(){},u=r.onComplete||c,a=r.onChange||c,l=this;return t.util.animate({target:this,startValue:o.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){o.set("opacity",n),l.requestRenderAll(),a()},onComplete:function(){l.remove(o),u()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var o=[],r,c,u=[];for(r in arguments[0])o.push(r);for(var a=0,l=o.length;a<l;a++)r=o[a],c=a!==l-1,u.push(this._animate(r,arguments[0][r],arguments[1],c));return u}else return this._animate.apply(this,arguments)},_animate:function(o,r,c,u){var a=this,l;r=r.toString(),c?c=t.util.object.clone(c):c={},~o.indexOf(".")&&(l=o.split("."));var n=a.colorProperties.indexOf(o)>-1||l&&a.colorProperties.indexOf(l[1])>-1,h=l?this.get(l[0])[l[1]]:this.get(o);"from"in c||(c.from=h),n||(~r.indexOf("=")?r=h+parseFloat(r.replace("=","")):r=parseFloat(r));var g={target:this,startValue:c.from,endValue:r,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(f,m,y){return c.abort.call(a,f,m,y)},onChange:function(f,m,y){l?a[l[0]][l[1]]=f:a.set(o,f),!u&&c.onChange&&c.onChange(f,m,y)},onComplete:function(f,m,y){u||(a.setCoords(),c.onComplete&&c.onComplete(f,m,y))}};return n?t.util.animateColor(g.startValue,g.endValue,g.duration,g):t.util.animate(g)}}),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,h){n||(n=[0,0,0,0]),this.callSuper("initialize",h),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(h)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,h){return this.callSuper("_set",n,h),typeof a[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var h=this.calcLinePoints();n.moveTo(h.x1,h.y1),n.lineTo(h.x2,h.y2),n.lineWidth=this.strokeWidth;var g=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return c(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,h=this.y1<=this.y2?-1:1,g=n*this.width*.5,f=h*this.height*.5,m=n*this.width*-.5,y=h*this.height*-.5;return{x1:g,x2:m,y1:f,y2:y}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(n,h,g){g=g||{};var f=r.parseAttributes(n,r.Line.ATTRIBUTE_NAMES),m=[f.x1||0,f.y1||0,f.x2||0,f.y2||0];h(new r.Line(m,c(f,g)))},r.Line.fromObject=function(n,h){function g(m){delete m.points,h&&h(m)}var f=u(n,!0);f.points=[n.x1,n.y1,n.x2,n.y2],r.Object._fromObject("Line",f,g,"points")};function l(n,h){var g=n.origin,f=n.axis1,m=n.axis2,y=n.dimension,x=h.nearest,S=h.center,A=h.farthest;return function(){switch(this.get(g)){case x:return Math.min(this.get(f),this.get(m));case S:return Math.min(this.get(f),this.get(m))+.5*this.get(y);case A:return Math.max(this.get(f),this.get(m))}}}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.degreesToRadians;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,l){return this.callSuper("_set",a,l),a==="radius"&&this.setRadius(l),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,l=0,n=0,h=(this.endAngle-this.startAngle)%360;if(h===0)a=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var g=c(this.startAngle),f=c(this.endAngle),m=this.radius,y=r.util.cos(g)*m,x=r.util.sin(g)*m,S=r.util.cos(f)*m,A=r.util.sin(f)*m,M=h>180?"1":"0";a=['<path d="M '+y+" "+x," A "+m+" "+m," 0 ",+M+" 1"," "+S+" "+A,'" ',"COMMON_PARTS",` />
`]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",a*2).set("height",a*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(a,l){var n=r.parseAttributes(a,r.Circle.ATTRIBUTE_NAMES);if(!u(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,l(new r.Circle(n))};function u(a){return"radius"in a&&a.radius>=0}r.Circle.fromObject=function(a,l){r.Object._fromObject("Circle",a,l)}}(e),function(o){var r=o.fabric||(o.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(c){var u=this.width/2,a=this.height/2;c.beginPath(),c.moveTo(-u,a),c.lineTo(0,-a),c.lineTo(u,a),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,u=this.height/2,a=[-c+" "+u,"0 "+-u,c+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',a,'" />']}}),r.Triangle.fromObject=function(c,u){return r.Object._fromObject("Triangle",c,u)}}(e),function(o){var r=o.fabric||(o.fabric={}),c=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,a){switch(this.callSuper("_set",u,a),u){case"rx":this.rx=a,this.set("width",a*2);break;case"ry":this.ry=a,this.set("height",a*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,c,!1),u.restore(),this._renderPaintInOrder(u)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(u,a){var l=r.parseAttributes(u,r.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,a(new r.Ellipse(l))},r.Ellipse.fromObject=function(u,a){r.Object._fromObject("Ellipse",u,a)}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var a=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,h=this.height,g=-this.width/2,f=-this.height/2,m=a!==0||l!==0,y=1-.5522847498;u.beginPath(),u.moveTo(g+a,f),u.lineTo(g+n-a,f),m&&u.bezierCurveTo(g+n-y*a,f,g+n,f+y*l,g+n,f+l),u.lineTo(g+n,f+h-l),m&&u.bezierCurveTo(g+n,f+h-y*l,g+n-y*a,f+h,g+n-a,f+h),u.lineTo(g+a,f+h),m&&u.bezierCurveTo(g+y*a,f+h,g,f+h-y*l,g,f+h-l),u.lineTo(g,f+l),m&&u.bezierCurveTo(g,f+y*l,g+y*a,f,g+a,f),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,a=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',a,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(u,a,l){if(!u)return a(null);l=l||{};var n=r.parseAttributes(u,r.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var h=new r.Rect(c(l?r.util.object.clone(l):{},n));h.visible=h.visible&&h.width>0&&h.height>0,a(h)},r.Rect.fromObject=function(u,a){return r.Object._fromObject("Rect",u,a)}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.util.array.min,a=r.util.array.max,l=r.util.toFixed,n=r.util.projectStrokeOnPoints;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(h,g){g=g||{},this.points=h||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return n(this.points,this,!0)},_setPositionDimensions:function(h){var g=this._calcDimensions(h),f,m=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-m,this.height=g.height-m,h.fromSVG||(f=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+m/2,y:g.top-this.strokeWidth/2+m/2},"left","top",this.originX,this.originY)),typeof h.left>"u"&&(this.left=h.fromSVG?g.left:f.x),typeof h.top>"u"&&(this.top=h.fromSVG?g.top:f.y),this.pathOffset={x:g.left+this.width/2+m/2,y:g.top+this.height/2+m/2}},_calcDimensions:function(){var h=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=u(h,"x")||0,f=u(h,"y")||0,m=a(h,"x")||0,y=a(h,"y")||0,x=m-g,S=y-f;return{left:g,top:f,width:x,height:S}},toObject:function(h){return c(this.callSuper("toObject",h),{points:this.points.concat()})},_toSVG:function(){for(var h=[],g=this.pathOffset.x,f=this.pathOffset.y,m=r.Object.NUM_FRACTION_DIGITS,y=0,x=this.points.length;y<x;y++)h.push(l(this.points[y].x-g,m),",",l(this.points[y].y-f,m)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',h.join(""),`" />
`]},commonRender:function(h){var g,f=this.points.length,m=this.pathOffset.x,y=this.pathOffset.y;if(!f||isNaN(this.points[f-1].y))return!1;h.beginPath(),h.moveTo(this.points[0].x-m,this.points[0].y-y);for(var x=0;x<f;x++)g=this.points[x],h.lineTo(g.x-m,g.y-y);return!0},_render:function(h){this.commonRender(h)&&this._renderPaintInOrder(h)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(h){return function(g,f,m){if(!g)return f(null);m||(m={});var y=r.parsePointsAttribute(g.getAttribute("points")),x=r.parseAttributes(g,r[h].ATTRIBUTE_NAMES);x.fromSVG=!0,f(new r[h](y,c(x,m)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(h,g){return r.Object._fromObject("Polyline",h,g,"points")}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.projectStrokeOnPoints;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(u){this.commonRender(u)&&(u.closePath(),this._renderPaintInOrder(u))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(u,a){r.Object._fromObject("Polygon",u,a,"points")}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.array.min,u=r.util.array.max,a=r.util.object.extend,l=r.util.object.clone,n=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(h,g){g=l(g||{}),delete g.path,this.callSuper("initialize",g),this._setPath(h||[],g)},_setPath:function(h,g){this.path=r.util.makePathSimpler(Array.isArray(h)?h:r.util.parsePath(h)),r.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(h){var g,f=0,m=0,y=0,x=0,S=0,A=0,M=-this.pathOffset.x,T=-this.pathOffset.y;h.beginPath();for(var N=0,W=this.path.length;N<W;++N)switch(g=this.path[N],g[0]){case"L":y=g[1],x=g[2],h.lineTo(y+M,x+T);break;case"M":y=g[1],x=g[2],f=y,m=x,h.moveTo(y+M,x+T);break;case"C":y=g[5],x=g[6],S=g[3],A=g[4],h.bezierCurveTo(g[1]+M,g[2]+T,S+M,A+T,y+M,x+T);break;case"Q":h.quadraticCurveTo(g[1]+M,g[2]+T,g[3]+M,g[4]+T),y=g[3],x=g[4],S=g[1],A=g[2];break;case"z":case"Z":y=f,x=m,h.closePath();break}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return a(this.callSuper("toObject",h),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(h){var g=this.toObject(["sourcePath"].concat(h));return g.sourcePath&&delete g.path,g},_toSVG:function(){var h=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',h,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var h=r.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,h)+", "+n(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},toSVG:function(h){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var h=[],g=[],f,m=0,y=0,x=0,S=0,A,M=0,T=this.path.length;M<T;++M){switch(f=this.path[M],f[0]){case"L":x=f[1],S=f[2],A=[];break;case"M":x=f[1],S=f[2],m=x,y=S,A=[];break;case"C":A=r.util.getBoundsOfCurve(x,S,f[1],f[2],f[3],f[4],f[5],f[6]),x=f[5],S=f[6];break;case"Q":A=r.util.getBoundsOfCurve(x,S,f[1],f[2],f[1],f[2],f[3],f[4]),x=f[3],S=f[4];break;case"z":case"Z":x=m,S=y;break}A.forEach(function(V){h.push(V.x),g.push(V.y)}),h.push(x),g.push(S)}var N=c(h)||0,W=c(g)||0,K=u(h)||0,P=u(g)||0,I=K-N,J=P-W;return{left:N,top:W,width:I,height:J}}}),r.Path.fromObject=function(h,g){if(typeof h.sourcePath=="string"){var f=h.sourcePath;r.loadSVGFromURL(f,function(m){var y=m[0];y.setOptions(h),h.clipPath?r.util.enlivenObjects([h.clipPath],function(x){y.clipPath=x[0],g&&g(y)}):g&&g(y)})}else r.Object._fromObject("Path",h,g,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(h,g,f){var m=r.parseAttributes(h,r.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,g(new r.Path(m.d,a(m,f)))}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.array.min,u=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,l,n){l=l||{},this._objects=[],n&&this.callSuper("initialize",l),this._objects=a||[];for(var h=this._objects.length;h--;)this._objects[h].group=this;if(n)this._updateObjectsACoords();else{var g=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var a=!0,l=this._objects.length;l--;)this._objects[l].setCoords(a)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],l)},_updateObjectCoords:function(a,l){var n=a.left,h=a.top,g=!0;a.set({left:n-l.x,top:h-l.y}),a.group=this,a.setCoords(g)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var l=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),a&&(l&&r.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,l){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(a,l);if(a==="canvas")for(;n--;)this._objects[n]._set(a,l);r.Object.prototype._set.call(this,a,l)},toObject:function(a){var l=this.includeDefaultValues,n=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var f=g.includeDefaultValues;g.includeDefaultValues=l;var m=g.toObject(a);return g.includeDefaultValues=f,m}),h=r.Object.prototype.toObject.call(this,a);return h.objects=n,h},toDatalessObject:function(a){var l,n=this.sourcePath;if(n)l=n;else{var h=this.includeDefaultValues;l=this._objects.map(function(f){var m=f.includeDefaultValues;f.includeDefaultValues=h;var y=f.toDatalessObject(a);return f.includeDefaultValues=m,y})}var g=r.Object.prototype.toDatalessObject.call(this,a);return g.objects=l,g},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=r.Object.prototype.shouldCache.call(this);if(a){for(var l=0,n=this._objects.length;l<n;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,l=this._objects.length;a<l;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var l=0,n=this._objects.length;l<n;l++)this._objects[l].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var l=0,n=this._objects.length;l<n;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var h=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-g/2,h,g)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(l){r.util.addTransformToObject(l,a),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,l=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var h=new r.ActiveSelection([]);return h.set(n),h.type="activeSelection",l.remove(this),a.forEach(function(g){g.group=h,g.dirty=!0,l.add(g)}),h.canvas=l,h._objects=a,l._activeObject=h,h.setCoords(),h}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var a=!0;return this.forEachObject(function(l){l.setCoords(a)}),this},_calcBounds:function(a){for(var l=[],n=[],h,g,f,m=["tr","br","bl","tl"],y=0,x=this._objects.length,S,A=m.length;y<x;++y){for(h=this._objects[y],f=h.calcACoords(),S=0;S<A;S++)g=m[S],l.push(f[g].x),n.push(f[g].y);h.aCoords=f}this._getBounds(l,n,a)},_getBounds:function(a,l,n){var h=new r.Point(c(a),c(l)),g=new r.Point(u(a),u(l)),f=h.y||0,m=h.x||0,y=g.x-h.x||0,x=g.y-h.y||0;this.width=y,this.height=x,n||this.setPositionByOrigin({x:m,y:f},"left","top")},_toSVG:function(a){for(var l=["<g ","COMMON_PARTS",` >
`],n=0,h=this._objects.length;n<h;n++)l.push("		",this._objects[n].toSVG(a));return l.push(`</g>
`),l},getSvgStyles:function(){var a=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),l].join("")},toClipPathSVG:function(a){for(var l=[],n=0,h=this._objects.length;n<h;n++)l.push("	",this._objects[n].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(l,{reviver:a})}}),r.Group.fromObject=function(a,l){var n=a.objects,h=r.util.object.clone(a,!0);if(delete h.objects,typeof n=="string"){r.loadSVGFromURL(n,function(g){var f=r.util.groupSVGElements(g,a,n),m=h.clipPath;delete h.clipPath,f.set(h),m?r.util.enlivenObjects([m],function(y){f.clipPath=y[0],l&&l(f)}):l&&l(f)});return}r.util.enlivenObjects(n,function(g){r.util.enlivenObjectEnlivables(a,h,function(){l&&l(new r.Group(g,h,!0))})})})}(e),function(o){var r=o.fabric||(o.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(c,u){u=u||{},this._objects=c||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var u=r.Object.prototype.toObject.call(this),a=new r.Group([]);if(delete u.type,a.set(u),c.forEach(function(n){n.canvas.remove(n),n.group=a}),a._objects=c,!this.canvas)return a;var l=this.canvas;return l.add(a),l._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,u,a){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,a=a||{},typeof a.hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var l=0,n=this._objects.length;l<n;l++)this._objects[l]._renderControls(c,a);this.callSuper("_renderControls",c,u),c.restore()}}),r.ActiveSelection.fromObject=function(c,u){r.util.enlivenObjects(c.objects,function(a){delete c.objects,u&&u(new r.ActiveSelection(a,c,!0))})})}(e),function(o){var r=t.util.object.extend;if(o.fabric||(o.fabric={}),o.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,u){u||(u={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",u),this._initElement(c,u)},getElement:function(){return this._element||{}},setElement:function(c,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var u=t.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,a=this.height/2;c.beginPath(),c.moveTo(-u,-a),c.lineTo(u,-a),c.lineTo(u,a),c.lineTo(-u,a),c.lineTo(-u,-a),c.closePath()}},toObject:function(c){var u=[];this.filters.forEach(function(l){l&&u.push(l.toObject())});var a=r(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],u=[],a,l=this._element,n=-this.width/2,h=-this.height/2,g="",f="";if(!l)return[];if(this.hasCrop()){var m=t.Object.__uid++;c.push('<clipPath id="imageCrop_'+m+`">
`,'	<rect x="'+n+'" y="'+h+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),g=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(f='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',h-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,f,'"',g,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,a=["	<rect ",'x="',n,'" y="',h,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?c=c.concat(a,u):c=c.concat(u,a),c},getSrc:function(c){var u=c?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(c,u,a){return t.util.loadImage(c,function(l,n){this.setElement(l,a),this._setWidthHeight(),u&&u(this,n)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,u=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),l=a.scaleX,n=a.scaleY,h=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||l>u&&n>u){this._element=h,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=n;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var g=t.util.createCanvasElement(),f=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=h.width,y=h.height;g.width=m,g.height=y,this._element=g,this._lastScaleX=c.scaleX=l,this._lastScaleY=c.scaleY=n,t.filterBackend.applyFilters([c],h,m,y,this._element,f),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(h){return h&&!h.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,a=u.naturalWidth||u.width,l=u.naturalHeight||u.height;if(this._element===this._originalElement){var n=t.util.createCanvasElement();n.width=a,n.height=l,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,l),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(c,this._originalElement,a,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var u=this._element;if(u){var a=this._filterScalingX,l=this._filterScalingY,n=this.width,h=this.height,g=Math.min,f=Math.max,m=f(this.cropX,0),y=f(this.cropY,0),x=u.naturalWidth||u.width,S=u.naturalHeight||u.height,A=m*a,M=y*l,T=g(n*a,x-A),N=g(h*l,S-M),W=-n/2,K=-h/2,P=g(n,x/a-m),I=g(h,S/l-y);u&&c.drawImage(u,A,M,T,N,W,K,P,I)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,u){this.setElement(t.util.getById(c),u),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,u){c&&c.length?t.util.enlivenObjects(c,function(a){u&&u(a)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(c){c||(c={});var u=this.getElement();this.width=c.width||u.naturalWidth||u.width||0,this.height=c.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var c=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,a=this._element.height,l=1,n=1,h=0,g=0,f=0,m=0,y,x=this.width,S=this.height,A={width:x,height:S};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(l=n=t.util.findScaleToFit(this._element,A),y=(x-u*l)/2,c.alignX==="Min"&&(h=-y),c.alignX==="Max"&&(h=y),y=(S-a*n)/2,c.alignY==="Min"&&(g=-y),c.alignY==="Max"&&(g=y)),c.meetOrSlice==="slice"&&(l=n=t.util.findScaleToCover(this._element,A),y=u-x/l,c.alignX==="Mid"&&(f=y/2),c.alignX==="Max"&&(f=y),y=a-S/n,c.alignY==="Mid"&&(m=y/2),c.alignY==="Max"&&(m=y),u=x/l,a=S/n)):(l=x/u,n=S/a),{width:u,height:a,scaleX:l,scaleY:n,offsetLeft:h,offsetTop:g,cropX:f,cropY:m}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(c,u){var a=t.util.object.clone(c);t.util.loadImage(a.src,function(l,n){if(n){u&&u(null,!0);return}t.Image.prototype._initFilters.call(a,a.filters,function(h){a.filters=h||[],t.Image.prototype._initFilters.call(a,[a.resizeFilter],function(g){a.resizeFilter=g[0],t.util.enlivenObjectEnlivables(a,a,function(){var f=new t.Image(l,a);u(f,!1)})})})},null,a.crossOrigin)},t.Image.fromURL=function(c,u,a){t.util.loadImage(c,function(l,n){u&&u(new t.Image(l,a),n)},null,a&&a.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(c,u,a){var l=t.parseAttributes(c,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(l["xlink:href"],u,r(a?t.util.object.clone(a):{},l))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var o=this.angle%360;return o>0?Math.round((o-1)/90)*90:Math.round(o/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(o){o=o||{};var r=function(){},c=o.onComplete||r,u=o.onChange||r,a=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){a.rotate(l),u()},onComplete:function(){a.setCoords(),c()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(o){return o.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(o){return o.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function o(c,u){var a="precision "+u+` float;
void main(){}`,l=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(l,a),c.compileShader(l),!!c.getShaderParameter(l,c.COMPILE_STATUS)}t.isWebglSupported=function(c){if(t.isLikelyNode)return!1;c=c||t.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),a=u.getContext("webgl")||u.getContext("experimental-webgl"),l=!1;if(a){t.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),l=t.maxTextureSize>=c;for(var n=["highp","mediump","lowp"],h=0;h<3;h++)if(o(a,n[h])){t.webGlPrecision=n[h];break}}return this.isSupported=l,l},t.WebglFilterBackend=r;function r(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(c,u){this.dispose(),this.createWebGLCanvas(c,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,u)},chooseFastestCopyGLTo2DMethod:function(c,u){var a=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var n=typeof ArrayBuffer<"u",h=typeof Uint8ClampedArray<"u";if(a&&l&&n&&h){var g=t.util.createCanvasElement(),f=new ArrayBuffer(c*u*4);if(t.forceGLPutImageData){this.imageBuffer=f,this.copyGLTo2D=v;return}var m={imageBuffer:f,destinationWidth:c,destinationHeight:u,targetCanvas:g},y,x,S;g.width=c,g.height=u,y=window.performance.now(),p.call(m,this.gl,m),x=window.performance.now()-y,y=window.performance.now(),v.call(m,this.gl,m),S=window.performance.now()-y,x>S?(this.imageBuffer=f,this.copyGLTo2D=v):this.copyGLTo2D=p}},createWebGLCanvas:function(c,u){var a=t.util.createCanvasElement();a.width=c,a.height=u;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=a.getContext("webgl",l);n||(n=a.getContext("experimental-webgl",l)),n&&(n.clearColor(0,0,0,0),this.canvas=a,this.gl=n)},applyFilters:function(c,u,a,l,n,h){var g=this.gl,f;h&&(f=this.getCachedTexture(h,u));var m={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:a,sourceHeight:l,destinationWidth:a,destinationHeight:l,context:g,sourceTexture:this.createTexture(g,a,l,!f&&u),targetTexture:this.createTexture(g,a,l),originalTexture:f||this.createTexture(g,a,l,!f&&u),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},y=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,y),c.forEach(function(x){x&&x.applyTo(m)}),d(m),this.copyGLTo2D(g,m),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(m.sourceTexture),g.deleteTexture(m.targetTexture),g.deleteFramebuffer(y),n.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,u,a,l,n){var h=c.createTexture();return c.bindTexture(c.TEXTURE_2D,h),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,n||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,n||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),l?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,l):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,u,a,0,c.RGBA,c.UNSIGNED_BYTE,null),h},getCachedTexture:function(c,u){if(this.textureCache[c])return this.textureCache[c];var a=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[c]=a,a},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:p,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,u={renderer:"",vendor:""};if(!c)return u;var a=c.getExtension("WEBGL_debug_renderer_info");if(a){var l=c.getParameter(a.UNMASKED_RENDERER_WEBGL),n=c.getParameter(a.UNMASKED_VENDOR_WEBGL);l&&(u.renderer=l.toLowerCase()),n&&(u.vendor=n.toLowerCase())}return this.gpuInfo=u,u}}}();function d(o){var r=o.targetCanvas,c=r.width,u=r.height,a=o.destinationWidth,l=o.destinationHeight;(c!==a||u!==l)&&(r.width=a,r.height=l)}function p(o,r){var c=o.canvas,u=r.targetCanvas,a=u.getContext("2d");a.translate(0,u.height),a.scale(1,-1);var l=c.height-u.height;a.drawImage(c,0,l,u.width,u.height,0,0,u.width,u.height)}function v(o,r){var c=r.targetCanvas,u=c.getContext("2d"),a=r.destinationWidth,l=r.destinationHeight,n=a*l*4,h=new Uint8Array(this.imageBuffer,0,n),g=new Uint8ClampedArray(this.imageBuffer,0,n);o.readPixels(0,0,a,l,o.RGBA,o.UNSIGNED_BYTE,h);var f=new ImageData(g,a,l);u.putImageData(f,0,0)}(function(){var o=function(){};t.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:o,dispose:o,clearWebGLCaches:o,resources:{},applyFilters:function(c,u,a,l,n){var h=n.getContext("2d");h.drawImage(u,0,0,a,l);var g=h.getImageData(0,0,a,l),f=h.getImageData(0,0,a,l),m={sourceWidth:a,sourceHeight:l,imageData:g,originalEl:u,originalImageData:f,canvasEl:n,ctx:h,filterBackend:this};return c.forEach(function(y){y.applyTo(m)}),(m.imageData.width!==a||m.imageData.height!==l)&&(n.width=m.imageData.width,n.height=m.imageData.height),h.putImageData(m.imageData,0,0),m}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(o){o&&this.setOptions(o)},setOptions:function(o){for(var r in o)this[r]=o[r]},createProgram:function(o,r,c){r=r||this.fragmentSource,c=c||this.vertexSource,t.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var u=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(u,c),o.compileShader(u),!o.getShaderParameter(u,o.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+o.getShaderInfoLog(u));var a=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(a,r),o.compileShader(a),!o.getShaderParameter(a,o.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+o.getShaderInfoLog(a));var l=o.createProgram();if(o.attachShader(l,u),o.attachShader(l,a),o.linkProgram(l),!o.getProgramParameter(l,o.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+o.getProgramInfoLog(l));var n=this.getAttributeLocations(o,l),h=this.getUniformLocations(o,l)||{};return h.uStepW=o.getUniformLocation(l,"uStepW"),h.uStepH=o.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:n,uniformLocations:h}},getAttributeLocations:function(o,r){return{aPosition:o.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(o,r,c){var u=r.aPosition,a=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,a),o.enableVertexAttribArray(u),o.vertexAttribPointer(u,2,o.FLOAT,!1,0,0),o.bufferData(o.ARRAY_BUFFER,c,o.STATIC_DRAW)},_setupFrameBuffer:function(o){var r=o.context,c,u;o.passes>1?(c=o.destinationWidth,u=o.destinationHeight,(o.sourceWidth!==c||o.sourceHeight!==u)&&(r.deleteTexture(o.targetTexture),o.targetTexture=o.filterBackend.createTexture(r,c,u)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(o){o.passes--,o.pass++;var r=o.targetTexture;o.targetTexture=o.sourceTexture,o.sourceTexture=r},isNeutralState:function(){var o=this.mainParameter,r=t.Image.filters[this.type].prototype;if(o)if(Array.isArray(r[o])){for(var c=r[o].length;c--;)if(this[o][c]!==r[o][c])return!1;return!0}else return r[o]===this[o];else return!1},applyTo:function(o){o.webgl?(this._setupFrameBuffer(o),this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},retrieveShader:function(o){return o.programCache.hasOwnProperty(this.type)||(o.programCache[this.type]=this.createProgram(o.context)),o.programCache[this.type]},applyToWebGL:function(o){var r=o.context,c=this.retrieveShader(o);o.pass===0&&o.originalTexture?r.bindTexture(r.TEXTURE_2D,o.originalTexture):r.bindTexture(r.TEXTURE_2D,o.sourceTexture),r.useProgram(c.program),this.sendAttributeData(r,c.attributeLocations,o.aPosition),r.uniform1f(c.uniformLocations.uStepW,1/o.sourceWidth),r.uniform1f(c.uniformLocations.uStepH,1/o.sourceHeight),this.sendUniformData(r,c.uniformLocations),r.viewport(0,0,o.destinationWidth,o.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(o,r,c){o.activeTexture(c),o.bindTexture(o.TEXTURE_2D,r),o.activeTexture(o.TEXTURE0)},unbindAdditionalTexture:function(o,r){o.activeTexture(r),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(o){this[this.mainParameter]=o},sendUniformData:function(){},createHelpLayer:function(o){if(!o.helpLayer){var r=document.createElement("canvas");r.width=o.sourceWidth,r.height=o.sourceHeight,o.helpLayer=r}},toObject:function(){var o={type:this.type},r=this.mainParameter;return r&&(o[r]=this[r]),o},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(o,r){var c=new t.Image.filters[o.type](o);return r&&r(c),c},function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.ColorMatrix=u(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var l=a.imageData,n=l.data,h=n.length,g=this.matrix,f,m,y,x,S,A=this.colorsOnly;for(S=0;S<h;S+=4)f=n[S],m=n[S+1],y=n[S+2],A?(n[S]=f*g[0]+m*g[1]+y*g[2]+g[4]*255,n[S+1]=f*g[5]+m*g[6]+y*g[7]+g[9]*255,n[S+2]=f*g[10]+m*g[11]+y*g[12]+g[14]*255):(x=n[S+3],n[S]=f*g[0]+m*g[1]+y*g[2]+x*g[3]+g[4]*255,n[S+1]=f*g[5]+m*g[6]+y*g[7]+x*g[8]+g[9]*255,n[S+2]=f*g[10]+m*g[11]+y*g[12]+x*g[13]+g[14]*255,n[S+3]=f*g[15]+m*g[16]+y*g[17]+x*g[18]+g[19]*255)},getUniformLocations:function(a,l){return{uColorMatrix:a.getUniformLocation(l,"uColorMatrix"),uConstants:a.getUniformLocation(l,"uConstants")}},sendUniformData:function(a,l){var n=this.matrix,h=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],g=[n[4],n[9],n[14],n[19]];a.uniformMatrix4fv(l.uColorMatrix,!1,h),a.uniform4fv(l.uConstants,g)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Brightness=u(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var l=a.imageData,n=l.data,h,g=n.length,f=Math.round(this.brightness*255);for(h=0;h<g;h+=4)n[h]=n[h]+f,n[h+1]=n[h+1]+f,n[h+2]=n[h+2]+f}},getUniformLocations:function(a,l){return{uBrightness:a.getUniformLocation(l,"uBrightness")}},sendUniformData:function(a,l){a.uniform1f(l.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.Image.filters,a=r.util.createClass;u.Convolute=a(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var n=Math.sqrt(this.matrix.length),h=this.type+"_"+n+"_"+(this.opaque?1:0),g=this.fragmentSource[h];return l.programCache.hasOwnProperty(h)||(l.programCache[h]=this.createProgram(l.context,g)),l.programCache[h]},applyTo2d:function(l){var n=l.imageData,h=n.data,g=this.matrix,f=Math.round(Math.sqrt(g.length)),m=Math.floor(f/2),y=n.width,x=n.height,S=l.ctx.createImageData(y,x),A=S.data,M=this.opaque?1:0,T,N,W,K,P,I,J,V,rt,at,dt,nt,E;for(dt=0;dt<x;dt++)for(at=0;at<y;at++){for(P=(dt*y+at)*4,T=0,N=0,W=0,K=0,E=0;E<f;E++)for(nt=0;nt<f;nt++)J=dt+E-m,I=at+nt-m,!(J<0||J>=x||I<0||I>=y)&&(V=(J*y+I)*4,rt=g[E*f+nt],T+=h[V]*rt,N+=h[V+1]*rt,W+=h[V+2]*rt,M||(K+=h[V+3]*rt));A[P]=T,A[P+1]=N,A[P+2]=W,M?A[P+3]=h[P+3]:A[P+3]=K}l.imageData=S},getUniformLocations:function(l,n){return{uMatrix:l.getUniformLocation(n,"uMatrix"),uOpaque:l.getUniformLocation(n,"uOpaque"),uHalfSize:l.getUniformLocation(n,"uHalfSize"),uSize:l.getUniformLocation(n,"uSize")}},sendUniformData:function(l,n){l.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Grayscale=u(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var l=a.imageData,n=l.data,h,g=n.length,f,m=this.mode;for(h=0;h<g;h+=4)m==="average"?f=(n[h]+n[h+1]+n[h+2])/3:m==="lightness"?f=(Math.min(n[h],n[h+1],n[h+2])+Math.max(n[h],n[h+1],n[h+2]))/2:m==="luminosity"&&(f=.21*n[h]+.72*n[h+1]+.07*n[h+2]),n[h]=f,n[h+1]=f,n[h+2]=f},retrieveShader:function(a){var l=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(l)){var n=this.fragmentSource[this.mode];a.programCache[l]=this.createProgram(a.context,n)}return a.programCache[l]},getUniformLocations:function(a,l){return{uMode:a.getUniformLocation(l,"uMode")}},sendUniformData:function(a,l){var n=1;a.uniform1i(l.uMode,n)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Invert=u(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var l=a.imageData,n=l.data,h,g=n.length;for(h=0;h<g;h+=4)n[h]=255-n[h],n[h+1]=255-n[h+1],n[h+2]=255-n[h+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,l){return{uInvert:a.getUniformLocation(l,"uInvert")}},sendUniformData:function(a,l){a.uniform1i(l.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.Image.filters,a=r.util.createClass;u.Noise=a(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var n=l.imageData,h=n.data,g,f=h.length,m=this.noise,y;for(g=0,f=h.length;g<f;g+=4)y=(.5-Math.random())*m,h[g]+=y,h[g+1]+=y,h[g+2]+=y}},getUniformLocations:function(l,n){return{uNoise:l.getUniformLocation(n,"uNoise"),uSeed:l.getUniformLocation(n,"uSeed")}},sendUniformData:function(l,n){l.uniform1f(n.uNoise,this.noise/255),l.uniform1f(n.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Pixelate=u(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var l=a.imageData,n=l.data,h=l.height,g=l.width,f,m,y,x,S,A,M,T,N,W,K;for(m=0;m<h;m+=this.blocksize)for(y=0;y<g;y+=this.blocksize)for(f=m*4*g+y*4,x=n[f],S=n[f+1],A=n[f+2],M=n[f+3],W=Math.min(m+this.blocksize,h),K=Math.min(y+this.blocksize,g),T=m;T<W;T++)for(N=y;N<K;N++)f=T*4*g+N*4,n[f]=x,n[f+1]=S,n[f+2]=A,n[f+3]=M},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,l){return{uBlocksize:a.getUniformLocation(l,"uBlocksize"),uStepW:a.getUniformLocation(l,"uStepW"),uStepH:a.getUniformLocation(l,"uStepH")}},sendUniformData:function(a,l){a.uniform1f(l.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.Image.filters,a=r.util.createClass;u.RemoveColor=a(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var n=l.imageData,h=n.data,g,f=this.distance*255,m,y,x,S=new r.Color(this.color).getSource(),A=[S[0]-f,S[1]-f,S[2]-f],M=[S[0]+f,S[1]+f,S[2]+f];for(g=0;g<h.length;g+=4)m=h[g],y=h[g+1],x=h[g+2],m>A[0]&&y>A[1]&&x>A[2]&&m<M[0]&&y<M[1]&&x<M[2]&&(h[g+3]=0)},getUniformLocations:function(l,n){return{uLow:l.getUniformLocation(n,"uLow"),uHigh:l.getUniformLocation(n,"uHigh")}},sendUniformData:function(l,n){var h=new r.Color(this.color).getSource(),g=parseFloat(this.distance),f=[0+h[0]/255-g,0+h[1]/255-g,0+h[2]/255-g,1],m=[h[0]/255+g,h[1]/255+g,h[2]/255+g,1];l.uniform4fv(n.uLow,f),l.uniform4fv(n.uHigh,m)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in a)c[l]=u(c.ColorMatrix,{type:l,matrix:a[l],mainParameter:!1,colorsOnly:!0}),r.Image.filters[l].fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric,c=r.Image.filters,u=r.util.createClass;c.BlendColor=u(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,n;return a.programCache.hasOwnProperty(l)||(n=this.buildSource(this.mode),a.programCache[l]=this.createProgram(a.context,n)),a.programCache[l]},applyTo2d:function(a){var l=a.imageData,n=l.data,h=n.length,g,f,m,y,x,S,A,M=1-this.alpha;A=new r.Color(this.color).getSource(),g=A[0]*this.alpha,f=A[1]*this.alpha,m=A[2]*this.alpha;for(var T=0;T<h;T+=4)switch(y=n[T],x=n[T+1],S=n[T+2],this.mode){case"multiply":n[T]=y*g/255,n[T+1]=x*f/255,n[T+2]=S*m/255;break;case"screen":n[T]=255-(255-y)*(255-g)/255,n[T+1]=255-(255-x)*(255-f)/255,n[T+2]=255-(255-S)*(255-m)/255;break;case"add":n[T]=y+g,n[T+1]=x+f,n[T+2]=S+m;break;case"diff":case"difference":n[T]=Math.abs(y-g),n[T+1]=Math.abs(x-f),n[T+2]=Math.abs(S-m);break;case"subtract":n[T]=y-g,n[T+1]=x-f,n[T+2]=S-m;break;case"darken":n[T]=Math.min(y,g),n[T+1]=Math.min(x,f),n[T+2]=Math.min(S,m);break;case"lighten":n[T]=Math.max(y,g),n[T+1]=Math.max(x,f),n[T+2]=Math.max(S,m);break;case"overlay":n[T]=g<128?2*y*g/255:255-2*(255-y)*(255-g)/255,n[T+1]=f<128?2*x*f/255:255-2*(255-x)*(255-f)/255,n[T+2]=m<128?2*S*m/255:255-2*(255-S)*(255-m)/255;break;case"exclusion":n[T]=g+y-2*g*y/255,n[T+1]=f+x-2*f*x/255,n[T+2]=m+S-2*m*S/255;break;case"tint":n[T]=g+y*M,n[T+1]=f+x*M,n[T+2]=m+S*M}},getUniformLocations:function(a,l){return{uColor:a.getUniformLocation(l,"uColor")}},sendUniformData:function(a,l){var n=new r.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,a.uniform4fv(l.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric,c=r.Image.filters,u=r.util.createClass;c.BlendImage=u(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(l)||(a.programCache[l]=this.createProgram(a.context,n)),a.programCache[l]},applyToWebGL:function(a){var l=a.context,n=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(l,n,l.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(a,l){return a.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var a=this.image,l=a._element.width,n=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/l,-a.top/n,1]},applyTo2d:function(a){var l=a.imageData,n=a.filterBackend.resources,h=l.data,g=h.length,f=l.width,m=l.height,y,x,S,A,M,T,N,W,K,P,I=this.image,J;n.blendImage||(n.blendImage=r.util.createCanvasElement()),K=n.blendImage,P=K.getContext("2d"),K.width!==f||K.height!==m?(K.width=f,K.height=m):P.clearRect(0,0,f,m),P.setTransform(I.scaleX,0,0,I.scaleY,I.left,I.top),P.drawImage(I._element,0,0,f,m),J=P.getImageData(0,0,f,m).data;for(var V=0;V<g;V+=4)switch(M=h[V],T=h[V+1],N=h[V+2],W=h[V+3],y=J[V],x=J[V+1],S=J[V+2],A=J[V+3],this.mode){case"multiply":h[V]=M*y/255,h[V+1]=T*x/255,h[V+2]=N*S/255,h[V+3]=W*A/255;break;case"mask":h[V+3]=A;break}},getUniformLocations:function(a,l){return{uTransformMatrix:a.getUniformLocation(l,"uTransformMatrix"),uImage:a.getUniformLocation(l,"uImage")}},sendUniformData:function(a,l){var n=this.calculateMatrix();a.uniform1i(l.uImage,1),a.uniformMatrix3fv(l.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(a,l){r.Image.fromObject(a.image,function(n){var h=r.util.object.clone(a);h.image=n,l(new r.Image.filters.BlendImage(h))})}}(e),function(o){var r=o.fabric||(o.fabric={}),c=Math.pow,u=Math.floor,a=Math.sqrt,l=Math.abs,n=Math.round,h=Math.sin,g=Math.ceil,f=r.Image.filters,m=r.util.createClass;f.Resize=m(f.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,x){return{uDelta:y.getUniformLocation(x,"uDelta"),uTaps:y.getUniformLocation(x,"uTaps")}},sendUniformData:function(y,x){y.uniform2fv(x.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(x.uTaps,this.taps)},retrieveShader:function(y){var x=this.getFilterWindow(),S=this.type+"_"+x;if(!y.programCache.hasOwnProperty(S)){var A=this.generateShader(x);y.programCache[S]=this.createProgram(y.context,A)}return y.programCache[S]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),x=this.tempScale,S=this.getFilterWindow(),A=new Array(S),M=1;M<=S;M++)A[M-1]=y(M*x);return A},generateShader:function(A){for(var x=new Array(A),S=this.fragmentSourceTOP,A,M=1;M<=A;M++)x[M-1]=M+".0 * uDelta";return S+="uniform float uTaps["+A+`];
`,S+=`void main() {
`,S+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,S+=`  float sum = 1.0;
`,x.forEach(function(T,N){S+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+N+`];
`,S+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+N+`];
`,S+="  sum += 2.0 * uTaps["+N+`];
`}),S+=`  gl_FragColor = color / sum;
`,S+="}",S},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(x){if(x>=y||x<=-y)return 0;if(x<11920929e-14&&x>-11920929e-14)return 1;x*=Math.PI;var S=x/y;return h(x)/x*h(S)/S}},applyTo2d:function(y){var x=y.imageData,S=this.scaleX,A=this.scaleY;this.rcpScaleX=1/S,this.rcpScaleY=1/A;var M=x.width,T=x.height,N=n(M*S),W=n(T*A),K;this.resizeType==="sliceHack"?K=this.sliceByTwo(y,M,T,N,W):this.resizeType==="hermite"?K=this.hermiteFastResize(y,M,T,N,W):this.resizeType==="bilinear"?K=this.bilinearFiltering(y,M,T,N,W):this.resizeType==="lanczos"&&(K=this.lanczosResize(y,M,T,N,W)),y.imageData=K},sliceByTwo:function(y,x,S,A,M){var T=y.imageData,N=.5,W=!1,K=!1,P=x*N,I=S*N,J=r.filterBackend.resources,V,rt,at=0,dt=0,nt=x,E=0;for(J.sliceByTwo||(J.sliceByTwo=document.createElement("canvas")),V=J.sliceByTwo,(V.width<x*1.5||V.height<S)&&(V.width=x*1.5,V.height=S),rt=V.getContext("2d"),rt.clearRect(0,0,x*1.5,S),rt.putImageData(T,0,0),A=u(A),M=u(M);!W||!K;)x=P,S=I,A<u(P*N)?P=u(P*N):(P=A,W=!0),M<u(I*N)?I=u(I*N):(I=M,K=!0),rt.drawImage(V,at,dt,x,S,nt,E,P,I),at=nt,dt=E,E+=I;return rt.getImageData(at,dt,A,M)},lanczosResize:function(y,x,S,A,M){function T($){var k,D,F,O,U,G,tt,Q,ut,pt,St;for(E.x=($+.5)*I,z.x=u(E.x),k=0;k<M;k++){for(E.y=(k+.5)*J,z.y=u(E.y),U=0,G=0,tt=0,Q=0,ut=0,D=z.x-at;D<=z.x+at;D++)if(!(D<0||D>=x)){pt=u(1e3*l(D-E.x)),nt[pt]||(nt[pt]={});for(var ot=z.y-dt;ot<=z.y+dt;ot++)ot<0||ot>=S||(St=u(1e3*l(ot-E.y)),nt[pt][St]||(nt[pt][St]=P(a(c(pt*V,2)+c(St*rt,2))/1e3)),F=nt[pt][St],F>0&&(O=(ot*x+D)*4,U+=F,G+=F*N[O],tt+=F*N[O+1],Q+=F*N[O+2],ut+=F*N[O+3]))}O=(k*A+$)*4,K[O]=G/U,K[O+1]=tt/U,K[O+2]=Q/U,K[O+3]=ut/U}return++$<A?T($):W}var N=y.imageData.data,W=y.ctx.createImageData(A,M),K=W.data,P=this.lanczosCreate(this.lanczosLobes),I=this.rcpScaleX,J=this.rcpScaleY,V=2/this.rcpScaleX,rt=2/this.rcpScaleY,at=g(I*this.lanczosLobes/2),dt=g(J*this.lanczosLobes/2),nt={},E={},z={};return T(0)},bilinearFiltering:function(y,x,S,A,M){var T,N,W,K,P,I,J,V,rt,at,dt,nt,E=0,z,$=this.rcpScaleX,k=this.rcpScaleY,D=4*(x-1),F=y.imageData,O=F.data,U=y.ctx.createImageData(A,M),G=U.data;for(J=0;J<M;J++)for(V=0;V<A;V++)for(P=u($*V),I=u(k*J),rt=$*V-P,at=k*J-I,z=4*(I*x+P),dt=0;dt<4;dt++)T=O[z+dt],N=O[z+4+dt],W=O[z+D+dt],K=O[z+D+4+dt],nt=T*(1-rt)*(1-at)+N*rt*(1-at)+W*at*(1-rt)+K*rt*at,G[E++]=nt;return U},hermiteFastResize:function(y,x,S,A,M){for(var T=this.rcpScaleX,N=this.rcpScaleY,W=g(T/2),K=g(N/2),P=y.imageData,I=P.data,J=y.ctx.createImageData(A,M),V=J.data,rt=0;rt<M;rt++)for(var at=0;at<A;at++){for(var dt=(at+rt*A)*4,nt=0,E=0,z=0,$=0,k=0,D=0,F=0,O=(rt+.5)*N,U=u(rt*N);U<(rt+1)*N;U++)for(var G=l(O-(U+.5))/K,tt=(at+.5)*T,Q=G*G,ut=u(at*T);ut<(at+1)*T;ut++){var pt=l(tt-(ut+.5))/W,St=a(Q+pt*pt);St>1&&St<-1||(nt=2*St*St*St-3*St*St+1,nt>0&&(pt=4*(ut+U*x),F+=nt*I[pt+3],z+=nt,I[pt+3]<255&&(nt=nt*I[pt+3]/250),$+=nt*I[pt],k+=nt*I[pt+1],D+=nt*I[pt+2],E+=nt))}V[dt]=$/E,V[dt+1]=k/E,V[dt+2]=D/E,V[dt+3]=F/z}return J},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Contrast=u(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var l=a.imageData,n,g,h=l.data,g=h.length,f=Math.floor(this.contrast*255),m=259*(f+255)/(255*(259-f));for(n=0;n<g;n+=4)h[n]=m*(h[n]-128)+128,h[n+1]=m*(h[n+1]-128)+128,h[n+2]=m*(h[n+2]-128)+128}},getUniformLocations:function(a,l){return{uContrast:a.getUniformLocation(l,"uContrast")}},sendUniformData:function(a,l){a.uniform1f(l.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Saturation=u(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var l=a.imageData,n=l.data,h=n.length,g=-this.saturation,f,m;for(f=0;f<h;f+=4)m=Math.max(n[f],n[f+1],n[f+2]),n[f]+=m!==n[f]?(m-n[f])*g:0,n[f+1]+=m!==n[f+1]?(m-n[f+1])*g:0,n[f+2]+=m!==n[f+2]?(m-n[f+2])*g:0}},getUniformLocations:function(a,l){return{uSaturation:a.getUniformLocation(l,"uSaturation")}},sendUniformData:function(a,l){a.uniform1f(l.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Vibrance=u(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var l=a.imageData,n=l.data,h=n.length,g=-this.vibrance,f,m,y,x;for(f=0;f<h;f+=4)m=Math.max(n[f],n[f+1],n[f+2]),y=(n[f]+n[f+1]+n[f+2])/3,x=Math.abs(m-y)*2/255*g,n[f]+=m!==n[f]?(m-n[f])*x:0,n[f+1]+=m!==n[f+1]?(m-n[f+1])*x:0,n[f+2]+=m!==n[f+2]?(m-n[f+2])*x:0}},getUniformLocations:function(a,l){return{uVibrance:a.getUniformLocation(l,"uVibrance")}},sendUniformData:function(a,l){a.uniform1f(l.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Blur=u(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var l=a.filterBackend.resources,n,h,g=a.imageData.width,f=a.imageData.height;l.blurLayer1||(l.blurLayer1=r.util.createCanvasElement(),l.blurLayer2=r.util.createCanvasElement()),n=l.blurLayer1,h=l.blurLayer2,(n.width!==g||n.height!==f)&&(h.width=n.width=g,h.height=n.height=f);var m=n.getContext("2d"),y=h.getContext("2d"),x=15,S,A,M,T,N=this.blur*.06*.5;for(m.putImageData(a.imageData,0,0),y.clearRect(0,0,g,f),T=-15;T<=x;T++)S=(Math.random()-.5)/4,A=T/x,M=N*A*g+S,y.globalAlpha=1-Math.abs(A),y.drawImage(n,M,S),m.drawImage(h,0,0),y.globalAlpha=1,y.clearRect(0,0,h.width,h.height);for(T=-15;T<=x;T++)S=(Math.random()-.5)/4,A=T/x,M=N*A*f+S,y.globalAlpha=1-Math.abs(A),y.drawImage(n,S,M),m.drawImage(h,0,0),y.globalAlpha=1,y.clearRect(0,0,h.width,h.height);a.ctx.drawImage(n,0,0);var W=a.ctx.getImageData(0,0,n.width,n.height);return m.globalAlpha=1,m.clearRect(0,0,n.width,n.height),W},getUniformLocations:function(a,l){return{delta:a.getUniformLocation(l,"uDelta")}},sendUniformData:function(a,l){var n=this.chooseRightDelta();a.uniform2fv(l.delta,n)},chooseRightDelta:function(){var a=1,l=[0,0],n;return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),n=a*this.blur*.12,this.horizontal?l[0]=n:l[1]=n,l}}),c.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Gamma=u(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var l=a.imageData,n=l.data,h=this.gamma,g=n.length,f=1/h[0],m=1/h[1],y=1/h[2],x;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),x=0,g=256;x<g;x++)this.rVals[x]=Math.pow(x/255,f)*255,this.gVals[x]=Math.pow(x/255,m)*255,this.bVals[x]=Math.pow(x/255,y)*255;for(x=0,g=n.length;x<g;x+=4)n[x]=this.rVals[n[x]],n[x+1]=this.gVals[n[x+1]],n[x+2]=this.bVals[n[x+2]]},getUniformLocations:function(a,l){return{uGamma:a.getUniformLocation(l,"uGamma")}},sendUniformData:function(a,l){a.uniform3fv(l.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Composed=u(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(a)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(a,l){var n=a.subFilters||[],h=n.map(function(f){return new r.Image.filters[f.type](f)}),g=new r.Image.filters.Composed({subFilters:h});return l&&l(g),g}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.HueRotation=u(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,l=r.util.cos(a),n=r.util.sin(a),h=1/3,g=Math.sqrt(h)*n,f=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+f/3,this.matrix[1]=h*f-g,this.matrix[2]=h*f+g,this.matrix[5]=h*f+g,this.matrix[6]=l+h*f,this.matrix[7]=h*f-g,this.matrix[10]=h*f-g,this.matrix[11]=h*f+g,this.matrix[12]=l+h*f},isNeutralState:function(a){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,a)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(u),cacheProperties:r.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,l){this.styles=l?l.styles||{}:{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=r.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){if(!this.__skipDimension){if(this._splitText(),this._clearCache(),this.path){var a=this.getHeightOfLine(0)*1.1;this.width=this.path.width+a,this.height=this.path.height+a}else this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight();this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"})}},enlargeSpaces:function(){for(var a,l,n,h,g,f,m,y=0,x=this._textLines.length;y<x;y++)if(!(this.textAlign!=="justify"&&(y===x-1||this.isEndOfWrapping(y)))&&(h=0,g=this._textLines[y],l=this.getLineWidth(y),l<this.width&&(m=this.textLines[y].match(this._reSpacesAndTabs)))){n=m.length,a=(this.width-l)/n;for(var S=0,A=g.length;S<=A;S++)f=this.__charBounds[y][S],this._reSpaceAndTab.test(g[S])?(f.width+=a,f.kernedWidth+=a,f.left+=h,h+=a):f.left+=h}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return a.width+=l*a.zoomX,a.height+=l*a.zoomY,a},_render:function(a){var l=this.path;l&&!l.isNotVisible()&&l._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,l,n){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom";break}a.font=this._getFontDeclaration(l,n)},calcTextWidth:function(){for(var a=this.getLineWidth(0),l=1,n=this._textLines.length;l<n;l++){var h=this.getLineWidth(l);h>a&&(a=h)}return a},_renderTextLine:function(a,l,n,h,g,f){this._renderChars(a,l,n,h,g,f)},_renderTextLinesBackground:function(a){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,n,h=a.fillStyle,g,f,m=this._getLeftOffset(),y=this._getTopOffset(),x=0,S=0,A,M,T=this.path,N,W=0,K=this._textLines.length;W<K;W++){if(l=this.getHeightOfLine(W),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",W)){y+=l;continue}g=this._textLines[W],n=this._getLineLeftOffset(W),S=0,x=0,f=this.getValueOfPropertyAt(W,0,"textBackgroundColor");for(var P=0,I=g.length;P<I;P++)A=this.__charBounds[W][P],M=this.getValueOfPropertyAt(W,P,"textBackgroundColor"),T?(a.save(),a.translate(A.renderLeft,A.renderTop),a.rotate(A.angle),a.fillStyle=M,M&&a.fillRect(-A.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),A.width,l/this.lineHeight),a.restore()):M!==f?(N=m+n+x,this.direction==="rtl"&&(N=this.width-N-S),a.fillStyle=f,f&&a.fillRect(N,y,S,l/this.lineHeight),x=A.left,S=A.width,f=M):S+=A.kernedWidth;M&&!T&&(N=m+n+x,this.direction==="rtl"&&(N=this.width-N-S),a.fillStyle=M,a.fillRect(N,y,S,l/this.lineHeight)),y+=l}a.fillStyle=h,this._removeShadow(a)}},getFontCache:function(a){var l=a.fontFamily.toLowerCase();r.charWidthsCache[l]||(r.charWidthsCache[l]={});var n=r.charWidthsCache[l],h=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return n[h]||(n[h]={}),n[h]},_measureChar:function(a,l,n,h){var g=this.getFontCache(l),f=this._getFontDeclaration(l),m=this._getFontDeclaration(h),y=n+a,x=f===m,S,A,M,T=l.fontSize/this.CACHE_FONT_SIZE,N;if(n&&g[n]!==void 0&&(M=g[n]),g[a]!==void 0&&(N=S=g[a]),x&&g[y]!==void 0&&(A=g[y],N=A-M),S===void 0||M===void 0||A===void 0){var W=this.getMeasuringContext();this._setTextStyles(W,l,!0)}return S===void 0&&(N=S=W.measureText(a).width,g[a]=S),M===void 0&&x&&n&&(M=W.measureText(n).width,g[n]=M),x&&A===void 0&&(A=W.measureText(y).width,g[y]=A,N=A-M),{width:S*T,kernedWidth:N*T}},getHeightOfChar:function(a,l){return this.getValueOfPropertyAt(a,l,"fontSize")},measureLine:function(a){var l=this._measureLine(a);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(a){var l=0,n,h,g=this._textLines[a],f,m,y=0,x=new Array(g.length),S=0,A,M,T=this.path,N=this.pathSide==="right";for(this.__charBounds[a]=x,n=0;n<g.length;n++)h=g[n],m=this._getGraphemeBox(h,a,n,f),x[n]=m,l+=m.kernedWidth,f=h;if(x[n]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(M=T.segmentsInfo[T.segmentsInfo.length-1].length,A=r.util.getPointOnPath(T.path,0,T.segmentsInfo),A.x+=T.pathOffset.x,A.y+=T.pathOffset.y,this.textAlign){case"left":S=N?M-l:0;break;case"center":S=(M-l)/2;break;case"right":S=N?0:M-l;break}for(S+=this.pathStartOffset*(N?-1:1),n=N?g.length-1:0;N?n>=0:n<g.length;N?n--:n++)m=x[n],S>M?S%=M:S<0&&(S+=M),this._setGraphemeOnPath(S,m,A),S+=m.kernedWidth}return{width:l,numOfSpaces:y}},_setGraphemeOnPath:function(a,l,n){var h=a+l.kernedWidth/2,g=this.path,f=r.util.getPointOnPath(g.path,h,g.segmentsInfo);l.renderLeft=f.x-n.x,l.renderTop=f.y-n.y,l.angle=f.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,l,n,h,g){var f=this.getCompleteStyleDeclaration(l,n),m=h?this.getCompleteStyleDeclaration(l,n-1):{},y=this._measureChar(a,f,h,m),x=y.kernedWidth,S=y.width,A;this.charSpacing!==0&&(A=this._getWidthOfCharSpacing(),S+=A,x+=A);var M={width:S,left:0,height:f.fontSize,kernedWidth:x,deltaY:f.deltaY};if(n>0&&!g){var T=this.__charBounds[l][n-1];M.left=T.left+T.width+y.kernedWidth-y.width}return M},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var l=this._textLines[a],n=this.getHeightOfChar(a,0),h=1,g=l.length;h<g;h++)n=Math.max(this.getHeightOfChar(a,h),n);return this.__lineHeights[a]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,l=0,n=0,h=this._textLines.length;n<h;n++)a=this.getHeightOfLine(n),l+=n===h-1?a/this.lineHeight:a;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,l){a.save();for(var n=0,h=this._getLeftOffset(),g=this._getTopOffset(),f=0,m=this._textLines.length;f<m;f++){var y=this.getHeightOfLine(f),x=y/this.lineHeight,S=this._getLineLeftOffset(f);this._renderTextLine(l,a,this._textLines[f],h+S,g+n+x,f),n+=y}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,l,n,h,g,f){var m=this.getHeightOfLine(f),y=this.textAlign.indexOf("justify")!==-1,x,S,A="",M,T=0,N,W=this.path,K=!y&&this.charSpacing===0&&this.isEmptyStyles(f)&&!W,P=this.direction==="ltr",I=this.direction==="ltr"?1:-1,J,V=l.canvas.getAttribute("dir");if(l.save(),V!==this.direction&&(l.canvas.setAttribute("dir",P?"ltr":"rtl"),l.direction=P?"ltr":"rtl",l.textAlign=P?"left":"right"),g-=m*this._fontSizeFraction/this.lineHeight,K){this._renderChar(a,l,f,0,n.join(""),h,g,m),l.restore();return}for(var rt=0,at=n.length-1;rt<=at;rt++)N=rt===at||this.charSpacing||W,A+=n[rt],M=this.__charBounds[f][rt],T===0?(h+=I*(M.kernedWidth-M.width),T+=M.width):T+=M.kernedWidth,y&&!N&&this._reSpaceAndTab.test(n[rt])&&(N=!0),N||(x=x||this.getCompleteStyleDeclaration(f,rt),S=this.getCompleteStyleDeclaration(f,rt+1),N=r.util.hasStyleChanged(x,S,!1)),N&&(W?(l.save(),l.translate(M.renderLeft,M.renderTop),l.rotate(M.angle),this._renderChar(a,l,f,rt,A,-T/2,0,m),l.restore()):(J=h,this._renderChar(a,l,f,rt,A,J,g,m)),A="",x=S,h+=I*T,T=0);l.restore()},_applyPatternGradientTransformText:function(a){var l=r.util.createCanvasElement(),n,h=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return l.width=h,l.height=g,n=l.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(h,0),n.lineTo(h,g),n.lineTo(0,g),n.closePath(),n.translate(h/2,g/2),n.fillStyle=a.toLive(n),this._applyPatternGradientTransform(n,a),n.fill(),n.createPattern(l,"no-repeat")},handleFiller:function(a,l,n){var h,g;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(h=-this.width/2,g=-this.height/2,a.translate(h,g),a[l]=this._applyPatternGradientTransformText(n),{offsetX:h,offsetY:g}):(a[l]=n.toLive(a,this),this._applyPatternGradientTransform(a,n)):(a[l]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,l){return a.lineWidth=l.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",l.stroke)},_setFillStyles:function(a,l){return this.handleFiller(a,"fillStyle",l.fill)},_renderChar:function(a,l,n,h,g,f,m){var y=this._getStyleDeclaration(n,h),x=this.getCompleteStyleDeclaration(n,h),S=a==="fillText"&&x.fill,A=a==="strokeText"&&x.stroke&&x.strokeWidth,M,T;!A&&!S||(l.save(),S&&(M=this._setFillStyles(l,x)),A&&(T=this._setStrokeStyles(l,x)),l.font=this._getFontDeclaration(x),y&&y.textBackgroundColor&&this._removeShadow(l),y&&y.deltaY&&(m+=y.deltaY),S&&l.fillText(g,f-M.offsetX,m-M.offsetY),A&&l.strokeText(g,f-T.offsetX,m-T.offsetY),l.restore())},setSuperscript:function(a,l){return this._setScript(a,l,this.superscript)},setSubscript:function(a,l){return this._setScript(a,l,this.subscript)},_setScript:function(a,l,n){var h=this.get2DCursorLocation(a,!0),g=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize"),f=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"deltaY"),m={fontSize:g*n.size,deltaY:f+g*n.baseline};return this.setSelectionStyles(m,a,l),this},_getLineLeftOffset:function(a){var l=this.getLineWidth(a),n=this.width-l,h=this.textAlign,g=this.direction,m,f=0,m=this.isEndOfWrapping(a);return h==="justify"||h==="justify-center"&&!m||h==="justify-right"&&!m||h==="justify-left"&&!m?0:(h==="center"&&(f=n/2),h==="right"&&(f=n),h==="justify-center"&&(f=n/2),h==="justify-right"&&(f=n),g==="rtl"&&(f-=n),f)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var l=this.measureLine(a),n=l.width;return this.__lineWidths[a]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,l,n){var h=this._getStyleDeclaration(a,l);return h&&typeof h[n]<"u"?h[n]:this[n]},_renderTextDecoration:function(a,l){if(!(!this[l]&&!this.styleHas(l))){a.save(),(l==="overline"||l==="linethrough")&&this._removeShadow(a);for(var n,h,g,f,m,y,x,S,A=this._getLeftOffset(),M=this._getTopOffset(),T,N,W,K,P,I,J,V,rt=this.path,at=this._getWidthOfCharSpacing(),dt=this.offsets[l],nt=0,E=this._textLines.length;nt<E;nt++){if(n=this.getHeightOfLine(nt),!this[l]&&!this.styleHas(l,nt)){M+=n;continue}x=this._textLines[nt],I=n/this.lineHeight,f=this._getLineLeftOffset(nt),N=0,W=0,S=this.getValueOfPropertyAt(nt,0,l),V=this.getValueOfPropertyAt(nt,0,"fill"),T=M+I*(1-this._fontSizeFraction),h=this.getHeightOfChar(nt,0),m=this.getValueOfPropertyAt(nt,0,"deltaY");for(var z=0,$=x.length;z<$;z++)if(K=this.__charBounds[nt][z],P=this.getValueOfPropertyAt(nt,z,l),J=this.getValueOfPropertyAt(nt,z,"fill"),g=this.getHeightOfChar(nt,z),y=this.getValueOfPropertyAt(nt,z,"deltaY"),rt&&P&&J)a.save(),a.fillStyle=V,a.translate(K.renderLeft,K.renderTop),a.rotate(K.angle),a.fillRect(-K.kernedWidth/2,dt*g+y,K.kernedWidth,this.fontSize/15),a.restore();else if((P!==S||J!==V||g!==h||y!==m)&&W>0){var k=A+f+N;this.direction==="rtl"&&(k=this.width-k-W),S&&V&&(a.fillStyle=V,a.fillRect(k,T+dt*h+m,W,this.fontSize/15)),N=K.left,W=K.width,S=P,V=J,h=g,m=y}else W+=K.kernedWidth;var k=A+f+N;this.direction==="rtl"&&(k=this.width-k-W),a.fillStyle=J,P&&J&&a.fillRect(k,T+dt*h+m,W-at,this.fontSize/15),M+=n}a.restore()}},_getFontDeclaration:function(a,l){var n=a||this,h=this.fontFamily,g=r.Text.genericFonts.indexOf(h.toLowerCase())>-1,f=h===void 0||h.indexOf("'")>-1||h.indexOf(",")>-1||h.indexOf('"')>-1||g?n.fontFamily:'"'+n.fontFamily+'"';return[r.isLikelyNode?n.fontWeight:n.fontStyle,r.isLikelyNode?n.fontStyle:n.fontWeight,l?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",f].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var l=a.split(this._reNewline),n=new Array(l.length),h=[`
`],g=[],f=0;f<l.length;f++)n[f]=r.util.string.graphemeSplit(l[f]),g=g.concat(n[f],h);return g.pop(),{_unwrappedLines:n,lines:l,graphemeText:g,graphemeLines:n}},toObject:function(a){var l=u.concat(a),n=this.callSuper("toObject",l);return n.styles=r.util.stylesToArray(this.styles,this.text),n.path&&(n.path=this.path.toObject()),n},set:function(a,l){this.callSuper("set",a,l);var n=!1,h=!1;if(typeof a=="object")for(var g in a)g==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(g)!==-1,h=h||g==="path";else n=this._dimensionAffectingProps.indexOf(a)!==-1,h=a==="path";return h&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(a,l,n){if(!a)return l(null);var h=r.parseAttributes(a,r.Text.ATTRIBUTE_NAMES),g=h.textAnchor||"left";if(n=r.util.object.extend(n?c(n):{},h),n.top=n.top||0,n.left=n.left||0,h.textDecoration){var f=h.textDecoration;f.indexOf("underline")!==-1&&(n.underline=!0),f.indexOf("overline")!==-1&&(n.overline=!0),f.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in h&&(n.left+=h.dx),"dy"in h&&(n.top+=h.dy),"fontSize"in n||(n.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in a?m=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(m=a.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=n.strokeWidth;n.strokeWidth=0;var x=new r.Text(m,n),S=x.getScaledHeight()/x.height,A=(x.height+x.strokeWidth)*x.lineHeight-x.height,M=A*S,T=x.getScaledHeight()+M,N=0;g==="center"&&(N=x.getScaledWidth()/2),g==="right"&&(N=x.getScaledWidth()),x.set({left:x.left-N,top:x.top-(T-x.fontSize*(.07+x._fontSizeFraction))/x.lineHeight,strokeWidth:typeof y<"u"?y:1}),l(x)},r.Text.fromObject=function(a,l){var n=c(a),h=a.path;return delete n.path,r.Object._fromObject("Text",n,function(g){g.styles=r.util.stylesFromArray(a.styles,a.text),h?r.Object._fromObject("Path",h,function(f){g.set("path",f),l(g)},"path"):l(g)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(o){if(!this.styles||typeof o<"u"&&!this.styles[o])return!0;var r=typeof o>"u"?this.styles:{line:this.styles[o]};for(var c in r)for(var u in r[c])for(var a in r[c][u])return!1;return!0},styleHas:function(o,r){if(!this.styles||!o||o===""||typeof r<"u"&&!this.styles[r])return!1;var c=typeof r>"u"?this.styles:{0:this.styles[r]};for(var u in c)for(var a in c[u])if(typeof c[u][a][o]<"u")return!0;return!1},cleanStyle:function(o){if(!this.styles||!o||o==="")return!1;var r=this.styles,c=0,u,a,l=!0,n=0,h;for(var g in r){u=0;for(var f in r[g]){var h=r[g][f],m=h.hasOwnProperty(o);c++,m?(a?h[o]!==a&&(l=!1):a=h[o],h[o]===this[o]&&delete h[o]):l=!1,Object.keys(h).length!==0?u++:delete r[g][f]}u===0&&delete r[g]}for(var y=0;y<this._textLines.length;y++)n+=this._textLines[y].length;l&&c===n&&(this[o]=a,this.removeStyle(o))},removeStyle:function(o){if(!(!this.styles||!o||o==="")){var r=this.styles,c,u,a;for(u in r){c=r[u];for(a in c)delete c[a][o],Object.keys(c[a]).length===0&&delete c[a];Object.keys(c).length===0&&delete r[u]}}},_extendStyles:function(o,r){var c=this.get2DCursorLocation(o);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),r)},get2DCursorLocation:function(o,r){typeof o>"u"&&(o=this.selectionStart);for(var c=r?this._unwrappedTextLines:this._textLines,u=c.length,a=0;a<u;a++){if(o<=c[a].length)return{lineIndex:a,charIndex:o};o-=c[a].length+this.missingNewlineOffset(a,r)}return{lineIndex:a-1,charIndex:c[a-1].length<o?c[a-1].length:o}},getSelectionStyles:function(o,r,c){typeof o>"u"&&(o=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||o);for(var u=[],a=o;a<r;a++)u.push(this.getStyleAtPosition(a,c));return u},getStyleAtPosition:function(o,r){var c=this.get2DCursorLocation(o),u=r?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return u||{}},setSelectionStyles:function(o,r,c){typeof r>"u"&&(r=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||r);for(var u=r;u<c;u++)this._extendStyles(u,o);return this._forceClearCache=!0,this},_getStyleDeclaration:function(o,r){var c=this.styles&&this.styles[o];return c?c[r]:null},getCompleteStyleDeclaration:function(o,r){for(var c=this._getStyleDeclaration(o,r)||{},u={},a,l=0;l<this._styleProperties.length;l++)a=this._styleProperties[l],u[a]=typeof c[a]>"u"?this[a]:c[a];return u},_setStyleDeclaration:function(o,r,c){this.styles[o][r]=c},_deleteStyleDeclaration:function(o,r){delete this.styles[o][r]},_getLineStyle:function(o){return!!this.styles[o]},_setLineStyle:function(o){this.styles[o]={}},_deleteLineStyle:function(o){delete this.styles[o]}})}(),function(){function o(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,c){this.callSuper("initialize",r,c),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,c){this[r]!==c&&(this._fireSelectionChanged(),this[r]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,u=this.canvas.viewportTransform;c.save(),c.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(c),this._clearTextArea(c),r||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,c):this.renderSelection(r,c),c.restore()}},_clearTextArea:function(r){var c=this.width+4,u=this.height+4;r.clearRect(-c/2,-u/2,c,u)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var c=this._getLeftOffset(),u=this._getTopOffset(),a=this._getCursorBoundariesOffsets(r);return{left:c,top:u,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,u,a,l=0,n=0,h,g=this.get2DCursorLocation(r);a=g.charIndex,u=g.lineIndex;for(var f=0;f<u;f++)l+=this.getHeightOfLine(f);c=this._getLineLeftOffset(u);var m=this.__charBounds[u][a];return m&&(n=m.left),this.charSpacing!==0&&a===this._textLines[u].length&&(n-=this._getWidthOfCharSpacing()),h={top:l,left:c+(n>0?n:0)},this.direction==="rtl"&&(h.left*=-1),this.cursorOffsetCache=h,this.cursorOffsetCache},renderCursor:function(r,c){var u=this.get2DCursorLocation(),a=u.lineIndex,l=u.charIndex>0?u.charIndex-1:0,n=this.getValueOfPropertyAt(a,l,"fontSize"),h=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/h,f=r.topOffset,m=this.getValueOfPropertyAt(a,l,"deltaY");f+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,l,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(r.left+r.leftOffset-g/2,f+r.top+m,g,n)},renderSelection:function(r,c){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(u),h=this.get2DCursorLocation(a),g=n.lineIndex,f=h.lineIndex,m=n.charIndex<0?0:n.charIndex,y=h.charIndex<0?0:h.charIndex,x=g;x<=f;x++){var S=this._getLineLeftOffset(x)||0,A=this.getHeightOfLine(x),M=0,T=0,N=0;if(x===g&&(T=this.__charBounds[g][m].left),x>=g&&x<f)N=l&&!this.isEndOfWrapping(x)?this.width:this.getLineWidth(x)||5;else if(x===f)if(y===0)N=this.__charBounds[f][y].left;else{var W=this._getWidthOfCharSpacing();N=this.__charBounds[f][y-1].left+this.__charBounds[f][y-1].width-W}M=A,(this.lineHeight<1||x===f&&this.lineHeight>1)&&(A/=this.lineHeight);var K=r.left+S+T,P=N-T,I=A,J=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",I=1,J=A):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(K=this.width-K-P),c.fillRect(K,r.top+r.topOffset+J,P,I),r.topOffset+=M}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),c=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c}}}),t.IText.fromObject=function(r,c){var u=t.util.stylesFromArray(r.styles,r.text),a=Object.assign({},r,{styles:u});if(delete a.path,o(a),a.styles)for(var l in a.styles)for(var n in a.styles[l])o(a.styles[l][n]);t.Object._fromObject("IText",a,function(h){r.path?t.Object._fromObject("Path",r.path,function(g){h.set("path",g),c(h)},"path"):c(h)},"text")}}(),function(){var o=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var c=r.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,r._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var c=r.canvas;c&&(c._iTextInstances=c._iTextInstances||[],t.util.removeFromArray(c._iTextInstances,r),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,r._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(c){c.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,c,u,a){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",c,{duration:u,onComplete:function(){l.isAborted||r[a]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var c=this,u=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},u)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var c=0,u=r-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u--;for(;/\S/.test(this._text[u])&&u>-1;)c++,u--;return r-c},findWordBoundaryRight:function(r){var c=0,u=r;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)c++,u++;return r+c},findLineBoundaryLeft:function(r){for(var c=0,u=r-1;!/\n/.test(this._text[u])&&u>-1;)c++,u--;return r-c},findLineBoundaryRight:function(r){for(var c=0,u=r;!/\n/.test(this._text[u])&&u<this._text.length;)c++,u++;return r+c},searchWordBoundary:function(r,c){for(var u=this._text,a=this._reSpace.test(u[r])?r-1:r,l=u[a],n=t.reNonWord;!n.test(l)&&a>0&&a<u.length;)a+=c,l=u[a];return n.test(l)&&(a+=c===1?0:1),a},selectWord:function(r){r=r||this.selectionStart;var c=this.searchWordBoundary(r,-1),u=this.searchWordBoundary(r,1);this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var c=this.findLineBoundaryLeft(r),u=this.findLineBoundaryRight(r);return this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(r.e),u=this.selectionStart,a=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||u===a)&&(u===c||a===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,c,u){var a=u.slice(0,r),l=t.util.string.graphemeSplit(a).length;if(r===c)return{selectionStart:l,selectionEnd:l};var n=u.slice(r,c),h=t.util.string.graphemeSplit(n).length;return{selectionStart:l,selectionEnd:l+h}},fromGraphemeToStringSelection:function(r,c,u){var a=u.slice(0,r),l=a.join("").length;if(r===c)return{selectionStart:l,selectionEnd:l};var n=u.slice(r,c),h=n.join("").length;return{selectionStart:l,selectionEnd:l+h}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(r),u=this.get2DCursorLocation(r),a=u.lineIndex,l=u.charIndex,n=this.getValueOfPropertyAt(a,l,"fontSize")*this.lineHeight,h=c.leftOffset,g=this.calcTransformMatrix(),f={x:c.left+h,y:c.top+c.topOffset+n},m=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,x=y.width/m,S=y.height/m,A=x-n,M=S-n,T=y.clientWidth/x,N=y.clientHeight/S;return f=t.util.transformPoint(f,g),f=t.util.transformPoint(f,this.canvas.viewportTransform),f.x*=T,f.y*=N,f.x<0&&(f.x=0),f.x>A&&(f.x=A),f.y<0&&(f.y=0),f.y>M&&(f.y=M),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:f.x+"px",top:f.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,c){var u=this.get2DCursorLocation(r,!0),a=this.get2DCursorLocation(c,!0),l=u.lineIndex,n=u.charIndex,h=a.lineIndex,g=a.charIndex,f,m;if(l!==h){if(this.styles[l])for(f=n;f<this._unwrappedTextLines[l].length;f++)delete this.styles[l][f];if(this.styles[h])for(f=g;f<this._unwrappedTextLines[h].length;f++)m=this.styles[h][f],m&&(this.styles[l]||(this.styles[l]={}),this.styles[l][n+f-g]=m);for(f=l+1;f<=h;f++)delete this.styles[f];this.shiftLineStyles(h,l-h)}else if(this.styles[l]){m=this.styles[l];var y=g-n,x,S;for(f=n;f<g;f++)delete m[f];for(S in this.styles[l])x=parseInt(S,10),x>=g&&(m[x-y]=m[S],delete m[S])}},shiftLineStyles:function(r,c){var u=o(this.styles);for(var a in this.styles){var l=parseInt(a,10);l>r&&(this.styles[l+c]=u[l],u[l-c]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,c,u,a){var l,n={},h=!1,g=this._unwrappedTextLines[r].length,f=g===c;u||(u=1),this.shiftLineStyles(r,u),this.styles[r]&&(l=this.styles[r][c===0?c:c-1]);for(var m in this.styles[r]){var y=parseInt(m,10);y>=c&&(h=!0,n[y-c]=this.styles[r][m],f&&c===0||delete this.styles[r][m])}var x=!1;for(h&&!f&&(this.styles[r+u]=n,x=!0),(x||g>c)&&u--;u>0;)a&&a[u-1]?this.styles[r+u]={0:o(a[u-1])}:l?this.styles[r+u]={0:o(l)}:delete this.styles[r+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(r,c,u,a){this.styles||(this.styles={});var l=this.styles[r],n=l?o(l):{};u||(u=1);for(var h in n){var g=parseInt(h,10);g>=c&&(l[g+u]=n[g],n[g-u]||delete l[g])}if(this._forceClearCache=!0,a){for(;u--;)Object.keys(a[u]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][c+u]=o(a[u]));return}if(l)for(var f=l[c?c-1:1];f&&u--;)this.styles[r][c+u]=o(f)},insertNewStyleBlock:function(r,c,u){for(var a=this.get2DCursorLocation(c,!0),l=[0],n=0,h=0;h<r.length;h++)r[h]===`
`?(n++,l[n]=0):l[n]++;l[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,l[0],u),u=u&&u.slice(l[0]+1)),n&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+l[0],n);for(var h=1;h<n;h++)l[h]>0?this.insertCharStyleObject(a.lineIndex+h,0,l[h],u):u&&this.styles[a.lineIndex+h]&&u[0]&&(this.styles[a.lineIndex+h][0]=u[0]),u=u&&u.slice(l[h]+1);l[h]>0&&this.insertCharStyleObject(a.lineIndex+h,0,l[h],u)},setSelectionStartEndWithShift:function(r,c,u){u<=r?(c===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=u):u>r&&u<c?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(c===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=u)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(o){if(this.canvas){this.__newClickTime=+new Date;var r=o.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",o),this._stopEvent(o.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(o){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===o.x&&this.__lastPointer.y===o.y},_stopEvent:function(o){o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(o){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(o.e))},tripleClickHandler:function(o){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(o.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(o){!this.canvas||!this.editable||o.e.button&&o.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(o.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(o){!this.canvas||!this.editable||o.e.button&&o.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(o){if(this.__isMousedown=!1,!(!this.editable||this.group||o.transform&&o.transform.actionPerformed||o.e.button&&o.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(o.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(o){var r=this.getSelectionStartFromPointer(o),c=this.selectionStart,u=this.selectionEnd;o.shiftKey?this.setSelectionStartEndWithShift(c,u,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(o){for(var r=this.getLocalPointer(o),c=0,u=0,a=0,l=0,n=0,h,g,f=0,m=this._textLines.length;f<m&&a<=r.y;f++)a+=this.getHeightOfLine(f)*this.scaleY,n=f,f>0&&(l+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));h=this._getLineLeftOffset(n),u=h*this.scaleX,g=this._textLines[n],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+u);for(var y=0,x=g.length;y<x&&(c=u,u+=this.__charBounds[n][y].kernedWidth*this.scaleX,u<=r.x);y++)l++;return this._getNewSelectionStartFromOffset(r,c,u,l,x)},_getNewSelectionStartFromOffset:function(o,r,c,u,a){var l=o.x-r,n=c-o.x,h=n>l||n<0?0:1,g=u+h;return this.flipX&&(g=a-g),g>this._text.length&&(g=this._text.length),g}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var o=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+o.top+"; left: "+o.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+o.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(o){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(o.keyCode in r)this[r[o.keyCode]](o);else if(o.keyCode in this.ctrlKeysMapDown&&(o.ctrlKey||o.metaKey))this[this.ctrlKeysMapDown[o.keyCode]](o);else return;o.stopImmediatePropagation(),o.preventDefault(),o.keyCode>=33&&o.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(o){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(o.keyCode in this.ctrlKeysMapUp&&(o.ctrlKey||o.metaKey))this[this.ctrlKeysMapUp[o.keyCode]](o);else return;o.stopImmediatePropagation(),o.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(o){var r=this.fromPaste;if(this.fromPaste=!1,o&&o.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,a=c.length,l,n,h=a-u,g=this.selectionStart,f=this.selectionEnd,m=g!==f,y,x,S;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var A=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),M=g>A.selectionStart;m?(l=this._text.slice(g,f),h+=f-g):a<u&&(M?l=this._text.slice(f+h,f):l=this._text.slice(g,g-h)),n=c.slice(A.selectionEnd-h,A.selectionEnd),l&&l.length&&(n.length&&(y=this.getSelectionStyles(g,g+1,!1),y=n.map(function(){return y[0]})),m?(x=g,S=f):M?(x=f-l.length,S=f):(x=f,S=f+l.length),this.removeStyleFromTo(x,S)),n.length&&(r&&n.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(y=t.copiedTextStyle),this.insertNewStyleBlock(n,g,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(o){this.compositionStart=o.target.selectionStart,this.compositionEnd=o.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(o){return o&&o.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(o,r){var c=this._getLineLeftOffset(o),u;return r>0&&(u=this.__charBounds[o][r-1],c+=u.left+u.width),c},getDownCursorOffset:function(o,r){var c=this._getSelectionForOffset(o,r),u=this.get2DCursorLocation(c),a=u.lineIndex;if(a===this._textLines.length-1||o.metaKey||o.keyCode===34)return this._text.length-c;var l=u.charIndex,n=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a+1,n),g=this._textLines[a].slice(l);return g.length+h+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(o,r){return o.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(o,r){var c=this._getSelectionForOffset(o,r),u=this.get2DCursorLocation(c),a=u.lineIndex;if(a===0||o.metaKey||o.keyCode===33)return-c;var l=u.charIndex,n=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a-1,n),g=this._textLines[a].slice(0,l),f=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+h-g.length+(1-f)},_getIndexOnLine:function(o,r){for(var c=this._textLines[o],u=this._getLineLeftOffset(o),a=u,l=0,n,h,g=0,f=c.length;g<f;g++)if(n=this.__charBounds[o][g].width,a+=n,a>r){h=!0;var m=a-n,y=a,x=Math.abs(m-r),S=Math.abs(y-r);l=S<x?g:g-1;break}return h||(l=c.length-1),l},moveCursorDown:function(o){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",o)},moveCursorUp:function(o){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",o)},_moveCursorUpOrDown:function(o,r){var c="get"+o+"CursorOffset",u=this[c](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(o){var r=this._selectionDirection==="left"?this.selectionStart+o:this.selectionEnd+o;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),o!==0},moveCursorWithoutShift:function(o){return o<0?(this.selectionStart+=o,this.selectionEnd=this.selectionStart):(this.selectionEnd+=o,this.selectionStart=this.selectionEnd),o!==0},moveCursorLeft:function(o){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",o)},_move:function(o,r,c){var u;if(o.altKey)u=this["findWordBoundary"+c](this[r]);else if(o.metaKey||o.keyCode===35||o.keyCode===36)u=this["findLineBoundary"+c](this[r]);else return this[r]+=c==="Left"?-1:1,!0;if(typeof u<"u"&&this[r]!==u)return this[r]=u,!0},_moveLeft:function(o,r){return this._move(o,r,"Left")},_moveRight:function(o,r){return this._move(o,r,"Right")},moveCursorLeftWithoutShift:function(o){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(o,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(o){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(o,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(o,"selectionStart")},moveCursorRight:function(o){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",o)},_moveCursorLeftOrRight:function(o,r){var c="moveCursor"+o+"With";this._currentCursorOpacity=1,r.shiftKey?c+="Shift":c+="outShift",this[c](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(o){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(o,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(o,"selectionEnd")},moveCursorRightWithoutShift:function(o){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(o,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(o,r){typeof r>"u"&&(r=o+1),this.removeStyleFromTo(o,r),this._text.splice(o,r-o),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(o,r,c,u){typeof u>"u"&&(u=c),u>c&&this.removeStyleFromTo(c,u);var a=t.util.string.graphemeSplit(o);this.insertNewStyleBlock(a,c,r),this._text=[].concat(this._text.slice(0,c),a,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var o=t.util.toFixed,r=t.util.radiansToDegrees,c=t.util.calcRotateMatrix,u=t.util.transformPoint,a=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),n=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(n)},toSVG:function(l){var n=this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0}),h=this.path;return h?n+h._createBaseSVGMarkup(h._toSVG(),{reviver:l,withShadow:!0}):n},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var n=!0,h=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",h?'text-decoration="'+h+'" ':"",'style="',this.getSvgStyles(n),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,n){var h=[],g=[],f=l,m;this._setSVGBg(g);for(var y=0,x=this._textLines.length;y<x;y++)m=this._getLineLeftOffset(y),(this.textBackgroundColor||this.styleHas("textBackgroundColor",y))&&this._setSVGTextLineBg(g,y,n+m,f),this._setSVGTextLineText(h,y,n+m,f),f+=this.getHeightOfLine(y);return{textSpans:h,textBgRects:g}},_createTextCharSpan:function(l,n,h,g,f){var m=l!==l.trim()||l.match(a),y=this.getSvgSpanStyles(n,m),x=y?'style="'+y+'"':"",S=n.deltaY,A="",M=t.Object.NUM_FRACTION_DIGITS,T="";if(S&&(A=' dy="'+o(S,M)+'" '),f.renderLeft!==void 0){var N=f.angle;T=' rotate="'+o(r(N),t.Object.NUM_FRACTION_DIGITS)+'" ';var W=f.width/2,K=c({angle:r(N)});K[4]=f.renderLeft,K[5]=f.renderTop;var P=u({x:-W,y:0},K);h=P.x,g=P.y}return['<tspan x="',o(h,M),'" y="',o(g,M),'" ',A,x,T,">",t.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,n,h,g){var f=this.getHeightOfLine(n),m=this.textAlign.indexOf("justify")!==-1,y,x,S="",A,M,T=0,N=this._textLines[n],W;g+=f*(1-this._fontSizeFraction)/this.lineHeight;for(var K=0,P=N.length-1;K<=P;K++)W=K===P||this.charSpacing||this.path,S+=N[K],A=this.__charBounds[n][K],T===0?(h+=A.kernedWidth-A.width,T+=A.width):T+=A.kernedWidth,m&&!W&&this._reSpaceAndTab.test(N[K])&&(W=!0),W||(y=y||this.getCompleteStyleDeclaration(n,K),x=this.getCompleteStyleDeclaration(n,K+1),W=t.util.hasStyleChanged(y,x,!0)),W&&(M=this._getStyleDeclaration(n,K)||{},l.push(this._createTextCharSpan(S,M,h,g,A)),S="",y=x,h+=T,T=0)},_pushTextBgRect:function(l,n,h,g,f,m){var y=t.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(n),' x="',o(h,y),'" y="',o(g,y),'" width="',o(f,y),'" height="',o(m,y),`"></rect>
`)},_setSVGTextLineBg:function(l,n,h,g){for(var f=this._textLines[n],m=this.getHeightOfLine(n)/this.lineHeight,y=0,x=0,S,A,M=this.getValueOfPropertyAt(n,0,"textBackgroundColor"),T=0,N=f.length;T<N;T++)S=this.__charBounds[n][T],A=this.getValueOfPropertyAt(n,T,"textBackgroundColor"),A!==M?(M&&this._pushTextBgRect(l,M,h+x,g,y,m),x=S.left,y=S.width,M=A):y+=S.kernedWidth;A&&this._pushTextBgRect(l,A,h+x,g,y,m)},_getFillAttributes:function(l){var n=l&&typeof l=="string"?new t.Color(l):"";return!n||!n.getSource()||n.getAlpha()===1?'fill="'+l+'"':'opacity="'+n.getAlpha()+'" fill="'+n.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var n=0,h=0,g=0;g<l;g++)n+=this.getHeightOfLine(g);return h=this.getHeightOfLine(g),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*h/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var n=t.Object.prototype.getSvgStyles.call(this,l);return n+" white-space: pre;"}})}(),function(o){var r=o.fabric||(o.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var u=0,a=0,l=0,n={},h=0;h<c.graphemeLines.length;h++)c.graphemeText[l]===`
`&&h>0?(a=0,l++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[l])&&h>0&&(a++,l++),n[h]={line:u,offset:a},l+=c.graphemeLines[h].length,a+=c.graphemeLines[h].length;return n},styleHas:function(c,u){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[u];a&&(u=a.line)}return r.Text.prototype.styleHas.call(this,c,u)},isEmptyStyles:function(c){if(!this.styles)return!0;var u=0,a=c+1,l,n,h=!1,g=this._styleMap[c],f=this._styleMap[c+1];g&&(c=g.line,u=g.offset),f&&(a=f.line,h=a===c,l=f.offset),n=typeof c>"u"?this.styles:{line:this.styles[c]};for(var m in n)for(var y in n[m])if(y>=u&&(!h||y<l))for(var x in n[m][y])return!1;return!0},_getStyleDeclaration:function(c,u){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[c];if(!a)return null;c=a.line,u=a.offset+u}return this.callSuper("_getStyleDeclaration",c,u)},_setStyleDeclaration:function(c,u,a){var l=this._styleMap[c];c=l.line,u=l.offset+u,this.styles[c][u]=a},_deleteStyleDeclaration:function(c,u){var a=this._styleMap[c];c=a.line,u=a.offset+u,delete this.styles[c][u]},_getLineStyle:function(c){var u=this._styleMap[c];return!!this.styles[u.line]},_setLineStyle:function(c){var u=this._styleMap[c];this.styles[u.line]={}},_wrapText:function(c,u){var a=[],l;for(this.isWrapping=!0,l=0;l<c.length;l++)a=a.concat(this._wrapLine(c[l],l,u));return this.isWrapping=!1,a},_measureWord:function(c,u,a){var l=0,n,h=!0;a=a||0;for(var g=0,f=c.length;g<f;g++){var m=this._getGraphemeBox(c[g],u,g+a,n,h);l+=m.kernedWidth,n=c[g]}return l},_wrapLine:function(c,u,a,K){var n=0,h=this.splitByGrapheme,g=[],f=[],m=h?r.util.string.graphemeSplit(c):c.split(this._wordJoiners),y="",x=0,S=h?"":" ",A=0,M=0,T=0,N=!0,W=this._getWidthOfCharSpacing(),K=K||0;m.length===0&&m.push([]),a-=K;for(var P=0;P<m.length;P++)y=h?m[P]:r.util.string.graphemeSplit(m[P]),A=this._measureWord(y,u,x),x+=y.length,n+=M+A-W,n>a&&!N?(g.push(f),f=[],n=A,N=!0):n+=W,!N&&!h&&f.push(S),f=f.concat(y),M=h?0:this._measureWord([S],u,x),x++,N=!1,A>T&&(T=A);return P&&g.push(f),T+K>this.dynamicMinWidth&&(this.dynamicMinWidth=T-W+K),g},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c,u){return this.splitByGrapheme&&!u?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var u=r.Text.prototype._splitTextIntoLines.call(this,c),a=this._wrapText(u.lines,this.width),l=new Array(a.length),n=0;n<a.length;n++)l[n]=a[n].join("");return u.lines=l,u.graphemeLines=a,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var u in this._styleMap)this._textLines[u]&&(c[this._styleMap[u].line]=1);for(var u in this.styles)c[u]||delete this.styles[u]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),r.Textbox.fromObject=function(c,u){var a=r.util.stylesFromArray(c.styles,c.text),l=Object.assign({},c,{styles:a});return delete l.path,r.Object._fromObject("Textbox",l,function(n){c.path?r.Object._fromObject("Path",c.path,function(h){n.set("path",h),u(n)},"path"):u(n)},"text")}}(e),function(){var o=t.controlsUtils,r=o.scaleSkewCursorStyleHandler,c=o.scaleCursorStyleHandler,u=o.scalingEqually,a=o.scalingYOrSkewingX,l=o.scalingXOrSkewingY,n=o.scaleOrSkewActionName,h=t.Object.prototype.controls;if(h.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:n}),h.mr=new t.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:n}),h.mb=new t.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:a,getActionName:n}),h.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:a,getActionName:n}),h.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:u}),h.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:u}),h.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:u}),h.br=new t.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:u}),h.mtr=new t.Control({x:0,y:-.5,actionHandler:o.rotationWithSnapping,cursorStyleHandler:o.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var g=t.Textbox.prototype.controls={};g.mtr=h.mtr,g.tr=h.tr,g.br=h.br,g.tl=h.tl,g.bl=h.bl,g.mt=h.mt,g.mb=h.mb,g.mr=new t.Control({x:.5,y:0,actionHandler:o.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),g.ml=new t.Control({x:-.5,y:0,actionHandler:o.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()})(De);const gi=[];for(let e=0;e<256;++e)gi.push((e+256).toString(16).slice(1));function rp(e,t=0){return(gi[e[t+0]]+gi[e[t+1]]+gi[e[t+2]]+gi[e[t+3]]+"-"+gi[e[t+4]]+gi[e[t+5]]+"-"+gi[e[t+6]]+gi[e[t+7]]+"-"+gi[e[t+8]]+gi[e[t+9]]+"-"+gi[e[t+10]]+gi[e[t+11]]+gi[e[t+12]]+gi[e[t+13]]+gi[e[t+14]]+gi[e[t+15]]).toLowerCase()}let gc;const np=new Uint8Array(16);function sp(){if(!gc){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");gc=crypto.getRandomValues.bind(crypto)}return gc(np)}const ap=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),au={randomUUID:ap};function Rr(e,t,i){var d;if(au.randomUUID&&!e)return au.randomUUID();e=e||{};const s=e.random??((d=e.rng)==null?void 0:d.call(e))??sp();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,rp(s)}const{min:op,max:lp}=Math,Qn=(e,t=0,i=1)=>op(lp(t,e),i),hh=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=Qn(e[t],0,255)):t===3&&(e[t]=Qn(e[t],0,1));return e},pf={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])pf[`[object ${e}]`]=e.toLowerCase();function fe(e){return pf[Object.prototype.toString.call(e)]||"object"}const he=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):fe(e[0])=="object"&&t?t.split("").filter(i=>e[0][i]!==void 0).map(i=>e[0][i]):e[0].slice(0),sa=e=>{if(e.length<2)return null;const t=e.length-1;return fe(e[t])=="string"?e[t].toLowerCase():null},{PI:bl,min:gf,max:mf}=Math,tr=e=>Math.round(e*100)/100,Yc=e=>Math.round(e*100)/100,en=bl*2,mc=bl/3,cp=bl/180,hp=180/bl;function vf(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const oe={format:{},autodetect:[]};class It{constructor(...t){const i=this;if(fe(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let s=sa(t),d=!1;if(!s){d=!0,oe.sorted||(oe.autodetect=oe.autodetect.sort((p,v)=>v.p-p.p),oe.sorted=!0);for(let p of oe.autodetect)if(s=p.test(...t),s)break}if(oe.format[s]){const p=oe.format[s].apply(null,d?t:t.slice(0,-1));i._rgb=hh(p)}else throw new Error("unknown format: "+t);i._rgb.length===3&&i._rgb.push(1)}toString(){return fe(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const up="3.1.2",de=(...e)=>new It(...e);de.version=up;const ea={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},fp=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,dp=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,bf=e=>{if(e.match(fp)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),i=t>>16,s=t>>8&255,d=t&255;return[i,s,d,1]}if(e.match(dp)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),i=t>>24&255,s=t>>16&255,d=t>>8&255,p=Math.round((t&255)/255*100)/100;return[i,s,d,p]}throw new Error(`unknown hex color: ${e}`)},{round:Xo}=Math,yf=(...e)=>{let[t,i,s,d]=he(e,"rgba"),p=sa(e)||"auto";d===void 0&&(d=1),p==="auto"&&(p=d<1?"rgba":"rgb"),t=Xo(t),i=Xo(i),s=Xo(s);let o="000000"+(t<<16|i<<8|s).toString(16);o=o.substr(o.length-6);let r="0"+Xo(d*255).toString(16);switch(r=r.substr(r.length-2),p.toLowerCase()){case"rgba":return`#${o}${r}`;case"argb":return`#${r}${o}`;default:return`#${o}`}};It.prototype.name=function(){const e=yf(this._rgb,"rgb");for(let t of Object.keys(ea))if(ea[t]===e)return t.toLowerCase();return e};oe.format.named=e=>{if(e=e.toLowerCase(),ea[e])return bf(ea[e]);throw new Error("unknown color name: "+e)};oe.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&fe(e)==="string"&&ea[e.toLowerCase()])return"named"}});It.prototype.alpha=function(e,t=!1){return e!==void 0&&fe(e)==="number"?t?(this._rgb[3]=e,this):new It([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};It.prototype.clipped=function(){return this._rgb._clipped||!1};const Dr={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},pp=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function nn(e){const t=pp.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);Dr.labWhitePoint=e,Dr.Xn=t[0],Dr.Zn=t[1]}function Ga(){return Dr.labWhitePoint}const uh=(...e)=>{e=he(e,"lab");const[t,i,s]=e,[d,p,v]=gp(t,i,s),[o,r,c]=wf(d,p,v);return[o,r,c,e.length>3?e[3]:1]},gp=(e,t,i)=>{const{kE:s,kK:d,kKE:p,Xn:v,Yn:o,Zn:r}=Dr,c=(e+16)/116,u=.002*t+c,a=c-.005*i,l=u*u*u,n=a*a*a,h=l>s?l:(116*u-16)/d,g=e>p?Math.pow((e+16)/116,3):e/d,f=n>s?n:(116*a-16)/d,m=h*v,y=g*o,x=f*r;return[m,y,x]},vc=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},wf=(e,t,i)=>{const{MtxAdaptMa:s,MtxAdaptMaI:d,MtxXYZ2RGB:p,RefWhiteRGB:v,Xn:o,Yn:r,Zn:c}=Dr,u=o*s.m00+r*s.m10+c*s.m20,a=o*s.m01+r*s.m11+c*s.m21,l=o*s.m02+r*s.m12+c*s.m22,n=v.X*s.m00+v.Y*s.m10+v.Z*s.m20,h=v.X*s.m01+v.Y*s.m11+v.Z*s.m21,g=v.X*s.m02+v.Y*s.m12+v.Z*s.m22,f=(e*s.m00+t*s.m10+i*s.m20)*(n/u),m=(e*s.m01+t*s.m11+i*s.m21)*(h/a),y=(e*s.m02+t*s.m12+i*s.m22)*(g/l),x=f*d.m00+m*d.m10+y*d.m20,S=f*d.m01+m*d.m11+y*d.m21,A=f*d.m02+m*d.m12+y*d.m22,M=vc(x*p.m00+S*p.m10+A*p.m20),T=vc(x*p.m01+S*p.m11+A*p.m21),N=vc(x*p.m02+S*p.m12+A*p.m22);return[M*255,T*255,N*255]},fh=(...e)=>{const[t,i,s,...d]=he(e,"rgb"),[p,v,o]=xf(t,i,s),[r,c,u]=mp(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]};function mp(e,t,i){const{Xn:s,Yn:d,Zn:p,kE:v,kK:o}=Dr,r=e/s,c=t/d,u=i/p,a=r>v?Math.pow(r,1/3):(o*r+16)/116,l=c>v?Math.pow(c,1/3):(o*c+16)/116,n=u>v?Math.pow(u,1/3):(o*u+16)/116;return[116*l-16,500*(a-l),200*(l-n)]}function bc(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const xf=(e,t,i)=>{e=bc(e/255),t=bc(t/255),i=bc(i/255);const{MtxRGB2XYZ:s,MtxAdaptMa:d,MtxAdaptMaI:p,Xn:v,Yn:o,Zn:r,As:c,Bs:u,Cs:a}=Dr;let l=e*s.m00+t*s.m10+i*s.m20,n=e*s.m01+t*s.m11+i*s.m21,h=e*s.m02+t*s.m12+i*s.m22;const g=v*d.m00+o*d.m10+r*d.m20,f=v*d.m01+o*d.m11+r*d.m21,m=v*d.m02+o*d.m12+r*d.m22;let y=l*d.m00+n*d.m10+h*d.m20,x=l*d.m01+n*d.m11+h*d.m21,S=l*d.m02+n*d.m12+h*d.m22;return y*=g/c,x*=f/u,S*=m/a,l=y*p.m00+x*p.m10+S*p.m20,n=y*p.m01+x*p.m11+S*p.m21,h=y*p.m02+x*p.m12+S*p.m22,[l,n,h]};It.prototype.lab=function(){return fh(this._rgb)};const vp=(...e)=>new It(...e,"lab");Object.assign(de,{lab:vp,getLabWhitePoint:Ga,setLabWhitePoint:nn});oe.format.lab=uh;oe.autodetect.push({p:2,test:(...e)=>{if(e=he(e,"lab"),fe(e)==="array"&&e.length===3)return"lab"}});It.prototype.darken=function(e=1){const t=this,i=t.lab();return i[0]-=Dr.Kn*e,new It(i,"lab").alpha(t.alpha(),!0)};It.prototype.brighten=function(e=1){return this.darken(-e)};It.prototype.darker=It.prototype.darken;It.prototype.brighter=It.prototype.brighten;It.prototype.get=function(e){const[t,i]=e.split("."),s=this[t]();if(i){const d=t.indexOf(i)-(t.substr(0,2)==="ok"?2:0);if(d>-1)return s[d];throw new Error(`unknown channel ${i} in mode ${t}`)}else return s};const{pow:bp}=Math,yp=1e-7,wp=20;It.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&fe(e)==="number"){if(e===0)return new It([0,0,0,this._rgb[3]],"rgb");if(e===1)return new It([255,255,255,this._rgb[3]],"rgb");let i=this.luminance(),s=wp;const d=(v,o)=>{const r=v.interpolate(o,.5,t),c=r.luminance();return Math.abs(e-c)<yp||!s--?r:c>e?d(v,r):d(r,o)},p=(i>e?d(new It([0,0,0]),this):d(this,new It([255,255,255]))).rgb();return new It([...p,this._rgb[3]])}return xp(...this._rgb.slice(0,3))};const xp=(e,t,i)=>(e=yc(e),t=yc(t),i=yc(i),.2126*e+.7152*t+.0722*i),yc=e=>(e/=255,e<=.03928?e/12.92:bp((e+.055)/1.055,2.4)),Ci={},ia=(e,t,i=.5,...s)=>{let d=s[0]||"lrgb";if(!Ci[d]&&!s.length&&(d=Object.keys(Ci)[0]),!Ci[d])throw new Error(`interpolation mode ${d} is not defined`);return fe(e)!=="object"&&(e=new It(e)),fe(t)!=="object"&&(t=new It(t)),Ci[d](e,t,i).alpha(e.alpha()+i*(t.alpha()-e.alpha()))};It.prototype.mix=It.prototype.interpolate=function(e,t=.5,...i){return ia(this,e,t,...i)};It.prototype.premultiply=function(e=!1){const t=this._rgb,i=t[3];return e?(this._rgb=[t[0]*i,t[1]*i,t[2]*i,i],this):new It([t[0]*i,t[1]*i,t[2]*i,i],"rgb")};const{sin:_p,cos:Sp}=Math,_f=(...e)=>{let[t,i,s]=he(e,"lch");return isNaN(s)&&(s=0),s=s*cp,[t,Sp(s)*i,_p(s)*i]},dh=(...e)=>{e=he(e,"lch");const[t,i,s]=e,[d,p,v]=_f(t,i,s),[o,r,c]=uh(d,p,v);return[o,r,c,e.length>3?e[3]:1]},Cp=(...e)=>{const t=vf(he(e,"hcl"));return dh(...t)},{sqrt:Ap,atan2:kp,round:Lp}=Math,Sf=(...e)=>{const[t,i,s]=he(e,"lab"),d=Ap(i*i+s*s);let p=(kp(s,i)*hp+360)%360;return Lp(d*1e4)===0&&(p=Number.NaN),[t,d,p]},ph=(...e)=>{const[t,i,s,...d]=he(e,"rgb"),[p,v,o]=fh(t,i,s),[r,c,u]=Sf(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]};It.prototype.lch=function(){return ph(this._rgb)};It.prototype.hcl=function(){return vf(ph(this._rgb))};const Tp=(...e)=>new It(...e,"lch"),Pp=(...e)=>new It(...e,"hcl");Object.assign(de,{lch:Tp,hcl:Pp});oe.format.lch=dh;oe.format.hcl=Cp;["lch","hcl"].forEach(e=>oe.autodetect.push({p:2,test:(...t)=>{if(t=he(t,e),fe(t)==="array"&&t.length===3)return e}}));It.prototype.saturate=function(e=1){const t=this,i=t.lch();return i[1]+=Dr.Kn*e,i[1]<0&&(i[1]=0),new It(i,"lch").alpha(t.alpha(),!0)};It.prototype.desaturate=function(e=1){return this.saturate(-e)};It.prototype.set=function(e,t,i=!1){const[s,d]=e.split("."),p=this[s]();if(d){const v=s.indexOf(d)-(s.substr(0,2)==="ok"?2:0);if(v>-1){if(fe(t)=="string")switch(t.charAt(0)){case"+":p[v]+=+t;break;case"-":p[v]+=+t;break;case"*":p[v]*=+t.substr(1);break;case"/":p[v]/=+t.substr(1);break;default:p[v]=+t}else if(fe(t)==="number")p[v]=t;else throw new Error("unsupported value for Color.set");const o=new It(p,s);return i?(this._rgb=o._rgb,this):o}throw new Error(`unknown channel ${d} in mode ${s}`)}else return p};It.prototype.tint=function(e=.5,...t){return ia(this,"white",e,...t)};It.prototype.shade=function(e=.5,...t){return ia(this,"black",e,...t)};const Op=(e,t,i)=>{const s=e._rgb,d=t._rgb;return new It(s[0]+i*(d[0]-s[0]),s[1]+i*(d[1]-s[1]),s[2]+i*(d[2]-s[2]),"rgb")};Ci.rgb=Op;const{sqrt:wc,pow:Es}=Math,Mp=(e,t,i)=>{const[s,d,p]=e._rgb,[v,o,r]=t._rgb;return new It(wc(Es(s,2)*(1-i)+Es(v,2)*i),wc(Es(d,2)*(1-i)+Es(o,2)*i),wc(Es(p,2)*(1-i)+Es(r,2)*i),"rgb")};Ci.lrgb=Mp;const Np=(e,t,i)=>{const s=e.lab(),d=t.lab();return new It(s[0]+i*(d[0]-s[0]),s[1]+i*(d[1]-s[1]),s[2]+i*(d[2]-s[2]),"lab")};Ci.lab=Np;const aa=(e,t,i,s)=>{let d,p;s==="hsl"?(d=e.hsl(),p=t.hsl()):s==="hsv"?(d=e.hsv(),p=t.hsv()):s==="hcg"?(d=e.hcg(),p=t.hcg()):s==="hsi"?(d=e.hsi(),p=t.hsi()):s==="lch"||s==="hcl"?(s="hcl",d=e.hcl(),p=t.hcl()):s==="oklch"&&(d=e.oklch().reverse(),p=t.oklch().reverse());let v,o,r,c,u,a;(s.substr(0,1)==="h"||s==="oklch")&&([v,r,u]=d,[o,c,a]=p);let l,n,h,g;return!isNaN(v)&&!isNaN(o)?(o>v&&o-v>180?g=o-(v+360):o<v&&v-o>180?g=o+360-v:g=o-v,n=v+i*g):isNaN(v)?isNaN(o)?n=Number.NaN:(n=o,(u==1||u==0)&&s!="hsv"&&(l=c)):(n=v,(a==1||a==0)&&s!="hsv"&&(l=r)),l===void 0&&(l=r+i*(c-r)),h=u+i*(a-u),s==="oklch"?new It([h,l,n],s):new It([n,l,h],s)},Cf=(e,t,i)=>aa(e,t,i,"lch");Ci.lch=Cf;Ci.hcl=Cf;const Fp=e=>{if(fe(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,i=e>>8&255,s=e&255;return[t,i,s,1]}throw new Error("unknown num color: "+e)},Ep=(...e)=>{const[t,i,s]=he(e,"rgb");return(t<<16)+(i<<8)+s};It.prototype.num=function(){return Ep(this._rgb)};const Ip=(...e)=>new It(...e,"num");Object.assign(de,{num:Ip});oe.format.num=Fp;oe.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&fe(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const jp=(e,t,i)=>{const s=e.num(),d=t.num();return new It(s+i*(d-s),"num")};Ci.num=jp;const{floor:Dp}=Math,Bp=(...e)=>{e=he(e,"hcg");let[t,i,s]=e,d,p,v;s=s*255;const o=i*255;if(i===0)d=p=v=s;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const r=Dp(t),c=t-r,u=s*(1-i),a=u+o*(1-c),l=u+o*c,n=u+o;switch(r){case 0:[d,p,v]=[n,l,u];break;case 1:[d,p,v]=[a,n,u];break;case 2:[d,p,v]=[u,n,l];break;case 3:[d,p,v]=[u,a,n];break;case 4:[d,p,v]=[l,u,n];break;case 5:[d,p,v]=[n,u,a];break}}return[d,p,v,e.length>3?e[3]:1]},Rp=(...e)=>{const[t,i,s]=he(e,"rgb"),d=gf(t,i,s),p=mf(t,i,s),v=p-d,o=v*100/255,r=d/(255-v)*100;let c;return v===0?c=Number.NaN:(t===p&&(c=(i-s)/v),i===p&&(c=2+(s-t)/v),s===p&&(c=4+(t-i)/v),c*=60,c<0&&(c+=360)),[c,o,r]};It.prototype.hcg=function(){return Rp(this._rgb)};const zp=(...e)=>new It(...e,"hcg");de.hcg=zp;oe.format.hcg=Bp;oe.autodetect.push({p:1,test:(...e)=>{if(e=he(e,"hcg"),fe(e)==="array"&&e.length===3)return"hcg"}});const qp=(e,t,i)=>aa(e,t,i,"hcg");Ci.hcg=qp;const{cos:Is}=Math,Up=(...e)=>{e=he(e,"hsi");let[t,i,s]=e,d,p,v;return isNaN(t)&&(t=0),isNaN(i)&&(i=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(v=(1-i)/3,d=(1+i*Is(en*t)/Is(mc-en*t))/3,p=1-(v+d)):t<2/3?(t-=1/3,d=(1-i)/3,p=(1+i*Is(en*t)/Is(mc-en*t))/3,v=1-(d+p)):(t-=2/3,p=(1-i)/3,v=(1+i*Is(en*t)/Is(mc-en*t))/3,d=1-(p+v)),d=Qn(s*d*3),p=Qn(s*p*3),v=Qn(s*v*3),[d*255,p*255,v*255,e.length>3?e[3]:1]},{min:Wp,sqrt:Hp,acos:Yp}=Math,Vp=(...e)=>{let[t,i,s]=he(e,"rgb");t/=255,i/=255,s/=255;let d;const p=Wp(t,i,s),v=(t+i+s)/3,o=v>0?1-p/v:0;return o===0?d=NaN:(d=(t-i+(t-s))/2,d/=Hp((t-i)*(t-i)+(t-s)*(i-s)),d=Yp(d),s>i&&(d=en-d),d/=en),[d*360,o,v]};It.prototype.hsi=function(){return Vp(this._rgb)};const Xp=(...e)=>new It(...e,"hsi");de.hsi=Xp;oe.format.hsi=Up;oe.autodetect.push({p:2,test:(...e)=>{if(e=he(e,"hsi"),fe(e)==="array"&&e.length===3)return"hsi"}});const Gp=(e,t,i)=>aa(e,t,i,"hsi");Ci.hsi=Gp;const Vc=(...e)=>{e=he(e,"hsl");const[t,i,s]=e;let d,p,v;if(i===0)d=p=v=s*255;else{const o=[0,0,0],r=[0,0,0],c=s<.5?s*(1+i):s+i-s*i,u=2*s-c,a=t/360;o[0]=a+1/3,o[1]=a,o[2]=a-1/3;for(let l=0;l<3;l++)o[l]<0&&(o[l]+=1),o[l]>1&&(o[l]-=1),6*o[l]<1?r[l]=u+(c-u)*6*o[l]:2*o[l]<1?r[l]=c:3*o[l]<2?r[l]=u+(c-u)*(2/3-o[l])*6:r[l]=u;[d,p,v]=[r[0]*255,r[1]*255,r[2]*255]}return e.length>3?[d,p,v,e[3]]:[d,p,v,1]},Af=(...e)=>{e=he(e,"rgba");let[t,i,s]=e;t/=255,i/=255,s/=255;const d=gf(t,i,s),p=mf(t,i,s),v=(p+d)/2;let o,r;return p===d?(o=0,r=Number.NaN):o=v<.5?(p-d)/(p+d):(p-d)/(2-p-d),t==p?r=(i-s)/(p-d):i==p?r=2+(s-t)/(p-d):s==p&&(r=4+(t-i)/(p-d)),r*=60,r<0&&(r+=360),e.length>3&&e[3]!==void 0?[r,o,v,e[3]]:[r,o,v]};It.prototype.hsl=function(){return Af(this._rgb)};const $p=(...e)=>new It(...e,"hsl");de.hsl=$p;oe.format.hsl=Vc;oe.autodetect.push({p:2,test:(...e)=>{if(e=he(e,"hsl"),fe(e)==="array"&&e.length===3)return"hsl"}});const Kp=(e,t,i)=>aa(e,t,i,"hsl");Ci.hsl=Kp;const{floor:Jp}=Math,Zp=(...e)=>{e=he(e,"hsv");let[t,i,s]=e,d,p,v;if(s*=255,i===0)d=p=v=s;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const o=Jp(t),r=t-o,c=s*(1-i),u=s*(1-i*r),a=s*(1-i*(1-r));switch(o){case 0:[d,p,v]=[s,a,c];break;case 1:[d,p,v]=[u,s,c];break;case 2:[d,p,v]=[c,s,a];break;case 3:[d,p,v]=[c,u,s];break;case 4:[d,p,v]=[a,c,s];break;case 5:[d,p,v]=[s,c,u];break}}return[d,p,v,e.length>3?e[3]:1]},{min:Qp,max:t1}=Math,e1=(...e)=>{e=he(e,"rgb");let[t,i,s]=e;const d=Qp(t,i,s),p=t1(t,i,s),v=p-d;let o,r,c;return c=p/255,p===0?(o=Number.NaN,r=0):(r=v/p,t===p&&(o=(i-s)/v),i===p&&(o=2+(s-t)/v),s===p&&(o=4+(t-i)/v),o*=60,o<0&&(o+=360)),[o,r,c]};It.prototype.hsv=function(){return e1(this._rgb)};const i1=(...e)=>new It(...e,"hsv");de.hsv=i1;oe.format.hsv=Zp;oe.autodetect.push({p:2,test:(...e)=>{if(e=he(e,"hsv"),fe(e)==="array"&&e.length===3)return"hsv"}});const r1=(e,t,i)=>aa(e,t,i,"hsv");Ci.hsv=r1;function dl(e,t){let i=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(v=>[v]));let s=t[0].length,d=t[0].map((v,o)=>t.map(r=>r[o])),p=e.map(v=>d.map(o=>Array.isArray(v)?v.reduce((r,c,u)=>r+c*(o[u]||0),0):o.reduce((r,c)=>r+c*v,0)));return i===1&&(p=p[0]),s===1?p.map(v=>v[0]):p}const gh=(...e)=>{e=he(e,"lab");const[t,i,s,...d]=e,[p,v,o]=n1([t,i,s]),[r,c,u]=wf(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]};function n1(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],i=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],s=dl(i,e);return dl(t,s.map(d=>d**3))}const mh=(...e)=>{const[t,i,s,...d]=he(e,"rgb"),p=xf(t,i,s);return[...s1(p),...d.length>0&&d[0]<1?[d[0]]:[]]};function s1(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],i=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],s=dl(t,e);return dl(i,s.map(d=>Math.cbrt(d)))}It.prototype.oklab=function(){return mh(this._rgb)};const a1=(...e)=>new It(...e,"oklab");Object.assign(de,{oklab:a1});oe.format.oklab=gh;oe.autodetect.push({p:2,test:(...e)=>{if(e=he(e,"oklab"),fe(e)==="array"&&e.length===3)return"oklab"}});const o1=(e,t,i)=>{const s=e.oklab(),d=t.oklab();return new It(s[0]+i*(d[0]-s[0]),s[1]+i*(d[1]-s[1]),s[2]+i*(d[2]-s[2]),"oklab")};Ci.oklab=o1;const l1=(e,t,i)=>aa(e,t,i,"oklch");Ci.oklch=l1;const{pow:xc,sqrt:_c,PI:Sc,cos:ou,sin:lu,atan2:c1}=Math,h1=(e,t="lrgb",i=null)=>{const s=e.length;i||(i=Array.from(new Array(s)).map(()=>1));const d=s/i.reduce(function(a,l){return a+l});if(i.forEach((a,l)=>{i[l]*=d}),e=e.map(a=>new It(a)),t==="lrgb")return u1(e,i);const p=e.shift(),v=p.get(t),o=[];let r=0,c=0;for(let a=0;a<v.length;a++)if(v[a]=(v[a]||0)*i[0],o.push(isNaN(v[a])?0:i[0]),t.charAt(a)==="h"&&!isNaN(v[a])){const l=v[a]/180*Sc;r+=ou(l)*i[0],c+=lu(l)*i[0]}let u=p.alpha()*i[0];e.forEach((a,l)=>{const n=a.get(t);u+=a.alpha()*i[l+1];for(let h=0;h<v.length;h++)if(!isNaN(n[h]))if(o[h]+=i[l+1],t.charAt(h)==="h"){const g=n[h]/180*Sc;r+=ou(g)*i[l+1],c+=lu(g)*i[l+1]}else v[h]+=n[h]*i[l+1]});for(let a=0;a<v.length;a++)if(t.charAt(a)==="h"){let l=c1(c/o[a],r/o[a])/Sc*180;for(;l<0;)l+=360;for(;l>=360;)l-=360;v[a]=l}else v[a]=v[a]/o[a];return u/=s,new It(v,t).alpha(u>.99999?1:u,!0)},u1=(e,t)=>{const i=e.length,s=[0,0,0,0];for(let d=0;d<e.length;d++){const p=e[d],v=t[d]/i,o=p._rgb;s[0]+=xc(o[0],2)*v,s[1]+=xc(o[1],2)*v,s[2]+=xc(o[2],2)*v,s[3]+=o[3]*v}return s[0]=_c(s[0]),s[1]=_c(s[1]),s[2]=_c(s[2]),s[3]>.9999999&&(s[3]=1),new It(hh(s))},{pow:f1}=Math;function pl(e){let t="rgb",i=de("#ccc"),s=0,d=[0,1],p=[],v=[0,0],o=!1,r=[],c=!1,u=0,a=1,l=!1,n={},h=!0,g=1;const f=function(T){if(T=T||["#fff","#000"],T&&fe(T)==="string"&&de.brewer&&de.brewer[T.toLowerCase()]&&(T=de.brewer[T.toLowerCase()]),fe(T)==="array"){T.length===1&&(T=[T[0],T[0]]),T=T.slice(0);for(let N=0;N<T.length;N++)T[N]=de(T[N]);p.length=0;for(let N=0;N<T.length;N++)p.push(N/(T.length-1))}return A(),r=T},m=function(T){if(o!=null){const N=o.length-1;let W=0;for(;W<N&&T>=o[W];)W++;return W-1}return 0};let y=T=>T,x=T=>T;const S=function(T,N){let W,K;if(N==null&&(N=!1),isNaN(T)||T===null)return i;N?K=T:o&&o.length>2?K=m(T)/(o.length-2):a!==u?K=(T-u)/(a-u):K=1,K=x(K),N||(K=y(K)),g!==1&&(K=f1(K,g)),K=v[0]+K*(1-v[0]-v[1]),K=Qn(K,0,1);const P=Math.floor(K*1e4);if(h&&n[P])W=n[P];else{if(fe(r)==="array")for(let I=0;I<p.length;I++){const J=p[I];if(K<=J){W=r[I];break}if(K>=J&&I===p.length-1){W=r[I];break}if(K>J&&K<p[I+1]){K=(K-J)/(p[I+1]-J),W=de.interpolate(r[I],r[I+1],K,t);break}}else fe(r)==="function"&&(W=r(K));h&&(n[P]=W)}return W};var A=()=>n={};f(e);const M=function(T){const N=de(S(T));return c&&N[c]?N[c]():N};return M.classes=function(T){if(T!=null){if(fe(T)==="array")o=T,d=[T[0],T[T.length-1]];else{const N=de.analyze(d);T===0?o=[N.min,N.max]:o=de.limits(N,"e",T)}return M}return o},M.domain=function(T){if(!arguments.length)return d;u=T[0],a=T[T.length-1],p=[];const N=r.length;if(T.length===N&&u!==a)for(let W of Array.from(T))p.push((W-u)/(a-u));else{for(let W=0;W<N;W++)p.push(W/(N-1));if(T.length>2){const W=T.map((P,I)=>I/(T.length-1)),K=T.map(P=>(P-u)/(a-u));K.every((P,I)=>W[I]===P)||(x=P=>{if(P<=0||P>=1)return P;let I=0;for(;P>=K[I+1];)I++;const J=(P-K[I])/(K[I+1]-K[I]);return W[I]+J*(W[I+1]-W[I])})}}return d=[u,a],M},M.mode=function(T){return arguments.length?(t=T,A(),M):t},M.range=function(T,N){return f(T),M},M.out=function(T){return c=T,M},M.spread=function(T){return arguments.length?(s=T,M):s},M.correctLightness=function(T){return T==null&&(T=!0),l=T,A(),l?y=function(N){const W=S(0,!0).lab()[0],K=S(1,!0).lab()[0],P=W>K;let I=S(N,!0).lab()[0];const J=W+(K-W)*N;let V=I-J,rt=0,at=1,dt=20;for(;Math.abs(V)>.01&&dt-- >0;)(function(){return P&&(V*=-1),V<0?(rt=N,N+=(at-N)*.5):(at=N,N+=(rt-N)*.5),I=S(N,!0).lab()[0],V=I-J})();return N}:y=N=>N,M},M.padding=function(T){return T!=null?(fe(T)==="number"&&(T=[T,T]),v=T,M):v},M.colors=function(T,N){arguments.length<2&&(N="hex");let W=[];if(arguments.length===0)W=r.slice(0);else if(T===1)W=[M(.5)];else if(T>1){const K=d[0],P=d[1]-K;W=d1(0,T).map(I=>M(K+I/(T-1)*P))}else{e=[];let K=[];if(o&&o.length>2)for(let P=1,I=o.length,J=1<=I;J?P<I:P>I;J?P++:P--)K.push((o[P-1]+o[P])*.5);else K=d;W=K.map(P=>M(P))}return de[N]&&(W=W.map(K=>K[N]())),W},M.cache=function(T){return T!=null?(h=T,M):h},M.gamma=function(T){return T!=null?(g=T,M):g},M.nodata=function(T){return T!=null?(i=de(T),M):i},M}function d1(e,t,i){let s=[],d=e<t,p=t;for(let v=e;d?v<p:v>p;d?v++:v--)s.push(v);return s}const p1=function(e){let t=[1,1];for(let i=1;i<e;i++){let s=[1];for(let d=1;d<=t.length;d++)s[d]=(t[d]||0)+t[d-1];t=s}return t},g1=function(e){let t,i,s,d;if(e=e.map(p=>new It(p)),e.length===2)[i,s]=e.map(p=>p.lab()),t=function(p){const v=[0,1,2].map(o=>i[o]+p*(s[o]-i[o]));return new It(v,"lab")};else if(e.length===3)[i,s,d]=e.map(p=>p.lab()),t=function(p){const v=[0,1,2].map(o=>(1-p)*(1-p)*i[o]+2*(1-p)*p*s[o]+p*p*d[o]);return new It(v,"lab")};else if(e.length===4){let p;[i,s,d,p]=e.map(v=>v.lab()),t=function(v){const o=[0,1,2].map(r=>(1-v)*(1-v)*(1-v)*i[r]+3*(1-v)*(1-v)*v*s[r]+3*(1-v)*v*v*d[r]+v*v*v*p[r]);return new It(o,"lab")}}else if(e.length>=5){let p,v,o;p=e.map(r=>r.lab()),o=e.length-1,v=p1(o),t=function(r){const c=1-r,u=[0,1,2].map(a=>p.reduce((l,n,h)=>l+v[h]*c**(o-h)*r**h*n[a],0));return new It(u,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},m1=e=>{const t=g1(e);return t.scale=()=>pl(t),t},{round:kf}=Math;It.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(kf)};It.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,i)=>i<3?e===!1?t:kf(t):t)};const v1=(...e)=>new It(...e,"rgb");Object.assign(de,{rgb:v1});oe.format.rgb=(...e)=>{const t=he(e,"rgba");return t[3]===void 0&&(t[3]=1),t};oe.autodetect.push({p:3,test:(...e)=>{if(e=he(e,"rgba"),fe(e)==="array"&&(e.length===3||e.length===4&&fe(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const yr=(e,t,i)=>{if(!yr[i])throw new Error("unknown blend mode "+i);return yr[i](e,t)},Nn=e=>(t,i)=>{const s=de(i).rgb(),d=de(t).rgb();return de.rgb(e(s,d))},Fn=e=>(t,i)=>{const s=[];return s[0]=e(t[0],i[0]),s[1]=e(t[1],i[1]),s[2]=e(t[2],i[2]),s},b1=e=>e,y1=(e,t)=>e*t/255,w1=(e,t)=>e>t?t:e,x1=(e,t)=>e>t?e:t,_1=(e,t)=>255*(1-(1-e/255)*(1-t/255)),S1=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),C1=(e,t)=>255*(1-(1-t/255)/(e/255)),A1=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);yr.normal=Nn(Fn(b1));yr.multiply=Nn(Fn(y1));yr.screen=Nn(Fn(_1));yr.overlay=Nn(Fn(S1));yr.darken=Nn(Fn(w1));yr.lighten=Nn(Fn(x1));yr.dodge=Nn(Fn(A1));yr.burn=Nn(Fn(C1));const{pow:k1,sin:L1,cos:T1}=Math;function P1(e=300,t=-1.5,i=1,s=1,d=[0,1]){let p=0,v;fe(d)==="array"?v=d[1]-d[0]:(v=0,d=[d,d]);const o=function(r){const c=en*((e+120)/360+t*r),u=k1(d[0]+v*r,s),l=(p!==0?i[0]+r*p:i)*u*(1-u)/2,n=T1(c),h=L1(c),g=u+l*(-.14861*n+1.78277*h),f=u+l*(-.29227*n-.90649*h),m=u+l*(1.97294*n);return de(hh([g*255,f*255,m*255,1]))};return o.start=function(r){return r==null?e:(e=r,o)},o.rotations=function(r){return r==null?t:(t=r,o)},o.gamma=function(r){return r==null?s:(s=r,o)},o.hue=function(r){return r==null?i:(i=r,fe(i)==="array"?(p=i[1]-i[0],p===0&&(i=i[1])):p=0,o)},o.lightness=function(r){return r==null?d:(fe(r)==="array"?(d=r,v=r[1]-r[0]):(d=[r,r],v=0),o)},o.scale=()=>de.scale(o),o.hue(i),o}const O1="0123456789abcdef",{floor:M1,random:N1}=Math,F1=()=>{let e="#";for(let t=0;t<6;t++)e+=O1.charAt(M1(N1()*16));return new It(e,"hex")},{log:cu,pow:E1,floor:I1,abs:j1}=Math;function Lf(e,t=null){const i={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return fe(e)==="object"&&(e=Object.values(e)),e.forEach(s=>{t&&fe(s)==="object"&&(s=s[t]),s!=null&&!isNaN(s)&&(i.values.push(s),i.sum+=s,s<i.min&&(i.min=s),s>i.max&&(i.max=s),i.count+=1)}),i.domain=[i.min,i.max],i.limits=(s,d)=>Tf(i,s,d),i}function Tf(e,t="equal",i=7){fe(e)=="array"&&(e=Lf(e));const{min:s,max:d}=e,p=e.values.sort((o,r)=>o-r);if(i===1)return[s,d];const v=[];if(t.substr(0,1)==="c"&&(v.push(s),v.push(d)),t.substr(0,1)==="e"){v.push(s);for(let o=1;o<i;o++)v.push(s+o/i*(d-s));v.push(d)}else if(t.substr(0,1)==="l"){if(s<=0)throw new Error("Logarithmic scales are only possible for values > 0");const o=Math.LOG10E*cu(s),r=Math.LOG10E*cu(d);v.push(s);for(let c=1;c<i;c++)v.push(E1(10,o+c/i*(r-o)));v.push(d)}else if(t.substr(0,1)==="q"){v.push(s);for(let o=1;o<i;o++){const r=(p.length-1)*o/i,c=I1(r);if(c===r)v.push(p[c]);else{const u=r-c;v.push(p[c]*(1-u)+p[c+1]*u)}}v.push(d)}else if(t.substr(0,1)==="k"){let o;const r=p.length,c=new Array(r),u=new Array(i);let a=!0,l=0,n=null;n=[],n.push(s);for(let f=1;f<i;f++)n.push(s+f/i*(d-s));for(n.push(d);a;){for(let m=0;m<i;m++)u[m]=0;for(let m=0;m<r;m++){const y=p[m];let x=Number.MAX_VALUE,S;for(let A=0;A<i;A++){const M=j1(n[A]-y);M<x&&(x=M,S=A),u[S]++,c[m]=S}}const f=new Array(i);for(let m=0;m<i;m++)f[m]=null;for(let m=0;m<r;m++)o=c[m],f[o]===null?f[o]=p[m]:f[o]+=p[m];for(let m=0;m<i;m++)f[m]*=1/u[m];a=!1;for(let m=0;m<i;m++)if(f[m]!==n[m]){a=!0;break}n=f,l++,l>200&&(a=!1)}const h={};for(let f=0;f<i;f++)h[f]=[];for(let f=0;f<r;f++)o=c[f],h[o].push(p[f]);let g=[];for(let f=0;f<i;f++)g.push(h[f][0]),g.push(h[f][h[f].length-1]);g=g.sort((f,m)=>f-m),v.push(g[0]);for(let f=1;f<g.length;f+=2){const m=g[f];!isNaN(m)&&v.indexOf(m)===-1&&v.push(m)}}return v}const D1=(e,t)=>{e=new It(e),t=new It(t);const i=e.luminance(),s=t.luminance();return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const hu=.027,B1=5e-4,R1=.1,uu=1.14,Go=.022,fu=1.414,z1=(e,t)=>{e=new It(e),t=new It(t),e.alpha()<1&&(e=ia(t,e,e.alpha(),"rgb"));const i=du(...e.rgb()),s=du(...t.rgb()),d=i>=Go?i:i+Math.pow(Go-i,fu),p=s>=Go?s:s+Math.pow(Go-s,fu),v=Math.pow(p,.56)-Math.pow(d,.57),o=Math.pow(p,.65)-Math.pow(d,.62),r=Math.abs(p-d)<B1?0:d<p?v*uu:o*uu;return(Math.abs(r)<R1?0:r>0?r-hu:r+hu)*100};function du(e,t,i){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(i/255,2.4)}const{sqrt:Zr,pow:ri,min:q1,max:U1,atan2:pu,abs:gu,cos:$o,sin:mu,exp:W1,PI:vu}=Math;function H1(e,t,i=1,s=1,d=1){var p=function(D){return 360*D/(2*vu)},v=function(D){return 2*vu*D/360};e=new It(e),t=new It(t);const[o,r,c]=Array.from(e.lab()),[u,a,l]=Array.from(t.lab()),n=(o+u)/2,h=Zr(ri(r,2)+ri(c,2)),g=Zr(ri(a,2)+ri(l,2)),f=(h+g)/2,m=.5*(1-Zr(ri(f,7)/(ri(f,7)+ri(25,7)))),y=r*(1+m),x=a*(1+m),S=Zr(ri(y,2)+ri(c,2)),A=Zr(ri(x,2)+ri(l,2)),M=(S+A)/2,T=p(pu(c,y)),N=p(pu(l,x)),W=T>=0?T:T+360,K=N>=0?N:N+360,P=gu(W-K)>180?(W+K+360)/2:(W+K)/2,I=1-.17*$o(v(P-30))+.24*$o(v(2*P))+.32*$o(v(3*P+6))-.2*$o(v(4*P-63));let J=K-W;J=gu(J)<=180?J:K<=W?J+360:J-360,J=2*Zr(S*A)*mu(v(J)/2);const V=u-o,rt=A-S,at=1+.015*ri(n-50,2)/Zr(20+ri(n-50,2)),dt=1+.045*M,nt=1+.015*M*I,E=30*W1(-ri((P-275)/25,2)),$=-(2*Zr(ri(M,7)/(ri(M,7)+ri(25,7))))*mu(2*v(E)),k=Zr(ri(V/(i*at),2)+ri(rt/(s*dt),2)+ri(J/(d*nt),2)+$*(rt/(s*dt))*(J/(d*nt)));return U1(0,q1(100,k))}function Y1(e,t,i="lab"){e=new It(e),t=new It(t);const s=e.get(i),d=t.get(i);let p=0;for(let v in s){const o=(s[v]||0)-(d[v]||0);p+=o*o}return Math.sqrt(p)}const V1=(...e)=>{try{return new It(...e),!0}catch{return!1}},X1={cool(){return pl([de.hsl(180,1,.9),de.hsl(250,.7,.4)])},hot(){return pl(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Xc={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pf=Object.keys(Xc),bu=new Map(Pf.map(e=>[e.toLowerCase(),e])),G1=typeof Proxy=="function"?new Proxy(Xc,{get(e,t){const i=t.toLowerCase();if(bu.has(i))return e[bu.get(i)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(Pf)}}):Xc,$1=(...e)=>{e=he(e,"cmyk");const[t,i,s,d]=e,p=e.length>4?e[4]:1;return d===1?[0,0,0,p]:[t>=1?0:255*(1-t)*(1-d),i>=1?0:255*(1-i)*(1-d),s>=1?0:255*(1-s)*(1-d),p]},{max:yu}=Math,K1=(...e)=>{let[t,i,s]=he(e,"rgb");t=t/255,i=i/255,s=s/255;const d=1-yu(t,yu(i,s)),p=d<1?1/(1-d):0,v=(1-t-d)*p,o=(1-i-d)*p,r=(1-s-d)*p;return[v,o,r,d]};It.prototype.cmyk=function(){return K1(this._rgb)};const J1=(...e)=>new It(...e,"cmyk");Object.assign(de,{cmyk:J1});oe.format.cmyk=$1;oe.autodetect.push({p:2,test:(...e)=>{if(e=he(e,"cmyk"),fe(e)==="array"&&e.length===4)return"cmyk"}});const Z1=(...e)=>{const t=he(e,"hsla");let i=sa(e)||"lsa";return t[0]=tr(t[0]||0)+"deg",t[1]=tr(t[1]*100)+"%",t[2]=tr(t[2]*100)+"%",i==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),i="hsla"):t.length=3,`${i.substr(0,3)}(${t.join(" ")})`},Q1=(...e)=>{const t=he(e,"lab");let i=sa(e)||"lab";return t[0]=tr(t[0])+"%",t[1]=tr(t[1]),t[2]=tr(t[2]),i==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},tg=(...e)=>{const t=he(e,"lch");let i=sa(e)||"lab";return t[0]=tr(t[0])+"%",t[1]=tr(t[1]),t[2]=isNaN(t[2])?"none":tr(t[2])+"deg",i==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},eg=(...e)=>{const t=he(e,"lab");return t[0]=tr(t[0]*100)+"%",t[1]=Yc(t[1]),t[2]=Yc(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},Of=(...e)=>{const[t,i,s,...d]=he(e,"rgb"),[p,v,o]=mh(t,i,s),[r,c,u]=Sf(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]},ig=(...e)=>{const t=he(e,"lch");return t[0]=tr(t[0]*100)+"%",t[1]=Yc(t[1]),t[2]=isNaN(t[2])?"none":tr(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:Cc}=Math,rg=(...e)=>{const t=he(e,"rgba");let i=sa(e)||"rgb";if(i.substr(0,3)==="hsl")return Z1(Af(t),i);if(i.substr(0,3)==="lab"){const s=Ga();nn("d50");const d=Q1(fh(t),i);return nn(s),d}if(i.substr(0,3)==="lch"){const s=Ga();nn("d50");const d=tg(ph(t),i);return nn(s),d}return i.substr(0,5)==="oklab"?eg(mh(t)):i.substr(0,5)==="oklch"?ig(Of(t)):(t[0]=Cc(t[0]),t[1]=Cc(t[1]),t[2]=Cc(t[2]),(i==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),i="rgba"),`${i.substr(0,3)}(${t.slice(0,i==="rgb"?3:4).join(" ")})`)},Mf=(...e)=>{e=he(e,"lch");const[t,i,s,...d]=e,[p,v,o]=_f(t,i,s),[r,c,u]=gh(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]},an=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,br=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,gl=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,er=/\s*/.source,oa=/\s+/.source,vh=/\s*,\s*/.source,yl=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,la=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Nf=new RegExp("^rgba?\\("+er+[an,an,an].join(oa)+la+"\\)$"),Ff=new RegExp("^rgb\\("+er+[an,an,an].join(vh)+er+"\\)$"),Ef=new RegExp("^rgba\\("+er+[an,an,an,br].join(vh)+er+"\\)$"),If=new RegExp("^hsla?\\("+er+[yl,gl,gl].join(oa)+la+"\\)$"),jf=new RegExp("^hsl?\\("+er+[yl,gl,gl].join(vh)+er+"\\)$"),Df=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Bf=new RegExp("^lab\\("+er+[br,br,br].join(oa)+la+"\\)$"),Rf=new RegExp("^lch\\("+er+[br,br,yl].join(oa)+la+"\\)$"),zf=new RegExp("^oklab\\("+er+[br,br,br].join(oa)+la+"\\)$"),qf=new RegExp("^oklch\\("+er+[br,br,yl].join(oa)+la+"\\)$"),{round:Uf}=Math,js=e=>e.map((t,i)=>i<=2?Qn(Uf(t),0,255):t),ni=(e,t=0,i=100,s=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,s?e=t+(e+1)*.5*(i-t):e=t+e*(i-t)),+e),Ti=(e,t)=>e==="none"?t:e,bh=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(oe.format.named)try{return oe.format.named(e)}catch{}if((t=e.match(Nf))||(t=e.match(Ff))){let i=t.slice(1,4);for(let d=0;d<3;d++)i[d]=+ni(Ti(i[d],0),0,255);i=js(i);const s=t[4]!==void 0?+ni(t[4],0,1):1;return i[3]=s,i}if(t=e.match(Ef)){const i=t.slice(1,5);for(let s=0;s<4;s++)i[s]=+ni(i[s],0,255);return i}if((t=e.match(If))||(t=e.match(jf))){const i=t.slice(1,4);i[0]=+Ti(i[0].replace("deg",""),0),i[1]=+ni(Ti(i[1],0),0,100)*.01,i[2]=+ni(Ti(i[2],0),0,100)*.01;const s=js(Vc(i)),d=t[4]!==void 0?+ni(t[4],0,1):1;return s[3]=d,s}if(t=e.match(Df)){const i=t.slice(1,4);i[1]*=.01,i[2]*=.01;const s=Vc(i);for(let d=0;d<3;d++)s[d]=Uf(s[d]);return s[3]=+t[4],s}if(t=e.match(Bf)){const i=t.slice(1,4);i[0]=ni(Ti(i[0],0),0,100),i[1]=ni(Ti(i[1],0),-125,125,!0),i[2]=ni(Ti(i[2],0),-125,125,!0);const s=Ga();nn("d50");const d=js(uh(i));nn(s);const p=t[4]!==void 0?+ni(t[4],0,1):1;return d[3]=p,d}if(t=e.match(Rf)){const i=t.slice(1,4);i[0]=ni(i[0],0,100),i[1]=ni(Ti(i[1],0),0,150,!1),i[2]=+Ti(i[2].replace("deg",""),0);const s=Ga();nn("d50");const d=js(dh(i));nn(s);const p=t[4]!==void 0?+ni(t[4],0,1):1;return d[3]=p,d}if(t=e.match(zf)){const i=t.slice(1,4);i[0]=ni(Ti(i[0],0),0,1),i[1]=ni(Ti(i[1],0),-.4,.4,!0),i[2]=ni(Ti(i[2],0),-.4,.4,!0);const s=js(gh(i)),d=t[4]!==void 0?+ni(t[4],0,1):1;return s[3]=d,s}if(t=e.match(qf)){const i=t.slice(1,4);i[0]=ni(Ti(i[0],0),0,1),i[1]=ni(Ti(i[1],0),0,.4,!1),i[2]=+Ti(i[2].replace("deg",""),0);const s=js(Mf(i)),d=t[4]!==void 0?+ni(t[4],0,1):1;return s[3]=d,s}};bh.test=e=>Nf.test(e)||If.test(e)||Bf.test(e)||Rf.test(e)||zf.test(e)||qf.test(e)||Ff.test(e)||Ef.test(e)||jf.test(e)||Df.test(e)||e==="transparent";It.prototype.css=function(e){return rg(this._rgb,e)};const ng=(...e)=>new It(...e,"css");de.css=ng;oe.format.css=bh;oe.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&fe(e)==="string"&&bh.test(e))return"css"}});oe.format.gl=(...e)=>{const t=he(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const sg=(...e)=>new It(...e,"gl");de.gl=sg;It.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};It.prototype.hex=function(e){return yf(this._rgb,e)};const ag=(...e)=>new It(...e,"hex");de.hex=ag;oe.format.hex=bf;oe.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&fe(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:Ko}=Math,Wf=e=>{const t=e/100;let i,s,d;return t<66?(i=255,s=t<6?0:-155.25485562709179-.44596950469579133*(s=t-2)+104.49216199393888*Ko(s),d=t<20?0:-254.76935184120902+.8274096064007395*(d=t-10)+115.67994401066147*Ko(d)):(i=351.97690566805693+.114206453784165*(i=t-55)-40.25366309332127*Ko(i),s=325.4494125711974+.07943456536662342*(s=t-50)-28.0852963507957*Ko(s),d=255),[i,s,d,1]},{round:og}=Math,lg=(...e)=>{const t=he(e,"rgb"),i=t[0],s=t[2];let d=1e3,p=4e4;const v=.4;let o;for(;p-d>v;){o=(p+d)*.5;const r=Wf(o);r[2]/r[0]>=s/i?p=o:d=o}return og(o)};It.prototype.temp=It.prototype.kelvin=It.prototype.temperature=function(){return lg(this._rgb)};const Ac=(...e)=>new It(...e,"temp");Object.assign(de,{temp:Ac,kelvin:Ac,temperature:Ac});oe.format.temp=oe.format.kelvin=oe.format.temperature=Wf;It.prototype.oklch=function(){return Of(this._rgb)};const cg=(...e)=>new It(...e,"oklch");Object.assign(de,{oklch:cg});oe.format.oklch=Mf;oe.autodetect.push({p:2,test:(...e)=>{if(e=he(e,"oklch"),fe(e)==="array"&&e.length===3)return"oklch"}});Object.assign(de,{analyze:Lf,average:h1,bezier:m1,blend:yr,brewer:G1,Color:It,colors:ea,contrast:D1,contrastAPCA:z1,cubehelix:P1,deltaE:H1,distance:Y1,input:oe,interpolate:ia,limits:Tf,mix:ia,random:F1,scale:pl,scales:X1,valid:V1});function ke(e){"@babel/helpers - typeof";return ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(e)}var Si=Uint8Array,Wi=Uint16Array,yh=Int32Array,wl=new Si([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xl=new Si([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gc=new Si([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hf=function(e,t){for(var i=new Wi(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];for(var d=new yh(i[30]),s=1;s<30;++s)for(var p=i[s];p<i[s+1];++p)d[p]=p-i[s]<<5|s;return{b:i,r:d}},Yf=Hf(wl,2),Vf=Yf.b,$c=Yf.r;Vf[28]=258,$c[258]=28;var Xf=Hf(xl,0),hg=Xf.b,wu=Xf.r,Kc=new Wi(32768);for(var Be=0;Be<32768;++Be){var Sn=(Be&43690)>>1|(Be&21845)<<1;Sn=(Sn&52428)>>2|(Sn&13107)<<2,Sn=(Sn&61680)>>4|(Sn&3855)<<4,Kc[Be]=((Sn&65280)>>8|(Sn&255)<<8)>>1}var Br=function(e,t,i){for(var s=e.length,d=0,p=new Wi(t);d<s;++d)e[d]&&++p[e[d]-1];var v=new Wi(t);for(d=1;d<t;++d)v[d]=v[d-1]+p[d-1]<<1;var o;if(i){o=new Wi(1<<t);var r=15-t;for(d=0;d<s;++d)if(e[d])for(var c=d<<4|e[d],u=t-e[d],a=v[e[d]-1]++<<u,l=a|(1<<u)-1;a<=l;++a)o[Kc[a]>>r]=c}else for(o=new Wi(s),d=0;d<s;++d)e[d]&&(o[d]=Kc[v[e[d]-1]++]>>15-e[d]);return o},Pn=new Si(288);for(var Be=0;Be<144;++Be)Pn[Be]=8;for(var Be=144;Be<256;++Be)Pn[Be]=9;for(var Be=256;Be<280;++Be)Pn[Be]=7;for(var Be=280;Be<288;++Be)Pn[Be]=8;var $a=new Si(32);for(var Be=0;Be<32;++Be)$a[Be]=5;var ug=Br(Pn,9,0),fg=Br(Pn,9,1),dg=Br($a,5,0),pg=Br($a,5,1),kc=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},pr=function(e,t,i){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&i},Lc=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},wh=function(e){return(e+7)/8|0},Gf=function(e,t,i){return(i==null||i>e.length)&&(i=e.length),new Si(e.subarray(t,i))},gg=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],mr=function(e,t,i){var s=new Error(t||gg[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,mr),!i)throw s;return s},mg=function(e,t,i,s){var d=e.length,p=0;if(!d||t.f&&!t.l)return i||new Si(0);var v=!i,o=v||t.i!=2,r=t.i;v&&(i=new Si(d*3));var c=function(pt){var St=i.length;if(pt>St){var ot=new Si(Math.max(St*2,pt));ot.set(i),i=ot}},u=t.f||0,a=t.p||0,l=t.b||0,n=t.l,h=t.d,g=t.m,f=t.n,m=d*8;do{if(!n){u=pr(e,a,1);var y=pr(e,a+1,3);if(a+=3,y)if(y==1)n=fg,h=pg,g=9,f=5;else if(y==2){var M=pr(e,a,31)+257,T=pr(e,a+10,15)+4,N=M+pr(e,a+5,31)+1;a+=14;for(var W=new Si(N),K=new Si(19),P=0;P<T;++P)K[Gc[P]]=pr(e,a+P*3,7);a+=T*3;for(var I=kc(K),J=(1<<I)-1,V=Br(K,I,1),P=0;P<N;){var rt=V[pr(e,a,J)];a+=rt&15;var x=rt>>4;if(x<16)W[P++]=x;else{var at=0,dt=0;for(x==16?(dt=3+pr(e,a,3),a+=2,at=W[P-1]):x==17?(dt=3+pr(e,a,7),a+=3):x==18&&(dt=11+pr(e,a,127),a+=7);dt--;)W[P++]=at}}var nt=W.subarray(0,M),E=W.subarray(M);g=kc(nt),f=kc(E),n=Br(nt,g,1),h=Br(E,f,1)}else mr(1);else{var x=wh(a)+4,S=e[x-4]|e[x-3]<<8,A=x+S;if(A>d){r&&mr(0);break}o&&c(l+S),i.set(e.subarray(x,A),l),t.b=l+=S,t.p=a=A*8,t.f=u;continue}if(a>m){r&&mr(0);break}}o&&c(l+131072);for(var z=(1<<g)-1,$=(1<<f)-1,k=a;;k=a){var at=n[Lc(e,a)&z],D=at>>4;if(a+=at&15,a>m){r&&mr(0);break}if(at||mr(2),D<256)i[l++]=D;else if(D==256){k=a,n=null;break}else{var F=D-254;if(D>264){var P=D-257,O=wl[P];F=pr(e,a,(1<<O)-1)+Vf[P],a+=O}var U=h[Lc(e,a)&$],G=U>>4;U||mr(3),a+=U&15;var E=hg[G];if(G>3){var O=xl[G];E+=Lc(e,a)&(1<<O)-1,a+=O}if(a>m){r&&mr(0);break}o&&c(l+131072);var tt=l+F;if(l<E){var Q=p-E,ut=Math.min(E,tt);for(Q+l<0&&mr(3);l<ut;++l)i[l]=s[Q+l]}for(;l<tt;++l)i[l]=i[l-E]}}t.l=n,t.p=k,t.b=l,t.f=u,n&&(u=1,t.m=g,t.d=h,t.n=f)}while(!u);return l!=i.length&&v?Gf(i,0,l):i.subarray(0,l)},Qr=function(e,t,i){i<<=t&7;var s=t/8|0;e[s]|=i,e[s+1]|=i>>8},Ra=function(e,t,i){i<<=t&7;var s=t/8|0;e[s]|=i,e[s+1]|=i>>8,e[s+2]|=i>>16},Tc=function(e,t){for(var i=[],s=0;s<e.length;++s)e[s]&&i.push({s,f:e[s]});var d=i.length,p=i.slice();if(!d)return{t:Kf,l:0};if(d==1){var v=new Si(i[0].s+1);return v[i[0].s]=1,{t:v,l:1}}i.sort(function(A,M){return A.f-M.f}),i.push({s:-1,f:25001});var o=i[0],r=i[1],c=0,u=1,a=2;for(i[0]={s:-1,f:o.f+r.f,l:o,r};u!=d-1;)o=i[i[c].f<i[a].f?c++:a++],r=i[c!=u&&i[c].f<i[a].f?c++:a++],i[u++]={s:-1,f:o.f+r.f,l:o,r};for(var l=p[0].s,s=1;s<d;++s)p[s].s>l&&(l=p[s].s);var n=new Wi(l+1),h=Jc(i[u-1],n,0);if(h>t){var s=0,g=0,f=h-t,m=1<<f;for(p.sort(function(M,T){return n[T.s]-n[M.s]||M.f-T.f});s<d;++s){var y=p[s].s;if(n[y]>t)g+=m-(1<<h-n[y]),n[y]=t;else break}for(g>>=f;g>0;){var x=p[s].s;n[x]<t?g-=1<<t-n[x]++-1:++s}for(;s>=0&&g;--s){var S=p[s].s;n[S]==t&&(--n[S],++g)}h=t}return{t:new Si(n),l:h}},Jc=function(e,t,i){return e.s==-1?Math.max(Jc(e.l,t,i+1),Jc(e.r,t,i+1)):t[e.s]=i},xu=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new Wi(++t),s=0,d=e[0],p=1,v=function(r){i[s++]=r},o=1;o<=t;++o)if(e[o]==d&&o!=t)++p;else{if(!d&&p>2){for(;p>138;p-=138)v(32754);p>2&&(v(p>10?p-11<<5|28690:p-3<<5|12305),p=0)}else if(p>3){for(v(d),--p;p>6;p-=6)v(8304);p>2&&(v(p-3<<5|8208),p=0)}for(;p--;)v(d);p=1,d=e[o]}return{c:i.subarray(0,s),n:t}},za=function(e,t){for(var i=0,s=0;s<t.length;++s)i+=e[s]*t[s];return i},$f=function(e,t,i){var s=i.length,d=wh(t+2);e[d]=s&255,e[d+1]=s>>8,e[d+2]=e[d]^255,e[d+3]=e[d+1]^255;for(var p=0;p<s;++p)e[d+p+4]=i[p];return(d+4+s)*8},_u=function(e,t,i,s,d,p,v,o,r,c,u){Qr(t,u++,i),++d[256];for(var a=Tc(d,15),l=a.t,n=a.l,h=Tc(p,15),g=h.t,f=h.l,m=xu(l),y=m.c,x=m.n,S=xu(g),A=S.c,M=S.n,T=new Wi(19),N=0;N<y.length;++N)++T[y[N]&31];for(var N=0;N<A.length;++N)++T[A[N]&31];for(var W=Tc(T,7),K=W.t,P=W.l,I=19;I>4&&!K[Gc[I-1]];--I);var J=c+5<<3,V=za(d,Pn)+za(p,$a)+v,rt=za(d,l)+za(p,g)+v+14+3*I+za(T,K)+2*T[16]+3*T[17]+7*T[18];if(r>=0&&J<=V&&J<=rt)return $f(t,u,e.subarray(r,r+c));var at,dt,nt,E;if(Qr(t,u,1+(rt<V)),u+=2,rt<V){at=Br(l,n,0),dt=l,nt=Br(g,f,0),E=g;var z=Br(K,P,0);Qr(t,u,x-257),Qr(t,u+5,M-1),Qr(t,u+10,I-4),u+=14;for(var N=0;N<I;++N)Qr(t,u+3*N,K[Gc[N]]);u+=3*I;for(var $=[y,A],k=0;k<2;++k)for(var D=$[k],N=0;N<D.length;++N){var F=D[N]&31;Qr(t,u,z[F]),u+=K[F],F>15&&(Qr(t,u,D[N]>>5&127),u+=D[N]>>12)}}else at=ug,dt=Pn,nt=dg,E=$a;for(var N=0;N<o;++N){var O=s[N];if(O>255){var F=O>>18&31;Ra(t,u,at[F+257]),u+=dt[F+257],F>7&&(Qr(t,u,O>>23&31),u+=wl[F]);var U=O&31;Ra(t,u,nt[U]),u+=E[U],U>3&&(Ra(t,u,O>>5&8191),u+=xl[U])}else Ra(t,u,at[O]),u+=dt[O]}return Ra(t,u,at[256]),u+dt[256]},vg=new yh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Kf=new Si(0),bg=function(e,t,i,s,d,p){var v=p.z||e.length,o=new Si(s+v+5*(1+Math.ceil(v/7e3))+d),r=o.subarray(s,o.length-d),c=p.l,u=(p.r||0)&7;if(t){u&&(r[0]=p.r>>3);for(var a=vg[t-1],l=a>>13,n=a&8191,h=(1<<i)-1,g=p.p||new Wi(32768),f=p.h||new Wi(h+1),m=Math.ceil(i/3),y=2*m,x=function(st){return(e[st]^e[st+1]<<m^e[st+2]<<y)&h},S=new yh(25e3),A=new Wi(288),M=new Wi(32),T=0,N=0,W=p.i||0,K=0,P=p.w||0,I=0;W+2<v;++W){var J=x(W),V=W&32767,rt=f[J];if(g[V]=rt,f[J]=V,P<=W){var at=v-W;if((T>7e3||K>24576)&&(at>423||!c)){u=_u(e,r,0,S,A,M,N,K,I,W-I,u),K=T=N=0,I=W;for(var dt=0;dt<286;++dt)A[dt]=0;for(var dt=0;dt<30;++dt)M[dt]=0}var nt=2,E=0,z=n,$=V-rt&32767;if(at>2&&J==x(W-$))for(var k=Math.min(l,at)-1,D=Math.min(32767,W),F=Math.min(258,at);$<=D&&--z&&V!=rt;){if(e[W+nt]==e[W+nt-$]){for(var O=0;O<F&&e[W+O]==e[W+O-$];++O);if(O>nt){if(nt=O,E=$,O>k)break;for(var U=Math.min($,O-2),G=0,dt=0;dt<U;++dt){var tt=W-$+dt&32767,Q=g[tt],ut=tt-Q&32767;ut>G&&(G=ut,rt=tt)}}}V=rt,rt=g[V],$+=V-rt&32767}if(E){S[K++]=268435456|$c[nt]<<18|wu[E];var pt=$c[nt]&31,St=wu[E]&31;N+=wl[pt]+xl[St],++A[257+pt],++M[St],P=W+nt,++T}else S[K++]=e[W],++A[e[W]]}}for(W=Math.max(W,P);W<v;++W)S[K++]=e[W],++A[e[W]];u=_u(e,r,c,S,A,M,N,K,I,W-I,u),c||(p.r=u&7|r[u/8|0]<<3,u-=7,p.h=f,p.p=g,p.i=W,p.w=P)}else{for(var W=p.w||0;W<v+c;W+=65535){var ot=W+65535;ot>=v&&(r[u/8|0]=c,ot=v),u=$f(r,u+1,e.subarray(W,ot))}p.i=v}return Gf(o,0,s+wh(u)+d)},Jf=function(){var e=1,t=0;return{p:function(i){for(var s=e,d=t,p=i.length|0,v=0;v!=p;){for(var o=Math.min(v+2655,p);v<o;++v)d+=s+=i[v];s=(s&65535)+15*(s>>16),d=(d&65535)+15*(d>>16)}e=s,t=d},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},yg=function(e,t,i,s,d){if(!d&&(d={l:1},t.dictionary)){var p=t.dictionary.subarray(-32768),v=new Si(p.length+e.length);v.set(p),v.set(e,p.length),e=v,d.w=p.length}return bg(e,t.level==null?6:t.level,t.mem==null?d.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,i,s,d)},Zf=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},wg=function(e,t){var i=t.level,s=i==0?0:i<6?1:i==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var d=Jf();d.p(t.dictionary),Zf(e,2,d.d())}},xg=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&mr(6,"invalid zlib data"),(e[1]>>5&1)==1&&mr(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Zc(e,t){t||(t={});var i=Jf();i.p(e);var s=yg(e,t,t.dictionary?6:2,4);return wg(s,t),Zf(s,s.length-4,i.d()),s}function _g(e,t){return mg(e.subarray(xg(e),-4),{i:2},t,t)}var Sg=typeof TextDecoder<"u"&&new TextDecoder,Cg=0;try{Sg.decode(Kf,{stream:!0}),Cg=1}catch{}var Qt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Pc(){Qt.console&&typeof Qt.console.log=="function"&&Qt.console.log.apply(Qt.console,arguments)}var Me={log:Pc,warn:function(e){Qt.console&&(typeof Qt.console.warn=="function"?Qt.console.warn.apply(Qt.console,arguments):Pc.call(null,arguments))},error:function(e){Qt.console&&(typeof Qt.console.error=="function"?Qt.console.error.apply(Qt.console,arguments):Pc(e))}};function Oc(e,t,i){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Kn(s.response,t,i)},s.onerror=function(){Me.error("could not download file")},s.send()}function Su(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Jo(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ha,Qc,Kn=Qt.saveAs||((typeof window>"u"?"undefined":ke(window))!=="object"||window!==Qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,i){var s=Qt.URL||Qt.webkitURL,d=document.createElement("a");t=t||e.name||"download",d.download=t,d.rel="noopener",typeof e=="string"?(d.href=e,d.origin!==location.origin?Su(d.href)?Oc(e,t,i):Jo(d,d.target="_blank"):Jo(d)):(d.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(d.href)},4e4),setTimeout(function(){Jo(d)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,i){if(t=t||e.name||"download",typeof e=="string")if(Su(e))Oc(e,t,i);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){Jo(s)})}else navigator.msSaveOrOpenBlob(function(d,p){return p===void 0?p={autoBom:!1}:ke(p)!=="object"&&(Me.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}(e,i),t)}:function(e,t,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return Oc(e,t,i);var d=e.type==="application/octet-stream",p=/constructor/i.test(Qt.HTMLElement)||Qt.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||d&&p)&&(typeof FileReader>"u"?"undefined":ke(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=v?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},o.readAsDataURL(e)}else{var r=Qt.URL||Qt.webkitURL,c=r.createObjectURL(e);s?s.location=c:location.href=c,s=null,setTimeout(function(){r.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Qf(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],s=0;s<i.length;s++){var d=i[s].re,p=i[s].process,v=d.exec(e);v&&(t=p(v),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),r=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),r.length==1&&(r="0"+r),c.length==1&&(c="0"+c),"#"+o+r+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Mc(e,t){var i=e[0],s=e[1],d=e[2],p=e[3];i=yi(i,s,d,p,t[0],7,-680876936),p=yi(p,i,s,d,t[1],12,-389564586),d=yi(d,p,i,s,t[2],17,606105819),s=yi(s,d,p,i,t[3],22,-1044525330),i=yi(i,s,d,p,t[4],7,-176418897),p=yi(p,i,s,d,t[5],12,1200080426),d=yi(d,p,i,s,t[6],17,-1473231341),s=yi(s,d,p,i,t[7],22,-45705983),i=yi(i,s,d,p,t[8],7,1770035416),p=yi(p,i,s,d,t[9],12,-1958414417),d=yi(d,p,i,s,t[10],17,-42063),s=yi(s,d,p,i,t[11],22,-1990404162),i=yi(i,s,d,p,t[12],7,1804603682),p=yi(p,i,s,d,t[13],12,-40341101),d=yi(d,p,i,s,t[14],17,-1502002290),i=wi(i,s=yi(s,d,p,i,t[15],22,1236535329),d,p,t[1],5,-165796510),p=wi(p,i,s,d,t[6],9,-1069501632),d=wi(d,p,i,s,t[11],14,643717713),s=wi(s,d,p,i,t[0],20,-373897302),i=wi(i,s,d,p,t[5],5,-701558691),p=wi(p,i,s,d,t[10],9,38016083),d=wi(d,p,i,s,t[15],14,-660478335),s=wi(s,d,p,i,t[4],20,-405537848),i=wi(i,s,d,p,t[9],5,568446438),p=wi(p,i,s,d,t[14],9,-1019803690),d=wi(d,p,i,s,t[3],14,-187363961),s=wi(s,d,p,i,t[8],20,1163531501),i=wi(i,s,d,p,t[13],5,-1444681467),p=wi(p,i,s,d,t[2],9,-51403784),d=wi(d,p,i,s,t[7],14,1735328473),i=xi(i,s=wi(s,d,p,i,t[12],20,-1926607734),d,p,t[5],4,-378558),p=xi(p,i,s,d,t[8],11,-2022574463),d=xi(d,p,i,s,t[11],16,1839030562),s=xi(s,d,p,i,t[14],23,-35309556),i=xi(i,s,d,p,t[1],4,-1530992060),p=xi(p,i,s,d,t[4],11,1272893353),d=xi(d,p,i,s,t[7],16,-155497632),s=xi(s,d,p,i,t[10],23,-1094730640),i=xi(i,s,d,p,t[13],4,681279174),p=xi(p,i,s,d,t[0],11,-358537222),d=xi(d,p,i,s,t[3],16,-722521979),s=xi(s,d,p,i,t[6],23,76029189),i=xi(i,s,d,p,t[9],4,-640364487),p=xi(p,i,s,d,t[12],11,-421815835),d=xi(d,p,i,s,t[15],16,530742520),i=_i(i,s=xi(s,d,p,i,t[2],23,-995338651),d,p,t[0],6,-198630844),p=_i(p,i,s,d,t[7],10,1126891415),d=_i(d,p,i,s,t[14],15,-1416354905),s=_i(s,d,p,i,t[5],21,-57434055),i=_i(i,s,d,p,t[12],6,1700485571),p=_i(p,i,s,d,t[3],10,-1894986606),d=_i(d,p,i,s,t[10],15,-1051523),s=_i(s,d,p,i,t[1],21,-2054922799),i=_i(i,s,d,p,t[8],6,1873313359),p=_i(p,i,s,d,t[15],10,-30611744),d=_i(d,p,i,s,t[6],15,-1560198380),s=_i(s,d,p,i,t[13],21,1309151649),i=_i(i,s,d,p,t[4],6,-145523070),p=_i(p,i,s,d,t[11],10,-1120210379),d=_i(d,p,i,s,t[2],15,718787259),s=_i(s,d,p,i,t[9],21,-343485551),e[0]=Tn(i,e[0]),e[1]=Tn(s,e[1]),e[2]=Tn(d,e[2]),e[3]=Tn(p,e[3])}function _l(e,t,i,s,d,p){return t=Tn(Tn(t,e),Tn(s,p)),Tn(t<<d|t>>>32-d,i)}function yi(e,t,i,s,d,p,v){return _l(t&i|~t&s,e,t,d,p,v)}function wi(e,t,i,s,d,p,v){return _l(t&s|i&~s,e,t,d,p,v)}function xi(e,t,i,s,d,p,v){return _l(t^i^s,e,t,d,p,v)}function _i(e,t,i,s,d,p,v){return _l(i^(t|~s),e,t,d,p,v)}function td(e){var t,i=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Mc(s,Ag(e.substring(t-64,t)));e=e.substring(t-64);var d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)d[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(d[t>>2]|=128<<(t%4<<3),t>55)for(Mc(s,d),t=0;t<16;t++)d[t]=0;return d[14]=8*i,Mc(s,d),s}function Ag(e){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}Ha=Qt.atob.bind(Qt),Qc=Qt.btoa.bind(Qt);var Cu="0123456789abcdef".split("");function kg(e){for(var t="",i=0;i<4;i++)t+=Cu[e>>8*i+4&15]+Cu[e>>8*i&15];return t}function Lg(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function th(e){return td(e).map(Lg).join("")}var Tg=function(e){for(var t=0;t<e.length;t++)e[t]=kg(e[t]);return e.join("")}(td("hello"))!="5d41402abc4b2a76b9719d911017c592";function Tn(e,t){if(Tg){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function eh(e,t){var i,s,d,p;if(e!==i){for(var v=(d=e,p=1+(256/e.length>>0),new Array(p+1).join(d)),o=[],r=0;r<256;r++)o[r]=r;var c=0;for(r=0;r<256;r++){var u=o[r];c=(c+u+v.charCodeAt(r))%256,o[r]=o[c],o[c]=u}i=e,s=o}else o=s;var a=t.length,l=0,n=0,h="";for(r=0;r<a;r++)n=(n+(u=o[l=(l+1)%256]))%256,o[l]=o[n],o[n]=u,v=o[(o[l]+o[n])%256],h+=String.fromCharCode(t.charCodeAt(r)^v);return h}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Au={print:4,modify:8,copy:16,"annot-forms":32};function qs(e,t,i,s){this.v=1,this.r=2;var d=192;e.forEach(function(o){if(Au.perm!==void 0)throw new Error("Invalid permission: "+o);d+=Au[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var p=(t+this.padding).substr(0,32),v=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(p,v),this.P=-(1+(255^d)),this.encryptionKey=th(p+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=eh(this.encryptionKey,this.padding)}function Us(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",i=e.length,s=0;s<i;s++){var d=e.charCodeAt(s);d<33||d===35||d===37||d===40||d===41||d===47||d===60||d===62||d===91||d===93||d===123||d===125||d>126?t+="#"+("0"+d.toString(16)).slice(-2):t+=e[s]}return t}function ku(e){if(ke(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(i,s,d){if(d=d||!1,typeof i!="string"||typeof s!="function"||typeof d!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(i)||(t[i]={});var p=Math.random().toString(35);return t[i][p]=[s,!!d],p},this.unsubscribe=function(i){for(var s in t)if(t[s][i])return delete t[s][i],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(i){if(t.hasOwnProperty(i)){var s=Array.prototype.slice.call(arguments,1),d=[];for(var p in t[i]){var v=t[i][p];try{v[0].apply(e,s)}catch(o){Qt.console&&Me.error("jsPDF PubSub Error",o.message,o)}v[1]&&d.push(p)}d.length&&d.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function is(e){if(!(this instanceof is))return new is(e);var t="opacity,stroke-opacity".split(",");for(var i in e)e.hasOwnProperty(i)&&t.indexOf(i)>=0&&(this[i]=e[i]);this.id="",this.objectNumber=-1}function ed(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function kn(e,t,i,s,d){if(!(this instanceof kn))return new kn(e,t,i,s,d);this.type=e==="axial"?2:3,this.coords=t,this.colors=i,ed.call(this,s,d)}function Zn(e,t,i,s,d){if(!(this instanceof Zn))return new Zn(e,t,i,s,d);this.boundingBox=e,this.xStep=t,this.yStep=i,this.stream="",this.cloneIndex=0,ed.call(this,s,d)}function Jt(e){var t,i=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],d=arguments[2],p=arguments[3],v=[],o=1,r=16,c="S",u=null;ke(e=e||{})==="object"&&(i=e.orientation,s=e.unit||s,d=e.format||d,p=e.compress||e.compressPdf||p,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(r=e.floatPrecision),c=e.defaultPathOperation||"S"),v=e.filters||(p===!0?["FlateEncode"]:v),s=s||"mm",i=(""+(i||"P")).toLowerCase();var a=e.putOnlyUsedFonts||!1,l={},n={internal:{},__private__:{}};n.__private__.PubSub=ku;var h="1.3",g=n.__private__.getPdfVersion=function(){return h};n.__private__.setPdfVersion=function(_){h=_};var f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};n.__private__.getPageFormats=function(){return f};var m=n.__private__.getPageFormat=function(_){return f[_]};d=d||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},x=y.COMPAT;function S(){this.saveGraphicsState(),H(new Zt(Bt,0,0,-Bt,0,un()*Bt).toString()+" cm"),this.setFontSize(this.getFontSize()/Bt),c="n",x=y.ADVANCED}function A(){this.restoreGraphicsState(),c="S",x=y.COMPAT}var M=n.__private__.combineFontStyleAndFontWeight=function(_,B){if(_=="bold"&&B=="normal"||_=="bold"&&B==400||_=="normal"&&B=="italic"||_=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(_=B==400||B==="normal"?_==="italic"?"italic":"normal":B!=700&&B!=="bold"||_!=="normal"?(B==700?"bold":B)+""+_:"bold"),_};n.advancedAPI=function(_){var B=x===y.COMPAT;return B&&S.call(this),typeof _!="function"||(_(this),B&&A.call(this)),this},n.compatAPI=function(_){var B=x===y.ADVANCED;return B&&A.call(this),typeof _!="function"||(_(this),B&&S.call(this)),this},n.isAdvancedAPI=function(){return x===y.ADVANCED};var T,N=function(_){if(x!==y.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},W=n.roundToPrecision=n.__private__.roundToPrecision=function(_,B){var et=t||B;if(isNaN(_)||isNaN(et))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(et).replace(/0+$/,"")};T=n.hpf=n.__private__.hpf=typeof r=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return W(_,r)}:r==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return W(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return W(_,16)};var K=n.f2=n.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return W(_,2)},P=n.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return W(_,3)},I=n.scale=n.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return x===y.COMPAT?_*Bt:x===y.ADVANCED?_:void 0},J=function(_){return x===y.COMPAT?un()-_:x===y.ADVANCED?_:void 0},V=function(_){return I(J(_))};n.__private__.setPrecision=n.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(t=parseInt(_,10))};var rt,at="00000000000000000000000000000000",dt=n.__private__.getFileId=function(){return at},nt=n.__private__.setFileId=function(_){return at=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():at.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(vi=new qs(u.userPermissions,u.userPassword,u.ownerPassword,at)),at};n.setFileId=function(_){return nt(_),this},n.getFileId=function(){return dt()};var E=n.__private__.convertDateToPDFDate=function(_){var B=_.getTimezoneOffset(),et=B<0?"+":"-",lt=Math.floor(Math.abs(B/60)),wt=Math.abs(B%60),kt=[et,F(lt),"'",F(wt),"'"].join("");return["D:",_.getFullYear(),F(_.getMonth()+1),F(_.getDate()),F(_.getHours()),F(_.getMinutes()),F(_.getSeconds()),kt].join("")},z=n.__private__.convertPDFDateToDate=function(_){var B=parseInt(_.substr(2,4),10),et=parseInt(_.substr(6,2),10)-1,lt=parseInt(_.substr(8,2),10),wt=parseInt(_.substr(10,2),10),kt=parseInt(_.substr(12,2),10),Ft=parseInt(_.substr(14,2),10);return new Date(B,et,lt,wt,kt,Ft,0)},$=n.__private__.setCreationDate=function(_){var B;if(_===void 0&&(_=new Date),_ instanceof Date)B=E(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=_}return rt=B},k=n.__private__.getCreationDate=function(_){var B=rt;return _==="jsDate"&&(B=z(rt)),B};n.setCreationDate=function(_){return $(_),this},n.getCreationDate=function(_){return k(_)};var D,F=n.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},O=n.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},U=0,G=[],tt=[],Q=0,ut=[],pt=[],St=!1,ot=tt,st=function(){U=0,Q=0,tt=[],G=[],ut=[],Ur=Qe(),ar=Qe()};n.__private__.setCustomOutputDestination=function(_){St=!0,ot=_};var it=function(_){St||(ot=_)};n.__private__.resetCustomOutputDestination=function(){St=!1,ot=tt};var H=n.__private__.out=function(_){return _=_.toString(),Q+=_.length+1,ot.push(_),ot},vt=n.__private__.write=function(_){return H(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},yt=n.__private__.getArrayBuffer=function(_){for(var B=_.length,et=new ArrayBuffer(B),lt=new Uint8Array(et);B--;)lt[B]=_.charCodeAt(B);return et},bt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];n.__private__.getStandardFonts=function(){return bt};var Lt=e.fontSize||16;n.__private__.setFontSize=n.setFontSize=function(_){return Lt=x===y.ADVANCED?_/Bt:_,this};var At,ft=n.__private__.getFontSize=n.getFontSize=function(){return x===y.COMPAT?Lt:Lt*Bt},Mt=e.R2L||!1;n.__private__.setR2L=n.setR2L=function(_){return Mt=_,this},n.__private__.getR2L=n.getR2L=function(){return Mt};var jt,Rt=n.__private__.setZoomMode=function(_){var B=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))At=_;else if(isNaN(_)){if(B.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');At=_}else At=parseInt(_,10)};n.__private__.getZoomMode=function(){return At};var Yt,Vt=n.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');jt=_};n.__private__.getPageMode=function(){return jt};var ie=n.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Yt=_};n.__private__.getLayoutMode=function(){return Yt},n.__private__.setDisplayMode=n.setDisplayMode=function(_,B,et){return Rt(_),ie(B),Vt(et),this};var Wt={title:"",subject:"",author:"",keywords:"",creator:""};n.__private__.getDocumentProperty=function(_){if(Object.keys(Wt).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Wt[_]},n.__private__.getDocumentProperties=function(){return Wt},n.__private__.setDocumentProperties=n.setProperties=n.setDocumentProperties=function(_){for(var B in Wt)Wt.hasOwnProperty(B)&&_[B]&&(Wt[B]=_[B]);return this},n.__private__.setDocumentProperty=function(_,B){if(Object.keys(Wt).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Wt[_]=B};var te,Bt,Pe,me,Pi,_e={},Ee={},Sr=[],we={},Dn={},Ue={},nr={},qr=null,We=0,re=[],xe=new ku(n),Bn=e.hotfixes||[],fi={},Cr={},Ar=[],Zt=function _(B,et,lt,wt,kt,Ft){if(!(this instanceof _))return new _(B,et,lt,wt,kt,Ft);isNaN(B)&&(B=1),isNaN(et)&&(et=0),isNaN(lt)&&(lt=0),isNaN(wt)&&(wt=1),isNaN(kt)&&(kt=0),isNaN(Ft)&&(Ft=0),this._matrix=[B,et,lt,wt,kt,Ft]};Object.defineProperty(Zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Zt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(_)},Zt.prototype.multiply=function(_){var B=_.sx*this.sx+_.shy*this.shx,et=_.sx*this.shy+_.shy*this.sy,lt=_.shx*this.sx+_.sy*this.shx,wt=_.shx*this.shy+_.sy*this.sy,kt=_.tx*this.sx+_.ty*this.shx+this.tx,Ft=_.tx*this.shy+_.ty*this.sy+this.ty;return new Zt(B,et,lt,wt,kt,Ft)},Zt.prototype.decompose=function(){var _=this.sx,B=this.shy,et=this.shx,lt=this.sy,wt=this.tx,kt=this.ty,Ft=Math.sqrt(_*_+B*B),qt=(_/=Ft)*et+(B/=Ft)*lt;et-=_*qt,lt-=B*qt;var Gt=Math.sqrt(et*et+lt*lt);return qt/=Gt,_*(lt/=Gt)<B*(et/=Gt)&&(_=-_,B=-B,qt=-qt,Ft=-Ft),{scale:new Zt(Ft,0,0,Gt,0,0),translate:new Zt(1,0,0,1,wt,kt),rotate:new Zt(_,B,-B,_,0,0),skew:new Zt(1,0,qt,1,0,0)}},Zt.prototype.toString=function(_){return this.join(" ")},Zt.prototype.inversed=function(){var _=this.sx,B=this.shy,et=this.shx,lt=this.sy,wt=this.tx,kt=this.ty,Ft=1/(_*lt-B*et),qt=lt*Ft,Gt=-B*Ft,ae=-et*Ft,ne=_*Ft;return new Zt(qt,Gt,ae,ne,-qt*wt-ae*kt,-Gt*wt-ne*kt)},Zt.prototype.applyToPoint=function(_){var B=_.x*this.sx+_.y*this.shx+this.tx,et=_.x*this.shy+_.y*this.sy+this.ty;return new vs(B,et)},Zt.prototype.applyToRectangle=function(_){var B=this.applyToPoint(_),et=this.applyToPoint(new vs(_.x+_.w,_.y+_.h));return new ya(B.x,B.y,et.x-B.x,et.y-B.y)},Zt.prototype.clone=function(){var _=this.sx,B=this.shy,et=this.shx,lt=this.sy,wt=this.tx,kt=this.ty;return new Zt(_,B,et,lt,wt,kt)},n.Matrix=Zt;var sr=n.matrixMult=function(_,B){return B.multiply(_)},kr=new Zt(1,0,0,1,0,0);n.unitMatrix=n.identityMatrix=kr;var Oi=function(_,B){if(!Dn[_]){var et=(B instanceof kn?"Sh":"P")+(Object.keys(we).length+1).toString(10);B.id=et,Dn[_]=et,we[et]=B,xe.publish("addPattern",B)}};n.ShadingPattern=kn,n.TilingPattern=Zn,n.addShadingPattern=function(_,B){return N("addShadingPattern()"),Oi(_,B),this},n.beginTilingPattern=function(_){N("beginTilingPattern()"),wo(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},n.endTilingPattern=function(_,B){N("endTilingPattern()"),B.stream=pt[D].join(`
`),Oi(_,B),xe.publish("endTilingPattern",B),Ar.pop().restore()};var si=n.__private__.newObject=function(){var _=Qe();return Bi(_,!0),_},Qe=n.__private__.newObjectDeferred=function(){return U++,G[U]=function(){return Q},U},Bi=function(_,B){return B=typeof B=="boolean"&&B,G[_]=Q,B&&H(_+" 0 obj"),_},ns=n.__private__.newAdditionalObject=function(){var _={objId:Qe(),content:""};return ut.push(_),_},Ur=Qe(),ar=Qe(),or=n.__private__.decodeColorString=function(_){var B=_.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length===5&&(B[4]==="k"||B[4]==="K")&&(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var et=parseFloat(B[0]);B=[et,et,et,"r"]}for(var lt="#",wt=0;wt<3;wt++)lt+=("0"+Math.floor(255*parseFloat(B[wt])).toString(16)).slice(-2);return lt},lr=n.__private__.encodeColorString=function(_){var B;typeof _=="string"&&(_={ch1:_});var et=_.ch1,lt=_.ch2,wt=_.ch3,kt=_.ch4,Ft=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof et=="string"&&et.charAt(0)!=="#"){var qt=new Qf(et);if(qt.ok)et=qt.toHex();else if(!/^\d*\.?\d*$/.test(et))throw new Error('Invalid color "'+et+'" passed to jsPDF.encodeColorString.')}if(typeof et=="string"&&/^#[0-9A-Fa-f]{3}$/.test(et)&&(et="#"+et[1]+et[1]+et[2]+et[2]+et[3]+et[3]),typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et)){var Gt=parseInt(et.substr(1),16);et=Gt>>16&255,lt=Gt>>8&255,wt=255&Gt}if(lt===void 0||kt===void 0&&et===lt&&lt===wt)if(typeof et=="string")B=et+" "+Ft[0];else switch(_.precision){case 2:B=K(et/255)+" "+Ft[0];break;case 3:default:B=P(et/255)+" "+Ft[0]}else if(kt===void 0||ke(kt)==="object"){if(kt&&!isNaN(kt.a)&&kt.a===0)return B=["1.","1.","1.",Ft[1]].join(" ");if(typeof et=="string")B=[et,lt,wt,Ft[1]].join(" ");else switch(_.precision){case 2:B=[K(et/255),K(lt/255),K(wt/255),Ft[1]].join(" ");break;default:case 3:B=[P(et/255),P(lt/255),P(wt/255),Ft[1]].join(" ")}}else if(typeof et=="string")B=[et,lt,wt,kt,Ft[2]].join(" ");else switch(_.precision){case 2:B=[K(et),K(lt),K(wt),K(kt),Ft[2]].join(" ");break;case 3:default:B=[P(et),P(lt),P(wt),P(kt),Ft[2]].join(" ")}return B},Lr=n.__private__.getFilters=function(){return v},Hi=n.__private__.putStream=function(_){var B=(_=_||{}).data||"",et=_.filters||Lr(),lt=_.alreadyAppliedFilters||[],wt=_.addLength1||!1,kt=B.length,Ft=_.objectId,qt=function(bi){return bi};if(u!==null&&Ft===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(qt=vi.encryptor(Ft,0));var Gt={};et===!0&&(et=["FlateEncode"]);var ae=_.additionalKeyValues||[],ne=(Gt=Jt.API.processDataByFilters!==void 0?Jt.API.processDataByFilters(B,et):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(lt)?lt.join(" "):lt.toString());if(Gt.data.length!==0&&(ae.push({key:"Length",value:Gt.data.length}),wt===!0&&ae.push({key:"Length1",value:kt})),ne.length!=0)if(ne.split("/").length-1==1)ae.push({key:"Filter",value:ne});else{ae.push({key:"Filter",value:"["+ne+"]"});for(var ve=0;ve<ae.length;ve+=1)if(ae[ve].key==="DecodeParms"){for(var Re=[],He=0;He<Gt.reverseChain.split("/").length-1;He+=1)Re.push("null");Re.push(ae[ve].value),ae[ve].value="["+Re.join(" ")+"]"}}H("<<");for(var ti=0;ti<ae.length;ti++)H("/"+ae[ti].key+" "+ae[ti].value);H(">>"),Gt.data.length!==0&&(H("stream"),H(qt(Gt.data)),H("endstream"))},Tr=n.__private__.putPage=function(_){var B=_.number,et=_.data,lt=_.objId,wt=_.contentsObjId;Bi(lt,!0),H("<</Type /Page"),H("/Parent "+_.rootDictionaryObjId+" 0 R"),H("/Resources "+_.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(T(_.mediaBox.bottomLeftX))+" "+parseFloat(T(_.mediaBox.bottomLeftY))+" "+T(_.mediaBox.topRightX)+" "+T(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&H("/CropBox ["+T(_.cropBox.bottomLeftX)+" "+T(_.cropBox.bottomLeftY)+" "+T(_.cropBox.topRightX)+" "+T(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&H("/BleedBox ["+T(_.bleedBox.bottomLeftX)+" "+T(_.bleedBox.bottomLeftY)+" "+T(_.bleedBox.topRightX)+" "+T(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&H("/TrimBox ["+T(_.trimBox.bottomLeftX)+" "+T(_.trimBox.bottomLeftY)+" "+T(_.trimBox.topRightX)+" "+T(_.trimBox.topRightY)+"]"),_.artBox!==null&&H("/ArtBox ["+T(_.artBox.bottomLeftX)+" "+T(_.artBox.bottomLeftY)+" "+T(_.artBox.topRightX)+" "+T(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&H("/UserUnit "+_.userUnit),xe.publish("putPage",{objId:lt,pageContext:re[B],pageNumber:B,page:et}),H("/Contents "+wt+" 0 R"),H(">>"),H("endobj");var kt=et.join(`
`);return x===y.ADVANCED&&(kt+=`
Q`),Bi(wt,!0),Hi({data:kt,filters:Lr(),objectId:wt}),H("endobj"),lt},Rn=n.__private__.putPages=function(){var _,B,et=[];for(_=1;_<=We;_++)re[_].objId=Qe(),re[_].contentsObjId=Qe();for(_=1;_<=We;_++)et.push(Tr({number:_,data:pt[_],objId:re[_].objId,contentsObjId:re[_].contentsObjId,mediaBox:re[_].mediaBox,cropBox:re[_].cropBox,bleedBox:re[_].bleedBox,trimBox:re[_].trimBox,artBox:re[_].artBox,userUnit:re[_].userUnit,rootDictionaryObjId:Ur,resourceDictionaryObjId:ar}));Bi(Ur,!0),H("<</Type /Pages");var lt="/Kids [";for(B=0;B<We;B++)lt+=et[B]+" 0 R ";H(lt+"]"),H("/Count "+We),H(">>"),H("endobj"),xe.publish("postPutPages")},ss=function(_){xe.publish("putFont",{font:_,out:H,newObject:si,putStream:Hi}),_.isAlreadyPutted!==!0&&(_.objectNumber=si(),H("<<"),H("/Type /Font"),H("/BaseFont /"+Us(_.postScriptName)),H("/Subtype /Type1"),typeof _.encoding=="string"&&H("/Encoding /"+_.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},as=function(){for(var _ in _e)_e.hasOwnProperty(_)&&(a===!1||a===!0&&l.hasOwnProperty(_))&&ss(_e[_])},os=function(_){_.objectNumber=si();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[T(_.x),T(_.y),T(_.x+_.width),T(_.y+_.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var et=_.pages[1].join(`
`);Hi({data:et,additionalKeyValues:B,objectId:_.objectNumber}),H("endobj")},ls=function(){for(var _ in fi)fi.hasOwnProperty(_)&&os(fi[_])},eo=function(_,B){var et,lt=[],wt=1/(B-1);for(et=0;et<1;et+=wt)lt.push(et);if(lt.push(1),_[0].offset!=0){var kt={offset:0,color:_[0].color};_.unshift(kt)}if(_[_.length-1].offset!=1){var Ft={offset:1,color:_[_.length-1].color};_.push(Ft)}for(var qt="",Gt=0,ae=0;ae<lt.length;ae++){for(et=lt[ae];et>_[Gt+1].offset;)Gt++;var ne=_[Gt].offset,ve=(et-ne)/(_[Gt+1].offset-ne),Re=_[Gt].color,He=_[Gt+1].color;qt+=O(Math.round((1-ve)*Re[0]+ve*He[0]).toString(16))+O(Math.round((1-ve)*Re[1]+ve*He[1]).toString(16))+O(Math.round((1-ve)*Re[2]+ve*He[2]).toString(16))}return qt.trim()},kl=function(_,B){B||(B=21);var et=si(),lt=eo(_.colors,B),wt=[];wt.push({key:"FunctionType",value:"0"}),wt.push({key:"Domain",value:"[0.0 1.0]"}),wt.push({key:"Size",value:"["+B+"]"}),wt.push({key:"BitsPerSample",value:"8"}),wt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hi({data:lt,additionalKeyValues:wt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:et}),H("endobj"),_.objectNumber=si(),H("<< /ShadingType "+_.type),H("/ColorSpace /DeviceRGB");var kt="/Coords ["+T(parseFloat(_.coords[0]))+" "+T(parseFloat(_.coords[1]))+" ";_.type===2?kt+=T(parseFloat(_.coords[2]))+" "+T(parseFloat(_.coords[3])):kt+=T(parseFloat(_.coords[2]))+" "+T(parseFloat(_.coords[3]))+" "+T(parseFloat(_.coords[4]))+" "+T(parseFloat(_.coords[5])),H(kt+="]"),_.matrix&&H("/Matrix ["+_.matrix.toString()+"]"),H("/Function "+et+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},Ll=function(_,B){var et=Qe(),lt=si();B.push({resourcesOid:et,objectOid:lt}),_.objectNumber=lt;var wt=[];wt.push({key:"Type",value:"/Pattern"}),wt.push({key:"PatternType",value:"1"}),wt.push({key:"PaintType",value:"1"}),wt.push({key:"TilingType",value:"1"}),wt.push({key:"BBox",value:"["+_.boundingBox.map(T).join(" ")+"]"}),wt.push({key:"XStep",value:T(_.xStep)}),wt.push({key:"YStep",value:T(_.yStep)}),wt.push({key:"Resources",value:et+" 0 R"}),_.matrix&&wt.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Hi({data:_.stream,additionalKeyValues:wt,objectId:_.objectNumber}),H("endobj")},cs=function(_){var B;for(B in we)we.hasOwnProperty(B)&&(we[B]instanceof kn?kl(we[B]):we[B]instanceof Zn&&Ll(we[B],_))},io=function(_){for(var B in _.objectNumber=si(),H("<<"),_)switch(B){case"opacity":H("/ca "+K(_[B]));break;case"stroke-opacity":H("/CA "+K(_[B]))}H(">>"),H("endobj")},Tl=function(){var _;for(_ in Ue)Ue.hasOwnProperty(_)&&io(Ue[_])},ca=function(){for(var _ in H("/XObject <<"),fi)fi.hasOwnProperty(_)&&fi[_].objectNumber>=0&&H("/"+_+" "+fi[_].objectNumber+" 0 R");xe.publish("putXobjectDict"),H(">>")},Pl=function(){vi.oid=si(),H("<<"),H("/Filter /Standard"),H("/V "+vi.v),H("/R "+vi.r),H("/U <"+vi.toHexString(vi.U)+">"),H("/O <"+vi.toHexString(vi.O)+">"),H("/P "+vi.P),H(">>"),H("endobj")},ro=function(){for(var _ in H("/Font <<"),_e)_e.hasOwnProperty(_)&&(a===!1||a===!0&&l.hasOwnProperty(_))&&H("/"+_+" "+_e[_].objectNumber+" 0 R");H(">>")},Ol=function(){if(Object.keys(we).length>0){for(var _ in H("/Shading <<"),we)we.hasOwnProperty(_)&&we[_]instanceof kn&&we[_].objectNumber>=0&&H("/"+_+" "+we[_].objectNumber+" 0 R");xe.publish("putShadingPatternDict"),H(">>")}},hs=function(_){if(Object.keys(we).length>0){for(var B in H("/Pattern <<"),we)we.hasOwnProperty(B)&&we[B]instanceof n.TilingPattern&&we[B].objectNumber>=0&&we[B].objectNumber<_&&H("/"+B+" "+we[B].objectNumber+" 0 R");xe.publish("putTilingPatternDict"),H(">>")}},Ml=function(){if(Object.keys(Ue).length>0){var _;for(_ in H("/ExtGState <<"),Ue)Ue.hasOwnProperty(_)&&Ue[_].objectNumber>=0&&H("/"+_+" "+Ue[_].objectNumber+" 0 R");xe.publish("putGStateDict"),H(">>")}},Xe=function(_){Bi(_.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ro(),Ol(),hs(_.objectOid),Ml(),ca(),H(">>"),H("endobj")},no=function(){var _=[];as(),Tl(),ls(),cs(_),xe.publish("putResources"),_.forEach(Xe),Xe({resourcesOid:ar,objectOid:Number.MAX_SAFE_INTEGER}),xe.publish("postPutResources")},so=function(){xe.publish("putAdditionalObjects");for(var _=0;_<ut.length;_++){var B=ut[_];Bi(B.objId,!0),H(B.content),H("endobj")}xe.publish("postPutAdditionalObjects")},ao=function(_){Ee[_.fontName]=Ee[_.fontName]||{},Ee[_.fontName][_.fontStyle]=_.id},ha=function(_,B,et,lt,wt){var kt={id:"F"+(Object.keys(_e).length+1).toString(10),postScriptName:_,fontName:B,fontStyle:et,encoding:lt,isStandardFont:wt||!1,metadata:{}};return xe.publish("addFont",{font:kt,instance:this}),_e[kt.id]=kt,ao(kt),kt.id},Nl=function(_){for(var B=0,et=bt.length;B<et;B++){var lt=ha.call(this,_[B][0],_[B][1],_[B][2],bt[B][3],!0);a===!1&&(l[lt]=!0);var wt=_[B][0].split("-");ao({id:lt,fontName:wt[0],fontStyle:wt[1]||""})}xe.publish("addFonts",{fonts:_e,dictionary:Ee})},cr=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(lt){var B=lt.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var et="Error in function "+B.split(`
`)[0].split("<")[0]+": "+lt.message;if(!Qt.console)throw new Error(et);Qt.console.error(et,lt),Qt.alert&&alert(et)}},_.foo.bar=_,_.foo},us=function(_,B){var et,lt,wt,kt,Ft,qt,Gt,ae,ne;if(wt=(B=B||{}).sourceEncoding||"Unicode",Ft=B.outputEncoding,(B.autoencode||Ft)&&_e[te].metadata&&_e[te].metadata[wt]&&_e[te].metadata[wt].encoding&&(kt=_e[te].metadata[wt].encoding,!Ft&&_e[te].encoding&&(Ft=_e[te].encoding),!Ft&&kt.codePages&&(Ft=kt.codePages[0]),typeof Ft=="string"&&(Ft=kt[Ft]),Ft)){for(Gt=!1,qt=[],et=0,lt=_.length;et<lt;et++)(ae=Ft[_.charCodeAt(et)])?qt.push(String.fromCharCode(ae)):qt.push(_[et]),qt[et].charCodeAt(0)>>8&&(Gt=!0);_=qt.join("")}for(et=_.length;Gt===void 0&&et!==0;)_.charCodeAt(et-1)>>8&&(Gt=!0),et--;if(!Gt)return _;for(qt=B.noBOM?[]:[254,255],et=0,lt=_.length;et<lt;et++){if((ne=(ae=_.charCodeAt(et))>>8)>>8)throw new Error("Character at position "+et+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(ne),qt.push(ae-(ne<<8))}return String.fromCharCode.apply(void 0,qt)},Mi=n.__private__.pdfEscape=n.pdfEscape=function(_,B){return us(_,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ua=n.__private__.beginPage=function(_){pt[++We]=[],re[We]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},lo(We),it(pt[D])},oo=function(_,B){var et,lt,wt;switch(i=B||i,typeof _=="string"&&(et=m(_.toLowerCase()),Array.isArray(et)&&(lt=et[0],wt=et[1])),Array.isArray(_)&&(lt=_[0]*Bt,wt=_[1]*Bt),isNaN(lt)&&(lt=d[0],wt=d[1]),(lt>14400||wt>14400)&&(Me.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),lt=Math.min(14400,lt),wt=Math.min(14400,wt)),d=[lt,wt],i.substr(0,1)){case"l":wt>lt&&(d=[wt,lt]);break;case"p":lt>wt&&(d=[wt,lt])}ua(d),go(ga),H(hr),va!==0&&H(va+" J"),ba!==0&&H(ba+" j"),xe.publish("addPage",{pageNumber:We})},Fl=function(_){_>0&&_<=We&&(pt.splice(_,1),re.splice(_,1),We--,D>We&&(D=We),this.setPage(D))},lo=function(_){_>0&&_<=We&&(D=_)},El=n.__private__.getNumberOfPages=n.getNumberOfPages=function(){return pt.length-1},co=function(_,B,et){var lt,wt=void 0;return et=et||{},_=_!==void 0?_:_e[te].fontName,B=B!==void 0?B:_e[te].fontStyle,lt=_.toLowerCase(),Ee[lt]!==void 0&&Ee[lt][B]!==void 0?wt=Ee[lt][B]:Ee[_]!==void 0&&Ee[_][B]!==void 0?wt=Ee[_][B]:et.disableWarning===!1&&Me.warn("Unable to look up font label for font '"+_+"', '"+B+"'. Refer to getFontList() for available fonts."),wt||et.noFallback||(wt=Ee.times[B])==null&&(wt=Ee.times.normal),wt},Il=n.__private__.putInfo=function(){var _=si(),B=function(lt){return lt};for(var et in u!==null&&(B=vi.encryptor(_,0)),H("<<"),H("/Producer ("+Mi(B("jsPDF "+Jt.version))+")"),Wt)Wt.hasOwnProperty(et)&&Wt[et]&&H("/"+et.substr(0,1).toUpperCase()+et.substr(1)+" ("+Mi(B(Wt[et]))+")");H("/CreationDate ("+Mi(B(rt))+")"),H(">>"),H("endobj")},fa=n.__private__.putCatalog=function(_){var B=(_=_||{}).rootDictionaryObjId||Ur;switch(si(),H("<<"),H("/Type /Catalog"),H("/Pages "+B+" 0 R"),At||(At="fullwidth"),At){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var et=""+At;et.substr(et.length-1)==="%"&&(At=parseInt(At)/100),typeof At=="number"&&H("/OpenAction [3 0 R /XYZ null null "+K(At)+"]")}switch(Yt||(Yt="continuous"),Yt){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}jt&&H("/PageMode /"+jt),xe.publish("putCatalog"),H(">>"),H("endobj")},jl=n.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(U+1)),H("/Root "+U+" 0 R"),H("/Info "+(U-1)+" 0 R"),u!==null&&H("/Encrypt "+vi.oid+" 0 R"),H("/ID [ <"+at+"> <"+at+"> ]"),H(">>")},Dl=n.__private__.putHeader=function(){H("%PDF-"+h),H("%ºß¬à")},Bl=n.__private__.putXRef=function(){var _="0000000000";H("xref"),H("0 "+(U+1)),H("0000000000 65535 f ");for(var B=1;B<=U;B++)typeof G[B]=="function"?H((_+G[B]()).slice(-10)+" 00000 n "):G[B]!==void 0?H((_+G[B]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},Wr=n.__private__.buildDocument=function(){st(),it(tt),xe.publish("buildDocument"),Dl(),Rn(),so(),no(),u!==null&&Pl(),Il(),fa();var _=Q;return Bl(),jl(),H("startxref"),H(""+_),H("%%EOF"),it(pt[D]),tt.join(`
`)},fs=n.__private__.getBlob=function(_){return new Blob([yt(_)],{type:"application/pdf"})},ds=n.output=n.__private__.output=cr(function(_,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",_){case void 0:return Wr();case"save":n.save(B.filename);break;case"arraybuffer":return yt(Wr());case"blob":return fs(Wr());case"bloburi":case"bloburl":if(Qt.URL!==void 0&&typeof Qt.URL.createObjectURL=="function")return Qt.URL&&Qt.URL.createObjectURL(fs(Wr()))||void 0;Me.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var et="",lt=Wr();try{et=Qc(lt)}catch{et=Qc(unescape(encodeURIComponent(lt)))}return"data:application/pdf;filename="+B.filename+";base64,"+et;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var wt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(wt=B.pdfObjectUrl,kt="");var Ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+wt+'"'+kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",qt=Qt.open();return qt!==null&&qt.document.write(Ft),qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',ae=Qt.open();if(ae!==null){ae.document.write(Gt);var ne=this;ae.document.documentElement.querySelector("#pdfViewer").onload=function(){ae.document.title=B.filename,ae.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ne.output("bloburl"))}}return ae}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',Re=Qt.open();if(Re!==null&&(Re.document.write(ve),Re.document.title=B.filename),Re||typeof safari>"u")return Re;break;case"datauri":case"dataurl":return Qt.document.location.href=this.output("datauristring",B);default:return null}}),ho=function(_){return Array.isArray(Bn)===!0&&Bn.indexOf(_)>-1};switch(s){case"pt":Bt=1;break;case"mm":Bt=72/25.4;break;case"cm":Bt=72/2.54;break;case"in":Bt=72;break;case"px":Bt=ho("px_scaling")==1?.75:96/72;break;case"pc":case"em":Bt=12;break;case"ex":Bt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Bt=s}var vi=null;$(),nt();var Rl=function(_){return u!==null?vi.encryptor(_,0):function(B){return B}},uo=n.__private__.getPageInfo=n.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:re[_].objId,pageNumber:_,pageContext:re[_]}},ee=n.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in re)if(re[B].objId===_)break;return uo(B)},zl=n.__private__.getCurrentPageInfo=n.getCurrentPageInfo=function(){return{objId:re[D].objId,pageNumber:D,pageContext:re[D]}};n.addPage=function(){return oo.apply(this,arguments),this},n.setPage=function(){return lo.apply(this,arguments),it.call(this,pt[D]),this},n.insertPage=function(_){return this.addPage(),this.movePage(D,_),this},n.movePage=function(_,B){var et,lt;if(_>B){et=pt[_],lt=re[_];for(var wt=_;wt>B;wt--)pt[wt]=pt[wt-1],re[wt]=re[wt-1];pt[B]=et,re[B]=lt,this.setPage(B)}else if(_<B){et=pt[_],lt=re[_];for(var kt=_;kt<B;kt++)pt[kt]=pt[kt+1],re[kt]=re[kt+1];pt[B]=et,re[B]=lt,this.setPage(B)}return this},n.deletePage=function(){return Fl.apply(this,arguments),this},n.__private__.text=n.text=function(_,B,et,lt,wt){var kt,Ft,qt,Gt,ae,ne,ve,Re,He,ti=(lt=lt||{}).scope||this;if(typeof _=="number"&&typeof B=="number"&&(typeof et=="string"||Array.isArray(et))){var bi=et;et=B,B=_,_=bi}if(arguments[3]instanceof Zt?(N("The transform parameter of text() with a Matrix value"),He=wt):(qt=arguments[4],Gt=arguments[5],ke(ve=arguments[3])==="object"&&ve!==null||(typeof qt=="string"&&(Gt=qt,qt=null),typeof ve=="string"&&(Gt=ve,ve=null),typeof ve=="number"&&(qt=ve,ve=null),lt={flags:ve,angle:qt,align:Gt})),isNaN(B)||isNaN(et)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return ti;var oi="",ur=!1,Ri=typeof lt.lineHeightFactor=="number"?lt.lineHeightFactor:qn,Mr=ti.internal.scaleFactor;function xo(Ie){return Ie=Ie.split("	").join(Array(lt.TabLen||9).join(" ")),Mi(Ie,ve)}function Sa(Ie){for(var je,$e=Ie.concat(),ai=[],Gr=$e.length;Gr--;)typeof(je=$e.shift())=="string"?ai.push(je):Array.isArray(Ie)&&(je.length===1||je[1]===void 0&&je[2]===void 0)?ai.push(je[0]):ai.push([je[0],je[1],je[2]]);return ai}function Ca(Ie,je){var $e;if(typeof Ie=="string")$e=je(Ie)[0];else if(Array.isArray(Ie)){for(var ai,Gr,Na=Ie.concat(),Ts=[],ko=Na.length;ko--;)typeof(ai=Na.shift())=="string"?Ts.push(je(ai)[0]):Array.isArray(ai)&&typeof ai[0]=="string"&&(Gr=je(ai[0],ai[1],ai[2]),Ts.push([Gr[0],Gr[1],Gr[2]]));$e=Ts}return $e}var ys=!1,Aa=!0;if(typeof _=="string")ys=!0;else if(Array.isArray(_)){var ka=_.concat();Ft=[];for(var ws,di=ka.length;di--;)(typeof(ws=ka.shift())!="string"||Array.isArray(ws)&&typeof ws[0]!="string")&&(Aa=!1);ys=Aa}if(ys===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var xs=Lt/ti.internal.scaleFactor,_s=xs*(Ri-1);switch(lt.baseline){case"bottom":et-=_s;break;case"top":et+=xs-_s;break;case"hanging":et+=xs-2*_s;break;case"middle":et+=xs/2-_s}if((ne=lt.maxWidth||0)>0&&(typeof _=="string"?_=ti.splitTextToSize(_,ne):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Ie,je){return Ie.concat(ti.splitTextToSize(je,ne))},[]))),kt={text:_,x:B,y:et,options:lt,mutex:{pdfEscape:Mi,activeFontKey:te,fonts:_e,activeFontSize:Lt}},xe.publish("preProcessText",kt),_=kt.text,qt=(lt=kt.options).angle,!(He instanceof Zt)&&qt&&typeof qt=="number"){qt*=Math.PI/180,lt.rotationDirection===0&&(qt=-qt),x===y.ADVANCED&&(qt=-qt);var Ss=Math.cos(qt),La=Math.sin(qt);He=new Zt(Ss,La,-La,Ss,0,0)}else qt&&qt instanceof Zt&&(He=qt);x!==y.ADVANCED||He||(He=kr),(ae=lt.charSpace||ms)!==void 0&&(oi+=T(I(ae))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Re=lt.horizontalScale)!==void 0&&(oi+=T(100*Re)+` Tz
`),lt.lang;var Ni=-1,Kl=lt.renderingMode!==void 0?lt.renderingMode:lt.stroke,Ta=ti.internal.getCurrentPageInfo().pageContext;switch(Kl){case 0:case!1:case"fill":Ni=0;break;case 1:case!0:case"stroke":Ni=1;break;case 2:case"fillThenStroke":Ni=2;break;case 3:case"invisible":Ni=3;break;case 4:case"fillAndAddForClipping":Ni=4;break;case 5:case"strokeAndAddPathForClipping":Ni=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ni=6;break;case 7:case"addToPathForClipping":Ni=7}var _o=Ta.usedRenderingMode!==void 0?Ta.usedRenderingMode:-1;Ni!==-1?oi+=Ni+` Tr
`:_o!==-1&&(oi+=`0 Tr
`),Ni!==-1&&(Ta.usedRenderingMode=Ni),Gt=lt.align||"left";var Yi,Cs=Lt*Ri,So=ti.internal.pageSize.getWidth(),Co=_e[te];ae=lt.charSpace||ms,ne=lt.maxWidth||0,ve=Object.assign({autoencode:!0,noBOM:!0},lt.flags);var fn=[],Hn=function(Ie){return ti.getStringUnitWidth(Ie,{font:Co,charSpace:ae,fontSize:Lt,doKerning:!1})*Lt/Mr};if(Object.prototype.toString.call(_)==="[object Array]"){var Fi;Ft=Sa(_),Gt!=="left"&&(Yi=Ft.map(Hn));var Ai,dn=0;if(Gt==="right"){B-=Yi[0],_=[],di=Ft.length;for(var Yr=0;Yr<di;Yr++)Yr===0?(Ai=Or(B),Fi=Hr(et)):(Ai=I(dn-Yi[Yr]),Fi=-Cs),_.push([Ft[Yr],Ai,Fi]),dn=Yi[Yr]}else if(Gt==="center"){B-=Yi[0]/2,_=[],di=Ft.length;for(var Vr=0;Vr<di;Vr++)Vr===0?(Ai=Or(B),Fi=Hr(et)):(Ai=I((dn-Yi[Vr])/2),Fi=-Cs),_.push([Ft[Vr],Ai,Fi]),dn=Yi[Vr]}else if(Gt==="left"){_=[],di=Ft.length;for(var As=0;As<di;As++)_.push(Ft[As])}else if(Gt==="justify"&&Co.encoding==="Identity-H"){_=[],di=Ft.length,ne=ne!==0?ne:So;for(var Xr=0,Ge=0;Ge<di;Ge++)if(Fi=Ge===0?Hr(et):-Cs,Ai=Ge===0?Or(B):Xr,Ge<di-1){var Pa=I((ne-Yi[Ge])/(Ft[Ge].split(" ").length-1)),ki=Ft[Ge].split(" ");_.push([ki[0]+" ",Ai,Fi]),Xr=0;for(var Vi=1;Vi<ki.length;Vi++){var ks=(Hn(ki[Vi-1]+" "+ki[Vi])-Hn(ki[Vi]))*Mr+Pa;Vi==ki.length-1?_.push([ki[Vi],ks,0]):_.push([ki[Vi]+" ",ks,0]),Xr-=ks}}else _.push([Ft[Ge],Ai,Fi]);_.push(["",Xr,0])}else{if(Gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],di=Ft.length,ne=ne!==0?ne:So,Ge=0;Ge<di;Ge++)Fi=Ge===0?Hr(et):-Cs,Ai=Ge===0?Or(B):0,Ge<di-1?fn.push(T(I((ne-Yi[Ge])/(Ft[Ge].split(" ").length-1)))):fn.push(0),_.push([Ft[Ge],Ai,Fi])}}var Ao=typeof lt.R2L=="boolean"?lt.R2L:Mt;Ao===!0&&(_=Ca(_,function(Ie,je,$e){return[Ie.split("").reverse().join(""),je,$e]})),kt={text:_,x:B,y:et,options:lt,mutex:{pdfEscape:Mi,activeFontKey:te,fonts:_e,activeFontSize:Lt}},xe.publish("postProcessText",kt),_=kt.text,ur=kt.mutex.isHex||!1;var Oa=_e[te].encoding;Oa!=="WinAnsiEncoding"&&Oa!=="StandardEncoding"||(_=Ca(_,function(Ie,je,$e){return[xo(Ie),je,$e]})),Ft=Sa(_),_=[];for(var Yn,Vn,pn,Xn=0,Ls=1,Gn=Array.isArray(Ft[0])?Ls:Xn,gn="",Ma=function(Ie,je,$e){var ai="";return $e instanceof Zt?($e=typeof lt.angle=="number"?sr($e,new Zt(1,0,0,1,Ie,je)):sr(new Zt(1,0,0,1,Ie,je),$e),x===y.ADVANCED&&($e=sr(new Zt(1,0,0,-1,0,0),$e)),ai=$e.join(" ")+` Tm
`):ai=T(Ie)+" "+T(je)+` Td
`,ai},Xi=0;Xi<Ft.length;Xi++){switch(gn="",Gn){case Ls:pn=(ur?"<":"(")+Ft[Xi][0]+(ur?">":")"),Yn=parseFloat(Ft[Xi][1]),Vn=parseFloat(Ft[Xi][2]);break;case Xn:pn=(ur?"<":"(")+Ft[Xi]+(ur?">":")"),Yn=Or(B),Vn=Hr(et)}fn!==void 0&&fn[Xi]!==void 0&&(gn=fn[Xi]+` Tw
`),Xi===0?_.push(gn+Ma(Yn,Vn,He)+pn):Gn===Xn?_.push(gn+pn):Gn===Ls&&_.push(gn+Ma(Yn,Vn,He)+pn)}_=Gn===Xn?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Gi=`BT
/`;return Gi+=te+" "+Lt+` Tf
`,Gi+=T(Lt*Ri)+` TL
`,Gi+=Un+`
`,Gi+=oi,Gi+=_,H(Gi+="ET"),l[te]=!0,ti};var ql=n.__private__.clip=n.clip=function(_){return H(_==="evenodd"?"W*":"W"),this};n.clipEvenOdd=function(){return ql("evenodd")},n.__private__.discardPath=n.discardPath=function(){return H("n"),this};var Pr=n.__private__.isValidStyle=function(_){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(B=!0),B};n.__private__.setDefaultPathOperation=n.setDefaultPathOperation=function(_){return Pr(_)&&(c=_),this};var fo=n.__private__.getStyle=n.getStyle=function(_){var B=c;switch(_){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=_}return B},po=n.close=function(){return H("h"),this};n.stroke=function(){return H("S"),this},n.fill=function(_){return ps("f",_),this},n.fillEvenOdd=function(_){return ps("f*",_),this},n.fillStroke=function(_){return ps("B",_),this},n.fillStrokeEvenOdd=function(_){return ps("B*",_),this};var ps=function(_,B){ke(B)==="object"?Wl(B,_):H(_)},da=function(_){_===null||x===y.ADVANCED&&_===void 0||(_=fo(_),H(_))};function Ul(_,B,et,lt,wt){var kt=new Zn(B||this.boundingBox,et||this.xStep,lt||this.yStep,this.gState,wt||this.matrix);kt.stream=this.stream;var Ft=_+"$$"+this.cloneIndex+++"$$";return Oi(Ft,kt),kt}var Wl=function(_,B){var et=Dn[_.key],lt=we[et];if(lt instanceof kn)H("q"),H(Hl(B)),lt.gState&&n.setGState(lt.gState),H(_.matrix.toString()+" cm"),H("/"+et+" sh"),H("Q");else if(lt instanceof Zn){var wt=new Zt(1,0,0,-1,0,un());_.matrix&&(wt=wt.multiply(_.matrix||kr),et=Ul.call(lt,_.key,_.boundingBox,_.xStep,_.yStep,wt).id),H("q"),H("/Pattern cs"),H("/"+et+" scn"),lt.gState&&n.setGState(lt.gState),H(B),H("Q")}},Hl=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},pa=n.moveTo=function(_,B){return H(T(I(_))+" "+T(V(B))+" m"),this},zn=n.lineTo=function(_,B){return H(T(I(_))+" "+T(V(B))+" l"),this},cn=n.curveTo=function(_,B,et,lt,wt,kt){return H([T(I(_)),T(V(B)),T(I(et)),T(V(lt)),T(I(wt)),T(V(kt)),"c"].join(" ")),this};n.__private__.line=n.line=function(_,B,et,lt,wt){if(isNaN(_)||isNaN(B)||isNaN(et)||isNaN(lt)||!Pr(wt))throw new Error("Invalid arguments passed to jsPDF.line");return x===y.COMPAT?this.lines([[et-_,lt-B]],_,B,[1,1],wt||"S"):this.lines([[et-_,lt-B]],_,B,[1,1]).stroke()},n.__private__.lines=n.lines=function(_,B,et,lt,wt,kt){var Ft,qt,Gt,ae,ne,ve,Re,He,ti,bi,oi,ur;if(typeof _=="number"&&(ur=et,et=B,B=_,_=ur),lt=lt||[1,1],kt=kt||!1,isNaN(B)||isNaN(et)||!Array.isArray(_)||!Array.isArray(lt)||!Pr(wt)||typeof kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(pa(B,et),Ft=lt[0],qt=lt[1],ae=_.length,bi=B,oi=et,Gt=0;Gt<ae;Gt++)(ne=_[Gt]).length===2?(bi=ne[0]*Ft+bi,oi=ne[1]*qt+oi,zn(bi,oi)):(ve=ne[0]*Ft+bi,Re=ne[1]*qt+oi,He=ne[2]*Ft+bi,ti=ne[3]*qt+oi,bi=ne[4]*Ft+bi,oi=ne[5]*qt+oi,cn(ve,Re,He,ti,bi,oi));return kt&&po(),da(wt),this},n.path=function(_){for(var B=0;B<_.length;B++){var et=_[B],lt=et.c;switch(et.op){case"m":pa(lt[0],lt[1]);break;case"l":zn(lt[0],lt[1]);break;case"c":cn.apply(this,lt);break;case"h":po()}}return this},n.__private__.rect=n.rect=function(_,B,et,lt,wt){if(isNaN(_)||isNaN(B)||isNaN(et)||isNaN(lt)||!Pr(wt))throw new Error("Invalid arguments passed to jsPDF.rect");return x===y.COMPAT&&(lt=-lt),H([T(I(_)),T(V(B)),T(I(et)),T(I(lt)),"re"].join(" ")),da(wt),this},n.__private__.triangle=n.triangle=function(_,B,et,lt,wt,kt,Ft){if(isNaN(_)||isNaN(B)||isNaN(et)||isNaN(lt)||isNaN(wt)||isNaN(kt)||!Pr(Ft))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[et-_,lt-B],[wt-et,kt-lt],[_-wt,B-kt]],_,B,[1,1],Ft,!0),this},n.__private__.roundedRect=n.roundedRect=function(_,B,et,lt,wt,kt,Ft){if(isNaN(_)||isNaN(B)||isNaN(et)||isNaN(lt)||isNaN(wt)||isNaN(kt)||!Pr(Ft))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qt=4/3*(Math.SQRT2-1);return wt=Math.min(wt,.5*et),kt=Math.min(kt,.5*lt),this.lines([[et-2*wt,0],[wt*qt,0,wt,kt-kt*qt,wt,kt],[0,lt-2*kt],[0,kt*qt,-wt*qt,kt,-wt,kt],[2*wt-et,0],[-wt*qt,0,-wt,-kt*qt,-wt,-kt],[0,2*kt-lt],[0,-kt*qt,wt*qt,-kt,wt,-kt]],_+wt,B,[1,1],Ft,!0),this},n.__private__.ellipse=n.ellipse=function(_,B,et,lt,wt){if(isNaN(_)||isNaN(B)||isNaN(et)||isNaN(lt)||!Pr(wt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var kt=4/3*(Math.SQRT2-1)*et,Ft=4/3*(Math.SQRT2-1)*lt;return pa(_+et,B),cn(_+et,B-Ft,_+kt,B-lt,_,B-lt),cn(_-kt,B-lt,_-et,B-Ft,_-et,B),cn(_-et,B+Ft,_-kt,B+lt,_,B+lt),cn(_+kt,B+lt,_+et,B+Ft,_+et,B),da(wt),this},n.__private__.circle=n.circle=function(_,B,et,lt){if(isNaN(_)||isNaN(B)||isNaN(et)||!Pr(lt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,B,et,et,lt)},n.setFont=function(_,B,et){return et&&(B=M(B,et)),te=co(_,B,{disableWarning:!1}),this};var Yl=n.__private__.getFont=n.getFont=function(){return _e[co.apply(n,arguments)]};n.__private__.getFontList=n.getFontList=function(){var _,B,et={};for(_ in Ee)if(Ee.hasOwnProperty(_))for(B in et[_]=[],Ee[_])Ee[_].hasOwnProperty(B)&&et[_].push(B);return et},n.addFont=function(_,B,et,lt,wt){var kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&kt.indexOf(arguments[3])!==-1?wt=arguments[3]:arguments[3]&&kt.indexOf(arguments[3])==-1&&(et=M(et,lt)),wt=wt||"Identity-H",ha.call(this,_,B,et,wt)};var qn,ga=e.lineWidth||.200025,gs=n.__private__.getLineWidth=n.getLineWidth=function(){return ga},go=n.__private__.setLineWidth=n.setLineWidth=function(_){return ga=_,H(T(I(_))+" w"),this};n.__private__.setLineDash=Jt.API.setLineDash=Jt.API.setLineDashPattern=function(_,B){if(_=_||[],B=B||0,isNaN(B)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(et){return T(I(et))}).join(" "),B=T(I(B)),H("["+_+"] "+B+" d"),this};var mo=n.__private__.getLineHeight=n.getLineHeight=function(){return Lt*qn};n.__private__.getLineHeight=n.getLineHeight=function(){return Lt*qn};var vo=n.__private__.setLineHeightFactor=n.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(qn=_),this},bo=n.__private__.getLineHeightFactor=n.getLineHeightFactor=function(){return qn};vo(e.lineHeight);var Or=n.__private__.getHorizontalCoordinate=function(_){return I(_)},Hr=n.__private__.getVerticalCoordinate=function(_){return x===y.ADVANCED?_:re[D].mediaBox.topRightY-re[D].mediaBox.bottomLeftY-I(_)},Vl=n.__private__.getHorizontalCoordinateString=n.getHorizontalCoordinateString=function(_){return T(Or(_))},hn=n.__private__.getVerticalCoordinateString=n.getVerticalCoordinateString=function(_){return T(Hr(_))},hr=e.strokeColor||"0 G";n.__private__.getStrokeColor=n.getDrawColor=function(){return or(hr)},n.__private__.setStrokeColor=n.setDrawColor=function(_,B,et,lt){return hr=lr({ch1:_,ch2:B,ch3:et,ch4:lt,pdfColorType:"draw",precision:2}),H(hr),this};var ma=e.fillColor||"0 g";n.__private__.getFillColor=n.getFillColor=function(){return or(ma)},n.__private__.setFillColor=n.setFillColor=function(_,B,et,lt){return ma=lr({ch1:_,ch2:B,ch3:et,ch4:lt,pdfColorType:"fill",precision:2}),H(ma),this};var Un=e.textColor||"0 g",Xl=n.__private__.getTextColor=n.getTextColor=function(){return or(Un)};n.__private__.setTextColor=n.setTextColor=function(_,B,et,lt){return Un=lr({ch1:_,ch2:B,ch3:et,ch4:lt,pdfColorType:"text",precision:3}),this};var ms=e.charSpace,Gl=n.__private__.getCharSpace=n.getCharSpace=function(){return parseFloat(ms||0)};n.__private__.setCharSpace=n.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ms=_,this};var va=0;n.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},n.__private__.setLineCap=n.setLineCap=function(_){var B=n.CapJoinStyles[_];if(B===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return va=B,H(B+" J"),this};var ba=0;n.__private__.setLineJoin=n.setLineJoin=function(_){var B=n.CapJoinStyles[_];if(B===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ba=B,H(B+" j"),this},n.__private__.setLineMiterLimit=n.__private__.setMiterLimit=n.setLineMiterLimit=n.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(T(I(_))+" M"),this},n.GState=is,n.setGState=function(_){(_=typeof _=="string"?Ue[nr[_]]:yo(null,_)).equals(qr)||(H("/"+_.id+" gs"),qr=_)};var yo=function(_,B){if(!_||!nr[_]){var et=!1;for(var lt in Ue)if(Ue.hasOwnProperty(lt)&&Ue[lt].equals(B)){et=!0;break}if(et)B=Ue[lt];else{var wt="GS"+(Object.keys(Ue).length+1).toString(10);Ue[wt]=B,B.id=wt}return _&&(nr[_]=B.id),xe.publish("addGState",B),B}};n.addGState=function(_,B){return yo(_,B),this},n.saveGraphicsState=function(){return H("q"),Sr.push({key:te,size:Lt,color:Un}),this},n.restoreGraphicsState=function(){H("Q");var _=Sr.pop();return te=_.key,Lt=_.size,Un=_.color,qr=null,this},n.setCurrentTransformationMatrix=function(_){return H(_.toString()+" cm"),this},n.comment=function(_){return H("#"+_),this};var vs=function(_,B){var et=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return et},set:function(kt){isNaN(kt)||(et=parseFloat(kt))}});var lt=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return lt},set:function(kt){isNaN(kt)||(lt=parseFloat(kt))}});var wt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return wt},set:function(kt){wt=kt.toString()}}),this},ya=function(_,B,et,lt){vs.call(this,_,B),this.type="rect";var wt=et||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return wt},set:function(Ft){isNaN(Ft)||(wt=parseFloat(Ft))}});var kt=lt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return kt},set:function(Ft){isNaN(Ft)||(kt=parseFloat(Ft))}}),this},wa=function(){this.page=We,this.currentPage=D,this.pages=pt.slice(0),this.pagesContext=re.slice(0),this.x=Pe,this.y=me,this.matrix=Pi,this.width=Wn(D),this.height=un(D),this.outputDestination=ot,this.id="",this.objectNumber=-1};wa.prototype.restore=function(){We=this.page,D=this.currentPage,re=this.pagesContext,pt=this.pages,Pe=this.x,me=this.y,Pi=this.matrix,xa(D,this.width),_a(D,this.height),ot=this.outputDestination};var wo=function(_,B,et,lt,wt){Ar.push(new wa),We=D=0,pt=[],Pe=_,me=B,Pi=wt,ua([et,lt])},$l=function(_){if(Cr[_])Ar.pop().restore();else{var B=new wa,et="Xo"+(Object.keys(fi).length+1).toString(10);B.id=et,Cr[_]=et,fi[et]=B,xe.publish("addFormObject",B),Ar.pop().restore()}};for(var bs in n.beginFormObject=function(_,B,et,lt,wt){return wo(_,B,et,lt,wt),this},n.endFormObject=function(_){return $l(_),this},n.doFormObject=function(_,B){var et=fi[Cr[_]];return H("q"),H(B.toString()+" cm"),H("/"+et.id+" Do"),H("Q"),this},n.getFormObject=function(_){var B=fi[Cr[_]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},n.save=function(_,B){return _=_||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(Kn(fs(Wr()),_),typeof Kn.unload=="function"&&Qt.setTimeout&&setTimeout(Kn.unload,911),this):new Promise(function(et,lt){try{var wt=Kn(fs(Wr()),_);typeof Kn.unload=="function"&&Qt.setTimeout&&setTimeout(Kn.unload,911),et(wt)}catch(kt){lt(kt.message)}})},Jt.API)Jt.API.hasOwnProperty(bs)&&(bs==="events"&&Jt.API.events.length?function(_,B){var et,lt,wt;for(wt=B.length-1;wt!==-1;wt--)et=B[wt][0],lt=B[wt][1],_.subscribe.apply(_,[et].concat(typeof lt=="function"?[lt]:lt))}(xe,Jt.API.events):n[bs]=Jt.API[bs]);var Wn=n.getPageWidth=function(_){return(re[_=_||D].mediaBox.topRightX-re[_].mediaBox.bottomLeftX)/Bt},xa=n.setPageWidth=function(_,B){re[_].mediaBox.topRightX=B*Bt+re[_].mediaBox.bottomLeftX},un=n.getPageHeight=function(_){return(re[_=_||D].mediaBox.topRightY-re[_].mediaBox.bottomLeftY)/Bt},_a=n.setPageHeight=function(_,B){re[_].mediaBox.topRightY=B*Bt+re[_].mediaBox.bottomLeftY};return n.internal={pdfEscape:Mi,getStyle:fo,getFont:Yl,getFontSize:ft,getCharSpace:Gl,getTextColor:Xl,getLineHeight:mo,getLineHeightFactor:bo,getLineWidth:gs,write:vt,getHorizontalCoordinate:Or,getVerticalCoordinate:Hr,getCoordinateString:Vl,getVerticalCoordinateString:hn,collections:{},newObject:si,newAdditionalObject:ns,newObjectDeferred:Qe,newObjectDeferredBegin:Bi,getFilters:Lr,putStream:Hi,events:xe,scaleFactor:Bt,pageSize:{getWidth:function(){return Wn(D)},setWidth:function(_){xa(D,_)},getHeight:function(){return un(D)},setHeight:function(_){_a(D,_)}},encryptionOptions:u,encryption:vi,getEncryptor:Rl,output:ds,getNumberOfPages:El,pages:pt,out:H,f2:K,f3:P,getPageInfo:uo,getPageInfoByObjId:ee,getCurrentPageInfo:zl,getPDFVersion:g,Point:vs,Rectangle:ya,Matrix:Zt,hasHotfix:ho},Object.defineProperty(n.internal.pageSize,"width",{get:function(){return Wn(D)},set:function(_){xa(D,_)},enumerable:!0,configurable:!0}),Object.defineProperty(n.internal.pageSize,"height",{get:function(){return un(D)},set:function(_){_a(D,_)},enumerable:!0,configurable:!0}),Nl.call(n,bt),te="F1",oo(d,i),xe.publish("initialized"),n}qs.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},qs.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},qs.prototype.hexToBytes=function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(String.fromCharCode(parseInt(e.substr(i,2),16)));return t.join("")},qs.prototype.processOwnerPassword=function(e,t){return eh(th(t).substr(0,5),e)},qs.prototype.encryptor=function(e,t){var i=th(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return eh(i,s)}},is.prototype.equals=function(e){var t,i="id,objectNumber,equals";if(!e||ke(e)!==ke(this))return!1;var s=0;for(t in this)if(!(i.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&i.indexOf(t)<0&&s--;return s===0},Jt.API={events:[]},Jt.version="3.0.0";var Ve=Jt.API,xh=1,rs=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ds=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},se=function(e){return e.toFixed(2)},Cn=function(e){return e.toFixed(5)};Ve.__acroform__={};var Di=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Lu=function(e){return e*xh},Fr=function(e){var t=new rd,i=Ht.internal.getHeight(e)||0,s=Ht.internal.getWidth(e)||0;return t.BBox=[0,0,Number(se(s)),Number(se(i))],t},Pg=Ve.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Og=Ve.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Mg=Ve.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ke=Ve.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Mg(e,t-1)},Je=Ve.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Pg(e,t-1)},Ze=Ve.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Og(e,t-1)},Ng=Ve.__acroform__.calculateCoordinates=function(e,t){var i=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,d=e[0],p=e[1],v=e[2],o=e[3],r={};return r.lowerLeft_X=i(d)||0,r.lowerLeft_Y=s(p+o)||0,r.upperRight_X=i(d+v)||0,r.upperRight_Y=s(p)||0,[Number(se(r.lowerLeft_X)),Number(se(r.lowerLeft_Y)),Number(se(r.upperRight_X)),Number(se(r.upperRight_Y))]},Fg=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],i=e._V||e.DV,s=ih(e,i),d=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+d+" "+se(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var p=Fr(e);return p.scope=e.scope,p.stream=t.join(`
`),p}},ih=function(e,t){var i=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},d=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");d=e.multiline?d.map(function(P){return P.split(`
`)}):d.map(function(P){return[P]});var p=i,v=Ht.internal.getHeight(e)||0;v=v<0?-v:v;var o=Ht.internal.getWidth(e)||0;o=o<0?-o:o;var r=function(P,I,J){if(P+1<d.length){var V=I+" "+d[P+1][0];return Zo(V,e,J).width<=o-4}return!1};p++;t:for(;p>0;){t="",p--;var c,u,a=Zo("3",e,p).height,l=e.multiline?v-p:(v-a)/2,n=l+=2,h=0,g=0,f=0;if(p<=0){t=`(...) Tj
`,t+="% Width of Text: "+Zo(t,e,p=12).width+", FieldWidth:"+o+`
`;break}for(var m="",y=0,x=0;x<d.length;x++)if(d.hasOwnProperty(x)){var S=!1;if(d[x].length!==1&&f!==d[x].length-1){if((a+2)*(y+2)+2>v)continue t;m+=d[x][f],S=!0,g=x,x--}else{m=(m+=d[x][f]+" ").substr(m.length-1)==" "?m.substr(0,m.length-1):m;var A=parseInt(x),M=r(A,m,p),T=x>=d.length-1;if(M&&!T){m+=" ",f=0;continue}if(M||T){if(T)g=A;else if(e.multiline&&(a+2)*(y+2)+2>v)continue t}else{if(!e.multiline||(a+2)*(y+2)+2>v)continue t;g=A}}for(var N="",W=h;W<=g;W++){var K=d[W];if(e.multiline){if(W===g){N+=K[f]+" ",f=(f+1)%K.length;continue}if(W===h){N+=K[K.length-1]+" ";continue}}N+=K[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=Zo(N,e,p).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}t+=se(c)+" "+se(n)+` Td
`,t+="("+rs(N)+`) Tj
`,t+=-se(c)+` 0 Td
`,n=-(p+2),u=0,h=S?g:g+1,y++,m=""}break}return s.text=t,s.fontSize=p,s},Zo=function(e,t,i){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),d=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:d}},Eg={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Ig=function(e,t){var i={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===i.type&&s.object===i.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(i)},jg=function(e,t){for(var i in e)if(e.hasOwnProperty(i)){var s=i,d=e[i];t.internal.newObjectDeferredBegin(d.objId,!0),ke(d)==="object"&&typeof d.putStream=="function"&&d.putStream(),delete e[s]}},Dg=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(xr.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Eg)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xh=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new nd,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var d in s)if(s.hasOwnProperty(d)){var p=s[d];p.objId=void 0,p.hasAnnotation&&Ig(p,i)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(i){(function(s,d){var p=!s;for(var v in s||(d.internal.newObjectDeferredBegin(d.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),d.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||d.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(v)){var o=s[v],r=[],c=o.Rect;if(o.Rect&&(o.Rect=Ng(o.Rect,d)),d.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ht.createDefaultAppearanceStream(o),ke(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(r=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=Fg(o);r.push({key:"AP",value:"<</N "+u+">>"}),d.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var a="";for(var l in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(l)){var n=o.appearanceStreamContent[l];if(a+="/"+l+" ",a+="<<",Object.keys(n).length>=1||Array.isArray(n)){for(var v in n)if(n.hasOwnProperty(v)){var h=n[v];typeof h=="function"&&(h=h.call(d,o)),a+="/"+v+" "+h+" ",d.internal.acroformPlugin.xForms.indexOf(h)>=0||d.internal.acroformPlugin.xForms.push(h)}}else typeof(h=n)=="function"&&(h=h.call(d,o)),a+="/"+v+" "+h,d.internal.acroformPlugin.xForms.indexOf(h)>=0||d.internal.acroformPlugin.xForms.push(h);a+=">>"}r.push({key:"AP",value:`<<
`+a+">>"})}d.internal.putStream({additionalKeyValues:r,objectId:o.objId}),d.internal.out("endobj")}p&&jg(d.internal.acroformPlugin.xForms,d)})(i,e)}),e.internal.acroformPlugin.isInitialized=!0}},id=Ve.__acroform__.arrayToPdfArray=function(e,t,i){var s=function(v){return v};if(Array.isArray(e)){for(var d="[",p=0;p<e.length;p++)switch(p!==0&&(d+=" "),ke(e[p])){case"boolean":case"number":case"object":d+=e[p].toString();break;case"string":e[p].substr(0,1)!=="/"?(t!==void 0&&i&&(s=i.internal.getEncryptor(t)),d+="("+rs(s(e[p].toString()))+")"):d+=e[p].toString()}return d+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Nc=function(e,t,i){var s=function(d){return d};return t!==void 0&&i&&(s=i.internal.getEncryptor(t)),(e=e||"").toString(),e="("+rs(s(e))+")"},jr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};jr.prototype.toString=function(){return this.objId+" 0 R"},jr.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},jr.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(p){return p!="content"&&p!="appearanceStreamContent"&&p!="scope"&&p!="objId"&&p.substring(0,1)!="_"});for(var i in t)if(Object.getOwnPropertyDescriptor(this,t[i]).configurable===!1){var s=t[i],d=this[s];d&&(Array.isArray(d)?e.push({key:s,value:id(d,this.objId,this.scope)}):d instanceof jr?(d.scope=this.scope,e.push({key:s,value:d.objId+" 0 R"})):typeof d!="function"&&e.push({key:s,value:d}))}return e};var rd=function(){jr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){e=i.trim()},get:function(){return e||null}})};Di(rd,jr);var nd=function(){jr.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var i=function(s){return s};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+rs(i(e))+")"}},set:function(i){e=i}})};Di(nd,jr);var xr=function e(){jr.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute F supplied.');t=m}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ke(t,3)},set:function(m){m?this.F=Je(t,3):this.F=Ze(t,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute Ff supplied.');i=m}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(m){s=m!==void 0?m:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(m){s[0]=m}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(m){s[1]=m}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(m){s[2]=m}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(m){s[3]=m}});var d="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return d},set:function(m){switch(m){case"/Btn":case"/Tx":case"/Ch":case"/Sig":d=m;break;default:throw new Error('Invalid value "'+m+'" for attribute FT supplied.')}}});var p=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!p||p.length<1){if(this instanceof ml)return;p="FieldObject"+e.FieldNum++}var m=function(y){return y};return this.scope&&(m=this.scope.internal.getEncryptor(this.objId)),"("+rs(m(p))+")"},set:function(m){p=m.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return p},set:function(m){p=m}});var v="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return v},set:function(m){v=m}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(m){o=m}});var r=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return r},set:function(m){r=m}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/xh:c},set:function(m){c=m}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(m){u=m}});var a="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!a||this instanceof ml||this instanceof ts))return Nc(a,this.objId,this.scope)},set:function(m){m=m.toString(),a=m}});var l=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(l)return this instanceof ui?l:Nc(l,this.objId,this.scope)},set:function(m){m=m.toString(),l=this instanceof ui?m:m.substr(0,1)==="("?Ds(m.substr(1,m.length-2)):Ds(m)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ui?Ds(l.substr(1,l.length-1)):l},set:function(m){m=m.toString(),l=this instanceof ui?"/"+m:m}});var n=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(n)return n},set:function(m){this.V=m}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(n)return this instanceof ui?n:Nc(n,this.objId,this.scope)},set:function(m){m=m.toString(),n=this instanceof ui?m:m.substr(0,1)==="("?Ds(m.substr(1,m.length-2)):Ds(m)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ui?Ds(n.substr(1,n.length-1)):n},set:function(m){m=m.toString(),n=this instanceof ui?"/"+m:m}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var h,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(m){m=!!m,g=m}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(h)return h},set:function(m){h=m}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,1)},set:function(m){m?this.Ff=Je(this.Ff,1):this.Ff=Ze(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,2)},set:function(m){m?this.Ff=Je(this.Ff,2):this.Ff=Ze(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,3)},set:function(m){m?this.Ff=Je(this.Ff,3):this.Ff=Ze(this.Ff,3)}});var f=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(f!==null)return f},set:function(m){if([0,1,2].indexOf(m)===-1)throw new Error('Invalid value "'+m+'" for attribute Q supplied.');f=m}}),Object.defineProperty(this,"textAlign",{get:function(){var m;switch(f){case 0:default:m="left";break;case 1:m="center";break;case 2:m="right"}return m},configurable:!0,enumerable:!0,set:function(m){switch(m){case"right":case 2:f=2;break;case"center":case 1:f=1;break;case"left":case 0:default:f=0}}})};Di(xr,jr);var Xs=function(){xr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(i){e=i}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return id(t,this.objId,this.scope)},set:function(i){var s,d;d=[],typeof(s=i)=="string"&&(d=function(p,v,o){o||(o=1);for(var r,c=[];r=v.exec(p);)c.push(r[o]);return c}(s,/\((.*?)\)/g)),t=d}}),this.getOptions=function(){return t},this.setOptions=function(i){t=i,this.sort&&t.sort()},this.addOption=function(i){i=(i=i||"").toString(),t.push(i),this.sort&&t.sort()},this.removeOption=function(i,s){for(s=s||!1,i=(i=i||"").toString();t.indexOf(i)!==-1&&(t.splice(t.indexOf(i),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,18)},set:function(i){i?this.Ff=Je(this.Ff,18):this.Ff=Ze(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=Je(this.Ff,19):this.Ff=Ze(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,20)},set:function(i){i?(this.Ff=Je(this.Ff,20),t.sort()):this.Ff=Ze(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,22)},set:function(i){i?this.Ff=Je(this.Ff,22):this.Ff=Ze(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,23)},set:function(i){i?this.Ff=Je(this.Ff,23):this.Ff=Ze(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,27)},set:function(i){i?this.Ff=Je(this.Ff,27):this.Ff=Ze(this.Ff,27)}}),this.hasAppearanceStream=!1};Di(Xs,xr);var Gs=function(){Xs.call(this),this.fontName="helvetica",this.combo=!1};Di(Gs,Xs);var $s=function(){Gs.call(this),this.combo=!0};Di($s,Gs);var sl=function(){$s.call(this),this.edit=!0};Di(sl,$s);var ui=function(){xr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,15)},set:function(i){i?this.Ff=Je(this.Ff,15):this.Ff=Ze(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,16)},set:function(i){i?this.Ff=Je(this.Ff,16):this.Ff=Ze(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,17)},set:function(i){i?this.Ff=Je(this.Ff,17):this.Ff=Ze(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,26)},set:function(i){i?this.Ff=Je(this.Ff,26):this.Ff=Ze(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(p){return p};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,d=[];for(s in d.push("<<"),t)d.push("/"+s+" ("+rs(i(t[s]))+")");return d.push(">>"),d.join(`
`)}},set:function(i){ke(i)==="object"&&(t=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(i){typeof i=="string"&&(t.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}})};Di(ui,xr);var al=function(){ui.call(this),this.pushButton=!0};Di(al,ui);var Ks=function(){ui.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Di(Ks,ui);var ml=function(){var e,t;xr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(d){e=d}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(d){t=d}});var i,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var d=function(o){return o};this.scope&&(d=this.scope.internal.getEncryptor(this.objId));var p,v=[];for(p in v.push("<<"),s)v.push("/"+p+" ("+rs(d(s[p]))+")");return v.push(">>"),v.join(`
`)},set:function(d){ke(d)==="object"&&(s=d)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(d){typeof d=="string"&&(s.CA=d)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(d){i=d}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(d){i="/"+d}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ht.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Di(ml,xr),Ks.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var i=this.Kids[t];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},Ks.prototype.createOption=function(e){var t=new ml;return t.Parent=this,t.optionName=e,this.Kids.push(t),Bg.call(this.scope,t),t};var ol=function(){ui.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ht.CheckBox.createAppearanceStream()};Di(ol,ui);var ts=function(){xr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,13)},set:function(t){t?this.Ff=Je(this.Ff,13):this.Ff=Ze(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,21)},set:function(t){t?this.Ff=Je(this.Ff,21):this.Ff=Ze(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,23)},set:function(t){t?this.Ff=Je(this.Ff,23):this.Ff=Ze(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,24)},set:function(t){t?this.Ff=Je(this.Ff,24):this.Ff=Ze(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,25)},set:function(t){t?this.Ff=Je(this.Ff,25):this.Ff=Ze(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,26)},set:function(t){t?this.Ff=Je(this.Ff,26):this.Ff=Ze(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Di(ts,xr);var ll=function(){ts.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ke(this.Ff,14)},set:function(e){e?this.Ff=Je(this.Ff,14):this.Ff=Ze(this.Ff,14)}}),this.password=!0};Di(ll,ts);var Ht={CheckBox:{createAppearanceStream:function(){return{N:{On:Ht.CheckBox.YesNormal},D:{On:Ht.CheckBox.YesPushDown,Off:Ht.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Fr(e);t.scope=e.scope;var i=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,d=e.scope.__private__.encodeColorString(e.color),p=ih(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+se(Ht.internal.getWidth(e))+" "+se(Ht.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+s+" "+se(p.fontSize)+" Tf "+d),i.push("BT"),i.push(p.text),i.push("ET"),i.push("Q"),i.push("EMC"),t.stream=i.join(`
`),t},YesNormal:function(e){var t=Fr(e);t.scope=e.scope;var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),d=[],p=Ht.internal.getHeight(e),v=Ht.internal.getWidth(e),o=ih(e,e.caption);return d.push("1 g"),d.push("0 0 "+se(v)+" "+se(p)+" re"),d.push("f"),d.push("q"),d.push("0 0 1 rg"),d.push("0 0 "+se(v-1)+" "+se(p-1)+" re"),d.push("W"),d.push("n"),d.push("0 g"),d.push("BT"),d.push("/"+i+" "+se(o.fontSize)+" Tf "+s),d.push(o.text),d.push("ET"),d.push("Q"),t.stream=d.join(`
`),t},OffPushDown:function(e){var t=Fr(e);t.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+se(Ht.internal.getWidth(e))+" "+se(Ht.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ht.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ht.RadioButton.Circle.YesNormal,t.D[e]=Ht.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Fr(e);t.scope=e.scope;var i=[],s=Ht.internal.getWidth(e)<=Ht.internal.getHeight(e)?Ht.internal.getWidth(e)/4:Ht.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var d=Ht.internal.Bezier_C,p=Number((s*d).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+Cn(Ht.internal.getWidth(e)/2)+" "+Cn(Ht.internal.getHeight(e)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+p+" "+p+" "+s+" 0 "+s+" c"),i.push("-"+p+" "+s+" -"+s+" "+p+" -"+s+" 0 c"),i.push("-"+s+" -"+p+" -"+p+" -"+s+" 0 -"+s+" c"),i.push(p+" -"+s+" "+s+" -"+p+" "+s+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(e){var t=Fr(e);t.scope=e.scope;var i=[],s=Ht.internal.getWidth(e)<=Ht.internal.getHeight(e)?Ht.internal.getWidth(e)/4:Ht.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var d=Number((2*s).toFixed(5)),p=Number((d*Ht.internal.Bezier_C).toFixed(5)),v=Number((s*Ht.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Cn(Ht.internal.getWidth(e)/2)+" "+Cn(Ht.internal.getHeight(e)/2)+" cm"),i.push(d+" 0 m"),i.push(d+" "+p+" "+p+" "+d+" 0 "+d+" c"),i.push("-"+p+" "+d+" -"+d+" "+p+" -"+d+" 0 c"),i.push("-"+d+" -"+p+" -"+p+" -"+d+" 0 -"+d+" c"),i.push(p+" -"+d+" "+d+" -"+p+" "+d+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+Cn(Ht.internal.getWidth(e)/2)+" "+Cn(Ht.internal.getHeight(e)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+v+" "+v+" "+s+" 0 "+s+" c"),i.push("-"+v+" "+s+" -"+s+" "+v+" -"+s+" 0 c"),i.push("-"+s+" -"+v+" -"+v+" -"+s+" 0 -"+s+" c"),i.push(v+" -"+s+" "+s+" -"+v+" "+s+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Fr(e);t.scope=e.scope;var i=[],s=Ht.internal.getWidth(e)<=Ht.internal.getHeight(e)?Ht.internal.getWidth(e)/4:Ht.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var d=Number((2*s).toFixed(5)),p=Number((d*Ht.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Cn(Ht.internal.getWidth(e)/2)+" "+Cn(Ht.internal.getHeight(e)/2)+" cm"),i.push(d+" 0 m"),i.push(d+" "+p+" "+p+" "+d+" 0 "+d+" c"),i.push("-"+p+" "+d+" -"+d+" "+p+" -"+d+" 0 c"),i.push("-"+d+" -"+p+" -"+p+" -"+d+" 0 -"+d+" c"),i.push(p+" -"+d+" "+d+" -"+p+" "+d+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ht.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ht.RadioButton.Cross.YesNormal,t.D[e]=Ht.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Fr(e);t.scope=e.scope;var i=[],s=Ht.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+se(Ht.internal.getWidth(e)-2)+" "+se(Ht.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(se(s.x1.x)+" "+se(s.x1.y)+" m"),i.push(se(s.x2.x)+" "+se(s.x2.y)+" l"),i.push(se(s.x4.x)+" "+se(s.x4.y)+" m"),i.push(se(s.x3.x)+" "+se(s.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(e){var t=Fr(e);t.scope=e.scope;var i=Ht.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+se(Ht.internal.getWidth(e))+" "+se(Ht.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+se(Ht.internal.getWidth(e)-2)+" "+se(Ht.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(se(i.x1.x)+" "+se(i.x1.y)+" m"),s.push(se(i.x2.x)+" "+se(i.x2.y)+" l"),s.push(se(i.x4.x)+" "+se(i.x4.y)+" m"),s.push(se(i.x3.x)+" "+se(i.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Fr(e);t.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+se(Ht.internal.getWidth(e))+" "+se(Ht.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+i}};Ht.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ht.internal.getWidth(e),i=Ht.internal.getHeight(e),s=Math.min(t,i);return{x1:{x:(t-s)/2,y:(i-s)/2+s},x2:{x:(t-s)/2+s,y:(i-s)/2},x3:{x:(t-s)/2,y:(i-s)/2},x4:{x:(t-s)/2+s,y:(i-s)/2+s}}}},Ht.internal.getWidth=function(e){var t=0;return ke(e)==="object"&&(t=Lu(e.Rect[2])),t},Ht.internal.getHeight=function(e){var t=0;return ke(e)==="object"&&(t=Lu(e.Rect[3])),t};var Bg=Ve.addField=function(e){if(Dg(this,e),!(e instanceof xr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ve.AcroFormChoiceField=Xs,Ve.AcroFormListBox=Gs,Ve.AcroFormComboBox=$s,Ve.AcroFormEditBox=sl,Ve.AcroFormButton=ui,Ve.AcroFormPushButton=al,Ve.AcroFormRadioButton=Ks,Ve.AcroFormCheckBox=ol,Ve.AcroFormTextField=ts,Ve.AcroFormPasswordField=ll,Ve.AcroFormAppearance=Ht,Ve.AcroForm={ChoiceField:Xs,ListBox:Gs,ComboBox:$s,EditBox:sl,Button:ui,PushButton:al,RadioButton:Ks,CheckBox:ol,TextField:ts,PasswordField:ll,Appearance:Ht},Jt.AcroForm={ChoiceField:Xs,ListBox:Gs,ComboBox:$s,EditBox:sl,Button:ui,PushButton:al,RadioButton:Ks,CheckBox:ol,TextField:ts,PasswordField:ll,Appearance:Ht};Jt.AcroForm;function sd(e){return e.reduce(function(t,i,s){return t[i]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(P,I){var J,V,rt,at,dt,nt=t;if((I=I||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(M(P))for(dt in i)for(rt=i[dt],J=0;J<rt.length;J+=1){for(at=!0,V=0;V<rt[J].length;V+=1)if(rt[J][V]!==void 0&&rt[J][V]!==P[V]){at=!1;break}if(at===!0){nt=dt;break}}else for(dt in i)for(rt=i[dt],J=0;J<rt.length;J+=1){for(at=!0,V=0;V<rt[J].length;V+=1)if(rt[J][V]!==void 0&&rt[J][V]!==P.charCodeAt(V)){at=!1;break}if(at===!0){nt=dt;break}}return nt===t&&I!==t&&(nt=I),nt},d=function P(I){for(var J=this.internal.write,V=this.internal.putStream,rt=(0,this.internal.getFilters)();rt.indexOf("FlateEncode")!==-1;)rt.splice(rt.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var at=[];if(at.push({key:"Type",value:"/XObject"}),at.push({key:"Subtype",value:"/Image"}),at.push({key:"Width",value:I.width}),at.push({key:"Height",value:I.height}),I.colorSpace===f.INDEXED?at.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(at.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===f.DEVICE_CMYK&&at.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),at.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&at.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var dt="",nt=0,E=I.transparency.length;nt<E;nt++)dt+=I.transparency[nt]+" "+I.transparency[nt]+" ";at.push({key:"Mask",value:"["+dt+"]"})}I.sMask!==void 0&&at.push({key:"SMask",value:I.objectId+1+" 0 R"});var z=I.filter!==void 0?["/"+I.filter]:void 0;if(V({data:I.data,additionalKeyValues:at,alreadyAppliedFilters:z,objectId:I.objectId}),J("endobj"),"sMask"in I&&I.sMask!==void 0){var $="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,k={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:$,data:I.sMask};"filter"in I&&(k.filter=I.filter),P.call(this,k)}if(I.colorSpace===f.INDEXED){var D=this.internal.newObject();V({data:N(new Uint8Array(I.palette)),objectId:D}),J("endobj")}},p=function(){var P=this.internal.collections.addImage_images;for(var I in P)d.call(this,P[I])},v=function(){var P,I=this.internal.collections.addImage_images,J=this.internal.write;for(var V in I)J("/I"+(P=I[V]).index,P.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",p),this.internal.events.subscribe("putXobjectDict",v))},r=function(){var P=this.internal.collections.addImage_images;return o.call(this),P},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(P){return typeof e["process"+P.toUpperCase()]=="function"},a=function(P){return ke(P)==="object"&&P.nodeType===1},l=function(P,I){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var J=""+P.getAttribute("src");if(J.indexOf("data:image/")===0)return Ha(unescape(J).split("base64,").pop());var V=e.loadFile(J,!0);if(V!==void 0)return V}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var rt;switch(I){case"PNG":rt="image/png";break;case"WEBP":rt="image/webp";break;case"JPEG":case"JPG":default:rt="image/jpeg"}return Ha(P.toDataURL(rt,1).split("base64,").pop())}},n=function(P){var I=this.internal.collections.addImage_images;if(I){for(var J in I)if(P===I[J].alias)return I[J]}},h=function(P,I,J){return P||I||(P=-96,I=-96),P<0&&(P=-1*J.width*72/P/this.internal.scaleFactor),I<0&&(I=-1*J.height*72/I/this.internal.scaleFactor),P===0&&(P=I*J.width/J.height),I===0&&(I=P*J.height/J.width),[P,I]},g=function(P,I,J,V,rt,at){var dt=h.call(this,J,V,rt),nt=this.internal.getCoordinateString,E=this.internal.getVerticalCoordinateString,z=r.call(this);if(J=dt[0],V=dt[1],z[rt.index]=rt,at){at*=Math.PI/180;var $=Math.cos(at),k=Math.sin(at),D=function(O){return O.toFixed(4)},F=[D($),D(k),D(-1*k),D($),0,0,"cm"]}this.internal.write("q"),at?(this.internal.write([1,"0","0",1,nt(P),E(I+V),"cm"].join(" ")),this.internal.write(F.join(" ")),this.internal.write([nt(J),"0","0",nt(V),"0","0","cm"].join(" "))):this.internal.write([nt(J),"0","0",nt(V),nt(P),E(I+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+rt.index+" Do"),this.internal.write("Q")},f=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(P){var I,J,V=0;if(typeof P=="string")for(J=P.length,I=0;I<J;I++)V=(V<<5)-V+P.charCodeAt(I),V|=0;else if(M(P))for(J=P.byteLength/2,I=0;I<J;I++)V=(V<<5)-V+P[I],V|=0;return V},x=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var I=!0;return P.length===0&&(I=!1),P.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(I=!1),I},S=e.__addimage__.extractImageFromDataUrl=function(P){var I=(P=P||"").split("base64,"),J=null;if(I.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(V)&&(J={mimeType:V[1],charset:V[2],data:I[1]})}return J},A=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return A()&&P instanceof ArrayBuffer};var M=e.__addimage__.isArrayBufferView=function(P){return A()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},T=e.__addimage__.binaryStringToUint8Array=function(P){for(var I=P.length,J=new Uint8Array(I),V=0;V<I;V++)J[V]=P.charCodeAt(V);return J},N=e.__addimage__.arrayBufferToBinaryString=function(P){for(var I="",J=M(P)?P:new Uint8Array(P),V=0;V<J.length;V+=8192)I+=String.fromCharCode.apply(null,J.subarray(V,V+8192));return I};e.addImage=function(){var P,I,J,V,rt,at,dt,nt,E;if(typeof arguments[1]=="number"?(I=t,J=arguments[1],V=arguments[2],rt=arguments[3],at=arguments[4],dt=arguments[5],nt=arguments[6],E=arguments[7]):(I=arguments[1],J=arguments[2],V=arguments[3],rt=arguments[4],at=arguments[5],dt=arguments[6],nt=arguments[7],E=arguments[8]),ke(P=arguments[0])==="object"&&!a(P)&&"imageData"in P){var z=P;P=z.imageData,I=z.format||I||t,J=z.x||J||0,V=z.y||V||0,rt=z.w||z.width||rt,at=z.h||z.height||at,dt=z.alias||dt,nt=z.compression||nt,E=z.rotation||z.angle||E}var $=this.internal.getFilters();if(nt===void 0&&$.indexOf("FlateEncode")!==-1&&(nt="SLOW"),isNaN(J)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var k=W.call(this,P,I,dt,nt);return g.call(this,J,V,rt,at,k,E),this};var W=function(P,I,J,V){var rt,at,dt;if(typeof P=="string"&&s(P)===t){P=unescape(P);var nt=K(P,!1);(nt!==""||(nt=e.loadFile(P,!0))!==void 0)&&(P=nt)}if(a(P)&&(P=l(P,I)),I=s(P,I),!u(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((dt=J)==null||dt.length===0)&&(J=function(E){return typeof E=="string"||M(E)?y(E):M(E.data)?y(E.data):null}(P)),(rt=n.call(this,J))||(A()&&(P instanceof Uint8Array||I==="RGBA"||(at=P,P=T(P))),rt=this["process"+I.toUpperCase()](P,c.call(this),J,function(E){return E&&typeof E=="string"&&(E=E.toUpperCase()),E in e.image_compression?E:m.NONE}(V),at)),!rt)throw new Error("An unknown error occurred whilst processing the image.");return rt},K=e.__addimage__.convertBase64ToBinaryString=function(P,I){var J;I=typeof I!="boolean"||I;var V,rt="";if(typeof P=="string"){V=(J=S(P))!==null?J.data:P;try{rt=Ha(V)}catch(at){if(I)throw x(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+at.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return rt};e.getImageProperties=function(P){var I,J,V="";if(a(P)&&(P=l(P)),typeof P=="string"&&s(P)===t&&((V=K(P,!1))===""&&(V=e.loadFile(P)||""),P=V),J=s(P),!u(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!A()||P instanceof Uint8Array||(P=T(P)),!(I=this["process"+J.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=J,I}})(Jt.API),function(e){var t=function(i){if(i!==void 0&&i!="")return!0};Jt.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(i){for(var s,d,p,v=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,r=this.internal.getPageInfoByObjId(i.objId),c=i.pageContext.annotations,u=!1,a=0;a<c.length&&!u;a++)switch((s=c[a]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var l=0;l<c.length;l++){s=c[l];var n=this.internal.pdfEscape,h=this.internal.getEncryptor(i.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(g.objId),y=s.title||"Note";p="<</Type /Annot /Subtype /Text "+(d="/Rect ["+v(s.bounds.x)+" "+o(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y)+"] ")+"/Contents ("+n(m(s.contents))+")",p+=" /Popup "+f.objId+" 0 R",p+=" /P "+r.objId+" 0 R",p+=" /T ("+n(m(y))+") >>",g.content=p;var x=g.objId+" 0 R";p="<</Type /Annot /Subtype /Popup "+(d="/Rect ["+v(s.bounds.x+30)+" "+o(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w+30)+" "+o(s.bounds.y)+"] ")+" /Parent "+x,s.open&&(p+=" /Open true"),p+=" >>",f.content=p,this.internal.write(g.objId,"0 R",f.objId,"0 R");break;case"freetext":d="/Rect ["+v(s.bounds.x)+" "+o(s.bounds.y)+" "+v(s.bounds.x+s.bounds.w)+" "+o(s.bounds.y+s.bounds.h)+"] ";var S=s.color||"#000000";p="<</Type /Annot /Subtype /FreeText "+d+"/Contents ("+n(h(s.contents))+")",p+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",p+=" /Border [0 0 0]",p+=" >>",this.internal.write(p);break;case"link":if(s.options.name){var A=this.annotations._nameMap[s.options.name];s.options.pageNumber=A.page,s.options.top=A.y}else s.options.top||(s.options.top=0);if(d="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",p="",s.options.url)p="<</Type /Annot /Subtype /Link "+d+"/Border [0 0 0] /A <</S /URI /URI ("+n(h(s.options.url))+") >>";else if(s.options.pageNumber)switch(p="<</Type /Annot /Subtype /Link "+d+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":p+=" /Fit]";break;case"FitH":p+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,p+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var M=o(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),p+=" /XYZ "+s.options.left+" "+M+" "+s.options.zoom+"]"}p!=""&&(p+=" >>",this.internal.write(p))}}this.internal.write("]")}}]),e.createAnnotation=function(i){var s=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":s.pageContext.annotations.push(i)}},e.link=function(i,s,d,p,v){var o=this.internal.getCurrentPageInfo(),r=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:r(i),y:c(s),w:r(i+d),h:c(s+p)},options:v,type:"link"})},e.textWithLink=function(i,s,d,p){var v,o,r=this.getTextWidth(i),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(p.maxWidth!==void 0){o=p.maxWidth;var u=this.splitTextToSize(i,o).length;v=Math.ceil(c*u)}else o=r,v=c;return this.text(i,s,d,p),d+=.2*c,p.align==="center"&&(s-=r/2),p.align==="right"&&(s-=r),this.link(s,d-c,o,v,p),r},e.getTextWidth=function(i){var s=this.internal.getFontSize();return this.getStringUnitWidth(i)*s/this.internal.scaleFactor}}(Jt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},d=[1570,1571,1573,1575];e.__arabicParser__={};var p=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},v=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=e.__arabicParser__.isArabicEndLetter=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length<=2},r=e.__arabicParser__.isArabicAlfLetter=function(g){return v(g)&&d.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length==4},a=e.__arabicParser__.resolveLigatures=function(g){var f=0,m=i,y="",x=0;for(f=0;f<g.length;f+=1)m[g.charCodeAt(f)]!==void 0?(x++,typeof(m=m[g.charCodeAt(f)])=="number"&&(y+=String.fromCharCode(m),m=i,x=0),f===g.length-1&&(m=i,y+=g.charAt(f-(x-1)),f-=x-1,x=0)):(m=i,y+=g.charAt(f-x),f-=x,x=0);return y};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&s[g.charCodeAt(0)]!==void 0};var l=e.__arabicParser__.getCorrectForm=function(g,f,m){return v(g)?p(g)===!1?-1:!c(g)||!v(f)&&!v(m)||!v(m)&&o(f)||o(g)&&!v(f)||o(g)&&r(f)||o(g)&&o(f)?0:u(g)&&v(f)&&!o(f)&&v(m)&&c(m)?3:o(g)||!v(m)?1:2:-1},n=function(g){var f=0,m=0,y=0,x="",S="",A="",M=(g=g||"").split("\\s+"),T=[];for(f=0;f<M.length;f+=1){for(T.push(""),m=0;m<M[f].length;m+=1)x=M[f][m],S=M[f][m-1],A=M[f][m+1],v(x)?(y=l(x,S,A),T[f]+=y!==-1?String.fromCharCode(t[x.charCodeAt(0)][y]):x):T[f]+=x;T[f]=a(T[f])}return T.join(" ")},h=e.__arabicParser__.processArabic=e.processArabic=function(){var g,f=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,m=[];if(Array.isArray(f)){var y=0;for(m=[],y=0;y<f.length;y+=1)Array.isArray(f[y])?m.push([n(f[y][0]),f[y][1],f[y][2]]):m.push([n(f[y])]);g=m}else g=n(f);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",h])}(Jt.API),Jt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(o){i=o}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var d=300;Object.defineProperty(this,"height",{get:function(){return d},set:function(o){d=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=d+1)}});var p=[];Object.defineProperty(this,"childNodes",{get:function(){return p},set:function(o){p=o}});var v={};Object.defineProperty(this,"style",{get:function(){return v},set:function(o){v=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(i,s){var d;if((i=i||"2d")!=="2d")return null;for(d in s)this.pdf.context2d.hasOwnProperty(d)&&(this.pdf.context2d[d]=s[d]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Jt.API),function(e){var t={left:0,top:0,bottom:0,right:0},i=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),d.call(this))},d=function(){this.internal.__cell__.lastCell=new p,this.internal.__cell__.pages=1},p=function(){var r=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return r},set:function(g){r=g}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var a=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return a},set:function(g){a=g}});var l=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var n=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return n},set:function(g){n=g}});var h=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return h},set:function(g){h=g}}),this};p.prototype.clone=function(){return new p(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},p.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(r){return s.call(this),this.internal.__cell__.headerFunction=typeof r=="function"?r:void 0,this},e.getTextDimensions=function(r,c){s.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),a=c.font||this.getFont(),l=c.scaleFactor||this.internal.scaleFactor,n=0,h=0,g=0,f=this;if(!Array.isArray(r)&&typeof r!="string"){if(typeof r!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");r=String(r)}var m=c.maxWidth;m>0?typeof r=="string"?r=this.splitTextToSize(r,m):Object.prototype.toString.call(r)==="[object Array]"&&(r=r.reduce(function(x,S){return x.concat(f.splitTextToSize(S,m))},[])):r=Array.isArray(r)?r:[r];for(var y=0;y<r.length;y++)n<(g=this.getStringUnitWidth(r[y],{font:a})*u)&&(n=g);return n!==0&&(h=r.length),{w:n/=l,h:Math.max((h*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/l,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var r=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new p(r.left,r.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var v=e.cell=function(){var r;r=arguments[0]instanceof p?arguments[0]:new p(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,a=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,n=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===r.lineNumber?(r.x=(c.x||0)+(c.width||0),r.y=c.y||0):c.y+c.height+r.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),r.y=a.top,n&&l&&(this.printHeaderRow(r.lineNumber,!0),r.y+=l[0].height)):r.y=c.y+c.height||r.y),r.text[0]!==void 0&&(this.rect(r.x,r.y,r.width,r.height,i===!0?"FD":void 0),r.align==="right"?this.text(r.text,r.x+r.width-u,r.y+u,{align:"right",baseline:"top"}):r.align==="center"?this.text(r.text,r.x+r.width/2,r.y+u,{align:"center",baseline:"top",maxWidth:r.width-u-u}):this.text(r.text,r.x+u,r.y+u,{align:"left",baseline:"top",maxWidth:r.width-u-u})),this.internal.__cell__.lastCell=r,this};e.table=function(r,c,u,a,l){if(s.call(this),!u)throw new Error("No data for PDF table.");var n,h,g,f,m=[],y=[],x=[],S={},A={},M=[],T=[],N=(l=l||{}).autoSize||!1,W=l.printHeaders!==!1,K=l.css&&l.css["font-size"]!==void 0?16*l.css["font-size"]:l.fontSize||12,P=l.margins||Object.assign({width:this.getPageWidth()},t),I=typeof l.padding=="number"?l.padding:3,J=l.headerBackgroundColor||"#c8c8c8",V=l.headerTextColor||"#000";if(d.call(this),this.internal.__cell__.printHeaders=W,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=V,this.setFontSize(K),a==null)y=m=Object.keys(u[0]),x=m.map(function(){return"left"});else if(Array.isArray(a)&&ke(a[0])==="object")for(m=a.map(function(z){return z.name}),y=a.map(function(z){return z.prompt||z.name||""}),x=a.map(function(z){return z.align||"left"}),n=0;n<a.length;n+=1)A[a[n].name]=a[n].width*(19.049976/25.4);else Array.isArray(a)&&typeof a[0]=="string"&&(y=m=a,x=m.map(function(){return"left"}));if(N||Array.isArray(a)&&typeof a[0]=="string")for(n=0;n<m.length;n+=1){for(S[f=m[n]]=u.map(function(z){return z[f]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(y[n],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=S[f],this.setFont(void 0,"normal"),g=0;g<h.length;g+=1)M.push(this.getTextDimensions(h[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[f]=Math.max.apply(null,M)+I+I,M=[]}if(W){var rt={};for(n=0;n<m.length;n+=1)rt[m[n]]={},rt[m[n]].text=y[n],rt[m[n]].align=x[n];var at=o.call(this,rt,A);T=m.map(function(z){return new p(r,c,A[z],at,rt[z].text,void 0,rt[z].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var dt=a.reduce(function(z,$){return z[$.name]=$.align,z},{});for(n=0;n<u.length;n+=1){"rowStart"in l&&l.rowStart instanceof Function&&l.rowStart({row:n,data:u[n]},this);var nt=o.call(this,u[n],A);for(g=0;g<m.length;g+=1){var E=u[n][m[g]];"cellStart"in l&&l.cellStart instanceof Function&&l.cellStart({row:n,col:g,data:E},this),v.call(this,new p(r,c,A[m[g]],nt,E,n+2,dt[m[g]]))}}return this.internal.__cell__.table_x=r,this.internal.__cell__.table_y=c,this};var o=function(r,c){var u=this.internal.__cell__.padding,a=this.internal.__cell__.table_font_size,l=this.internal.scaleFactor;return Object.keys(r).map(function(n){var h=r[n];return this.splitTextToSize(h.hasOwnProperty("text")?h.text:h,c[n]-u-u)},this).map(function(n){return this.getLineHeightFactor()*n.length*a/l+u+u},this).reduce(function(n,h){return Math.max(n,h)},0)};e.setTableHeaderRow=function(r){s.call(this),this.internal.__cell__.tableHeaderRow=r},e.printHeaderRow=function(r,c){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var a=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new p(a[0],a[1],a[2],a[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],n=0;n<this.internal.__cell__.tableHeaderRow.length;n+=1){u=this.internal.__cell__.tableHeaderRow[n].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,l.push(u)),u.lineNumber=r;var h=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),v.call(this,u),this.setTextColor(h)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),i=!1}}(Jt.API);var ad={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},od=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],rh=sd(od),ld=[100,200,300,400,500,600,700,800,900],Rg=sd(ld);function nh(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),i=function(p){return ad[p=p||"normal"]?p:"normal"}(e.style),s=function(p){if(!p)return 400;if(typeof p=="number")return p>=100&&p<=900&&p%100==0?p:400;if(/^\d00$/.test(p))return parseInt(p);switch(p){case"bold":return 700;case"normal":default:return 400}}(e.weight),d=function(p){return typeof rh[p=p||"normal"]=="number"?p:"normal"}(e.stretch);return{family:t,style:i,weight:s,stretch:d,src:e.src||[],ref:e.ref||{name:t,style:[d,i,s].join(" ")}}}function Tu(e,t,i,s){var d;for(d=i;d>=0&&d<t.length;d+=s)if(e[t[d]])return e[t[d]];for(d=i;d>=0&&d<t.length;d-=s)if(e[t[d]])return e[t[d]]}var zg={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Pu={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ou(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function qg(e,t,i){for(var s=(i=i||{}).defaultFontFamily||"times",d=Object.assign({},zg,i.genericFontFamilies||{}),p=null,v=null,o=0;o<t.length;++o)if(d[(p=nh(t[o])).family]&&(p.family=d[p.family]),e.hasOwnProperty(p.family)){v=e[p.family];break}if(!(v=v||e[s]))throw new Error("Could not find a font-family for the rule '"+Ou(p)+"' and default family '"+s+"'.");if(v=function(r,c){if(c[r])return c[r];var u=rh[r],a=u<=rh.normal?-1:1,l=Tu(c,od,u,a);if(!l)throw new Error("Could not find a matching font-stretch value for "+r);return l}(p.stretch,v),v=function(r,c){if(c[r])return c[r];for(var u=ad[r],a=0;a<u.length;++a)if(c[u[a]])return c[u[a]];throw new Error("Could not find a matching font-style for "+r)}(p.style,v),!(v=function(r,c){if(c[r])return c[r];if(r===400&&c[500])return c[500];if(r===500&&c[400])return c[400];var u=Rg[r],a=Tu(c,ld,u,r<400?-1:1);if(!a)throw new Error("Could not find a matching font-weight for value "+r);return a}(p.weight,v)))throw new Error("Failed to resolve a font for the rule '"+Ou(p)+"'.");return v}function Mu(e){return e.trimLeft()}function Ug(e,t){for(var i=0;i<e.length;){if(e.charAt(i)===t)return[e.substring(0,i),e.substring(i+1)];i+=1}return null}function Wg(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Qo,Nu,Fu,Fc=["times"];(function(e){var t,i,s,d,p,v,o,r,c,u=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new r,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new v,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new v,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new a(this),t=this.internal.f2,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,d=this.internal.getHorizontalCoordinate,p=this.internal.getVerticalCoordinate,v=this.internal.Point,o=this.internal.Rectangle,r=this.internal.Matrix,c=new u}]);var a=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=k;Object.defineProperty(this,"pdf",{get:function(){return D}});var F=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return F},set:function(it){F=!!it}});var O=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return O},set:function(it){O=!!it}});var U=0;Object.defineProperty(this,"posX",{get:function(){return U},set:function(it){isNaN(it)||(U=it)}});var G=0;Object.defineProperty(this,"posY",{get:function(){return G},set:function(it){isNaN(it)||(G=it)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(it){var H;typeof it=="number"?H=[it,it,it,it]:((H=new Array(4))[0]=it[0],H[1]=it.length>=2?it[1]:H[0],H[2]=it.length>=3?it[2]:H[0],H[3]=it.length>=4?it[3]:H[1]),c.margin=H}});var tt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return tt},set:function(it){tt=it}});var Q=0;Object.defineProperty(this,"lastBreak",{get:function(){return Q},set:function(it){Q=it}});var ut=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ut},set:function(it){ut=it}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(it){it instanceof u&&(c=it)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(it){c.path=it}});var pt=[];Object.defineProperty(this,"ctxStack",{get:function(){return pt},set:function(it){pt=it}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(it){var H;H=l(it),this.ctx.fillStyle=H.style,this.ctx.isFillTransparent=H.a===0,this.ctx.fillOpacity=H.a,this.pdf.setFillColor(H.r,H.g,H.b,{a:H.a}),this.pdf.setTextColor(H.r,H.g,H.b,{a:H.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(it){var H=l(it);this.ctx.strokeStyle=H.style,this.ctx.isStrokeTransparent=H.a===0,this.ctx.strokeOpacity=H.a,H.a===0?this.pdf.setDrawColor(255,255,255):(H.a,this.pdf.setDrawColor(H.r,H.g,H.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(it){["butt","round","square"].indexOf(it)!==-1&&(this.ctx.lineCap=it,this.pdf.setLineCap(it))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(it){isNaN(it)||(this.ctx.lineWidth=it,this.pdf.setLineWidth(it))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(it){["bevel","round","miter"].indexOf(it)!==-1&&(this.ctx.lineJoin=it,this.pdf.setLineJoin(it))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(it){isNaN(it)||(this.ctx.miterLimit=it,this.pdf.setMiterLimit(it))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(it){this.ctx.textBaseline=it}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(it){["right","end","center","left","start"].indexOf(it)!==-1&&(this.ctx.textAlign=it)}});var St=null;function ot(it,H){if(St===null){var vt=function(yt){var bt=[];return Object.keys(yt).forEach(function(Lt){yt[Lt].forEach(function(At){var ft=null;switch(At){case"bold":ft={family:Lt,weight:"bold"};break;case"italic":ft={family:Lt,style:"italic"};break;case"bolditalic":ft={family:Lt,weight:"bold",style:"italic"};break;case"":case"normal":ft={family:Lt}}ft!==null&&(ft.ref={name:Lt,style:At},bt.push(ft))})}),bt}(it.getFontList());St=function(yt){for(var bt={},Lt=0;Lt<yt.length;++Lt){var At=nh(yt[Lt]),ft=At.family,Mt=At.stretch,jt=At.style,Rt=At.weight;bt[ft]=bt[ft]||{},bt[ft][Mt]=bt[ft][Mt]||{},bt[ft][Mt][jt]=bt[ft][Mt][jt]||{},bt[ft][Mt][jt][Rt]=At}return bt}(vt.concat(H))}return St}var st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(it){St=null,st=it}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(it){var H;if(this.ctx.font=it,(H=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(it))!==null){var vt=H[1],yt=(H[2],H[3]),bt=H[4],Lt=(H[5],H[6]),At=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(bt)[2];bt=Math.floor(At==="px"?parseFloat(bt)*this.pdf.internal.scaleFactor:At==="em"?parseFloat(bt)*this.pdf.getFontSize():parseFloat(bt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(bt);var ft=function(Wt){var te,Bt,Pe=[],me=Wt.trim();if(me==="")return Fc;if(me in Pu)return[Pu[me]];for(;me!=="";){switch(Bt=null,te=(me=Mu(me)).charAt(0)){case'"':case"'":Bt=Ug(me.substring(1),te);break;default:Bt=Wg(me)}if(Bt===null||(Pe.push(Bt[0]),(me=Mu(Bt[1]))!==""&&me.charAt(0)!==","))return Fc;me=me.replace(/^,/,"")}return Pe}(Lt);if(this.fontFaces){var Mt=qg(ot(this.pdf,this.fontFaces),ft.map(function(Wt){return{family:Wt,stretch:"normal",weight:yt,style:vt}}));this.pdf.setFont(Mt.ref.name,Mt.ref.style)}else{var jt="";(yt==="bold"||parseInt(yt,10)>=700||vt==="bold")&&(jt="bold"),vt==="italic"&&(jt+="italic"),jt.length===0&&(jt="normal");for(var Rt="",Yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Vt=0;Vt<ft.length;Vt++){if(this.pdf.internal.getFont(ft[Vt],jt,{noFallback:!0,disableWarning:!0})!==void 0){Rt=ft[Vt];break}if(jt==="bolditalic"&&this.pdf.internal.getFont(ft[Vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=ft[Vt],jt="bold";else if(this.pdf.internal.getFont(ft[Vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=ft[Vt],jt="normal";break}}if(Rt===""){for(var ie=0;ie<ft.length;ie++)if(Yt[ft[ie]]){Rt=Yt[ft[ie]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,jt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(it){this.ctx.globalCompositeOperation=it}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(it){this.ctx.globalAlpha=it}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(it){this.ctx.lineDashOffset=it,$.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(it){this.ctx.lineDash=it,$.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(it){this.ctx.ignoreClearRect=!!it}})};a.prototype.setLineDash=function(k){this.lineDash=k},a.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},a.prototype.fill=function(){S.call(this,"fill",!1)},a.prototype.stroke=function(){S.call(this,"stroke",!1)},a.prototype.beginPath=function(){this.path=[{type:"begin"}]},a.prototype.moveTo=function(k,D){if(isNaN(k)||isNaN(D))throw Me.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var F=this.ctx.transform.applyToPoint(new v(k,D));this.path.push({type:"mt",x:F.x,y:F.y}),this.ctx.lastPoint=new v(k,D)},a.prototype.closePath=function(){var k=new v(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&ke(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){k=new v(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new v(k.x,k.y)},a.prototype.lineTo=function(k,D){if(isNaN(k)||isNaN(D))throw Me.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var F=this.ctx.transform.applyToPoint(new v(k,D));this.path.push({type:"lt",x:F.x,y:F.y}),this.ctx.lastPoint=new v(F.x,F.y)},a.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},a.prototype.quadraticCurveTo=function(k,D,F,O){if(isNaN(F)||isNaN(O)||isNaN(k)||isNaN(D))throw Me.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var U=this.ctx.transform.applyToPoint(new v(F,O)),G=this.ctx.transform.applyToPoint(new v(k,D));this.path.push({type:"qct",x1:G.x,y1:G.y,x:U.x,y:U.y}),this.ctx.lastPoint=new v(U.x,U.y)},a.prototype.bezierCurveTo=function(k,D,F,O,U,G){if(isNaN(U)||isNaN(G)||isNaN(k)||isNaN(D)||isNaN(F)||isNaN(O))throw Me.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var tt=this.ctx.transform.applyToPoint(new v(U,G)),Q=this.ctx.transform.applyToPoint(new v(k,D)),ut=this.ctx.transform.applyToPoint(new v(F,O));this.path.push({type:"bct",x1:Q.x,y1:Q.y,x2:ut.x,y2:ut.y,x:tt.x,y:tt.y}),this.ctx.lastPoint=new v(tt.x,tt.y)},a.prototype.arc=function(k,D,F,O,U,G){if(isNaN(k)||isNaN(D)||isNaN(F)||isNaN(O)||isNaN(U))throw Me.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(G=!!G,!this.ctx.transform.isIdentity){var tt=this.ctx.transform.applyToPoint(new v(k,D));k=tt.x,D=tt.y;var Q=this.ctx.transform.applyToPoint(new v(0,F)),ut=this.ctx.transform.applyToPoint(new v(0,0));F=Math.sqrt(Math.pow(Q.x-ut.x,2)+Math.pow(Q.y-ut.y,2))}Math.abs(U-O)>=2*Math.PI&&(O=0,U=2*Math.PI),this.path.push({type:"arc",x:k,y:D,radius:F,startAngle:O,endAngle:U,counterclockwise:G})},a.prototype.arcTo=function(k,D,F,O,U){throw new Error("arcTo not implemented.")},a.prototype.rect=function(k,D,F,O){if(isNaN(k)||isNaN(D)||isNaN(F)||isNaN(O))throw Me.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,D),this.lineTo(k+F,D),this.lineTo(k+F,D+O),this.lineTo(k,D+O),this.lineTo(k,D),this.lineTo(k+F,D),this.lineTo(k,D)},a.prototype.fillRect=function(k,D,F,O){if(isNaN(k)||isNaN(D)||isNaN(F)||isNaN(O))throw Me.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!n.call(this)){var U={};this.lineCap!=="butt"&&(U.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(U.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,D,F,O),this.fill(),U.hasOwnProperty("lineCap")&&(this.lineCap=U.lineCap),U.hasOwnProperty("lineJoin")&&(this.lineJoin=U.lineJoin)}},a.prototype.strokeRect=function(k,D,F,O){if(isNaN(k)||isNaN(D)||isNaN(F)||isNaN(O))throw Me.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");h.call(this)||(this.beginPath(),this.rect(k,D,F,O),this.stroke())},a.prototype.clearRect=function(k,D,F,O){if(isNaN(k)||isNaN(D)||isNaN(F)||isNaN(O))throw Me.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,D,F,O))},a.prototype.save=function(k){k=typeof k!="boolean"||k;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,F=0;F<this.pdf.internal.getNumberOfPages();F++)this.pdf.setPage(F+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var O=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=O}},a.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,F=0;F<this.pdf.internal.getNumberOfPages();F++)this.pdf.setPage(F+1),this.pdf.internal.out("Q");this.pdf.setPage(D),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},a.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var l=function(k){var D,F,O,U;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))D=0,F=0,O=0,U=0;else{var G=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(G!==null)D=parseInt(G[1]),F=parseInt(G[2]),O=parseInt(G[3]),U=1;else if((G=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)D=parseInt(G[1]),F=parseInt(G[2]),O=parseInt(G[3]),U=parseFloat(G[4]);else{if(U=1,typeof k=="string"&&k.charAt(0)!=="#"){var tt=new Qf(k);k=tt.ok?tt.toHex():"#000000"}k.length===4?(D=k.substring(1,2),D+=D,F=k.substring(2,3),F+=F,O=k.substring(3,4),O+=O):(D=k.substring(1,3),F=k.substring(3,5),O=k.substring(5,7)),D=parseInt(D,16),F=parseInt(F,16),O=parseInt(O,16)}}return{r:D,g:F,b:O,a:U,style:k}},n=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},h=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};a.prototype.fillText=function(k,D,F,O){if(isNaN(D)||isNaN(F)||typeof k!="string")throw Me.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(O=isNaN(O)?void 0:O,!n.call(this)){var U=nt(this.ctx.transform.rotation),G=this.ctx.transform.scaleX;I.call(this,{text:k,x:D,y:F,scale:G,angle:U,align:this.textAlign,maxWidth:O})}},a.prototype.strokeText=function(k,D,F,O){if(isNaN(D)||isNaN(F)||typeof k!="string")throw Me.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!h.call(this)){O=isNaN(O)?void 0:O;var U=nt(this.ctx.transform.rotation),G=this.ctx.transform.scaleX;I.call(this,{text:k,x:D,y:F,scale:G,renderingMode:"stroke",angle:U,align:this.textAlign,maxWidth:O})}},a.prototype.measureText=function(k){if(typeof k!="string")throw Me.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,F=this.pdf.internal.scaleFactor,O=D.internal.getFontSize(),U=D.getStringUnitWidth(k)*O/D.internal.scaleFactor,G=function(tt){var Q=(tt=tt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Q}}),this};return new G({width:U*=Math.round(96*F/72*1e4)/1e4})},a.prototype.scale=function(k,D){if(isNaN(k)||isNaN(D))throw Me.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var F=new r(k,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(F)},a.prototype.rotate=function(k){if(isNaN(k))throw Me.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new r(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},a.prototype.translate=function(k,D){if(isNaN(k)||isNaN(D))throw Me.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var F=new r(1,0,0,1,k,D);this.ctx.transform=this.ctx.transform.multiply(F)},a.prototype.transform=function(k,D,F,O,U,G){if(isNaN(k)||isNaN(D)||isNaN(F)||isNaN(O)||isNaN(U)||isNaN(G))throw Me.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var tt=new r(k,D,F,O,U,G);this.ctx.transform=this.ctx.transform.multiply(tt)},a.prototype.setTransform=function(k,D,F,O,U,G){k=isNaN(k)?1:k,D=isNaN(D)?0:D,F=isNaN(F)?0:F,O=isNaN(O)?1:O,U=isNaN(U)?0:U,G=isNaN(G)?0:G,this.ctx.transform=new r(k,D,F,O,U,G)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};a.prototype.drawImage=function(k,D,F,O,U,G,tt,Q,ut){var pt=this.pdf.getImageProperties(k),St=1,ot=1,st=1,it=1;O!==void 0&&Q!==void 0&&(st=Q/O,it=ut/U,St=pt.width/O*Q/O,ot=pt.height/U*ut/U),G===void 0&&(G=D,tt=F,D=0,F=0),O!==void 0&&Q===void 0&&(Q=O,ut=U),O===void 0&&Q===void 0&&(Q=pt.width,ut=pt.height);for(var H,vt=this.ctx.transform.decompose(),yt=nt(vt.rotate.shx),bt=new r,Lt=(bt=(bt=(bt=bt.multiply(vt.translate)).multiply(vt.skew)).multiply(vt.scale)).applyToRectangle(new o(G-D*st,tt-F*it,O*St,U*ot)),At=f.call(this,Lt),ft=[],Mt=0;Mt<At.length;Mt+=1)ft.indexOf(At[Mt])===-1&&ft.push(At[Mt]);if(x(ft),this.autoPaging)for(var jt=ft[0],Rt=ft[ft.length-1],Yt=jt;Yt<Rt+1;Yt++){this.pdf.setPage(Yt);var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ie=Yt===1?this.posY+this.margin[0]:this.margin[0],Wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],te=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Bt=Yt===1?0:Wt+(Yt-2)*te;if(this.ctx.clip_path.length!==0){var Pe=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(H,this.posX+this.margin[3],-Bt+ie+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=Pe}var me=JSON.parse(JSON.stringify(Lt));me=y([me],this.posX+this.margin[3],-Bt+ie+this.ctx.prevPageLastElemOffset)[0];var Pi=(Yt>jt||Yt<Rt)&&g.call(this);Pi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,te,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",me.x,me.y,me.w,me.h,null,null,yt),Pi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",Lt.x,Lt.y,Lt.w,Lt.h,null,null,yt)};var f=function(k,D,F){var O=[];D=D||this.pdf.internal.pageSize.width,F=F||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var U=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":O.push(Math.floor((k.y+U)/F)+1);break;case"arc":O.push(Math.floor((k.y+U-k.radius)/F)+1),O.push(Math.floor((k.y+U+k.radius)/F)+1);break;case"qct":var G=E(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);O.push(Math.floor((G.y+U)/F)+1),O.push(Math.floor((G.y+G.h+U)/F)+1);break;case"bct":var tt=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);O.push(Math.floor((tt.y+U)/F)+1),O.push(Math.floor((tt.y+tt.h+U)/F)+1);break;case"rect":O.push(Math.floor((k.y+U)/F)+1),O.push(Math.floor((k.y+k.h+U)/F)+1)}for(var Q=0;Q<O.length;Q+=1)for(;this.pdf.internal.getNumberOfPages()<O[Q];)m.call(this);return O},m=function(){var k=this.fillStyle,D=this.strokeStyle,F=this.font,O=this.lineCap,U=this.lineWidth,G=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=D,this.font=F,this.lineCap=O,this.lineWidth=U,this.lineJoin=G},y=function(k,D,F){for(var O=0;O<k.length;O++)switch(k[O].type){case"bct":k[O].x2+=D,k[O].y2+=F;case"qct":k[O].x1+=D,k[O].y1+=F;case"mt":case"lt":case"arc":default:k[O].x+=D,k[O].y+=F}return k},x=function(k){return k.sort(function(D,F){return D-F})},S=function(k,D){for(var F,O,U=this.fillStyle,G=this.strokeStyle,tt=this.lineCap,Q=this.lineWidth,ut=Math.abs(Q*this.ctx.transform.scaleX),pt=this.lineJoin,St=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),st=[],it=0;it<ot.length;it++)if(ot[it].x!==void 0)for(var H=f.call(this,ot[it]),vt=0;vt<H.length;vt+=1)st.indexOf(H[vt])===-1&&st.push(H[vt]);for(var yt=0;yt<st.length;yt++)for(;this.pdf.internal.getNumberOfPages()<st[yt];)m.call(this);if(x(st),this.autoPaging)for(var bt=st[0],Lt=st[st.length-1],At=bt;At<Lt+1;At++){this.pdf.setPage(At),this.fillStyle=U,this.strokeStyle=G,this.lineCap=tt,this.lineWidth=ut,this.lineJoin=pt;var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=At===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yt=At===1?0:jt+(At-2)*Rt;if(this.ctx.clip_path.length!==0){var Vt=this.path;F=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(F,this.posX+this.margin[3],-Yt+Mt+this.ctx.prevPageLastElemOffset),A.call(this,k,!0),this.path=Vt}if(O=JSON.parse(JSON.stringify(St)),this.path=y(O,this.posX+this.margin[3],-Yt+Mt+this.ctx.prevPageLastElemOffset),D===!1||At===0){var ie=(At>bt||At<Lt)&&g.call(this);ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Rt,null).clip().discardPath()),A.call(this,k,D),ie&&this.pdf.restoreGraphicsState()}this.lineWidth=Q}else this.lineWidth=ut,A.call(this,k,D),this.lineWidth=Q;this.path=St},A=function(k,D){if((k!=="stroke"||D||!h.call(this))&&(k==="stroke"||D||!n.call(this))){for(var F,O,U=[],G=this.path,tt=0;tt<G.length;tt++){var Q=G[tt];switch(Q.type){case"begin":U.push({begin:!0});break;case"close":U.push({close:!0});break;case"mt":U.push({start:Q,deltas:[],abs:[]});break;case"lt":var ut=U.length;if(G[tt-1]&&!isNaN(G[tt-1].x)&&(F=[Q.x-G[tt-1].x,Q.y-G[tt-1].y],ut>0)){for(;ut>=0;ut--)if(U[ut-1].close!==!0&&U[ut-1].begin!==!0){U[ut-1].deltas.push(F),U[ut-1].abs.push(Q);break}}break;case"bct":F=[Q.x1-G[tt-1].x,Q.y1-G[tt-1].y,Q.x2-G[tt-1].x,Q.y2-G[tt-1].y,Q.x-G[tt-1].x,Q.y-G[tt-1].y],U[U.length-1].deltas.push(F);break;case"qct":var pt=G[tt-1].x+2/3*(Q.x1-G[tt-1].x),St=G[tt-1].y+2/3*(Q.y1-G[tt-1].y),ot=Q.x+2/3*(Q.x1-Q.x),st=Q.y+2/3*(Q.y1-Q.y),it=Q.x,H=Q.y;F=[pt-G[tt-1].x,St-G[tt-1].y,ot-G[tt-1].x,st-G[tt-1].y,it-G[tt-1].x,H-G[tt-1].y],U[U.length-1].deltas.push(F);break;case"arc":U.push({deltas:[],abs:[],arc:!0}),Array.isArray(U[U.length-1].abs)&&U[U.length-1].abs.push(Q)}}O=D?null:k==="stroke"?"stroke":"fill";for(var vt=!1,yt=0;yt<U.length;yt++)if(U[yt].arc)for(var bt=U[yt].abs,Lt=0;Lt<bt.length;Lt++){var At=bt[Lt];At.type==="arc"?N.call(this,At.x,At.y,At.radius,At.startAngle,At.endAngle,At.counterclockwise,void 0,D,!vt):J.call(this,At.x,At.y),vt=!0}else if(U[yt].close===!0)this.pdf.internal.out("h"),vt=!1;else if(U[yt].begin!==!0){var ft=U[yt].start.x,Mt=U[yt].start.y;V.call(this,U[yt].deltas,ft,Mt),vt=!0}O&&W.call(this,O),D&&K.call(this)}},M=function(k){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,F=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-F;case"top":return k+D-F;case"hanging":return k+D-2*F;case"middle":return k+D/2-F;case"ideographic":return k;case"alphabetic":default:return k}},T=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};a.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(D,F){this.colorStops.push([D,F])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},a.prototype.createPattern=function(){return this.createLinearGradient()},a.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(k,D,F,O,U,G,tt,Q,ut){for(var pt=at.call(this,F,O,U,G),St=0;St<pt.length;St++){var ot=pt[St];St===0&&(ut?P.call(this,ot.x1+k,ot.y1+D):J.call(this,ot.x1+k,ot.y1+D)),rt.call(this,k,D,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}Q?K.call(this):W.call(this,tt)},W=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(k,D){this.pdf.internal.out(i(k)+" "+s(D)+" m")},I=function(k){var D;switch(k.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var F=this.pdf.getTextDimensions(k.text),O=M.call(this,k.y),U=T.call(this,O)-F.h,G=this.ctx.transform.applyToPoint(new v(k.x,O)),tt=this.ctx.transform.decompose(),Q=new r;Q=(Q=(Q=Q.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale);for(var ut,pt,St,ot=this.ctx.transform.applyToRectangle(new o(k.x,O,F.w,F.h)),st=Q.applyToRectangle(new o(k.x,U,F.w,F.h)),it=f.call(this,st),H=[],vt=0;vt<it.length;vt+=1)H.indexOf(it[vt])===-1&&H.push(it[vt]);if(x(H),this.autoPaging)for(var yt=H[0],bt=H[H.length-1],Lt=yt;Lt<bt+1;Lt++){this.pdf.setPage(Lt);var At=Lt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[2],jt=Mt-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],Yt=Rt-this.margin[3],Vt=Lt===1?0:ft+(Lt-2)*jt;if(this.ctx.clip_path.length!==0){var ie=this.path;ut=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ut,this.posX+this.margin[3],-1*Vt+At),A.call(this,"fill",!0),this.path=ie}var Wt=y([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-Vt+At+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(pt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pt*k.scale),St=this.lineWidth,this.lineWidth=St*k.scale);var te=this.autoPaging!=="text";if(te||Wt.y+Wt.h<=Mt){if(te||Wt.y>=At&&Wt.x<=Rt){var Bt=te?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||Rt-Wt.x)[0],Pe=y([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Vt+At+this.ctx.prevPageLastElemOffset)[0],me=te&&(Lt>yt||Lt<bt)&&g.call(this);me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,jt,null).clip().discardPath()),this.pdf.text(Bt,Pe.x,Pe.y,{angle:k.angle,align:D,renderingMode:k.renderingMode}),me&&this.pdf.restoreGraphicsState()}}else Wt.y<Mt&&(this.ctx.prevPageLastElemOffset+=Mt-Wt.y);k.scale>=.01&&(this.pdf.setFontSize(pt),this.lineWidth=St)}else k.scale>=.01&&(pt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pt*k.scale),St=this.lineWidth,this.lineWidth=St*k.scale),this.pdf.text(k.text,G.x+this.posX,G.y+this.posY,{angle:k.angle,align:D,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(pt),this.lineWidth=St)},J=function(k,D,F,O){F=F||0,O=O||0,this.pdf.internal.out(i(k+F)+" "+s(D+O)+" l")},V=function(k,D,F){return this.pdf.lines(k,D,F,null,null)},rt=function(k,D,F,O,U,G,tt,Q){this.pdf.internal.out([t(d(F+k)),t(p(O+D)),t(d(U+k)),t(p(G+D)),t(d(tt+k)),t(p(Q+D)),"c"].join(" "))},at=function(k,D,F,O){for(var U=2*Math.PI,G=Math.PI/2;D>F;)D-=U;var tt=Math.abs(F-D);tt<U&&O&&(tt=U-tt);for(var Q=[],ut=O?-1:1,pt=D;tt>1e-5;){var St=pt+ut*Math.min(tt,G);Q.push(dt.call(this,k,pt,St)),tt-=Math.abs(St-pt),pt=St}return Q},dt=function(k,D,F){var O=(F-D)/2,U=k*Math.cos(O),G=k*Math.sin(O),tt=U,Q=-G,ut=tt*tt+Q*Q,pt=ut+tt*U+Q*G,St=4/3*(Math.sqrt(2*ut*pt)-pt)/(tt*G-Q*U),ot=tt-St*Q,st=Q+St*tt,it=ot,H=-st,vt=O+D,yt=Math.cos(vt),bt=Math.sin(vt);return{x1:k*Math.cos(D),y1:k*Math.sin(D),x2:ot*yt-st*bt,y2:ot*bt+st*yt,x3:it*yt-H*bt,y3:it*bt+H*yt,x4:k*Math.cos(F),y4:k*Math.sin(F)}},nt=function(k){return 180*k/Math.PI},E=function(k,D,F,O,U,G){var tt=k+.5*(F-k),Q=D+.5*(O-D),ut=U+.5*(F-U),pt=G+.5*(O-G),St=Math.min(k,U,tt,ut),ot=Math.max(k,U,tt,ut),st=Math.min(D,G,Q,pt),it=Math.max(D,G,Q,pt);return new o(St,st,ot-St,it-st)},z=function(k,D,F,O,U,G,tt,Q){var ut,pt,St,ot,st,it,H,vt,yt,bt,Lt,At,ft,Mt,jt=F-k,Rt=O-D,Yt=U-F,Vt=G-O,ie=tt-U,Wt=Q-G;for(pt=0;pt<41;pt++)yt=(H=(St=k+(ut=pt/40)*jt)+ut*((st=F+ut*Yt)-St))+ut*(st+ut*(U+ut*ie-st)-H),bt=(vt=(ot=D+ut*Rt)+ut*((it=O+ut*Vt)-ot))+ut*(it+ut*(G+ut*Wt-it)-vt),pt==0?(Lt=yt,At=bt,ft=yt,Mt=bt):(Lt=Math.min(Lt,yt),At=Math.min(At,bt),ft=Math.max(ft,yt),Mt=Math.max(Mt,bt));return new o(Math.round(Lt),Math.round(At),Math.round(ft-Lt),Math.round(Mt-At))},$=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,D,F=(k=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:D}));this.prevLineDash!==F&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=F)}}})(Jt.API),function(e){var t=function(p){var v,o,r,c,u,a,l,n,h,g;for(o=[],r=0,c=(p+=v="\0\0\0\0".slice(p.length%4||4)).length;c>r;r+=4)(u=(p.charCodeAt(r)<<24)+(p.charCodeAt(r+1)<<16)+(p.charCodeAt(r+2)<<8)+p.charCodeAt(r+3))!==0?(a=(u=((u=((u=((u=(u-(g=u%85))/85)-(h=u%85))/85)-(n=u%85))/85)-(l=u%85))/85)%85,o.push(a+33,l+33,n+33,h+33,g+33)):o.push(122);return function(f,m){for(var y=m;y>0;y--)f.pop()}(o,v.length),String.fromCharCode.apply(String,o)+"~>"},i=function(p){var v,o,r,c,u,a=String,l="length",n=255,h="charCodeAt",g="slice",f="replace";for(p[g](-2),p=p[g](0,-2)[f](/\s/g,"")[f]("z","!!!!!"),r=[],c=0,u=(p+=v="uuuuu"[g](p[l]%5||5))[l];u>c;c+=5)o=52200625*(p[h](c)-33)+614125*(p[h](c+1)-33)+7225*(p[h](c+2)-33)+85*(p[h](c+3)-33)+(p[h](c+4)-33),r.push(n&o>>24,n&o>>16,n&o>>8,n&o);return function(m,y){for(var x=y;x>0;x--)m.pop()}(r,v[l]),a.fromCharCode.apply(a,r)},s=function(p){var v=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((p=p.replace(/\s/g,"")).indexOf(">")!==-1&&(p=p.substr(0,p.indexOf(">"))),p.length%2&&(p+="0"),v.test(p)===!1)return"";for(var o="",r=0;r<p.length;r+=2)o+=String.fromCharCode("0x"+(p[r]+p[r+1]));return o},d=function(p){for(var v=new Uint8Array(p.length),o=p.length;o--;)v[o]=p.charCodeAt(o);return p=(v=Zc(v)).reduce(function(r,c){return r+String.fromCharCode(c)},"")};e.processDataByFilters=function(p,v){var o=0,r=p||"",c=[];for(typeof(v=v||[])=="string"&&(v=[v]),o=0;o<v.length;o+=1)switch(v[o]){case"ASCII85Decode":case"/ASCII85Decode":r=i(r),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":r=t(r),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":r=s(r),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":r=r.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":r=d(r),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+v[o]+'" is not implemented')}return{data:r,reverseChain:c.reverse().join(" ")}}}(Jt.API),function(e){e.loadFile=function(t,i,s){return function(d,p,v){p=p!==!1,v=typeof v=="function"?v:function(){};var o=void 0;try{o=function(r,c,u){var a=new XMLHttpRequest,l=0,n=function(h){var g=h.length,f=[],m=String.fromCharCode;for(l=0;l<g;l+=1)f.push(m(255&h.charCodeAt(l)));return f.join("")};if(a.open("GET",r,!c),a.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(a.onload=function(){a.status===200?u(n(this.responseText)):u(void 0)}),a.send(null),c&&a.status===200)return n(a.responseText)}(d,p,v)}catch{}return o}(t,i,s)},e.loadImageFile=e.loadFile}(Jt.API),function(e){function t(){return(Qt.html2canvas?Promise.resolve(Qt.html2canvas):Hc(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load html2canvas: "+v))}).then(function(v){return v.default?v.default:v})}function i(){return(Qt.DOMPurify?Promise.resolve(Qt.DOMPurify):Hc(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load dompurify: "+v))}).then(function(v){return v.default?v.default:v})}var s=function(v){var o=ke(v);return o==="undefined"?"undefined":o==="string"||v instanceof String?"string":o==="number"||v instanceof Number?"number":o==="function"||v instanceof Function?"function":v&&v.constructor===Array?"array":v&&v.nodeType===1?"element":o==="object"?"object":"unknown"},d=function(v,o){var r=document.createElement(v);for(var c in o.className&&(r.className=o.className),o.innerHTML&&o.dompurify&&(r.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)r.style[c]=o.style[c];return r},p=function v(o){var r=Object.assign(v.convert(Promise.resolve()),JSON.parse(JSON.stringify(v.template))),c=v.convert(Promise.resolve(),r);return c=(c=c.setProgress(1,v,1,[v])).set(o)};(p.prototype=Object.create(Promise.prototype)).constructor=p,p.convert=function(v,o){return v.__proto__=o||p.prototype,v},p.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},p.prototype.from=function(v,o){return this.then(function(){switch(o=o||function(r){switch(s(r)){case"string":return"string";case"element":return r.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(v)){case"string":return this.then(i).then(function(r){return this.set({src:d("div",{innerHTML:v,dompurify:r})})});case"element":return this.set({src:v});case"canvas":return this.set({canvas:v});case"img":return this.set({img:v});default:return this.error("Unknown source type.")}})},p.prototype.to=function(v){switch(v){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},p.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var v={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function r(c,u){for(var a=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),l=c.firstChild;l;l=l.nextSibling)u!==!0&&l.nodeType===1&&l.nodeName==="SCRIPT"||a.appendChild(r(l,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(a.width=c.width,a.height=c.height,a.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(a.value=c.value),a.addEventListener("load",function(){a.scrollTop=c.scrollTop,a.scrollLeft=c.scrollLeft},!0)),a}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(v.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=d("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=d("div",{className:"html2pdf__container",style:v}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(d("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},p.prototype.toCanvas=function(){var v=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(v).then(t).then(function(o){var r=Object.assign({},this.opt.html2canvas);return delete r.onrendered,o(this.prop.container,r)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},p.prototype.toContext2d=function(){var v=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(v).then(t).then(function(o){var r=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,a=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete a.onrendered,r.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,r.context2d.posX=this.opt.x,r.context2d.posY=this.opt.y,r.context2d.margin=this.opt.margin,r.context2d.fontFaces=c,c)for(var l=0;l<c.length;++l){var n=c[l],h=n.src.find(function(g){return g.format==="truetype"});h&&r.addFont(h.url,n.ref.name,n.ref.style)}return a.windowHeight=a.windowHeight||0,a.windowHeight=a.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight,r.context2d.save(!0),o(this.prop.container,a)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},p.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var v=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=v})},p.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},p.prototype.output=function(v,o,r){return(r=r||"pdf").toLowerCase()==="img"||r.toLowerCase()==="image"?this.outputImg(v,o):this.outputPdf(v,o)},p.prototype.outputPdf=function(v,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(v,o)})},p.prototype.outputImg=function(v){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(v){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+v+'" is not supported.'}})},p.prototype.save=function(v){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(v?{filename:v}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},p.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},p.prototype.set=function(v){if(s(v)!=="object")return this;var o=Object.keys(v||{}).map(function(r){if(r in p.template.prop)return function(){this.prop[r]=v[r]};switch(r){case"margin":return this.setMargin.bind(this,v.margin);case"jsPDF":return function(){return this.opt.jsPDF=v.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,v.pageSize);default:return function(){this.opt[r]=v[r]}}},this);return this.then(function(){return this.thenList(o)})},p.prototype.get=function(v,o){return this.then(function(){var r=v in p.template.prop?this.prop[v]:this.opt[v];return o?o(r):r})},p.prototype.setMargin=function(v){return this.then(function(){switch(s(v)){case"number":v=[v,v,v,v];case"array":if(v.length===2&&(v=[v[0],v[1],v[0],v[1]]),v.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=v}).then(this.setPageSize)},p.prototype.setPageSize=function(v){function o(r,c){return Math.floor(r*c/72*96)}return this.then(function(){(v=v||Jt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(v.inner={width:v.width-this.opt.margin[1]-this.opt.margin[3],height:v.height-this.opt.margin[0]-this.opt.margin[2]},v.inner.px={width:o(v.inner.width,v.k),height:o(v.inner.height,v.k)},v.inner.ratio=v.inner.height/v.inner.width),this.prop.pageSize=v})},p.prototype.setProgress=function(v,o,r,c){return v!=null&&(this.progress.val=v),o!=null&&(this.progress.state=o),r!=null&&(this.progress.n=r),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},p.prototype.updateProgress=function(v,o,r,c){return this.setProgress(v?this.progress.val+v:null,o||null,r?this.progress.n+r:null,c?this.progress.stack.concat(c):null)},p.prototype.then=function(v,o){var r=this;return this.thenCore(v,o,function(c,u){return r.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(a){return r.updateProgress(null,c),a}).then(c,u).then(function(a){return r.updateProgress(1),a})})},p.prototype.thenCore=function(v,o,r){r=r||Promise.prototype.then,v&&(v=v.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:p.convert(Object.assign({},this),Promise.prototype),u=r.call(c,v,o);return p.convert(u,this.__proto__)},p.prototype.thenExternal=function(v,o){return Promise.prototype.then.call(this,v,o)},p.prototype.thenList=function(v){var o=this;return v.forEach(function(r){o=o.thenCore(r)}),o},p.prototype.catch=function(v){v&&(v=v.bind(this));var o=Promise.prototype.catch.call(this,v);return p.convert(o,this)},p.prototype.catchExternal=function(v){return Promise.prototype.catch.call(this,v)},p.prototype.error=function(v){return this.then(function(){throw new Error(v)})},p.prototype.using=p.prototype.set,p.prototype.saveAs=p.prototype.save,p.prototype.export=p.prototype.output,p.prototype.run=p.prototype.then,Jt.getPageSize=function(v,o,r){if(ke(v)==="object"){var c=v;v=c.orientation,o=c.unit||o,r=c.format||r}o=o||"mm",r=r||"a4",v=(""+(v||"P")).toLowerCase();var u,a=(""+r).toLowerCase(),l={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var n,h=0,g=0;if(l.hasOwnProperty(a))h=l[a][1]/u,g=l[a][0]/u;else try{h=r[1],g=r[0]}catch{throw new Error("Invalid format: "+r)}if(v==="p"||v==="portrait")v="p",g>h&&(n=g,g=h,h=n);else{if(v!=="l"&&v!=="landscape")throw"Invalid orientation: "+v;v="l",h>g&&(n=g,g=h,h=n)}return{width:g,height:h,unit:o,k:u,orientation:v}},e.html=function(v,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(nh):null;var r=new p(o);return o.worker?r:r.from(v).doCallback()}}(Jt.API),Jt.API.addJS=function(e){return Fu=e,this.internal.events.subscribe("postPutResources",function(){Qo=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qo+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Nu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Fu+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qo!==void 0&&Nu!==void 0&&this.internal.out("/Names <</JavaScript "+Qo+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var i=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var d=i.outline.render().split(/\r\n/),p=0;p<d.length;p++){var v=d[p],o=s.exec(v);if(o!=null){var r=o[1];i.internal.newObjectDeferredBegin(r,!1)}i.internal.write(v)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(p=0;p<c;p++){var a=i.internal.newObject();u.push(a);var l=i.internal.getPageInfo(p+1);i.internal.write("<< /D["+l.objId+" 0 R /XYZ null null null]>> endobj")}var n=i.internal.newObject();for(i.internal.write("<< /Names [ "),p=0;p<u.length;p++)i.internal.write("(page_"+(p+1)+")"+u[p]+" 0 R");i.internal.write(" ] >>","endobj"),t=i.internal.newObject(),i.internal.write("<< /Dests "+n+" 0 R"),i.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(s,d,p){var v={title:d,options:p,children:[]};return s==null&&(s=this.root),s.children.push(v),v},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(s){s.id=i.internal.newObjectDeferred();for(var d=0;d<s.children.length;d++)this.genIds_r(s.children[d])},i.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},i.outline.renderItems=function(s){for(var d=this.ctx.pdf.internal.getVerticalCoordinateString,p=0;p<s.children.length;p++){var v=s.children[p];this.objStart(v),this.line("/Title "+this.makeString(v.title)),this.line("/Parent "+this.makeRef(s)),p>0&&this.line("/Prev "+this.makeRef(s.children[p-1])),p<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[p+1])),v.children.length>0&&(this.line("/First "+this.makeRef(v.children[0])),this.line("/Last "+this.makeRef(v.children[v.children.length-1])));var o=this.count=this.count_r({count:0},v);if(o>0&&this.line("/Count "+o),v.options&&v.options.pageNumber){var r=i.internal.getPageInfo(v.options.pageNumber);this.line("/Dest ["+r.objId+" 0 R /XYZ 0 "+d(0)+" 0]")}this.objEnd()}for(var c=0;c<s.children.length;c++)this.renderItems(s.children[c])},i.outline.line=function(s){this.ctx.val+=s+`\r
`},i.outline.makeRef=function(s){return s.id+" 0 R"},i.outline.makeString=function(s){return"("+i.internal.pdfEscape(s)+")"},i.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(s,d){for(var p=0;p<d.children.length;p++)s.count++,this.count_r(s,d.children[p]);return s.count}}])}(Jt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(i,s,d,p,v,o){var r,c=this.decode.DCT_DECODE,u=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=v||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(r=function(a){for(var l,n=256*a.charCodeAt(4)+a.charCodeAt(5),h=a.length,g={width:0,height:0,numcomponents:1},f=4;f<h;f+=2){if(f+=n,t.indexOf(a.charCodeAt(f+1))!==-1){l=256*a.charCodeAt(f+5)+a.charCodeAt(f+6),g={width:256*a.charCodeAt(f+7)+a.charCodeAt(f+8),height:l,numcomponents:a.charCodeAt(f+9)};break}n=256*a.charCodeAt(f+2)+a.charCodeAt(f+3)}return g}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:i,width:r.width,height:r.height,colorSpace:o,bitsPerComponent:8,filter:c,index:s,alias:d}}return u}}(Jt.API);var Bs,tl,Eu,Iu,ju,Hg=function(){var e,t,i;function s(p){var v,o,r,c,u,a,l,n,h,g,f,m,y,x;for(this.data=p,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(v=this.readUInt32(),h=(function(){var S,A;for(A=[],S=0;S<4;++S)A.push(String.fromCharCode(this.data[this.pos++]));return A}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(v);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,a.delay=1e3*u/c,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for(h==="fdAT"&&(this.pos+=4,v-=4),p=(a!=null?a.data:void 0)||this.imgData,m=0;0<=v?m<v:m>v;0<=v?++m:--m)p.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(v),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((g=r-this.transparency.indexed.length)>0)for(y=0;0<=g?y<g:y>g;0<=g?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(v)[0];break;case 2:this.transparency.rgb=this.read(v)}break;case"tEXt":l=(f=this.read(v)).indexOf(0),n=String.fromCharCode.apply(String,f.slice(0,l)),this.text[n]=String.fromCharCode.apply(String,f.slice(l+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=v}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(p){var v,o;for(o=[],v=0;0<=p?v<p:v>p;0<=p?++v:--v)o.push(this.data[this.pos++]);return o},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(p){var v=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*v),r=0,c=this;if(p==null&&(p=this.imgData),p.length===0)return new Uint8Array(0);function u(a,l,n,h){var g,f,m,y,x,S,A,M,T,N,W,K,P,I,J,V,rt,at,dt,nt,E,z=Math.ceil((c.width-a)/n),$=Math.ceil((c.height-l)/h),k=c.width==z&&c.height==$;for(I=v*z,K=k?o:new Uint8Array(I*$),S=p.length,P=0,f=0;P<$&&r<S;){switch(p[r++]){case 0:for(y=rt=0;rt<I;y=rt+=1)K[f++]=p[r++];break;case 1:for(y=at=0;at<I;y=at+=1)g=p[r++],x=y<v?0:K[f-v],K[f++]=(g+x)%256;break;case 2:for(y=dt=0;dt<I;y=dt+=1)g=p[r++],m=(y-y%v)/v,J=P&&K[(P-1)*I+m*v+y%v],K[f++]=(J+g)%256;break;case 3:for(y=nt=0;nt<I;y=nt+=1)g=p[r++],m=(y-y%v)/v,x=y<v?0:K[f-v],J=P&&K[(P-1)*I+m*v+y%v],K[f++]=(g+Math.floor((x+J)/2))%256;break;case 4:for(y=E=0;E<I;y=E+=1)g=p[r++],m=(y-y%v)/v,x=y<v?0:K[f-v],P===0?J=V=0:(J=K[(P-1)*I+m*v+y%v],V=m&&K[(P-1)*I+(m-1)*v+y%v]),A=x+J-V,M=Math.abs(A-x),N=Math.abs(A-J),W=Math.abs(A-V),T=M<=N&&M<=W?x:N<=W?J:V,K[f++]=(g+T)%256;break;default:throw new Error("Invalid filter algorithm: "+p[r-1])}if(!k){var D=((l+P*h)*c.width+a)*v,F=P*I;for(y=0;y<z;y+=1){for(var O=0;O<v;O+=1)o[D++]=K[F++];D+=(n-1)*v}}P++}}return p=_g(p),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},s.prototype.decodePalette=function(){var p,v,o,r,c,u,a,l,n;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),r=0,p=0,v=a=0,l=o.length;a<l;v=a+=3)c[r++]=o[v],c[r++]=o[v+1],c[r++]=o[v+2],c[r++]=(n=u[p++])!=null?n:255;return c},s.prototype.copyToImageData=function(p,v){var o,r,c,u,a,l,n,h,g,f,m;if(r=this.colors,g=null,o=this.hasAlphaChannel,this.palette.length&&(g=(m=this._decodedPalette)!=null?m:this._decodedPalette=this.decodePalette(),r=4,o=!0),h=(c=p.data||p).length,a=g||v,u=l=0,r===1)for(;u<h;)n=g?4*v[u/4]:l,f=a[n++],c[u++]=f,c[u++]=f,c[u++]=f,c[u++]=o?a[n++]:255,l=n;else for(;u<h;)n=g?4*v[u/4]:l,c[u++]=a[n++],c[u++]=a[n++],c[u++]=a[n++],c[u++]=o?a[n++]:255,l=n},s.prototype.decode=function(){var p;return p=new Uint8Array(this.width*this.height*4),this.copyToImageData(p,this.decodePixels()),p};var d=function(){if(Object.prototype.toString.call(Qt)==="[object Window]"){try{t=Qt.document.createElement("canvas"),i=t.getContext("2d")}catch{return!1}return!0}return!1};return d(),e=function(p){var v;if(d()===!0)return i.width=p.width,i.height=p.height,i.clearRect(0,0,p.width,p.height),i.putImageData(p,0,0),(v=new Image).src=t.toDataURL(),v;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(p){var v,o,r,c,u,a,l,n;if(this.animation){for(n=[],o=u=0,a=(l=this.animation.frames).length;u<a;o=++u)v=l[o],r=p.createImageData(v.width,v.height),c=this.decodePixels(new Uint8Array(v.data)),this.copyToImageData(r,c),v.imageData=r,n.push(v.image=e(r));return n}},s.prototype.renderFrame=function(p,v){var o,r,c;return o=(r=this.animation.frames)[v],c=r[v-1],v===0&&p.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?p.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&p.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&p.clearRect(o.xOffset,o.yOffset,o.width,o.height),p.drawImage(o.image,o.xOffset,o.yOffset)},s.prototype.animate=function(p){var v,o,r,c,u,a,l=this;return o=0,a=this.animation,c=a.numFrames,r=a.frames,u=a.numPlays,(v=function(){var n,h;if(n=o++%c,h=r[n],l.renderFrame(p,n),c>1&&o/c<u)return l.animation._timeout=setTimeout(v,h.delay)})()},s.prototype.stopAnimation=function(){var p;return clearTimeout((p=this.animation)!=null?p._timeout:void 0)},s.prototype.render=function(p){var v,o;return p._png&&p._png.stopAnimation(),p._png=this,p.width=this.width,p.height=this.height,v=p.getContext("2d"),this.animation?(this.decodeFrames(v),this.animate(v)):(o=v.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),v.putImageData(o,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Yg(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,d=e[t++],p=d>>7,v=1<<(7&d)+1;e[t++],e[t++];var o=null,r=null;p&&(o=t,r=v,t+=3*v);var c=!0,u=[],a=0,l=null,n=0,h=null;for(this.width=i,this.height=s;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,h=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];a=e[t++]|e[t++]<<8,l=e[t++],!(1&g)&&(l=null),n=g>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var f=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,S=e[t++],A=S>>6&1,M=1<<(7&S)+1,T=o,N=r,W=!1;S>>7&&(W=!0,T=t,N=M,t+=3*M);var K=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}u.push({x:f,y:m,width:y,height:x,has_local_palette:W,palette_offset:T,palette_size:N,data_offset:K,data_length:t-K,transparent_index:l,interlaced:!!A,delay:a,disposal:n});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return h},this.frameInfo=function(I){if(I<0||I>=u.length)throw new Error("Frame index out of range.");return u[I]},this.decodeAndBlitFrameBGRA=function(I,J){var V=this.frameInfo(I),rt=V.width*V.height,at=new Uint8Array(rt);Du(e,V.data_offset,at,rt);var dt=V.palette_offset,nt=V.transparent_index;nt===null&&(nt=256);var E=V.width,z=i-E,$=E,k=4*(V.y*i+V.x),D=4*((V.y+V.height)*i+V.x),F=k,O=4*z;V.interlaced===!0&&(O+=4*i*7);for(var U=8,G=0,tt=at.length;G<tt;++G){var Q=at[G];if($===0&&($=E,(F+=O)>=D&&(O=4*z+4*i*(U-1),F=k+(E+z)*(U<<1),U>>=1)),Q===nt)F+=4;else{var ut=e[dt+3*Q],pt=e[dt+3*Q+1],St=e[dt+3*Q+2];J[F++]=St,J[F++]=pt,J[F++]=ut,J[F++]=255}--$}},this.decodeAndBlitFrameRGBA=function(I,J){var V=this.frameInfo(I),rt=V.width*V.height,at=new Uint8Array(rt);Du(e,V.data_offset,at,rt);var dt=V.palette_offset,nt=V.transparent_index;nt===null&&(nt=256);var E=V.width,z=i-E,$=E,k=4*(V.y*i+V.x),D=4*((V.y+V.height)*i+V.x),F=k,O=4*z;V.interlaced===!0&&(O+=4*i*7);for(var U=8,G=0,tt=at.length;G<tt;++G){var Q=at[G];if($===0&&($=E,(F+=O)>=D&&(O=4*z+4*i*(U-1),F=k+(E+z)*(U<<1),U>>=1)),Q===nt)F+=4;else{var ut=e[dt+3*Q],pt=e[dt+3*Q+1],St=e[dt+3*Q+2];J[F++]=ut,J[F++]=pt,J[F++]=St,J[F++]=255}--$}}}function Du(e,t,i,s){for(var d=e[t++],p=1<<d,v=p+1,o=v+1,r=d+1,c=(1<<r)-1,u=0,a=0,l=0,n=e[t++],h=new Int32Array(4096),g=null;;){for(;u<16&&n!==0;)a|=e[t++]<<u,u+=8,n===1?n=e[t++]:--n;if(u<r)break;var f=a&c;if(a>>=r,u-=r,f!==p){if(f===v)break;for(var m=f<o?f:g,y=0,x=m;x>p;)x=h[x]>>8,++y;var S=x;if(l+y+(m!==f?1:0)>s)return void Me.log("Warning, gif stream longer than expected.");i[l++]=S;var A=l+=y;for(m!==f&&(i[l++]=S),x=m;y--;)x=h[x],i[--A]=255&x,x>>=8;g!==null&&o<4096&&(h[o++]=g<<8|S,o>=c+1&&r<12&&(++r,c=c<<1|1)),g=f}else o=v+1,c=(1<<(r=d+1))-1,g=null}return l!==s&&Me.log("Warning, gif stream shorter than expected."),i}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ec(e){var t,i,s,d,p,v=Math.floor,o=new Array(64),r=new Array(64),c=new Array(64),u=new Array(64),a=new Array(65535),l=new Array(65535),n=new Array(64),h=new Array(64),g=[],f=0,m=7,y=new Array(64),x=new Array(64),S=new Array(64),A=new Array(256),M=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],rt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function at(k,D){for(var F=0,O=0,U=new Array,G=1;G<=16;G++){for(var tt=1;tt<=k[G];tt++)U[D[O]]=[],U[D[O]][0]=F,U[D[O]][1]=G,O++,F++;F*=2}return U}function dt(k){for(var D=k[0],F=k[1]-1;F>=0;)D&1<<F&&(f|=1<<m),F--,--m<0&&(f==255?(nt(255),nt(0)):nt(f),m=7,f=0)}function nt(k){g.push(k)}function E(k){nt(k>>8&255),nt(255&k)}function z(k,D,F,O,U){for(var G,tt=U[0],Q=U[240],ut=function(bt,Lt){var At,ft,Mt,jt,Rt,Yt,Vt,ie,Wt,te,Bt=0;for(Wt=0;Wt<8;++Wt){At=bt[Bt],ft=bt[Bt+1],Mt=bt[Bt+2],jt=bt[Bt+3],Rt=bt[Bt+4],Yt=bt[Bt+5],Vt=bt[Bt+6];var Pe=At+(ie=bt[Bt+7]),me=At-ie,Pi=ft+Vt,_e=ft-Vt,Ee=Mt+Yt,Sr=Mt-Yt,we=jt+Rt,Dn=jt-Rt,Ue=Pe+we,nr=Pe-we,qr=Pi+Ee,We=Pi-Ee;bt[Bt]=Ue+qr,bt[Bt+4]=Ue-qr;var re=.707106781*(We+nr);bt[Bt+2]=nr+re,bt[Bt+6]=nr-re;var xe=.382683433*((Ue=Dn+Sr)-(We=_e+me)),Bn=.5411961*Ue+xe,fi=1.306562965*We+xe,Cr=.707106781*(qr=Sr+_e),Ar=me+Cr,Zt=me-Cr;bt[Bt+5]=Zt+Bn,bt[Bt+3]=Zt-Bn,bt[Bt+1]=Ar+fi,bt[Bt+7]=Ar-fi,Bt+=8}for(Bt=0,Wt=0;Wt<8;++Wt){At=bt[Bt],ft=bt[Bt+8],Mt=bt[Bt+16],jt=bt[Bt+24],Rt=bt[Bt+32],Yt=bt[Bt+40],Vt=bt[Bt+48];var sr=At+(ie=bt[Bt+56]),kr=At-ie,Oi=ft+Vt,si=ft-Vt,Qe=Mt+Yt,Bi=Mt-Yt,ns=jt+Rt,Ur=jt-Rt,ar=sr+ns,or=sr-ns,lr=Oi+Qe,Lr=Oi-Qe;bt[Bt]=ar+lr,bt[Bt+32]=ar-lr;var Hi=.707106781*(Lr+or);bt[Bt+16]=or+Hi,bt[Bt+48]=or-Hi;var Tr=.382683433*((ar=Ur+Bi)-(Lr=si+kr)),Rn=.5411961*ar+Tr,ss=1.306562965*Lr+Tr,as=.707106781*(lr=Bi+si),os=kr+as,ls=kr-as;bt[Bt+40]=ls+Rn,bt[Bt+24]=ls-Rn,bt[Bt+8]=os+ss,bt[Bt+56]=os-ss,Bt++}for(Wt=0;Wt<64;++Wt)te=bt[Wt]*Lt[Wt],n[Wt]=te>0?te+.5|0:te-.5|0;return n}(k,D),pt=0;pt<64;++pt)h[T[pt]]=ut[pt];var St=h[0]-F;F=h[0],St==0?dt(O[0]):(dt(O[l[G=32767+St]]),dt(a[G]));for(var ot=63;ot>0&&h[ot]==0;)ot--;if(ot==0)return dt(tt),F;for(var st,it=1;it<=ot;){for(var H=it;h[it]==0&&it<=ot;)++it;var vt=it-H;if(vt>=16){st=vt>>4;for(var yt=1;yt<=st;++yt)dt(Q);vt&=15}G=32767+h[it],dt(U[(vt<<4)+l[G]]),dt(a[G]),it++}return ot!=63&&dt(tt),F}function $(k){k=Math.min(Math.max(k,1),100),p!=k&&(function(D){for(var F=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],O=0;O<64;O++){var U=v((F[O]*D+50)/100);U=Math.min(Math.max(U,1),255),o[T[O]]=U}for(var G=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],tt=0;tt<64;tt++){var Q=v((G[tt]*D+50)/100);Q=Math.min(Math.max(Q,1),255),r[T[tt]]=Q}for(var ut=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],pt=0,St=0;St<8;St++)for(var ot=0;ot<8;ot++)c[pt]=1/(o[T[pt]]*ut[St]*ut[ot]*8),u[pt]=1/(r[T[pt]]*ut[St]*ut[ot]*8),pt++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),p=k)}this.encode=function(k,D){D&&$(D),g=new Array,f=0,m=7,E(65496),E(65504),E(16),nt(74),nt(70),nt(73),nt(70),nt(0),nt(1),nt(1),nt(0),E(1),E(1),nt(0),nt(0),function(){E(65499),E(132),nt(0);for(var ft=0;ft<64;ft++)nt(o[ft]);nt(1);for(var Mt=0;Mt<64;Mt++)nt(r[Mt])}(),function(ft,Mt){E(65472),E(17),nt(8),E(Mt),E(ft),nt(3),nt(1),nt(17),nt(0),nt(2),nt(17),nt(1),nt(3),nt(17),nt(1)}(k.width,k.height),function(){E(65476),E(418),nt(0);for(var ft=0;ft<16;ft++)nt(N[ft+1]);for(var Mt=0;Mt<=11;Mt++)nt(W[Mt]);nt(16);for(var jt=0;jt<16;jt++)nt(K[jt+1]);for(var Rt=0;Rt<=161;Rt++)nt(P[Rt]);nt(1);for(var Yt=0;Yt<16;Yt++)nt(I[Yt+1]);for(var Vt=0;Vt<=11;Vt++)nt(J[Vt]);nt(17);for(var ie=0;ie<16;ie++)nt(V[ie+1]);for(var Wt=0;Wt<=161;Wt++)nt(rt[Wt])}(),E(65498),E(12),nt(3),nt(1),nt(0),nt(2),nt(17),nt(3),nt(17),nt(0),nt(63),nt(0);var F=0,O=0,U=0;f=0,m=7,this.encode.displayName="_encode_";for(var G,tt,Q,ut,pt,St,ot,st,it,H=k.data,vt=k.width,yt=k.height,bt=4*vt,Lt=0;Lt<yt;){for(G=0;G<bt;){for(pt=bt*Lt+G,ot=-1,st=0,it=0;it<64;it++)St=pt+(st=it>>3)*bt+(ot=4*(7&it)),Lt+st>=yt&&(St-=bt*(Lt+1+st-yt)),G+ot>=bt&&(St-=G+ot-bt+4),tt=H[St++],Q=H[St++],ut=H[St++],y[it]=(M[tt]+M[Q+256>>0]+M[ut+512>>0]>>16)-128,x[it]=(M[tt+768>>0]+M[Q+1024>>0]+M[ut+1280>>0]>>16)-128,S[it]=(M[tt+1280>>0]+M[Q+1536>>0]+M[ut+1792>>0]>>16)-128;F=z(y,c,F,t,s),O=z(x,u,O,i,d),U=z(S,u,U,i,d),G+=32}Lt+=8}if(m>=0){var At=[];At[1]=m+1,At[0]=(1<<m+1)-1,dt(At)}return E(65497),new Uint8Array(g)},e=e||50,function(){for(var k=String.fromCharCode,D=0;D<256;D++)A[D]=k(D)}(),t=at(N,W),i=at(I,J),s=at(K,P),d=at(V,rt),function(){for(var k=1,D=2,F=1;F<=15;F++){for(var O=k;O<D;O++)l[32767+O]=F,a[32767+O]=[],a[32767+O][1]=F,a[32767+O][0]=O;for(var U=-(D-1);U<=-k;U++)l[32767+U]=F,a[32767+U]=[],a[32767+U][1]=F,a[32767+U][0]=D-1+U;k<<=1,D<<=1}}(),function(){for(var k=0;k<256;k++)M[k]=19595*k,M[k+256>>0]=38470*k,M[k+512>>0]=7471*k+32768,M[k+768>>0]=-11059*k,M[k+1024>>0]=-21709*k,M[k+1280>>0]=32768*k+8421375,M[k+1536>>0]=-27439*k,M[k+1792>>0]=-5329*k}(),$(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function gr(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Bu(e){function t(N){if(!N)throw Error("assert :P")}function i(N,W,K){for(var P=0;4>P;P++)if(N[W+P]!=K.charCodeAt(P))return!0;return!1}function s(N,W,K,P,I){for(var J=0;J<I;J++)N[W+J]=K[P+J]}function d(N,W,K,P){for(var I=0;I<P;I++)N[W+I]=K}function p(N){return new Int32Array(N)}function v(N,W){for(var K=[],P=0;P<N;P++)K.push(new W);return K}function o(N,W){var K=[];return function P(I,J,V){for(var rt=V[J],at=0;at<rt&&(I.push(V.length>J+1?[]:new W),!(V.length<J+1));at++)P(I[at],J+1,V)}(K,0,N),K}var r=function(){var N=this;function W(b,w){for(var C=1<<w-1>>>0;b&C;)C>>>=1;return C?(b&C-1)+C:b}function K(b,w,C,L,j){t(!(L%C));do b[w+(L-=C)]=j;while(0<L)}function P(b,w,C,L,j){if(t(2328>=j),512>=j)var R=p(512);else if((R=p(j))==null)return 0;return function(q,Y,X,Z,ct,xt){var _t,mt,Ot=Y,Ct=1<<X,ht=p(16),gt=p(16);for(t(ct!=0),t(Z!=null),t(q!=null),t(0<X),mt=0;mt<ct;++mt){if(15<Z[mt])return 0;++ht[Z[mt]]}if(ht[0]==ct)return 0;for(gt[1]=0,_t=1;15>_t;++_t){if(ht[_t]>1<<_t)return 0;gt[_t+1]=gt[_t]+ht[_t]}for(mt=0;mt<ct;++mt)_t=Z[mt],0<Z[mt]&&(xt[gt[_t]++]=mt);if(gt[15]==1)return(Z=new I).g=0,Z.value=xt[0],K(q,Ot,1,Ct,Z),Ct;var Tt,Nt=-1,Pt=Ct-1,Ut=0,Dt=1,Kt=1,zt=1<<X;for(mt=0,_t=1,ct=2;_t<=X;++_t,ct<<=1){if(Dt+=Kt<<=1,0>(Kt-=ht[_t]))return 0;for(;0<ht[_t];--ht[_t])(Z=new I).g=_t,Z.value=xt[mt++],K(q,Ot+Ut,ct,zt,Z),Ut=W(Ut,_t)}for(_t=X+1,ct=2;15>=_t;++_t,ct<<=1){if(Dt+=Kt<<=1,0>(Kt-=ht[_t]))return 0;for(;0<ht[_t];--ht[_t]){if(Z=new I,(Ut&Pt)!=Nt){for(Ot+=zt,Tt=1<<(Nt=_t)-X;15>Nt&&!(0>=(Tt-=ht[Nt]));)++Nt,Tt<<=1;Ct+=zt=1<<(Tt=Nt-X),q[Y+(Nt=Ut&Pt)].g=Tt+X,q[Y+Nt].value=Ot-Y-Nt}Z.g=_t-X,Z.value=xt[mt++],K(q,Ot+(Ut>>X),ct,zt,Z),Ut=W(Ut,_t)}}return Dt!=2*gt[15]-1?0:Ct}(b,w,C,L,j,R)}function I(){this.value=this.g=0}function J(){this.value=this.g=0}function V(){this.G=v(5,I),this.H=p(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=v(di,J)}function rt(b,w,C,L){t(b!=null),t(w!=null),t(2147483648>L),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=w,b.pa=C,b.Jd=w,b.Yc=C+L,b.Zc=4<=L?C+L-4+1:C,G(b)}function at(b,w){for(var C=0;0<w--;)C|=Q(b,128)<<w;return C}function dt(b,w){var C=at(b,w);return tt(b)?-C:C}function nt(b,w,C,L){var j,R=0;for(t(b!=null),t(w!=null),t(4294967288>L),b.Sb=L,b.Ra=0,b.u=0,b.h=0,4<L&&(L=4),j=0;j<L;++j)R+=w[C+j]<<8*j;b.Ra=R,b.bb=L,b.oa=w,b.pa=C}function E(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<Ss-8>>>0,++b.bb,b.u-=8;F(b)&&(b.h=1,b.u=0)}function z(b,w){if(t(0<=w),!b.h&&w<=_s){var C=D(b)&xs[w];return b.u+=w,E(b),C}return b.h=1,b.u=0}function $(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(b){return b.Ra>>>(b.u&Ss-1)>>>0}function F(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>Ss}function O(b,w){b.u=w,b.h=F(b)}function U(b){b.u>=La&&(t(b.u>=La),E(b))}function G(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function tt(b){return at(b,1)}function Q(b,w){var C=b.Ca;0>b.b&&G(b);var L=b.b,j=C*w>>>8,R=(b.I>>>L>j)+0;for(R?(C-=j,b.I-=j+1<<L>>>0):C=j+1,L=C,j=0;256<=L;)j+=8,L>>=8;return L=7^j+Ni[L],b.b-=L,b.Ca=(C<<L)-1,R}function ut(b,w,C){b[w+0]=C>>24&255,b[w+1]=C>>16&255,b[w+2]=C>>8&255,b[w+3]=C>>0&255}function pt(b,w){return b[w+0]<<0|b[w+1]<<8}function St(b,w){return pt(b,w)|b[w+2]<<16}function ot(b,w){return pt(b,w)|pt(b,w+2)<<16}function st(b,w){var C=1<<w;return t(b!=null),t(0<w),b.X=p(C),b.X==null?0:(b.Mb=32-w,b.Xa=w,1)}function it(b,w){t(b!=null),t(w!=null),t(b.Xa==w.Xa),s(w.X,0,b.X,0,1<<w.Xa)}function H(){this.X=[],this.Xa=this.Mb=0}function vt(b,w,C,L){t(C!=null),t(L!=null);var j=C[0],R=L[0];return j==0&&(j=(b*R+w/2)/w),R==0&&(R=(w*j+b/2)/b),0>=j||0>=R?0:(C[0]=j,L[0]=R,1)}function yt(b,w){return b+(1<<w)-1>>>w}function bt(b,w){return((4278255360&b)+(4278255360&w)>>>0&4278255360)+((16711935&b)+(16711935&w)>>>0&16711935)>>>0}function Lt(b,w){N[w]=function(C,L,j,R,q,Y,X){var Z;for(Z=0;Z<q;++Z){var ct=N[b](Y[X+Z-1],j,R+Z);Y[X+Z]=bt(C[L+Z],ct)}}}function At(){this.ud=this.hd=this.jd=0}function ft(b,w){return((4278124286&(b^w))>>>1)+(b&w)>>>0}function Mt(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function jt(b,w){return Mt(b+(b-w+.5>>1))}function Rt(b,w,C){return Math.abs(w-C)-Math.abs(b-C)}function Yt(b,w,C,L,j,R,q){for(L=R[q-1],C=0;C<j;++C)R[q+C]=L=bt(b[w+C],L)}function Vt(b,w,C,L,j){var R;for(R=0;R<C;++R){var q=b[w+R],Y=q>>8&255,X=16711935&(X=(X=16711935&q)+((Y<<16)+Y));L[j+R]=(4278255360&q)+X>>>0}}function ie(b,w){w.jd=b>>0&255,w.hd=b>>8&255,w.ud=b>>16&255}function Wt(b,w,C,L,j,R){var q;for(q=0;q<L;++q){var Y=w[C+q],X=Y>>>8,Z=Y,ct=255&(ct=(ct=Y>>>16)+((b.jd<<24>>24)*(X<<24>>24)>>>5));Z=255&(Z=(Z=Z+((b.hd<<24>>24)*(X<<24>>24)>>>5))+((b.ud<<24>>24)*(ct<<24>>24)>>>5)),j[R+q]=(4278255360&Y)+(ct<<16)+Z}}function te(b,w,C,L,j){N[w]=function(R,q,Y,X,Z,ct,xt,_t,mt){for(X=xt;X<_t;++X)for(xt=0;xt<mt;++xt)Z[ct++]=j(Y[L(R[q++])])},N[b]=function(R,q,Y,X,Z,ct,xt){var _t=8>>R.b,mt=R.Ea,Ot=R.K[0],Ct=R.w;if(8>_t)for(R=(1<<R.b)-1,Ct=(1<<_t)-1;q<Y;++q){var ht,gt=0;for(ht=0;ht<mt;++ht)ht&R||(gt=L(X[Z++])),ct[xt++]=j(Ot[gt&Ct]),gt>>=_t}else N["VP8LMapColor"+C](X,Z,Ot,Ct,ct,xt,q,Y,mt)}}function Bt(b,w,C,L,j){for(C=w+C;w<C;){var R=b[w++];L[j++]=R>>16&255,L[j++]=R>>8&255,L[j++]=R>>0&255}}function Pe(b,w,C,L,j){for(C=w+C;w<C;){var R=b[w++];L[j++]=R>>16&255,L[j++]=R>>8&255,L[j++]=R>>0&255,L[j++]=R>>24&255}}function me(b,w,C,L,j){for(C=w+C;w<C;){var R=(q=b[w++])>>16&240|q>>12&15,q=q>>0&240|q>>28&15;L[j++]=R,L[j++]=q}}function Pi(b,w,C,L,j){for(C=w+C;w<C;){var R=(q=b[w++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;L[j++]=R,L[j++]=q}}function _e(b,w,C,L,j){for(C=w+C;w<C;){var R=b[w++];L[j++]=R>>0&255,L[j++]=R>>8&255,L[j++]=R>>16&255}}function Ee(b,w,C,L,j,R){if(R==0)for(C=w+C;w<C;)ut(L,((R=b[w++])[0]>>24|R[1]>>8&65280|R[2]<<8&16711680|R[3]<<24)>>>0),j+=32;else s(L,j,b,w,C)}function Sr(b,w){N[w][0]=N[b+"0"],N[w][1]=N[b+"1"],N[w][2]=N[b+"2"],N[w][3]=N[b+"3"],N[w][4]=N[b+"4"],N[w][5]=N[b+"5"],N[w][6]=N[b+"6"],N[w][7]=N[b+"7"],N[w][8]=N[b+"8"],N[w][9]=N[b+"9"],N[w][10]=N[b+"10"],N[w][11]=N[b+"11"],N[w][12]=N[b+"12"],N[w][13]=N[b+"13"],N[w][14]=N[b+"0"],N[w][15]=N[b+"0"]}function we(b){return b==Ql||b==tc||b==No||b==ec}function Dn(){this.eb=[],this.size=this.A=this.fb=0}function Ue(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function nr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Dn,this.f.kb=new Ue,this.sd=null}function qr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function We(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function re(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function xe(b,w){var C=b.T,L=w.ba.f.RGBA,j=L.eb,R=L.fb+b.ka*L.A,q=Ki[w.ba.S],Y=b.y,X=b.O,Z=b.f,ct=b.N,xt=b.ea,_t=b.W,mt=w.cc,Ot=w.dc,Ct=w.Mc,ht=w.Nc,gt=b.ka,Tt=b.ka+b.T,Nt=b.U,Pt=Nt+1>>1;for(gt==0?q(Y,X,null,null,Z,ct,xt,_t,Z,ct,xt,_t,j,R,null,null,Nt):(q(w.ec,w.fc,Y,X,mt,Ot,Ct,ht,Z,ct,xt,_t,j,R-L.A,j,R,Nt),++C);gt+2<Tt;gt+=2)mt=Z,Ot=ct,Ct=xt,ht=_t,ct+=b.Rc,_t+=b.Rc,R+=2*L.A,q(Y,(X+=2*b.fa)-b.fa,Y,X,mt,Ot,Ct,ht,Z,ct,xt,_t,j,R-L.A,j,R,Nt);return X+=b.fa,b.j+Tt<b.o?(s(w.ec,w.fc,Y,X,Nt),s(w.cc,w.dc,Z,ct,Pt),s(w.Mc,w.Nc,xt,_t,Pt),C--):1&Tt||q(Y,X,null,null,Z,ct,xt,_t,Z,ct,xt,_t,j,R+L.A,null,null,Nt),C}function Bn(b,w,C){var L=b.F,j=[b.J];if(L!=null){var R=b.U,q=w.ba.S,Y=q==Mo||q==No;w=w.ba.f.RGBA;var X=[0],Z=b.ka;X[0]=b.T,b.Kb&&(Z==0?--X[0]:(--Z,j[0]-=b.width),b.j+b.ka+b.T==b.o&&(X[0]=b.o-b.j-Z));var ct=w.eb;Z=w.fb+Z*w.A,b=je(L,j[0],b.width,R,X,ct,Z+(Y?0:3),w.A),t(C==X),b&&we(q)&&Gi(ct,Z,Y,R,X,w.A)}return 0}function fi(b){var w=b.ma,C=w.ba.S,L=11>C,j=C==Po||C==Oo||C==Mo||C==Zl||C==12||we(C);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!Aa(w.Oa,b,j?11:12))return 0;if(j&&we(C)&&Ft(),b.da)alert("todo:use_scaling");else{if(L){if(w.Ib=re,b.Kb){if(C=b.U+1>>1,w.memory=p(b.U+2*C),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+b.U,w.Mc=w.cc,w.Nc=w.dc+C,w.Ib=xe,Ft()}}else alert("todo:EmitYUV");j&&(w.Jb=Bn,L&&wt())}if(L&&!zh){for(b=0;256>b;++b)$d[b]=89858*(b-128)+Eo>>Fo,Zd[b]=-22014*(b-128)+Eo,Jd[b]=-45773*(b-128),Kd[b]=113618*(b-128)+Eo>>Fo;for(b=Ea;b<nc;++b)w=76283*(b-16)+Eo>>Fo,Qd[b-Ea]=Ri(w,255),t0[b-Ea]=Ri(w+8>>4,15);zh=1}return 1}function Cr(b){var w=b.ma,C=b.U,L=b.T;return t(!(1&b.ka)),0>=C||0>=L?0:(C=w.Ib(b,w),w.Jb!=null&&w.Jb(b,w,C),w.Dc+=C,1)}function Ar(b){b.ma.memory=null}function Zt(b,w,C,L){return z(b,8)!=47?0:(w[0]=z(b,14)+1,C[0]=z(b,14)+1,L[0]=z(b,1),z(b,3)!=0?0:!b.h)}function sr(b,w){if(4>b)return b+1;var C=b-2>>1;return(2+(1&b)<<C)+z(w,C)+1}function kr(b,w){return 120<w?w-120:1<=(C=((C=Id[w-1])>>4)*b+(8-(15&C)))?C:1;var C}function Oi(b,w,C){var L=D(C),j=b[w+=255&L].g-8;return 0<j&&(O(C,C.u+8),L=D(C),w+=b[w].value,w+=L&(1<<j)-1),O(C,C.u+b[w].g),b[w].value}function si(b,w,C){return C.g+=b.g,C.value+=b.value<<w>>>0,t(8>=C.g),b.g}function Qe(b,w,C){var L=b.xc;return t((w=L==0?0:b.vc[b.md*(C>>L)+(w>>L)])<b.Wb),b.Ya[w]}function Bi(b,w,C,L){var j=b.ab,R=b.c*w,q=b.C;w=q+w;var Y=C,X=L;for(L=b.Ta,C=b.Ua;0<j--;){var Z=b.gc[j],ct=q,xt=w,_t=Y,mt=X,Ot=(X=L,Y=C,Z.Ea);switch(t(ct<xt),t(xt<=Z.nc),Z.hc){case 2:_o(_t,mt,(xt-ct)*Ot,X,Y);break;case 0:var Ct=ct,ht=xt,gt=X,Tt=Y,Nt=(zt=Z).Ea;Ct==0&&(Kl(_t,mt,null,null,1,gt,Tt),Yt(_t,mt+1,0,0,Nt-1,gt,Tt+1),mt+=Nt,Tt+=Nt,++Ct);for(var Pt=1<<zt.b,Ut=Pt-1,Dt=yt(Nt,zt.b),Kt=zt.K,zt=zt.w+(Ct>>zt.b)*Dt;Ct<ht;){var ye=Kt,Se=zt,be=1;for(Ta(_t,mt,gt,Tt-Nt,1,gt,Tt);be<Nt;){var pe=(be&~Ut)+Pt;pe>Nt&&(pe=Nt),(0,fn[ye[Se++]>>8&15])(_t,mt+ +be,gt,Tt+be-Nt,pe-be,gt,Tt+be),be=pe}mt+=Nt,Tt+=Nt,++Ct&Ut||(zt+=Dt)}xt!=Z.nc&&s(X,Y-Ot,X,Y+(xt-ct-1)*Ot,Ot);break;case 1:for(Ot=_t,ht=mt,Nt=(_t=Z.Ea)-(Tt=_t&~(gt=(mt=1<<Z.b)-1)),Ct=yt(_t,Z.b),Pt=Z.K,Z=Z.w+(ct>>Z.b)*Ct;ct<xt;){for(Ut=Pt,Dt=Z,Kt=new At,zt=ht+Tt,ye=ht+_t;ht<zt;)ie(Ut[Dt++],Kt),Hn(Kt,Ot,ht,mt,X,Y),ht+=mt,Y+=mt;ht<ye&&(ie(Ut[Dt++],Kt),Hn(Kt,Ot,ht,Nt,X,Y),ht+=Nt,Y+=Nt),++ct&gt||(Z+=Ct)}break;case 3:if(_t==X&&mt==Y&&0<Z.b){for(ht=X,_t=Ot=Y+(xt-ct)*Ot-(Tt=(xt-ct)*yt(Z.Ea,Z.b)),mt=X,gt=Y,Ct=[],Tt=(Nt=Tt)-1;0<=Tt;--Tt)Ct[Tt]=mt[gt+Tt];for(Tt=Nt-1;0<=Tt;--Tt)ht[_t+Tt]=Ct[Tt];Yi(Z,ct,xt,X,Ot,X,Y)}else Yi(Z,ct,xt,_t,mt,X,Y)}Y=L,X=C}X!=C&&s(L,C,Y,X,R)}function ns(b,w){var C=b.V,L=b.Ba+b.c*b.C,j=w-b.C;if(t(w<=b.l.o),t(16>=j),0<j){var R=b.l,q=b.Ta,Y=b.Ua,X=R.width;if(Bi(b,j,C,L),j=Y=[Y],t((C=b.C)<(L=w)),t(R.v<R.va),L>R.o&&(L=R.o),C<R.j){var Z=R.j-C;C=R.j,j[0]+=Z*X}if(C>=L?C=0:(j[0]+=4*R.v,R.ka=C-R.j,R.U=R.va-R.v,R.T=L-C,C=1),C){if(Y=Y[0],11>(C=b.ca).S){var ct=C.f.RGBA,xt=(L=C.S,j=R.U,R=R.T,Z=ct.eb,ct.A),_t=R;for(ct=ct.fb+b.Ma*ct.A;0<_t--;){var mt=q,Ot=Y,Ct=j,ht=Z,gt=ct;switch(L){case To:Fi(mt,Ot,Ct,ht,gt);break;case Po:Ai(mt,Ot,Ct,ht,gt);break;case Ql:Ai(mt,Ot,Ct,ht,gt),Gi(ht,gt,0,Ct,1,0);break;case Mh:Vr(mt,Ot,Ct,ht,gt);break;case Oo:Ee(mt,Ot,Ct,ht,gt,1);break;case tc:Ee(mt,Ot,Ct,ht,gt,1),Gi(ht,gt,0,Ct,1,0);break;case Mo:Ee(mt,Ot,Ct,ht,gt,0);break;case No:Ee(mt,Ot,Ct,ht,gt,0),Gi(ht,gt,1,Ct,1,0);break;case Zl:dn(mt,Ot,Ct,ht,gt);break;case ec:dn(mt,Ot,Ct,ht,gt),Ie(ht,gt,Ct,1,0);break;case Nh:Yr(mt,Ot,Ct,ht,gt);break;default:t(0)}Y+=X,ct+=xt}b.Ma+=R}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=C.height)}}b.C=w,t(b.C<=b.i)}function Ur(b){var w;if(0<b.ua)return 0;for(w=0;w<b.Wb;++w){var C=b.Ya[w].G,L=b.Ya[w].H;if(0<C[1][L[1]+0].g||0<C[2][L[2]+0].g||0<C[3][L[3]+0].g)return 0}return 1}function ar(b,w,C,L,j,R){if(b.Z!=0){var q=b.qd,Y=b.rd;for(t(vn[b.Z]!=null);w<C;++w)vn[b.Z](q,Y,L,j,L,j,R),q=L,Y=j,j+=R;b.qd=q,b.rd=Y}}function or(b,w){var C=b.l.ma,L=C.Z==0||C.Z==1?b.l.j:b.C;if(L=b.C<L?L:b.C,t(w<=b.l.o),w>L){var j=b.l.width,R=C.ca,q=C.tb+j*L,Y=b.V,X=b.Ba+b.c*L,Z=b.gc;t(b.ab==1),t(Z[0].hc==3),So(Z[0],L,w,Y,X,R,q),ar(C,L,w,R,q,j)}b.C=b.Ma=w}function lr(b,w,C,L,j,R,q){var Y=b.$/L,X=b.$%L,Z=b.m,ct=b.s,xt=C+b.$,_t=xt;j=C+L*j;var mt=C+L*R,Ot=280+ct.ua,Ct=b.Pb?Y:16777216,ht=0<ct.ua?ct.Wa:null,gt=ct.wc,Tt=xt<mt?Qe(ct,X,Y):null;t(b.C<R),t(mt<=j);var Nt=!1;t:for(;;){for(;Nt||xt<mt;){var Pt=0;if(Y>=Ct){var Ut=xt-C;t((Ct=b).Pb),Ct.wd=Ct.m,Ct.xd=Ut,0<Ct.s.ua&&it(Ct.s.Wa,Ct.s.vb),Ct=Y+Dd}if(X&gt||(Tt=Qe(ct,X,Y)),t(Tt!=null),Tt.Qb&&(w[xt]=Tt.qb,Nt=!0),!Nt)if(U(Z),Tt.jc){Pt=Z,Ut=w;var Dt=xt,Kt=Tt.pd[D(Pt)&di-1];t(Tt.jc),256>Kt.g?(O(Pt,Pt.u+Kt.g),Ut[Dt]=Kt.value,Pt=0):(O(Pt,Pt.u+Kt.g-256),t(256<=Kt.value),Pt=Kt.value),Pt==0&&(Nt=!0)}else Pt=Oi(Tt.G[0],Tt.H[0],Z);if(Z.h)break;if(Nt||256>Pt){if(!Nt)if(Tt.nd)w[xt]=(Tt.qb|Pt<<8)>>>0;else{if(U(Z),Nt=Oi(Tt.G[1],Tt.H[1],Z),U(Z),Ut=Oi(Tt.G[2],Tt.H[2],Z),Dt=Oi(Tt.G[3],Tt.H[3],Z),Z.h)break;w[xt]=(Dt<<24|Nt<<16|Pt<<8|Ut)>>>0}if(Nt=!1,++xt,++X>=L&&(X=0,++Y,q!=null&&Y<=R&&!(Y%16)&&q(b,Y),ht!=null))for(;_t<xt;)Pt=w[_t++],ht.X[(506832829*Pt&4294967295)>>>ht.Mb]=Pt}else if(280>Pt){if(Pt=sr(Pt-256,Z),Ut=Oi(Tt.G[4],Tt.H[4],Z),U(Z),Ut=kr(L,Ut=sr(Ut,Z)),Z.h)break;if(xt-C<Ut||j-xt<Pt)break t;for(Dt=0;Dt<Pt;++Dt)w[xt+Dt]=w[xt+Dt-Ut];for(xt+=Pt,X+=Pt;X>=L;)X-=L,++Y,q!=null&&Y<=R&&!(Y%16)&&q(b,Y);if(t(xt<=j),X&gt&&(Tt=Qe(ct,X,Y)),ht!=null)for(;_t<xt;)Pt=w[_t++],ht.X[(506832829*Pt&4294967295)>>>ht.Mb]=Pt}else{if(!(Pt<Ot))break t;for(Nt=Pt-280,t(ht!=null);_t<xt;)Pt=w[_t++],ht.X[(506832829*Pt&4294967295)>>>ht.Mb]=Pt;Pt=xt,t(!(Nt>>>(Ut=ht).Xa)),w[Pt]=Ut.X[Nt],Nt=!0}Nt||t(Z.h==F(Z))}if(b.Pb&&Z.h&&xt<j)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&it(b.s.vb,b.s.Wa);else{if(Z.h)break t;q!=null&&q(b,Y>R?R:Y),b.a=0,b.$=xt-C}return 1}return b.a=3,0}function Lr(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var w=b.Wa;w!=null&&(w.X=null),b.vb=null,t(b!=null)}function Hi(){var b=new $l;return b==null?null:(b.a=0,b.xb=Ih,Sr("Predictor","VP8LPredictors"),Sr("Predictor","VP8LPredictors_C"),Sr("PredictorAdd","VP8LPredictorsAdd"),Sr("PredictorAdd","VP8LPredictorsAdd_C"),_o=Vt,Hn=Wt,Fi=Bt,Ai=Pe,dn=me,Yr=Pi,Vr=_e,N.VP8LMapColor32b=Cs,N.VP8LMapColor8b=Co,b)}function Tr(b,w,C,L,j){var R=1,q=[b],Y=[w],X=L.m,Z=L.s,ct=null,xt=0;t:for(;;){if(C)for(;R&&z(X,1);){var _t=q,mt=Y,Ot=L,Ct=1,ht=Ot.m,gt=Ot.gc[Ot.ab],Tt=z(ht,2);if(Ot.Oc&1<<Tt)R=0;else{switch(Ot.Oc|=1<<Tt,gt.hc=Tt,gt.Ea=_t[0],gt.nc=mt[0],gt.K=[null],++Ot.ab,t(4>=Ot.ab),Tt){case 0:case 1:gt.b=z(ht,3)+2,Ct=Tr(yt(gt.Ea,gt.b),yt(gt.nc,gt.b),0,Ot,gt.K),gt.K=gt.K[0];break;case 3:var Nt,Pt=z(ht,8)+1,Ut=16<Pt?0:4<Pt?1:2<Pt?2:3;if(_t[0]=yt(gt.Ea,Ut),gt.b=Ut,Nt=Ct=Tr(Pt,1,0,Ot,gt.K)){var Dt,Kt=Pt,zt=gt,ye=1<<(8>>zt.b),Se=p(ye);if(Se==null)Nt=0;else{var be=zt.K[0],pe=zt.w;for(Se[0]=zt.K[0][0],Dt=1;Dt<1*Kt;++Dt)Se[Dt]=bt(be[pe+Dt],Se[Dt-1]);for(;Dt<4*ye;++Dt)Se[Dt]=0;zt.K[0]=null,zt.K[0]=Se,Nt=1}}Ct=Nt;break;case 2:break;default:t(0)}R=Ct}}if(q=q[0],Y=Y[0],R&&z(X,1)&&!(R=1<=(xt=z(X,4))&&11>=xt)){L.a=3;break t}var Oe;if(Oe=R)e:{var Le,le,ei,Ei=L,ii=q,Ii=Y,Ce=xt,qi=C,Ui=Ei.m,li=Ei.s,pi=[null],Li=1,Ji=0,Nr=jd[Ce];i:for(;;){if(qi&&z(Ui,1)){var ci=z(Ui,3)+2,Kr=yt(ii,ci),$n=yt(Ii,ci),Ps=Kr*$n;if(!Tr(Kr,$n,0,Ei,pi))break i;for(pi=pi[0],li.xc=ci,Le=0;Le<Ps;++Le){var bn=pi[Le]>>8&65535;pi[Le]=bn,bn>=Li&&(Li=bn+1)}}if(Ui.h)break i;for(le=0;5>le;++le){var Ye=Fh[le];!le&&0<Ce&&(Ye+=1<<Ce),Ji<Ye&&(Ji=Ye)}var sc=v(Li*Nr,I),Wh=Li,Hh=v(Wh,V);if(Hh==null)var jo=null;else t(65536>=Wh),jo=Hh;var Ia=p(Ji);if(jo==null||Ia==null||sc==null){Ei.a=1;break i}var Do=sc;for(Le=ei=0;Le<Li;++Le){var dr=jo[Le],Os=dr.G,Ms=dr.H,Yh=0,Bo=1,Vh=0;for(le=0;5>le;++le){Ye=Fh[le],Os[le]=Do,Ms[le]=ei,!le&&0<Ce&&(Ye+=1<<Ce);n:{var Ro,ac=Ye,zo=Ei,ja=Ia,r0=Do,n0=ei,oc=0,yn=zo.m,s0=z(yn,1);if(d(ja,0,0,ac),s0){var a0=z(yn,1)+1,o0=z(yn,1),Xh=z(yn,o0==0?1:8);ja[Xh]=1,a0==2&&(ja[Xh=z(yn,8)]=1);var qo=1}else{var Gh=p(19),$h=z(yn,4)+4;if(19<$h){zo.a=3;var Uo=0;break n}for(Ro=0;Ro<$h;++Ro)Gh[Ed[Ro]]=z(yn,3);var lc=void 0,Da=void 0,Kh=zo,l0=Gh,Wo=ac,Jh=ja,cc=0,wn=Kh.m,Zh=8,Qh=v(128,I);r:for(;P(Qh,0,7,l0,19);){if(z(wn,1)){var c0=2+2*z(wn,3);if((lc=2+z(wn,c0))>Wo)break r}else lc=Wo;for(Da=0;Da<Wo&&lc--;){U(wn);var tu=Qh[0+(127&D(wn))];O(wn,wn.u+tu.g);var Ns=tu.value;if(16>Ns)Jh[Da++]=Ns,Ns!=0&&(Zh=Ns);else{var h0=Ns==16,eu=Ns-16,u0=Nd[eu],iu=z(wn,Md[eu])+u0;if(Da+iu>Wo)break r;for(var f0=h0?Zh:0;0<iu--;)Jh[Da++]=f0}}cc=1;break r}cc||(Kh.a=3),qo=cc}(qo=qo&&!yn.h)&&(oc=P(r0,n0,8,ja,ac)),qo&&oc!=0?Uo=oc:(zo.a=3,Uo=0)}if(Uo==0)break i;if(Bo&&Fd[le]==1&&(Bo=Do[ei].g==0),Yh+=Do[ei].g,ei+=Uo,3>=le){var Ba,hc=Ia[0];for(Ba=1;Ba<Ye;++Ba)Ia[Ba]>hc&&(hc=Ia[Ba]);Vh+=hc}}if(dr.nd=Bo,dr.Qb=0,Bo&&(dr.qb=(Os[3][Ms[3]+0].value<<24|Os[1][Ms[1]+0].value<<16|Os[2][Ms[2]+0].value)>>>0,Yh==0&&256>Os[0][Ms[0]+0].value&&(dr.Qb=1,dr.qb+=Os[0][Ms[0]+0].value<<8)),dr.jc=!dr.Qb&&6>Vh,dr.jc){var Ho,Jr=dr;for(Ho=0;Ho<di;++Ho){var xn=Ho,_n=Jr.pd[xn],Yo=Jr.G[0][Jr.H[0]+xn];256<=Yo.value?(_n.g=Yo.g+256,_n.value=Yo.value):(_n.g=0,_n.value=0,xn>>=si(Yo,8,_n),xn>>=si(Jr.G[1][Jr.H[1]+xn],16,_n),xn>>=si(Jr.G[2][Jr.H[2]+xn],0,_n),si(Jr.G[3][Jr.H[3]+xn],24,_n))}}}li.vc=pi,li.Wb=Li,li.Ya=jo,li.yc=sc,Oe=1;break e}Oe=0}if(!(R=Oe)){L.a=3;break t}if(0<xt){if(Z.ua=1<<xt,!st(Z.Wa,xt)){L.a=1,R=0;break t}}else Z.ua=0;var uc=L,ru=q,d0=Y,fc=uc.s,dc=fc.xc;if(uc.c=ru,uc.i=d0,fc.md=yt(ru,dc),fc.wc=dc==0?-1:(1<<dc)-1,C){L.xb=Hd;break t}if((ct=p(q*Y))==null){L.a=1,R=0;break t}R=(R=lr(L,ct,0,q,Y,Y,null))&&!X.h;break t}return R?(j!=null?j[0]=ct:(t(ct==null),t(C)),L.$=0,C||Lr(Z)):Lr(Z),R}function Rn(b,w){var C=b.c*b.i,L=C+w+16*w;return t(b.c<=w),b.V=p(L),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+C+w,1)}function ss(b,w){var C=b.C,L=w-C,j=b.V,R=b.Ba+b.c*C;for(t(w<=b.l.o);0<L;){var q=16<L?16:L,Y=b.l.ma,X=b.l.width,Z=X*q,ct=Y.ca,xt=Y.tb+X*C,_t=b.Ta,mt=b.Ua;Bi(b,q,j,R),$e(_t,mt,ct,xt,Z),ar(Y,C,C+q,ct,xt,X),L-=q,j+=q*b.c,C+=q}t(C==w),b.C=b.Ma=w}function as(){this.ub=this.yd=this.td=this.Rb=0}function os(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ls(){this.Fb=this.Bb=this.Cb=0,this.Zb=p(4),this.Lb=p(4)}function eo(){this.Yb=function(){var b=[];return function w(C,L,j){for(var R=j[L],q=0;q<R&&(C.push(j.length>L+1?[]:0),!(j.length<L+1));q++)w(C[q],L+1,j)}(b,0,[3,11]),b}()}function kl(){this.jb=p(3),this.Wc=o([4,8],eo),this.Xc=o([4,17],eo)}function Ll(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new p(4),this.od=new p(4)}function cs(){this.ld=this.La=this.dd=this.tc=0}function io(){this.Na=this.la=0}function Tl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ca(){this.ad=p(384),this.Za=0,this.Ob=p(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Pl(){this.uc=this.M=this.Nb=0,this.wa=Array(new cs),this.Y=0,this.ya=Array(new ca),this.aa=0,this.l=new hs}function ro(){this.y=p(16),this.f=p(8),this.ea=p(8)}function Ol(){this.cb=this.a=0,this.sc="",this.m=new $,this.Od=new as,this.Kc=new os,this.ed=new Ll,this.Qa=new ls,this.Ic=this.$c=this.Aa=0,this.D=new Pl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=v(8,$),this.ia=0,this.pb=v(4,Tl),this.Pa=new kl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ro),this.Hd=0,this.rb=Array(new io),this.sb=0,this.wa=Array(new cs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ca),this.L=this.aa=0,this.gd=o([4,2],cs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function hs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ml(){var b=new Ol;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Fa||(Fa=ao)),b}function Xe(b,w,C){return b.a==0&&(b.a=w,b.sc=C,b.cb=0),0}function no(b,w,C){return 3<=C&&b[w+0]==157&&b[w+1]==1&&b[w+2]==42}function so(b,w){if(b==null)return 0;if(b.a=0,b.sc="OK",w==null)return Xe(b,2,"null VP8Io passed to VP8GetHeaders()");var C=w.data,L=w.w,j=w.ha;if(4>j)return Xe(b,7,"Truncated header.");var R=C[L+0]|C[L+1]<<8|C[L+2]<<16,q=b.Od;if(q.Rb=!(1&R),q.td=R>>1&7,q.yd=R>>4&1,q.ub=R>>5,3<q.td)return Xe(b,3,"Incorrect keyframe parameters.");if(!q.yd)return Xe(b,4,"Frame not displayable.");L+=3,j-=3;var Y=b.Kc;if(q.Rb){if(7>j)return Xe(b,7,"cannot parse picture header");if(!no(C,L,j))return Xe(b,3,"Bad code word");Y.c=16383&(C[L+4]<<8|C[L+3]),Y.Td=C[L+4]>>6,Y.i=16383&(C[L+6]<<8|C[L+5]),Y.Ud=C[L+6]>>6,L+=7,j-=7,b.za=Y.c+15>>4,b.Ub=Y.i+15>>4,w.width=Y.c,w.height=Y.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,d((R=b.Pa).jb,0,255,R.jb.length),t((R=b.Qa)!=null),R.Cb=0,R.Bb=0,R.Fb=1,d(R.Zb,0,0,R.Zb.length),d(R.Lb,0,0,R.Lb)}if(q.ub>j)return Xe(b,7,"bad partition length");rt(R=b.m,C,L,q.ub),L+=q.ub,j-=q.ub,q.Rb&&(Y.Ld=tt(R),Y.Kd=tt(R)),Y=b.Qa;var X,Z=b.Pa;if(t(R!=null),t(Y!=null),Y.Cb=tt(R),Y.Cb){if(Y.Bb=tt(R),tt(R)){for(Y.Fb=tt(R),X=0;4>X;++X)Y.Zb[X]=tt(R)?dt(R,7):0;for(X=0;4>X;++X)Y.Lb[X]=tt(R)?dt(R,6):0}if(Y.Bb)for(X=0;3>X;++X)Z.jb[X]=tt(R)?at(R,8):255}else Y.Bb=0;if(R.Ka)return Xe(b,3,"cannot parse segment header");if((Y=b.ed).zd=tt(R),Y.Tb=at(R,6),Y.wb=at(R,3),Y.Pc=tt(R),Y.Pc&&tt(R)){for(Z=0;4>Z;++Z)tt(R)&&(Y.vd[Z]=dt(R,6));for(Z=0;4>Z;++Z)tt(R)&&(Y.od[Z]=dt(R,6))}if(b.L=Y.Tb==0?0:Y.zd?1:2,R.Ka)return Xe(b,3,"cannot parse filter header");var ct=j;if(j=X=L,L=X+ct,Y=ct,b.Xb=(1<<at(b.m,2))-1,ct<3*(Z=b.Xb))C=7;else{for(X+=3*Z,Y-=3*Z,ct=0;ct<Z;++ct){var xt=C[j+0]|C[j+1]<<8|C[j+2]<<16;xt>Y&&(xt=Y),rt(b.Jc[+ct],C,X,xt),X+=xt,Y-=xt,j+=3}rt(b.Jc[+Z],C,X,Y),C=X<L?0:5}if(C!=0)return Xe(b,C,"cannot parse partitions");for(C=at(X=b.m,7),j=tt(X)?dt(X,4):0,L=tt(X)?dt(X,4):0,Y=tt(X)?dt(X,4):0,Z=tt(X)?dt(X,4):0,X=tt(X)?dt(X,4):0,ct=b.Qa,xt=0;4>xt;++xt){if(ct.Cb){var _t=ct.Zb[xt];ct.Fb||(_t+=C)}else{if(0<xt){b.pb[xt]=b.pb[0];continue}_t=C}var mt=b.pb[xt];mt.Sc[0]=ic[Ri(_t+j,127)],mt.Sc[1]=rc[Ri(_t+0,127)],mt.Eb[0]=2*ic[Ri(_t+L,127)],mt.Eb[1]=101581*rc[Ri(_t+Y,127)]>>16,8>mt.Eb[1]&&(mt.Eb[1]=8),mt.Qc[0]=ic[Ri(_t+Z,117)],mt.Qc[1]=rc[Ri(_t+X,127)],mt.lc=_t+X}if(!q.Rb)return Xe(b,4,"Not a key frame.");for(tt(R),q=b.Pa,C=0;4>C;++C){for(j=0;8>j;++j)for(L=0;3>L;++L)for(Y=0;11>Y;++Y)Z=Q(R,Ud[C][j][L][Y])?at(R,8):zd[C][j][L][Y],q.Wc[C][j].Yb[L][Y]=Z;for(j=0;17>j;++j)q.Xc[C][j]=q.Wc[C][Wd[j]]}return b.kc=tt(R),b.kc&&(b.Bd=at(R,8)),b.cb=1}function ao(b,w,C,L,j,R,q){var Y=w[j].Yb[C];for(C=0;16>j;++j){if(!Q(b,Y[C+0]))return j;for(;!Q(b,Y[C+1]);)if(Y=w[++j].Yb[0],C=0,j==16)return 16;var X=w[j+1].Yb;if(Q(b,Y[C+2])){var Z=b,ct=0;if(Q(Z,(_t=Y)[(xt=C)+3]))if(Q(Z,_t[xt+6])){for(Y=0,xt=2*(ct=Q(Z,_t[xt+8]))+(_t=Q(Z,_t[xt+9+ct])),ct=0,_t=Bd[xt];_t[Y];++Y)ct+=ct+Q(Z,_t[Y]);ct+=3+(8<<xt)}else Q(Z,_t[xt+7])?(ct=7+2*Q(Z,165),ct+=Q(Z,145)):ct=5+Q(Z,159);else ct=Q(Z,_t[xt+4])?3+Q(Z,_t[xt+5]):2;Y=X[2]}else ct=1,Y=X[1];X=q+Rd[j],0>(Z=b).b&&G(Z);var xt,_t=Z.b,mt=(xt=Z.Ca>>1)-(Z.I>>_t)>>31;--Z.b,Z.Ca+=mt,Z.Ca|=1,Z.I-=(xt+1&mt)<<_t,R[X]=((ct^mt)-mt)*L[(0<j)+0]}return 16}function ha(b){var w=b.rb[b.sb-1];w.la=0,w.Na=0,d(b.zc,0,0,b.zc.length),b.ja=0}function Nl(b,w){if(b==null)return 0;if(w==null)return Xe(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!so(b,w))return 0;if(t(b.cb),w.ac==null||w.ac(w)){w.ob&&(b.L=0);var C=Io[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=w.v-C>>4,b.zb=w.j-C>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=w.o+15+C>>4,b.Hb=w.va+15+C>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var L=b.ed;for(C=0;4>C;++C){var j;if(b.Qa.Cb){var R=b.Qa.Lb[C];b.Qa.Fb||(R+=L.Tb)}else R=L.Tb;for(j=0;1>=j;++j){var q=b.gd[C][j],Y=R;if(L.Pc&&(Y+=L.vd[0],j&&(Y+=L.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var X=Y;0<L.wb&&(X=4<L.wb?X>>2:X>>1)>9-L.wb&&(X=9-L.wb),1>X&&(X=1),q.dd=X,q.tc=2*Y+X,q.ld=40<=Y?2:15<=Y?1:0}else q.tc=0;q.La=j}}}C=0}else Xe(b,6,"Frame setup failed"),C=b.a;if(C=C==0){if(C){b.$c=0,0<b.Aa||(b.Ic=i0);t:{C=b.Ic,L=4*(X=b.za);var Z=32*X,ct=X+1,xt=0<b.L?X*(0<b.Aa?2:1):0,_t=(b.Aa==2?2:1)*X;if((q=L+832+(j=3*(16*C+Io[b.L])/2*Z)+(R=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=q)C=0;else{if(q>b.Vb){if(b.Vb=0,b.Ec=p(q),b.Fc=0,b.Ec==null){C=Xe(b,1,"no memory during frame initialization.");break t}b.Vb=q}q=b.Ec,Y=b.Fc,b.Ac=q,b.Bc=Y,Y+=L,b.Gd=v(Z,ro),b.Hd=0,b.rb=v(ct+1,io),b.sb=1,b.wa=xt?v(xt,cs):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=X),t(!0),b.oc=q,b.pc=Y,Y+=832,b.ya=v(_t,ca),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=X),b.R=16*X,b.B=8*X,X=(Z=Io[b.L])*b.R,Z=Z/2*b.B,b.sa=q,b.ta=Y+X,b.qa=b.sa,b.ra=b.ta+16*C*b.R+Z,b.Ha=b.qa,b.Ia=b.ra+8*C*b.B+Z,b.$c=0,Y+=j,b.mb=R?q:null,b.nb=R?Y:null,t(Y+R<=b.Fc+b.Vb),ha(b),d(b.Ac,b.Bc,0,L),C=1}}if(C){if(w.ka=0,w.y=b.sa,w.O=b.ta,w.f=b.qa,w.N=b.ra,w.ea=b.Ha,w.Vd=b.Ia,w.fa=b.R,w.Rc=b.B,w.F=null,w.J=0,!ko){for(C=-255;255>=C;++C)ai[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)Gr[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)Na[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)Ts[255+C]=0>C?0:255<C?255:C;ko=1}As=Il,Xr=Fl,Pa=lo,ki=El,Vi=co,Ge=oo,ks=ma,Ao=Un,Oa=Gl,Yn=va,Vn=Xl,pn=ms,Xn=ba,Ls=yo,Gn=bo,gn=Or,Ma=Hr,Xi=Vl,fr[0]=Pr,fr[1]=jl,fr[2]=zl,fr[3]=ql,fr[4]=fo,fr[5]=ps,fr[6]=po,fr[7]=da,fr[8]=Wl,fr[9]=Ul,mn[0]=ho,mn[1]=Bl,mn[2]=Wr,mn[3]=fs,mn[4]=vi,mn[5]=Rl,mn[6]=uo,$r[0]=cn,$r[1]=Dl,$r[2]=Hl,$r[3]=pa,$r[4]=qn,$r[5]=Yl,$r[6]=ga,C=1}else C=0}C&&(C=function(mt,Ot){for(mt.M=0;mt.M<mt.Va;++mt.M){var Ct,ht=mt.Jc[mt.M&mt.Xb],gt=mt.m,Tt=mt;for(Ct=0;Ct<Tt.za;++Ct){var Nt=gt,Pt=Tt,Ut=Pt.Ac,Dt=Pt.Bc+4*Ct,Kt=Pt.zc,zt=Pt.ya[Pt.aa+Ct];if(Pt.Qa.Bb?zt.$b=Q(Nt,Pt.Pa.jb[0])?2+Q(Nt,Pt.Pa.jb[2]):Q(Nt,Pt.Pa.jb[1]):zt.$b=0,Pt.kc&&(zt.Ad=Q(Nt,Pt.Bd)),zt.Za=!Q(Nt,145)+0,zt.Za){var ye=zt.Ob,Se=0;for(Pt=0;4>Pt;++Pt){var be,pe=Kt[0+Pt];for(be=0;4>be;++be){pe=qd[Ut[Dt+be]][pe];for(var Oe=Eh[Q(Nt,pe[0])];0<Oe;)Oe=Eh[2*Oe+Q(Nt,pe[Oe])];pe=-Oe,Ut[Dt+be]=pe}s(ye,Se,Ut,Dt,4),Se+=4,Kt[0+Pt]=pe}}else pe=Q(Nt,156)?Q(Nt,128)?1:3:Q(Nt,163)?2:0,zt.Ob[0]=pe,d(Ut,Dt,pe,4),d(Kt,0,pe,4);zt.Dd=Q(Nt,142)?Q(Nt,114)?Q(Nt,183)?1:3:2:0}if(Tt.m.Ka)return Xe(mt,7,"Premature end-of-partition0 encountered.");for(;mt.ja<mt.za;++mt.ja){if(Tt=ht,Nt=(gt=mt).rb[gt.sb-1],Ut=gt.rb[gt.sb+gt.ja],Ct=gt.ya[gt.aa+gt.ja],Dt=gt.kc?Ct.Ad:0)Nt.la=Ut.la=0,Ct.Za||(Nt.Na=Ut.Na=0),Ct.Hc=0,Ct.Gc=0,Ct.ia=0;else{var Le,le;if(Nt=Ut,Ut=Tt,Dt=gt.Pa.Xc,Kt=gt.ya[gt.aa+gt.ja],zt=gt.pb[Kt.$b],Pt=Kt.ad,ye=0,Se=gt.rb[gt.sb-1],pe=be=0,d(Pt,ye,0,384),Kt.Za)var ei=0,Ei=Dt[3];else{Oe=p(16);var ii=Nt.Na+Se.Na;if(ii=Fa(Ut,Dt[1],ii,zt.Eb,0,Oe,0),Nt.Na=Se.Na=(0<ii)+0,1<ii)As(Oe,0,Pt,ye);else{var Ii=Oe[0]+3>>3;for(Oe=0;256>Oe;Oe+=16)Pt[ye+Oe]=Ii}ei=1,Ei=Dt[0]}var Ce=15&Nt.la,qi=15&Se.la;for(Oe=0;4>Oe;++Oe){var Ui=1&qi;for(Ii=le=0;4>Ii;++Ii)Ce=Ce>>1|(Ui=(ii=Fa(Ut,Ei,ii=Ui+(1&Ce),zt.Sc,ei,Pt,ye))>ei)<<7,le=le<<2|(3<ii?3:1<ii?2:Pt[ye+0]!=0),ye+=16;Ce>>=4,qi=qi>>1|Ui<<7,be=(be<<8|le)>>>0}for(Ei=Ce,ei=qi>>4,Le=0;4>Le;Le+=2){for(le=0,Ce=Nt.la>>4+Le,qi=Se.la>>4+Le,Oe=0;2>Oe;++Oe){for(Ui=1&qi,Ii=0;2>Ii;++Ii)ii=Ui+(1&Ce),Ce=Ce>>1|(Ui=0<(ii=Fa(Ut,Dt[2],ii,zt.Qc,0,Pt,ye)))<<3,le=le<<2|(3<ii?3:1<ii?2:Pt[ye+0]!=0),ye+=16;Ce>>=2,qi=qi>>1|Ui<<5}pe|=le<<4*Le,Ei|=Ce<<4<<Le,ei|=(240&qi)<<Le}Nt.la=Ei,Se.la=ei,Kt.Hc=be,Kt.Gc=pe,Kt.ia=43690&pe?0:zt.ia,Dt=!(be|pe)}if(0<gt.L&&(gt.wa[gt.Y+gt.ja]=gt.gd[Ct.$b][Ct.Za],gt.wa[gt.Y+gt.ja].La|=!Dt),Tt.Ka)return Xe(mt,7,"Premature end-of-file encountered.")}if(ha(mt),gt=Ot,Tt=1,Ct=(ht=mt).D,Nt=0<ht.L&&ht.M>=ht.zb&&ht.M<=ht.Va,ht.Aa==0)t:{if(Ct.M=ht.M,Ct.uc=Nt,Ca(ht,Ct),Tt=1,Ct=(le=ht.D).Nb,Nt=(pe=Io[ht.L])*ht.R,Ut=pe/2*ht.B,Oe=16*Ct*ht.R,Ii=8*Ct*ht.B,Dt=ht.sa,Kt=ht.ta-Nt+Oe,zt=ht.qa,Pt=ht.ra-Ut+Ii,ye=ht.Ha,Se=ht.Ia-Ut+Ii,qi=(Ce=le.M)==0,be=Ce>=ht.Va-1,ht.Aa==2&&Ca(ht,le),le.uc)for(Ui=(ii=ht).D.M,t(ii.D.uc),le=ii.yb;le<ii.Hb;++le){ei=le,Ei=Ui;var li=(pi=(Ye=ii).D).Nb;Le=Ye.R;var pi=pi.wa[pi.Y+ei],Li=Ye.sa,Ji=Ye.ta+16*li*Le+16*ei,Nr=pi.dd,ci=pi.tc;if(ci!=0)if(t(3<=ci),Ye.L==1)0<ei&&gn(Li,Ji,Le,ci+4),pi.La&&Xi(Li,Ji,Le,ci),0<Ei&&Gn(Li,Ji,Le,ci+4),pi.La&&Ma(Li,Ji,Le,ci);else{var Kr=Ye.B,$n=Ye.qa,Ps=Ye.ra+8*li*Kr+8*ei,bn=Ye.Ha,Ye=Ye.Ia+8*li*Kr+8*ei;li=pi.ld,0<ei&&(Ao(Li,Ji,Le,ci+4,Nr,li),Yn($n,Ps,bn,Ye,Kr,ci+4,Nr,li)),pi.La&&(pn(Li,Ji,Le,ci,Nr,li),Ls($n,Ps,bn,Ye,Kr,ci,Nr,li)),0<Ei&&(ks(Li,Ji,Le,ci+4,Nr,li),Oa($n,Ps,bn,Ye,Kr,ci+4,Nr,li)),pi.La&&(Vn(Li,Ji,Le,ci,Nr,li),Xn($n,Ps,bn,Ye,Kr,ci,Nr,li))}}if(ht.ia&&alert("todo:DitherRow"),gt.put!=null){if(le=16*Ce,Ce=16*(Ce+1),qi?(gt.y=ht.sa,gt.O=ht.ta+Oe,gt.f=ht.qa,gt.N=ht.ra+Ii,gt.ea=ht.Ha,gt.W=ht.Ia+Ii):(le-=pe,gt.y=Dt,gt.O=Kt,gt.f=zt,gt.N=Pt,gt.ea=ye,gt.W=Se),be||(Ce-=pe),Ce>gt.o&&(Ce=gt.o),gt.F=null,gt.J=null,ht.Fa!=null&&0<ht.Fa.length&&le<Ce&&(gt.J=_a(ht,gt,le,Ce-le),gt.F=ht.mb,gt.F==null&&gt.F.length==0)){Tt=Xe(ht,3,"Could not decode alpha data.");break t}le<gt.j&&(pe=gt.j-le,le=gt.j,t(!(1&pe)),gt.O+=ht.R*pe,gt.N+=ht.B*(pe>>1),gt.W+=ht.B*(pe>>1),gt.F!=null&&(gt.J+=gt.width*pe)),le<Ce&&(gt.O+=gt.v,gt.N+=gt.v>>1,gt.W+=gt.v>>1,gt.F!=null&&(gt.J+=gt.v),gt.ka=le-gt.j,gt.U=gt.va-gt.v,gt.T=Ce-le,Tt=gt.put(gt))}Ct+1!=ht.Ic||be||(s(ht.sa,ht.ta-Nt,Dt,Kt+16*ht.R,Nt),s(ht.qa,ht.ra-Ut,zt,Pt+8*ht.B,Ut),s(ht.Ha,ht.Ia-Ut,ye,Se+8*ht.B,Ut))}if(!Tt)return Xe(mt,6,"Output aborted.")}return 1}(b,w)),w.bc!=null&&w.bc(w),C&=1}return C?(b.cb=0,C):0}function cr(b,w,C,L,j){j=b[w+C+32*L]+(j>>3),b[w+C+32*L]=-256&j?0>j?0:255:j}function us(b,w,C,L,j,R){cr(b,w,0,C,L+j),cr(b,w,1,C,L+R),cr(b,w,2,C,L-R),cr(b,w,3,C,L-j)}function Mi(b){return(20091*b>>16)+b}function ua(b,w,C,L){var j,R=0,q=p(16);for(j=0;4>j;++j){var Y=b[w+0]+b[w+8],X=b[w+0]-b[w+8],Z=(35468*b[w+4]>>16)-Mi(b[w+12]),ct=Mi(b[w+4])+(35468*b[w+12]>>16);q[R+0]=Y+ct,q[R+1]=X+Z,q[R+2]=X-Z,q[R+3]=Y-ct,R+=4,w++}for(j=R=0;4>j;++j)Y=(b=q[R+0]+4)+q[R+8],X=b-q[R+8],Z=(35468*q[R+4]>>16)-Mi(q[R+12]),cr(C,L,0,0,Y+(ct=Mi(q[R+4])+(35468*q[R+12]>>16))),cr(C,L,1,0,X+Z),cr(C,L,2,0,X-Z),cr(C,L,3,0,Y-ct),R++,L+=32}function oo(b,w,C,L){var j=b[w+0]+4,R=35468*b[w+4]>>16,q=Mi(b[w+4]),Y=35468*b[w+1]>>16;us(C,L,0,j+q,b=Mi(b[w+1]),Y),us(C,L,1,j+R,b,Y),us(C,L,2,j-R,b,Y),us(C,L,3,j-q,b,Y)}function Fl(b,w,C,L,j){ua(b,w,C,L),j&&ua(b,w+16,C,L+4)}function lo(b,w,C,L){Xr(b,w+0,C,L,1),Xr(b,w+32,C,L+128,1)}function El(b,w,C,L){var j;for(b=b[w+0]+4,j=0;4>j;++j)for(w=0;4>w;++w)cr(C,L,w,j,b)}function co(b,w,C,L){b[w+0]&&ki(b,w+0,C,L),b[w+16]&&ki(b,w+16,C,L+4),b[w+32]&&ki(b,w+32,C,L+128),b[w+48]&&ki(b,w+48,C,L+128+4)}function Il(b,w,C,L){var j,R=p(16);for(j=0;4>j;++j){var q=b[w+0+j]+b[w+12+j],Y=b[w+4+j]+b[w+8+j],X=b[w+4+j]-b[w+8+j],Z=b[w+0+j]-b[w+12+j];R[0+j]=q+Y,R[8+j]=q-Y,R[4+j]=Z+X,R[12+j]=Z-X}for(j=0;4>j;++j)q=(b=R[0+4*j]+3)+R[3+4*j],Y=R[1+4*j]+R[2+4*j],X=R[1+4*j]-R[2+4*j],Z=b-R[3+4*j],C[L+0]=q+Y>>3,C[L+16]=Z+X>>3,C[L+32]=q-Y>>3,C[L+48]=Z-X>>3,L+=64}function fa(b,w,C){var L,j=w-32,R=zi,q=255-b[j-1];for(L=0;L<C;++L){var Y,X=R,Z=q+b[w-1];for(Y=0;Y<C;++Y)b[w+Y]=X[Z+b[j+Y]];w+=32}}function jl(b,w){fa(b,w,4)}function Dl(b,w){fa(b,w,8)}function Bl(b,w){fa(b,w,16)}function Wr(b,w){var C;for(C=0;16>C;++C)s(b,w+32*C,b,w-32,16)}function fs(b,w){var C;for(C=16;0<C;--C)d(b,w,b[w-1],16),w+=32}function ds(b,w,C){var L;for(L=0;16>L;++L)d(w,C+32*L,b,16)}function ho(b,w){var C,L=16;for(C=0;16>C;++C)L+=b[w-1+32*C]+b[w+C-32];ds(L>>5,b,w)}function vi(b,w){var C,L=8;for(C=0;16>C;++C)L+=b[w-1+32*C];ds(L>>4,b,w)}function Rl(b,w){var C,L=8;for(C=0;16>C;++C)L+=b[w+C-32];ds(L>>4,b,w)}function uo(b,w){ds(128,b,w)}function ee(b,w,C){return b+2*w+C+2>>2}function zl(b,w){var C,L=w-32;for(L=new Uint8Array([ee(b[L-1],b[L+0],b[L+1]),ee(b[L+0],b[L+1],b[L+2]),ee(b[L+1],b[L+2],b[L+3]),ee(b[L+2],b[L+3],b[L+4])]),C=0;4>C;++C)s(b,w+32*C,L,0,L.length)}function ql(b,w){var C=b[w-1],L=b[w-1+32],j=b[w-1+64],R=b[w-1+96];ut(b,w+0,16843009*ee(b[w-1-32],C,L)),ut(b,w+32,16843009*ee(C,L,j)),ut(b,w+64,16843009*ee(L,j,R)),ut(b,w+96,16843009*ee(j,R,R))}function Pr(b,w){var C,L=4;for(C=0;4>C;++C)L+=b[w+C-32]+b[w-1+32*C];for(L>>=3,C=0;4>C;++C)d(b,w+32*C,L,4)}function fo(b,w){var C=b[w-1+0],L=b[w-1+32],j=b[w-1+64],R=b[w-1-32],q=b[w+0-32],Y=b[w+1-32],X=b[w+2-32],Z=b[w+3-32];b[w+0+96]=ee(L,j,b[w-1+96]),b[w+1+96]=b[w+0+64]=ee(C,L,j),b[w+2+96]=b[w+1+64]=b[w+0+32]=ee(R,C,L),b[w+3+96]=b[w+2+64]=b[w+1+32]=b[w+0+0]=ee(q,R,C),b[w+3+64]=b[w+2+32]=b[w+1+0]=ee(Y,q,R),b[w+3+32]=b[w+2+0]=ee(X,Y,q),b[w+3+0]=ee(Z,X,Y)}function po(b,w){var C=b[w+1-32],L=b[w+2-32],j=b[w+3-32],R=b[w+4-32],q=b[w+5-32],Y=b[w+6-32],X=b[w+7-32];b[w+0+0]=ee(b[w+0-32],C,L),b[w+1+0]=b[w+0+32]=ee(C,L,j),b[w+2+0]=b[w+1+32]=b[w+0+64]=ee(L,j,R),b[w+3+0]=b[w+2+32]=b[w+1+64]=b[w+0+96]=ee(j,R,q),b[w+3+32]=b[w+2+64]=b[w+1+96]=ee(R,q,Y),b[w+3+64]=b[w+2+96]=ee(q,Y,X),b[w+3+96]=ee(Y,X,X)}function ps(b,w){var C=b[w-1+0],L=b[w-1+32],j=b[w-1+64],R=b[w-1-32],q=b[w+0-32],Y=b[w+1-32],X=b[w+2-32],Z=b[w+3-32];b[w+0+0]=b[w+1+64]=R+q+1>>1,b[w+1+0]=b[w+2+64]=q+Y+1>>1,b[w+2+0]=b[w+3+64]=Y+X+1>>1,b[w+3+0]=X+Z+1>>1,b[w+0+96]=ee(j,L,C),b[w+0+64]=ee(L,C,R),b[w+0+32]=b[w+1+96]=ee(C,R,q),b[w+1+32]=b[w+2+96]=ee(R,q,Y),b[w+2+32]=b[w+3+96]=ee(q,Y,X),b[w+3+32]=ee(Y,X,Z)}function da(b,w){var C=b[w+0-32],L=b[w+1-32],j=b[w+2-32],R=b[w+3-32],q=b[w+4-32],Y=b[w+5-32],X=b[w+6-32],Z=b[w+7-32];b[w+0+0]=C+L+1>>1,b[w+1+0]=b[w+0+64]=L+j+1>>1,b[w+2+0]=b[w+1+64]=j+R+1>>1,b[w+3+0]=b[w+2+64]=R+q+1>>1,b[w+0+32]=ee(C,L,j),b[w+1+32]=b[w+0+96]=ee(L,j,R),b[w+2+32]=b[w+1+96]=ee(j,R,q),b[w+3+32]=b[w+2+96]=ee(R,q,Y),b[w+3+64]=ee(q,Y,X),b[w+3+96]=ee(Y,X,Z)}function Ul(b,w){var C=b[w-1+0],L=b[w-1+32],j=b[w-1+64],R=b[w-1+96];b[w+0+0]=C+L+1>>1,b[w+2+0]=b[w+0+32]=L+j+1>>1,b[w+2+32]=b[w+0+64]=j+R+1>>1,b[w+1+0]=ee(C,L,j),b[w+3+0]=b[w+1+32]=ee(L,j,R),b[w+3+32]=b[w+1+64]=ee(j,R,R),b[w+3+64]=b[w+2+64]=b[w+0+96]=b[w+1+96]=b[w+2+96]=b[w+3+96]=R}function Wl(b,w){var C=b[w-1+0],L=b[w-1+32],j=b[w-1+64],R=b[w-1+96],q=b[w-1-32],Y=b[w+0-32],X=b[w+1-32],Z=b[w+2-32];b[w+0+0]=b[w+2+32]=C+q+1>>1,b[w+0+32]=b[w+2+64]=L+C+1>>1,b[w+0+64]=b[w+2+96]=j+L+1>>1,b[w+0+96]=R+j+1>>1,b[w+3+0]=ee(Y,X,Z),b[w+2+0]=ee(q,Y,X),b[w+1+0]=b[w+3+32]=ee(C,q,Y),b[w+1+32]=b[w+3+64]=ee(L,C,q),b[w+1+64]=b[w+3+96]=ee(j,L,C),b[w+1+96]=ee(R,j,L)}function Hl(b,w){var C;for(C=0;8>C;++C)s(b,w+32*C,b,w-32,8)}function pa(b,w){var C;for(C=0;8>C;++C)d(b,w,b[w-1],8),w+=32}function zn(b,w,C){var L;for(L=0;8>L;++L)d(w,C+32*L,b,8)}function cn(b,w){var C,L=8;for(C=0;8>C;++C)L+=b[w+C-32]+b[w-1+32*C];zn(L>>4,b,w)}function Yl(b,w){var C,L=4;for(C=0;8>C;++C)L+=b[w+C-32];zn(L>>3,b,w)}function qn(b,w){var C,L=4;for(C=0;8>C;++C)L+=b[w-1+32*C];zn(L>>3,b,w)}function ga(b,w){zn(128,b,w)}function gs(b,w,C){var L=b[w-C],j=b[w+0],R=3*(j-L)+Jl[1020+b[w-2*C]-b[w+C]],q=Lo[112+(R+4>>3)];b[w-C]=zi[255+L+Lo[112+(R+3>>3)]],b[w+0]=zi[255+j-q]}function go(b,w,C,L){var j=b[w+0],R=b[w+C];return $i[255+b[w-2*C]-b[w-C]]>L||$i[255+R-j]>L}function mo(b,w,C,L){return 4*$i[255+b[w-C]-b[w+0]]+$i[255+b[w-2*C]-b[w+C]]<=L}function vo(b,w,C,L,j){var R=b[w-3*C],q=b[w-2*C],Y=b[w-C],X=b[w+0],Z=b[w+C],ct=b[w+2*C],xt=b[w+3*C];return 4*$i[255+Y-X]+$i[255+q-Z]>L?0:$i[255+b[w-4*C]-R]<=j&&$i[255+R-q]<=j&&$i[255+q-Y]<=j&&$i[255+xt-ct]<=j&&$i[255+ct-Z]<=j&&$i[255+Z-X]<=j}function bo(b,w,C,L){var j=2*L+1;for(L=0;16>L;++L)mo(b,w+L,C,j)&&gs(b,w+L,C)}function Or(b,w,C,L){var j=2*L+1;for(L=0;16>L;++L)mo(b,w+L*C,1,j)&&gs(b,w+L*C,1)}function Hr(b,w,C,L){var j;for(j=3;0<j;--j)bo(b,w+=4*C,C,L)}function Vl(b,w,C,L){var j;for(j=3;0<j;--j)Or(b,w+=4,C,L)}function hn(b,w,C,L,j,R,q,Y){for(R=2*R+1;0<j--;){if(vo(b,w,C,R,q))if(go(b,w,C,Y))gs(b,w,C);else{var X=b,Z=w,ct=C,xt=X[Z-2*ct],_t=X[Z-ct],mt=X[Z+0],Ot=X[Z+ct],Ct=X[Z+2*ct],ht=27*(Tt=Jl[1020+3*(mt-_t)+Jl[1020+xt-Ot]])+63>>7,gt=18*Tt+63>>7,Tt=9*Tt+63>>7;X[Z-3*ct]=zi[255+X[Z-3*ct]+Tt],X[Z-2*ct]=zi[255+xt+gt],X[Z-ct]=zi[255+_t+ht],X[Z+0]=zi[255+mt-ht],X[Z+ct]=zi[255+Ot-gt],X[Z+2*ct]=zi[255+Ct-Tt]}w+=L}}function hr(b,w,C,L,j,R,q,Y){for(R=2*R+1;0<j--;){if(vo(b,w,C,R,q))if(go(b,w,C,Y))gs(b,w,C);else{var X=b,Z=w,ct=C,xt=X[Z-ct],_t=X[Z+0],mt=X[Z+ct],Ot=Lo[112+((Ct=3*(_t-xt))+4>>3)],Ct=Lo[112+(Ct+3>>3)],ht=Ot+1>>1;X[Z-2*ct]=zi[255+X[Z-2*ct]+ht],X[Z-ct]=zi[255+xt+Ct],X[Z+0]=zi[255+_t-Ot],X[Z+ct]=zi[255+mt-ht]}w+=L}}function ma(b,w,C,L,j,R){hn(b,w,C,1,16,L,j,R)}function Un(b,w,C,L,j,R){hn(b,w,1,C,16,L,j,R)}function Xl(b,w,C,L,j,R){var q;for(q=3;0<q;--q)hr(b,w+=4*C,C,1,16,L,j,R)}function ms(b,w,C,L,j,R){var q;for(q=3;0<q;--q)hr(b,w+=4,1,C,16,L,j,R)}function Gl(b,w,C,L,j,R,q,Y){hn(b,w,j,1,8,R,q,Y),hn(C,L,j,1,8,R,q,Y)}function va(b,w,C,L,j,R,q,Y){hn(b,w,1,j,8,R,q,Y),hn(C,L,1,j,8,R,q,Y)}function ba(b,w,C,L,j,R,q,Y){hr(b,w+4*j,j,1,8,R,q,Y),hr(C,L+4*j,j,1,8,R,q,Y)}function yo(b,w,C,L,j,R,q,Y){hr(b,w+4,1,j,8,R,q,Y),hr(C,L+4,1,j,8,R,q,Y)}function vs(){this.ba=new nr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new We,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ya(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function wo(){this.ua=0,this.Wa=new H,this.vb=new H,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new I}function $l(){this.xb=this.a=0,this.l=new hs,this.ca=new nr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new wo,this.ab=0,this.gc=v(4,wa),this.Oc=0}function bs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new hs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Wn(b,w,C,L,j,R,q){for(b=b==null?0:b[w+0],w=0;w<q;++w)j[R+w]=b+C[L+w]&255,b=j[R+w]}function xa(b,w,C,L,j,R,q){var Y;if(b==null)Wn(null,null,C,L,j,R,q);else for(Y=0;Y<q;++Y)j[R+Y]=b[w+Y]+C[L+Y]&255}function un(b,w,C,L,j,R,q){if(b==null)Wn(null,null,C,L,j,R,q);else{var Y,X=b[w+0],Z=X,ct=X;for(Y=0;Y<q;++Y)Z=ct+(X=b[w+Y])-Z,ct=C[L+Y]+(-256&Z?0>Z?0:255:Z)&255,Z=X,j[R+Y]=ct}}function _a(b,w,C,L){var j=w.width,R=w.o;if(t(b!=null&&w!=null),0>C||0>=L||C+L>R)return null;if(!b.Cc){if(b.ga==null){var q;if(b.ga=new bs,(q=b.ga==null)||(q=w.width*w.o,t(b.Gb.length==0),b.Gb=p(q),b.Uc=0,b.Gb==null?q=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,q=1),q=!q),!q){q=b.ga;var Y=b.Fa,X=b.P,Z=b.qc,ct=b.mb,xt=b.nb,_t=X+1,mt=Z-1,Ot=q.l;if(t(Y!=null&&ct!=null&&w!=null),vn[0]=null,vn[1]=Wn,vn[2]=xa,vn[3]=un,q.ca=ct,q.tb=xt,q.c=w.width,q.i=w.height,t(0<q.c&&0<q.i),1>=Z)w=0;else if(q.$a=Y[X+0]>>0&3,q.Z=Y[X+0]>>2&3,q.Lc=Y[X+0]>>4&3,X=Y[X+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||X)w=0;else if(Ot.put=Cr,Ot.ac=fi,Ot.bc=Ar,Ot.ma=q,Ot.width=w.width,Ot.height=w.height,Ot.Da=w.Da,Ot.v=w.v,Ot.va=w.va,Ot.j=w.j,Ot.o=w.o,q.$a)t:{t(q.$a==1),w=Hi();e:for(;;){if(w==null){w=0;break t}if(t(q!=null),q.mc=w,w.c=q.c,w.i=q.i,w.l=q.l,w.l.ma=q,w.l.width=q.c,w.l.height=q.i,w.a=0,nt(w.m,Y,_t,mt),!Tr(q.c,q.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Ur(w.s)?(q.ic=1,Y=w.c*w.i,w.Ta=null,w.Ua=0,w.V=p(Y),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(q.ic=0,w=Rn(w,q.c)),!w))break e;w=1;break t}q.mc=null,w=0}else w=mt>=q.c*q.i;q=!w}if(q)return null;b.ga.Lc!=1?b.Ga=0:L=R-C}t(b.ga!=null),t(C+L<=R);t:{if(w=(Y=b.ga).c,R=Y.l.o,Y.$a==0){if(_t=b.rc,mt=b.Vc,Ot=b.Fa,X=b.P+1+C*w,Z=b.mb,ct=b.nb+C*w,t(X<=b.P+b.qc),Y.Z!=0)for(t(vn[Y.Z]!=null),q=0;q<L;++q)vn[Y.Z](_t,mt,Ot,X,Z,ct,w),_t=Z,mt=ct,ct+=w,X+=w;else for(q=0;q<L;++q)s(Z,ct,Ot,X,w),_t=Z,mt=ct,ct+=w,X+=w;b.rc=_t,b.Vc=mt}else{if(t(Y.mc!=null),w=C+L,t((q=Y.mc)!=null),t(w<=q.i),q.C>=w)w=1;else if(Y.ic||wt(),Y.ic){Y=q.V,_t=q.Ba,mt=q.c;var Ct=q.i,ht=(Ot=1,X=q.$/mt,Z=q.$%mt,ct=q.m,xt=q.s,q.$),gt=mt*Ct,Tt=mt*w,Nt=xt.wc,Pt=ht<Tt?Qe(xt,Z,X):null;t(ht<=gt),t(w<=Ct),t(Ur(xt));e:for(;;){for(;!ct.h&&ht<Tt;){if(Z&Nt||(Pt=Qe(xt,Z,X)),t(Pt!=null),U(ct),256>(Ct=Oi(Pt.G[0],Pt.H[0],ct)))Y[_t+ht]=Ct,++ht,++Z>=mt&&(Z=0,++X<=w&&!(X%16)&&or(q,X));else{if(!(280>Ct)){Ot=0;break e}Ct=sr(Ct-256,ct);var Ut,Dt=Oi(Pt.G[4],Pt.H[4],ct);if(U(ct),!(ht>=(Dt=kr(mt,Dt=sr(Dt,ct)))&&gt-ht>=Ct)){Ot=0;break e}for(Ut=0;Ut<Ct;++Ut)Y[_t+ht+Ut]=Y[_t+ht+Ut-Dt];for(ht+=Ct,Z+=Ct;Z>=mt;)Z-=mt,++X<=w&&!(X%16)&&or(q,X);ht<Tt&&Z&Nt&&(Pt=Qe(xt,Z,X))}t(ct.h==F(ct))}or(q,X>w?w:X);break e}!Ot||ct.h&&ht<gt?(Ot=0,q.a=ct.h?5:3):q.$=ht,w=Ot}else w=lr(q,q.V,q.Ba,q.c,q.i,w,ss);if(!w){L=0;break t}}C+L>=R&&(b.Cc=1),L=1}if(!L)return null;if(b.Cc&&((L=b.ga)!=null&&(L.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+C*j}function _(b,w,C,L,j,R){for(;0<j--;){var q,Y=b,X=w+(C?1:0),Z=b,ct=w+(C?0:3);for(q=0;q<L;++q){var xt=Z[ct+4*q];xt!=255&&(xt*=32897,Y[X+4*q+0]=Y[X+4*q+0]*xt>>23,Y[X+4*q+1]=Y[X+4*q+1]*xt>>23,Y[X+4*q+2]=Y[X+4*q+2]*xt>>23)}w+=R}}function B(b,w,C,L,j){for(;0<L--;){var R;for(R=0;R<C;++R){var q=b[w+2*R+0],Y=15&(Z=b[w+2*R+1]),X=4369*Y,Z=(240&Z|Z>>4)*X>>16;b[w+2*R+0]=(240&q|q>>4)*X>>16&240|(15&q|q<<4)*X>>16>>4&15,b[w+2*R+1]=240&Z|Y}w+=j}}function et(b,w,C,L,j,R,q,Y){var X,Z,ct=255;for(Z=0;Z<j;++Z){for(X=0;X<L;++X){var xt=b[w+X];R[q+4*X]=xt,ct&=xt}w+=C,q+=Y}return ct!=255}function lt(b,w,C,L,j){var R;for(R=0;R<j;++R)C[L+R]=b[w+R]>>8}function wt(){Gi=_,Ie=B,je=et,$e=lt}function kt(b,w,C){N[b]=function(L,j,R,q,Y,X,Z,ct,xt,_t,mt,Ot,Ct,ht,gt,Tt,Nt){var Pt,Ut=Nt-1>>1,Dt=Y[X+0]|Z[ct+0]<<16,Kt=xt[_t+0]|mt[Ot+0]<<16;t(L!=null);var zt=3*Dt+Kt+131074>>2;for(w(L[j+0],255&zt,zt>>16,Ct,ht),R!=null&&(zt=3*Kt+Dt+131074>>2,w(R[q+0],255&zt,zt>>16,gt,Tt)),Pt=1;Pt<=Ut;++Pt){var ye=Y[X+Pt]|Z[ct+Pt]<<16,Se=xt[_t+Pt]|mt[Ot+Pt]<<16,be=Dt+ye+Kt+Se+524296,pe=be+2*(ye+Kt)>>3;zt=pe+Dt>>1,Dt=(be=be+2*(Dt+Se)>>3)+ye>>1,w(L[j+2*Pt-1],255&zt,zt>>16,Ct,ht+(2*Pt-1)*C),w(L[j+2*Pt-0],255&Dt,Dt>>16,Ct,ht+(2*Pt-0)*C),R!=null&&(zt=be+Kt>>1,Dt=pe+Se>>1,w(R[q+2*Pt-1],255&zt,zt>>16,gt,Tt+(2*Pt-1)*C),w(R[q+2*Pt+0],255&Dt,Dt>>16,gt,Tt+(2*Pt+0)*C)),Dt=ye,Kt=Se}1&Nt||(zt=3*Dt+Kt+131074>>2,w(L[j+Nt-1],255&zt,zt>>16,Ct,ht+(Nt-1)*C),R!=null&&(zt=3*Kt+Dt+131074>>2,w(R[q+Nt-1],255&zt,zt>>16,gt,Tt+(Nt-1)*C)))}}function Ft(){Ki[To]=Yd,Ki[Po]=jh,Ki[Mh]=Vd,Ki[Oo]=Dh,Ki[Mo]=Bh,Ki[Zl]=Rh,Ki[Nh]=Xd,Ki[Ql]=jh,Ki[tc]=Dh,Ki[No]=Bh,Ki[ec]=Rh}function qt(b){return b&-16384?0>b?0:255:b>>Gd}function Gt(b,w){return qt((19077*b>>8)+(26149*w>>8)-14234)}function ae(b,w,C){return qt((19077*b>>8)-(6419*w>>8)-(13320*C>>8)+8708)}function ne(b,w){return qt((19077*b>>8)+(33050*w>>8)-17685)}function ve(b,w,C,L,j){L[j+0]=Gt(b,C),L[j+1]=ae(b,w,C),L[j+2]=ne(b,w)}function Re(b,w,C,L,j){L[j+0]=ne(b,w),L[j+1]=ae(b,w,C),L[j+2]=Gt(b,C)}function He(b,w,C,L,j){var R=ae(b,w,C);w=R<<3&224|ne(b,w)>>3,L[j+0]=248&Gt(b,C)|R>>5,L[j+1]=w}function ti(b,w,C,L,j){var R=240&ne(b,w)|15;L[j+0]=240&Gt(b,C)|ae(b,w,C)>>4,L[j+1]=R}function bi(b,w,C,L,j){L[j+0]=255,ve(b,w,C,L,j+1)}function oi(b,w,C,L,j){Re(b,w,C,L,j),L[j+3]=255}function ur(b,w,C,L,j){ve(b,w,C,L,j),L[j+3]=255}function Ri(b,w){return 0>b?0:b>w?w:b}function Mr(b,w,C){N[b]=function(L,j,R,q,Y,X,Z,ct,xt){for(var _t=ct+(-2&xt)*C;ct!=_t;)w(L[j+0],R[q+0],Y[X+0],Z,ct),w(L[j+1],R[q+0],Y[X+0],Z,ct+C),j+=2,++q,++X,ct+=2*C;1&xt&&w(L[j+0],R[q+0],Y[X+0],Z,ct)}}function xo(b,w,C){return C==0?b==0?w==0?6:5:w==0?4:0:C}function Sa(b,w,C,L,j){switch(b>>>30){case 3:Xr(w,C,L,j,0);break;case 2:Ge(w,C,L,j);break;case 1:ki(w,C,L,j)}}function Ca(b,w){var C,L,j=w.M,R=w.Nb,q=b.oc,Y=b.pc+40,X=b.oc,Z=b.pc+584,ct=b.oc,xt=b.pc+600;for(C=0;16>C;++C)q[Y+32*C-1]=129;for(C=0;8>C;++C)X[Z+32*C-1]=129,ct[xt+32*C-1]=129;for(0<j?q[Y-1-32]=X[Z-1-32]=ct[xt-1-32]=129:(d(q,Y-32-1,127,21),d(X,Z-32-1,127,9),d(ct,xt-32-1,127,9)),L=0;L<b.za;++L){var _t=w.ya[w.aa+L];if(0<L){for(C=-1;16>C;++C)s(q,Y+32*C-4,q,Y+32*C+12,4);for(C=-1;8>C;++C)s(X,Z+32*C-4,X,Z+32*C+4,4),s(ct,xt+32*C-4,ct,xt+32*C+4,4)}var mt=b.Gd,Ot=b.Hd+L,Ct=_t.ad,ht=_t.Hc;if(0<j&&(s(q,Y-32,mt[Ot].y,0,16),s(X,Z-32,mt[Ot].f,0,8),s(ct,xt-32,mt[Ot].ea,0,8)),_t.Za){var gt=q,Tt=Y-32+16;for(0<j&&(L>=b.za-1?d(gt,Tt,mt[Ot].y[15],4):s(gt,Tt,mt[Ot+1].y,0,4)),C=0;4>C;C++)gt[Tt+128+C]=gt[Tt+256+C]=gt[Tt+384+C]=gt[Tt+0+C];for(C=0;16>C;++C,ht<<=2)gt=q,Tt=Y+qh[C],fr[_t.Ob[C]](gt,Tt),Sa(ht,Ct,16*+C,gt,Tt)}else if(gt=xo(L,j,_t.Ob[0]),mn[gt](q,Y),ht!=0)for(C=0;16>C;++C,ht<<=2)Sa(ht,Ct,16*+C,q,Y+qh[C]);for(C=_t.Gc,gt=xo(L,j,_t.Dd),$r[gt](X,Z),$r[gt](ct,xt),ht=Ct,gt=X,Tt=Z,255&(_t=C>>0)&&(170&_t?Pa(ht,256,gt,Tt):Vi(ht,256,gt,Tt)),_t=ct,ht=xt,255&(C>>=8)&&(170&C?Pa(Ct,320,_t,ht):Vi(Ct,320,_t,ht)),j<b.Ub-1&&(s(mt[Ot].y,0,q,Y+480,16),s(mt[Ot].f,0,X,Z+224,8),s(mt[Ot].ea,0,ct,xt+224,8)),C=8*R*b.B,mt=b.sa,Ot=b.ta+16*L+16*R*b.R,Ct=b.qa,_t=b.ra+8*L+C,ht=b.Ha,gt=b.Ia+8*L+C,C=0;16>C;++C)s(mt,Ot+C*b.R,q,Y+32*C,16);for(C=0;8>C;++C)s(Ct,_t+C*b.B,X,Z+32*C,8),s(ht,gt+C*b.B,ct,xt+32*C,8)}}function ys(b,w,C,L,j,R,q,Y,X){var Z=[0],ct=[0],xt=0,_t=X!=null?X.kd:0,mt=X??new ya;if(b==null||12>C)return 7;mt.data=b,mt.w=w,mt.ha=C,w=[w],C=[C],mt.gb=[mt.gb];t:{var Ot=w,Ct=C,ht=mt.gb;if(t(b!=null),t(Ct!=null),t(ht!=null),ht[0]=0,12<=Ct[0]&&!i(b,Ot[0],"RIFF")){if(i(b,Ot[0]+8,"WEBP")){ht=3;break t}var gt=ot(b,Ot[0]+4);if(12>gt||4294967286<gt){ht=3;break t}if(_t&&gt>Ct[0]-8){ht=7;break t}ht[0]=gt,Ot[0]+=12,Ct[0]-=12}ht=0}if(ht!=0)return ht;for(gt=0<mt.gb[0],C=C[0];;){t:{var Tt=b;Ct=w,ht=C;var Nt=Z,Pt=ct,Ut=Ot=[0];if((zt=xt=[xt])[0]=0,8>ht[0])ht=7;else{if(!i(Tt,Ct[0],"VP8X")){if(ot(Tt,Ct[0]+4)!=10){ht=3;break t}if(18>ht[0]){ht=7;break t}var Dt=ot(Tt,Ct[0]+8),Kt=1+St(Tt,Ct[0]+12);if(2147483648<=Kt*(Tt=1+St(Tt,Ct[0]+15))){ht=3;break t}Ut!=null&&(Ut[0]=Dt),Nt!=null&&(Nt[0]=Kt),Pt!=null&&(Pt[0]=Tt),Ct[0]+=18,ht[0]-=18,zt[0]=1}ht=0}}if(xt=xt[0],Ot=Ot[0],ht!=0)return ht;if(Ct=!!(2&Ot),!gt&&xt)return 3;if(R!=null&&(R[0]=!!(16&Ot)),q!=null&&(q[0]=Ct),Y!=null&&(Y[0]=0),q=Z[0],Ot=ct[0],xt&&Ct&&X==null){ht=0;break}if(4>C){ht=7;break}if(gt&&xt||!gt&&!xt&&!i(b,w[0],"ALPH")){C=[C],mt.na=[mt.na],mt.P=[mt.P],mt.Sa=[mt.Sa];t:{Dt=b,ht=w,gt=C;var zt=mt.gb;Nt=mt.na,Pt=mt.P,Ut=mt.Sa,Kt=22,t(Dt!=null),t(gt!=null),Tt=ht[0];var ye=gt[0];for(t(Nt!=null),t(Ut!=null),Nt[0]=null,Pt[0]=null,Ut[0]=0;;){if(ht[0]=Tt,gt[0]=ye,8>ye){ht=7;break t}var Se=ot(Dt,Tt+4);if(4294967286<Se){ht=3;break t}var be=8+Se+1&-2;if(Kt+=be,0<zt&&Kt>zt){ht=3;break t}if(!i(Dt,Tt,"VP8 ")||!i(Dt,Tt,"VP8L")){ht=0;break t}if(ye[0]<be){ht=7;break t}i(Dt,Tt,"ALPH")||(Nt[0]=Dt,Pt[0]=Tt+8,Ut[0]=Se),Tt+=be,ye-=be}}if(C=C[0],mt.na=mt.na[0],mt.P=mt.P[0],mt.Sa=mt.Sa[0],ht!=0)break}C=[C],mt.Ja=[mt.Ja],mt.xa=[mt.xa];t:if(zt=b,ht=w,gt=C,Nt=mt.gb[0],Pt=mt.Ja,Ut=mt.xa,Dt=ht[0],Tt=!i(zt,Dt,"VP8 "),Kt=!i(zt,Dt,"VP8L"),t(zt!=null),t(gt!=null),t(Pt!=null),t(Ut!=null),8>gt[0])ht=7;else{if(Tt||Kt){if(zt=ot(zt,Dt+4),12<=Nt&&zt>Nt-12){ht=3;break t}if(_t&&zt>gt[0]-8){ht=7;break t}Pt[0]=zt,ht[0]+=8,gt[0]-=8,Ut[0]=Kt}else Ut[0]=5<=gt[0]&&zt[Dt+0]==47&&!(zt[Dt+4]>>5),Pt[0]=gt[0];ht=0}if(C=C[0],mt.Ja=mt.Ja[0],mt.xa=mt.xa[0],w=w[0],ht!=0)break;if(4294967286<mt.Ja)return 3;if(Y==null||Ct||(Y[0]=mt.xa?2:1),q=[q],Ot=[Ot],mt.xa){if(5>C){ht=7;break}Y=q,_t=Ot,Ct=R,b==null||5>C?b=0:5<=C&&b[w+0]==47&&!(b[w+4]>>5)?(gt=[0],zt=[0],Nt=[0],nt(Pt=new k,b,w,C),Zt(Pt,gt,zt,Nt)?(Y!=null&&(Y[0]=gt[0]),_t!=null&&(_t[0]=zt[0]),Ct!=null&&(Ct[0]=Nt[0]),b=1):b=0):b=0}else{if(10>C){ht=7;break}Y=Ot,b==null||10>C||!no(b,w+3,C-3)?b=0:(_t=b[w+0]|b[w+1]<<8|b[w+2]<<16,Ct=16383&(b[w+7]<<8|b[w+6]),b=16383&(b[w+9]<<8|b[w+8]),1&_t||3<(_t>>1&7)||!(_t>>4&1)||_t>>5>=mt.Ja||!Ct||!b?b=0:(q&&(q[0]=Ct),Y&&(Y[0]=b),b=1))}if(!b||(q=q[0],Ot=Ot[0],xt&&(Z[0]!=q||ct[0]!=Ot)))return 3;X!=null&&(X[0]=mt,X.offset=w-X.w,t(4294967286>w-X.w),t(X.offset==X.ha-C));break}return ht==0||ht==7&&xt&&X==null?(R!=null&&(R[0]|=mt.na!=null&&0<mt.na.length),L!=null&&(L[0]=q),j!=null&&(j[0]=Ot),0):ht}function Aa(b,w,C){var L=w.width,j=w.height,R=0,q=0,Y=L,X=j;if(w.Da=b!=null&&0<b.Da,w.Da&&(Y=b.cd,X=b.bd,R=b.v,q=b.j,11>C||(R&=-2,q&=-2),0>R||0>q||0>=Y||0>=X||R+Y>L||q+X>j))return 0;if(w.v=R,w.j=q,w.va=R+Y,w.o=q+X,w.U=Y,w.T=X,w.da=b!=null&&0<b.da,w.da){if(!vt(Y,X,C=[b.ib],R=[b.hb]))return 0;w.ib=C[0],w.hb=R[0]}return w.ob=b!=null&&b.ob,w.Kb=b==null||!b.Sd,w.da&&(w.ob=w.ib<3*L/4&&w.hb<3*j/4,w.Kb=0),1}function ka(b){if(b==null)return 2;if(11>b.S){var w=b.f.RGBA;w.fb+=(b.height-1)*w.A,w.A=-w.A}else w=b.f.kb,b=b.height,w.O+=(b-1)*w.fa,w.fa=-w.fa,w.N+=(b-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(b-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(b-1)*w.lb,w.lb=-w.lb);return 0}function ws(b,w,C,L){if(L==null||0>=b||0>=w)return 2;if(C!=null){if(C.Da){var j=C.cd,R=C.bd,q=-2&C.v,Y=-2&C.j;if(0>q||0>Y||0>=j||0>=R||q+j>b||Y+R>w)return 2;b=j,w=R}if(C.da){if(!vt(b,w,j=[C.ib],R=[C.hb]))return 2;b=j[0],w=R[0]}}L.width=b,L.height=w;t:{var X=L.width,Z=L.height;if(b=L.S,0>=X||0>=Z||!(b>=To&&13>b))b=2;else{if(0>=L.Rd&&L.sd==null){q=R=j=w=0;var ct=(Y=X*Uh[b])*Z;if(11>b||(R=(Z+1)/2*(w=(X+1)/2),b==12&&(q=(j=X)*Z)),(Z=p(ct+2*R+q))==null){b=1;break t}L.sd=Z,11>b?((X=L.f.RGBA).eb=Z,X.fb=0,X.A=Y,X.size=ct):((X=L.f.kb).y=Z,X.O=0,X.fa=Y,X.Fd=ct,X.f=Z,X.N=0+ct,X.Ab=w,X.Cd=R,X.ea=Z,X.W=0+ct+R,X.Db=w,X.Ed=R,b==12&&(X.F=Z,X.J=0+ct+2*R),X.Tc=q,X.lb=j)}if(w=1,j=L.S,R=L.width,q=L.height,j>=To&&13>j)if(11>j)b=L.f.RGBA,w&=(Y=Math.abs(b.A))*(q-1)+R<=b.size,w&=Y>=R*Uh[j],w&=b.eb!=null;else{b=L.f.kb,Y=(R+1)/2,ct=(q+1)/2,X=Math.abs(b.fa),Z=Math.abs(b.Ab);var xt=Math.abs(b.Db),_t=Math.abs(b.lb),mt=_t*(q-1)+R;w&=X*(q-1)+R<=b.Fd,w&=Z*(ct-1)+Y<=b.Cd,w=(w&=xt*(ct-1)+Y<=b.Ed)&X>=R&Z>=Y&xt>=Y,w&=b.y!=null,w&=b.f!=null,w&=b.ea!=null,j==12&&(w&=_t>=R,w&=mt<=b.Tc,w&=b.F!=null)}else w=0;b=w?0:2}}return b!=0||C!=null&&C.fd&&(b=ka(L)),b}var di=64,xs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_s=24,Ss=32,La=8,Ni=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Lt("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(b){return b},N.Predictor2=function(b,w,C){return w[C+0]},N.Predictor3=function(b,w,C){return w[C+1]},N.Predictor4=function(b,w,C){return w[C-1]},N.Predictor5=function(b,w,C){return ft(ft(b,w[C+1]),w[C+0])},N.Predictor6=function(b,w,C){return ft(b,w[C-1])},N.Predictor7=function(b,w,C){return ft(b,w[C+0])},N.Predictor8=function(b,w,C){return ft(w[C-1],w[C+0])},N.Predictor9=function(b,w,C){return ft(w[C+0],w[C+1])},N.Predictor10=function(b,w,C){return ft(ft(b,w[C-1]),ft(w[C+0],w[C+1]))},N.Predictor11=function(b,w,C){var L=w[C+0];return 0>=Rt(L>>24&255,b>>24&255,(w=w[C-1])>>24&255)+Rt(L>>16&255,b>>16&255,w>>16&255)+Rt(L>>8&255,b>>8&255,w>>8&255)+Rt(255&L,255&b,255&w)?L:b},N.Predictor12=function(b,w,C){var L=w[C+0];return(Mt((b>>24&255)+(L>>24&255)-((w=w[C-1])>>24&255))<<24|Mt((b>>16&255)+(L>>16&255)-(w>>16&255))<<16|Mt((b>>8&255)+(L>>8&255)-(w>>8&255))<<8|Mt((255&b)+(255&L)-(255&w)))>>>0},N.Predictor13=function(b,w,C){var L=w[C-1];return(jt((b=ft(b,w[C+0]))>>24&255,L>>24&255)<<24|jt(b>>16&255,L>>16&255)<<16|jt(b>>8&255,L>>8&255)<<8|jt(b>>0&255,L>>0&255))>>>0};var Kl=N.PredictorAdd0;N.PredictorAdd1=Yt,Lt("Predictor2","PredictorAdd2"),Lt("Predictor3","PredictorAdd3"),Lt("Predictor4","PredictorAdd4"),Lt("Predictor5","PredictorAdd5"),Lt("Predictor6","PredictorAdd6"),Lt("Predictor7","PredictorAdd7"),Lt("Predictor8","PredictorAdd8"),Lt("Predictor9","PredictorAdd9"),Lt("Predictor10","PredictorAdd10"),Lt("Predictor11","PredictorAdd11"),Lt("Predictor12","PredictorAdd12"),Lt("Predictor13","PredictorAdd13");var Ta=N.PredictorAdd2;te("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),te("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var _o,Yi=N.ColorIndexInverseTransform,Cs=N.MapARGB,So=N.VP8LColorIndexInverseTransformAlpha,Co=N.MapAlpha,fn=N.VP8LPredictorsAdd=[];fn.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Hn,Fi,Ai,dn,Yr,Vr,As,Xr,Ge,Pa,ki,Vi,ks,Ao,Oa,Yn,Vn,pn,Xn,Ls,Gn,gn,Ma,Xi,Gi,Ie,je,$e,ai=p(511),Gr=p(2041),Na=p(225),Ts=p(767),ko=0,Jl=Gr,Lo=Na,zi=Ts,$i=ai,To=0,Po=1,Mh=2,Oo=3,Mo=4,Zl=5,Nh=6,Ql=7,tc=8,No=9,ec=10,Md=[2,3,7],Nd=[3,3,11],Fh=[280,256,256,256,40],Fd=[0,1,1,1,0],Ed=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Id=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],jd=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Dd=8,ic=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fa=null,Bd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Rd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Eh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],zd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],qd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ud=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],mn=[],fr=[],$r=[],Hd=1,Ih=2,vn=[],Ki=[];kt("UpsampleRgbLinePair",ve,3),kt("UpsampleBgrLinePair",Re,3),kt("UpsampleRgbaLinePair",ur,4),kt("UpsampleBgraLinePair",oi,4),kt("UpsampleArgbLinePair",bi,4),kt("UpsampleRgba4444LinePair",ti,2),kt("UpsampleRgb565LinePair",He,2);var Yd=N.UpsampleRgbLinePair,Vd=N.UpsampleBgrLinePair,jh=N.UpsampleRgbaLinePair,Dh=N.UpsampleBgraLinePair,Bh=N.UpsampleArgbLinePair,Rh=N.UpsampleRgba4444LinePair,Xd=N.UpsampleRgb565LinePair,Fo=16,Eo=1<<Fo-1,Ea=-227,nc=482,Gd=6,zh=0,$d=p(256),Kd=p(256),Jd=p(256),Zd=p(256),Qd=p(nc-Ea),t0=p(nc-Ea);Mr("YuvToRgbRow",ve,3),Mr("YuvToBgrRow",Re,3),Mr("YuvToRgbaRow",ur,4),Mr("YuvToBgraRow",oi,4),Mr("YuvToArgbRow",bi,4),Mr("YuvToRgba4444Row",ti,2),Mr("YuvToRgb565Row",He,2);var qh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Io=[0,2,8],e0=[8,7,6,4,4,2,2,2,1,1,1,1],i0=1;this.WebPDecodeRGBA=function(b,w,C,L,j){var R=Po,q=new vs,Y=new nr;q.ba=Y,Y.S=R,Y.width=[Y.width],Y.height=[Y.height];var X=Y.width,Z=Y.height,ct=new qr;if(ct==null||b==null)var xt=2;else t(ct!=null),xt=ys(b,w,C,ct.width,ct.height,ct.Pd,ct.Qd,ct.format,null);if(xt!=0?X=0:(X!=null&&(X[0]=ct.width[0]),Z!=null&&(Z[0]=ct.height[0]),X=1),X){Y.width=Y.width[0],Y.height=Y.height[0],L!=null&&(L[0]=Y.width),j!=null&&(j[0]=Y.height);t:{if(L=new hs,(j=new ya).data=b,j.w=w,j.ha=C,j.kd=1,w=[0],t(j!=null),((b=ys(j.data,j.w,j.ha,null,null,null,w,null,j))==0||b==7)&&w[0]&&(b=4),(w=b)==0){if(t(q!=null),L.data=j.data,L.w=j.w+j.offset,L.ha=j.ha-j.offset,L.put=Cr,L.ac=fi,L.bc=Ar,L.ma=q,j.xa){if((b=Hi())==null){q=1;break t}if(function(_t,mt){var Ot=[0],Ct=[0],ht=[0];e:for(;;){if(_t==null)return 0;if(mt==null)return _t.a=2,0;if(_t.l=mt,_t.a=0,nt(_t.m,mt.data,mt.w,mt.ha),!Zt(_t.m,Ot,Ct,ht)){_t.a=3;break e}if(_t.xb=Ih,mt.width=Ot[0],mt.height=Ct[0],!Tr(Ot[0],Ct[0],1,_t,null))break e;return 1}return t(_t.a!=0),0}(b,L)){if(L=(w=ws(L.width,L.height,q.Oa,q.ba))==0){e:{L=b;i:for(;;){if(L==null){L=0;break e}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((C=L.l)!=null),t((j=C.ma)!=null),L.xb!=0){if(L.ca=j.ba,L.tb=j.tb,t(L.ca!=null),!Aa(j.Oa,C,Oo)){L.a=2;break i}if(!Rn(L,C.width)||C.da)break i;if((C.da||we(L.ca.S))&&wt(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&wt()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!st(L.s.vb,L.s.Wa.Xa)){L.a=1;break i}L.xb=0}if(!lr(L,L.V,L.Ba,L.c,L.i,C.o,ns))break i;j.Dc=L.Ma,L=1;break e}t(L.a!=0),L=0}L=!L}L&&(w=b.a)}else w=b.a}else{if((b=new Ml)==null){q=1;break t}if(b.Fa=j.na,b.P=j.P,b.qc=j.Sa,so(b,L)){if((w=ws(L.width,L.height,q.Oa,q.ba))==0){if(b.Aa=0,C=q.Oa,t((j=b)!=null),C!=null){if(0<(X=0>(X=C.Md)?0:100<X?255:255*X/100)){for(Z=ct=0;4>Z;++Z)12>(xt=j.pb[Z]).lc&&(xt.ia=X*e0[0>xt.lc?0:xt.lc]>>3),ct|=xt.ia;ct&&(alert("todo:VP8InitRandom"),j.ia=1)}j.Ga=C.Id,100<j.Ga?j.Ga=100:0>j.Ga&&(j.Ga=0)}Nl(b,L)||(w=b.a)}}else w=b.a}w==0&&q.Oa!=null&&q.Oa.fd&&(w=ka(q.ba))}q=w}R=q!=0?null:11>R?Y.f.RGBA.eb:Y.f.kb.y}else R=null;return R};var Uh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,W){for(var K="",P=0;P<4;P++)K+=String.fromCharCode(N[W++]);return K}function u(N,W){return(N[W+0]<<0|N[W+1]<<8|N[W+2]<<16)>>>0}function a(N,W){return(N[W+0]<<0|N[W+1]<<8|N[W+2]<<16|N[W+3]<<24)>>>0}new r;var l=[0],n=[0],h=[],g=new r,f=e,m=function(N,W){var K={},P=0,I=!1,J=0,V=0;if(K.frames=[],!function(D,F,O,U){for(var G=0;G<U;G++)if(D[F+G]!=O.charCodeAt(G))return!0;return!1}(N,W,"RIFF",4)){var rt,at;for(a(N,W+=4),W+=8;W<N.length;){var dt=c(N,W),nt=a(N,W+=4);W+=4;var E=nt+(1&nt);switch(dt){case"VP8 ":case"VP8L":K.frames[P]===void 0&&(K.frames[P]={}),(k=K.frames[P]).src_off=I?V:W-8,k.src_size=J+nt+8,P++,I&&(I=!1,J=0,V=0);break;case"VP8X":(k=K.header={}).feature_flags=N[W];var z=W+4;k.canvas_width=1+u(N,z),z+=3,k.canvas_height=1+u(N,z),z+=3;break;case"ALPH":I=!0,J=E+8,V=W-8;break;case"ANIM":(k=K.header).bgcolor=a(N,W),z=W+4,k.loop_count=(rt=N)[(at=z)+0]<<0|rt[at+1]<<8,z+=2;break;case"ANMF":var $,k;(k=K.frames[P]={}).offset_x=2*u(N,W),W+=3,k.offset_y=2*u(N,W),W+=3,k.width=1+u(N,W),W+=3,k.height=1+u(N,W),W+=3,k.duration=u(N,W),W+=3,$=N[W++],k.dispose=1&$,k.blend=$>>1&1}dt!="ANMF"&&(W+=E)}return K}}(f,0);m.response=f,m.rgbaoutput=!0,m.dataurl=!1;var y=m.header?m.header:null,x=m.frames?m.frames:null;if(y){y.loop_counter=y.loop_count,l=[y.canvas_height],n=[y.canvas_width];for(var S=0;S<x.length&&x[S].blend!=0;S++);}var A=x[0],M=g.WebPDecodeRGBA(f,A.src_off,A.src_size,n,l);A.rgba=M,A.imgwidth=n[0],A.imgheight=l[0];for(var T=0;T<n[0]*l[0]*4;T++)h[T]=M[T];return this.width=n,this.height=l,this.data=h,this}(function(e){var t=function(){return typeof Zc=="function"},i=function(l,n,h,g){var f=4,m=v;switch(g){case e.image_compression.FAST:f=1,m=p;break;case e.image_compression.MEDIUM:f=6,m=o;break;case e.image_compression.SLOW:f=9,m=r}l=s(l,n,h,m);var y=Zc(l,{level:f});return e.__addimage__.arrayBufferToBinaryString(y)},s=function(l,n,h,g){for(var f,m,y,x=l.length/n,S=new Uint8Array(l.length+x),A=u(),M=0;M<x;M+=1){if(y=M*n,f=l.subarray(y,y+n),g)S.set(g(f,h,m),y+M);else{for(var T,N=A.length,W=[];T<N;T+=1)W[T]=A[T](f,h,m);var K=a(W.concat());S.set(W[K],y+M)}m=f}return S},d=function(l){var n=Array.apply([],l);return n.unshift(0),n},p=function(l,n){var h,g=[],f=l.length;g[0]=1;for(var m=0;m<f;m+=1)h=l[m-n]||0,g[m+1]=l[m]-h+256&255;return g},v=function(l,n,h){var g,f=[],m=l.length;f[0]=2;for(var y=0;y<m;y+=1)g=h&&h[y]||0,f[y+1]=l[y]-g+256&255;return f},o=function(l,n,h){var g,f,m=[],y=l.length;m[0]=3;for(var x=0;x<y;x+=1)g=l[x-n]||0,f=h&&h[x]||0,m[x+1]=l[x]+256-(g+f>>>1)&255;return m},r=function(l,n,h){var g,f,m,y,x=[],S=l.length;x[0]=4;for(var A=0;A<S;A+=1)g=l[A-n]||0,f=h&&h[A]||0,m=h&&h[A-n]||0,y=c(g,f,m),x[A+1]=l[A]-y+256&255;return x},c=function(l,n,h){if(l===n&&n===h)return l;var g=Math.abs(n-h),f=Math.abs(l-h),m=Math.abs(l+n-h-h);return g<=f&&g<=m?l:f<=m?n:h},u=function(){return[d,p,v,o,r]},a=function(l){var n=l.map(function(h){return h.reduce(function(g,f){return g+Math.abs(f)},0)});return n.indexOf(Math.min.apply(null,n))};e.processPNG=function(l,n,h,g){var f,m,y,x,S,A,M,T,N,W,K,P,I,J,V,rt=this.decode.FLATE_DECODE,at="";if(this.__addimage__.isArrayBuffer(l)&&(l=new Uint8Array(l)),this.__addimage__.isArrayBufferView(l)){if(l=(y=new Hg(l)).imgData,m=y.bits,f=y.colorSpace,S=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){N=(T=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,K=new Uint8Array(N*y.colors),W=new Uint8Array(N);var dt,nt=y.pixelBitlength-y.bits;for(J=0,V=0;J<N;J++){for(I=T[J],dt=0;dt<nt;)K[V++]=I>>>dt&255,dt+=y.bits;W[J]=I>>>dt&255}}if(y.bits===16){N=(T=new Uint32Array(y.decodePixels().buffer)).length,K=new Uint8Array(N*(32/y.pixelBitlength)*y.colors),W=new Uint8Array(N*(32/y.pixelBitlength)),P=y.colors>1,J=0,V=0;for(var E=0;J<N;)I=T[J++],K[V++]=I>>>0&255,P&&(K[V++]=I>>>16&255,I=T[J++],K[V++]=I>>>0&255),W[E++]=I>>>16&255;m=8}g!==e.image_compression.NONE&&t()?(l=i(K,y.width*y.colors,y.colors,g),M=i(W,y.width,1,g)):(l=K,M=W,rt=void 0)}if(y.colorType===3&&(f=this.color_spaces.INDEXED,A=y.palette,y.transparency.indexed)){var z=y.transparency.indexed,$=0;for(J=0,N=z.length;J<N;++J)$+=z[J];if(($/=255)===N-1&&z.indexOf(0)!==-1)x=[z.indexOf(0)];else if($!==N){for(T=y.decodePixels(),W=new Uint8Array(T.length),J=0,N=T.length;J<N;J++)W[J]=z[T[J]];M=i(W,y.width,1)}}var k=function(D){var F;switch(D){case e.image_compression.FAST:F=11;break;case e.image_compression.MEDIUM:F=13;break;case e.image_compression.SLOW:F=14;break;default:F=12}return F}(g);return rt===this.decode.FLATE_DECODE&&(at="/Predictor "+k+" "),at+="/Colors "+S+" /BitsPerComponent "+m+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(l)||this.__addimage__.isArrayBufferView(l))&&(l=this.__addimage__.arrayBufferToBinaryString(l)),(M&&this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),{alias:h,data:l,index:n,filter:rt,decodeParameters:at,transparency:x,palette:A,sMask:M,predictor:k,width:y.width,height:y.height,bitsPerComponent:m,colorSpace:f}}}})(Jt.API),function(e){e.processGIF89A=function(t,i,s,d){var p=new Yg(t),v=p.width,o=p.height,r=[];p.decodeAndBlitFrameRGBA(0,r);var c={data:r,width:v,height:o},u=new Ec(100).encode(c,100);return e.processJPEG.call(this,u,i,s,d)},e.processGIF87A=e.processGIF89A}(Jt.API),gr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:d,green:s,blue:i,quad:p}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},gr.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(i){Me.log("bit decode error:"+i)}},gr.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),i=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,d=0;d<t;d++)for(var p=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+8*d*4,o=0;o<8&&8*d+o<this.width;o++){var r=this.palette[p>>7-o&1];this.data[v+4*o]=r.blue,this.data[v+4*o+1]=r.green,this.data[v+4*o+2]=r.red,this.data[v+4*o+3]=255}i!==0&&(this.pos+=4-i)}},gr.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,d=0;d<e;d++){var p=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+2*d*4,o=p>>4,r=15&p,c=this.palette[o];if(this.data[v]=c.blue,this.data[v+1]=c.green,this.data[v+2]=c.red,this.data[v+3]=255,2*d+1>=this.width)break;c=this.palette[r],this.data[v+4]=c.blue,this.data[v+4+1]=c.green,this.data[v+4+2]=c.red,this.data[v+4+3]=255}t!==0&&(this.pos+=4-t)}},gr.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var d=this.datav.getUint8(this.pos++,!0),p=i*this.width*4+4*s;if(d<this.palette.length){var v=this.palette[d];this.data[p]=v.red,this.data[p+1]=v.green,this.data[p+2]=v.blue,this.data[p+3]=255}else this.data[p]=255,this.data[p+1]=255,this.data[p+2]=255,this.data[p+3]=255}e!==0&&(this.pos+=4-e)}},gr.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,d=0;d<this.width;d++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var v=(p&t)/t*255|0,o=(p>>5&t)/t*255|0,r=(p>>10&t)/t*255|0,c=p>>15?255:0,u=s*this.width*4+4*d;this.data[u]=r,this.data[u+1]=o,this.data[u+2]=v,this.data[u+3]=c}this.pos+=e}},gr.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),i=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var d=this.bottom_up?s:this.height-1-s,p=0;p<this.width;p++){var v=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(v&t)/t*255|0,r=(v>>5&i)/i*255|0,c=(v>>11)/t*255|0,u=d*this.width*4+4*p;this.data[u]=c,this.data[u+1]=r,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},gr.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),v=t*this.width*4+4*i;this.data[v]=p,this.data[v+1]=d,this.data[v+2]=s,this.data[v+3]=255}this.pos+=this.width%4}},gr.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),v=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*i;this.data[o]=p,this.data[o+1]=d,this.data[o+2]=s,this.data[o+3]=v}},gr.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,i,s,d){var p=new gr(t,!1),v=p.width,o=p.height,r={data:p.getData(),width:v,height:o},c=new Ec(100).encode(r,100);return e.processJPEG.call(this,c,i,s,d)}}(Jt.API),Bu.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,i,s,d){var p=new Bu(t),v=p.width,o=p.height,r={data:p.getData(),width:v,height:o},c=new Ec(100).encode(r,100);return e.processJPEG.call(this,c,i,s,d)}}(Jt.API),Jt.API.processRGBA=function(e,t,i){for(var s=e.data,d=s.length,p=new Uint8Array(d/4*3),v=new Uint8Array(d/4),o=0,r=0,c=0;c<d;c+=4){var u=s[c],a=s[c+1],l=s[c+2],n=s[c+3];p[o++]=u,p[o++]=a,p[o++]=l,v[r++]=n}var h=this.__addimage__.arrayBufferToBinaryString(p);return{alpha:this.__addimage__.arrayBufferToBinaryString(v),data:h,index:t,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Jt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bs=Jt.API,tl=Bs.getCharWidthsArray=function(e,t){var i,s,d=(t=t||{}).font||this.internal.getFont(),p=t.fontSize||this.internal.getFontSize(),v=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:d.metadata.Unicode.widths,r=o.fof?o.fof:1,c=t.kerning?t.kerning:d.metadata.Unicode.kerning,u=c.fof?c.fof:1,a=t.doKerning!==!1,l=0,n=e.length,h=0,g=o[0]||r,f=[];for(i=0;i<n;i++)s=e.charCodeAt(i),typeof d.metadata.widthOfString=="function"?f.push((d.metadata.widthOfGlyph(d.metadata.characterToGlyph(s))+v*(1e3/p)||0)/1e3):(l=a&&ke(c[s])==="object"&&!isNaN(parseInt(c[s][h],10))?c[s][h]/u:0,f.push((o[s]||g)/r+l)),h=s;return f},Eu=Bs.getStringUnitWidth=function(e,t){var i=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),d=t.charSpace||this.internal.getCharSpace();return Bs.processArabic&&(e=Bs.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,i,d)/i:tl.apply(this,arguments).reduce(function(p,v){return p+v},0)},Iu=function(e,t,i,s){for(var d=[],p=0,v=e.length,o=0;p!==v&&o+t[p]<i;)o+=t[p],p++;d.push(e.slice(0,p));var r=p;for(o=0;p!==v;)o+t[p]>s&&(d.push(e.slice(r,p)),o=0,r=p),o+=t[p],p++;return r!==p&&d.push(e.slice(r,p)),d},ju=function(e,t,i){i||(i={});var s,d,p,v,o,r,c,u=[],a=[u],l=i.textIndent||0,n=0,h=0,g=e.split(" "),f=tl.apply(this,[" ",i])[0];if(r=i.lineIndent===-1?g[0].length+2:i.lineIndent||0){var m=Array(r).join(" "),y=[];g.map(function(S){(S=S.split(/\s*\n/)).length>1?y=y.concat(S.map(function(A,M){return(M&&A.length?`
`:"")+A})):y.push(S[0])}),g=y,r=Eu.apply(this,[m,i])}for(p=0,v=g.length;p<v;p++){var x=0;if(s=g[p],r&&s[0]==`
`&&(s=s.substr(1),x=1),l+n+(h=(d=tl.apply(this,[s,i])).reduce(function(S,A){return S+A},0))>t||x){if(h>t){for(o=Iu.apply(this,[s,d,t-(l+n),t]),u.push(o.shift()),u=[o.pop()];o.length;)a.push([o.shift()]);h=d.slice(s.length-(u[0]?u[0].length:0)).reduce(function(S,A){return S+A},0)}else u=[s];a.push(u),l=h+r,n=f}else u.push(s),l+=n+h,n=f}return c=r?function(S,A){return(A?m:"")+S.join(" ")}:function(S){return S.join(" ")},a.map(c)},Bs.splitTextToSize=function(e,t,i){var s,d=(i=i||{}).fontSize||this.internal.getFontSize(),p=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var a=this.internal.getFont(u.fontName,u.fontStyle);return a.metadata.Unicode?{widths:a.metadata.Unicode.widths||{0:1},kerning:a.metadata.Unicode.kerning||{}}:{font:a.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var v=1*this.internal.scaleFactor*t/d;p.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/d:0,p.lineIndent=i.lineIndent;var o,r,c=[];for(o=0,r=s.length;o<r;o++)c=c.concat(ju.apply(this,[s[o],v,p]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",i={},s={},d=0;d<t.length;d++)i[t[d]]="0123456789abcdef"[d],s["0123456789abcdef"[d]]=t[d];var p=function(a){return"0x"+parseInt(a,10).toString(16)},v=e.__fontmetrics__.compress=function(a){var l,n,h,g,f=["{"];for(var m in a){if(l=a[m],isNaN(parseInt(m,10))?n="'"+m+"'":(m=parseInt(m,10),n=(n=p(m).slice(2)).slice(0,-1)+s[n.slice(-1)]),typeof l=="number")l<0?(h=p(l).slice(3),g="-"):(h=p(l).slice(2),g=""),h=g+h.slice(0,-1)+s[h.slice(-1)];else{if(ke(l)!=="object")throw new Error("Don't know what to do with value type "+ke(l)+".");h=v(l)}f.push(n+h)}return f.push("}"),f.join("")},o=e.__fontmetrics__.uncompress=function(a){if(typeof a!="string")throw new Error("Invalid argument passed to uncompress.");for(var l,n,h,g,f={},m=1,y=f,x=[],S="",A="",M=a.length-1,T=1;T<M;T+=1)(g=a[T])=="'"?l?(h=l.join(""),l=void 0):l=[]:l?l.push(g):g=="{"?(x.push([y,h]),y={},h=void 0):g=="}"?((n=x.pop())[0][n[1]]=y,h=void 0,y=n[0]):g=="-"?m=-1:h===void 0?i.hasOwnProperty(g)?(S+=i[g],h=parseInt(S,16)*m,m=1,S=""):S+=g:i.hasOwnProperty(g)?(A+=i[g],y[h]=parseInt(A,16)*m,m=1,h=void 0,A=""):A+=g;return f},r={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:r,"Courier-Bold":r,"Courier-BoldOblique":r,"Courier-Oblique":r,Helvetica:r,"Helvetica-Bold":r,"Helvetica-BoldOblique":r,"Helvetica-Oblique":r,"Times-Roman":r,"Times-Bold":r,"Times-BoldItalic":r,"Times-Italic":r}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(a){var l=a.font,n=u.Unicode[l.postScriptName];n&&(l.metadata.Unicode={},l.metadata.Unicode.widths=n.widths,l.metadata.Unicode.kerning=n.kerning);var h=c.Unicode[l.postScriptName];h&&(l.metadata.Unicode.encoding=h,l.encoding=h.codePages[0])}])}(Jt.API),function(e){var t=function(i){for(var s=i.length,d=new Uint8Array(s),p=0;p<s;p++)d[p]=i.charCodeAt(p);return d};e.API.events.push(["addFont",function(i){var s=void 0,d=i.font,p=i.instance;if(!d.isStandardFont){if(p===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+d.postScriptName+"').");if(typeof(s=p.existsFileInVFS(d.postScriptName)===!1?p.loadFile(d.postScriptName):p.getFileFromVFS(d.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+d.postScriptName+"').");(function(v,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Ha(o)),v.metadata=e.API.TTFFont.open(o),v.metadata.Unicode=v.metadata.Unicode||{encoding:{},kerning:{},widths:[]},v.metadata.glyIdsUsed=[0]})(d,s)}}])}(Jt),function(e){function t(){return(Qt.canvg?Promise.resolve(Qt.canvg):Hc(()=>import("./index.es-PktFt_Zw.js"),__vite__mapDeps([0,1,2]))).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}Jt.API.addSvgAsImage=function(i,s,d,p,v,o,r,c){if(isNaN(s)||isNaN(d))throw Me.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(p)||isNaN(v))throw Me.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=p,u.height=v;var a=u.getContext("2d");a.fillStyle="#fff",a.fillRect(0,0,u.width,u.height);var l={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},n=this;return t().then(function(h){return h.fromString(a,i,l)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(l)}).then(function(){n.addImage(u.toDataURL("image/jpeg",1),s,d,p,v,r,c)})}}(),Jt.API.putTotalPages=function(e){var t,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),i=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var d=0;d<this.internal.pages[s].length;d++)this.internal.pages[s][d]=this.internal.pages[s][d].replace(t,i);return this},Jt.API.viewerPreferences=function(e,t){var i;e=e||{},t=t||!1;var s,d,p,v={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(v),r=[],c=0,u=0,a=0;function l(h,g){var f,m=!1;for(f=0;f<h.length;f+=1)h[f]===g&&(m=!0);return m}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(v)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var n=o.length;for(a=0;a<n;a+=1)i[o[a]].value=i[o[a]].defaultValue,i[o[a]].explicitSet=!1}if(ke(e)==="object"){for(d in e)if(p=e[d],l(o,d)&&p!==void 0){if(i[d].type==="boolean"&&typeof p=="boolean")i[d].value=p;else if(i[d].type==="name"&&l(i[d].valueSet,p))i[d].value=p;else if(i[d].type==="integer"&&Number.isInteger(p))i[d].value=p;else if(i[d].type==="array"){for(c=0;c<p.length;c+=1)if(s=!0,p[c].length===1&&typeof p[c][0]=="number")r.push(String(p[c]-1));else if(p[c].length>1){for(u=0;u<p[c].length;u+=1)typeof p[c][u]!="number"&&(s=!1);s===!0&&r.push([p[c][0]-1,p[c][1]-1].join(" "))}i[d].value="["+r.join(" ")+"]"}else i[d].value=i[d].defaultValue;i[d].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var h,g=[];for(h in i)i[h].explicitSet===!0&&(i[h].type==="name"?g.push("/"+h+" /"+i[h].value):g.push("/"+h+" "+i[h].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',d=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),p=unescape(encodeURIComponent(s)),v=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),r=unescape(encodeURIComponent("</x:xmpmeta>")),c=p.length+v.length+o.length+d.length+r.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(d+p+v+o+r),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,d){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:d||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",t)),this}}(Jt.API),function(e){var t=e.API,i=t.pdfEscape16=function(p,v){for(var o,r=v.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],a=0,l=p.length;a<l;++a){if(o=v.metadata.characterToGlyph(p.charCodeAt(a)),v.metadata.glyIdsUsed.push(o),v.metadata.toUnicode[o]=p.charCodeAt(a),r.indexOf(o)==-1&&(r.push(o),r.push([parseInt(v.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},s=function(p){var v,o,r,c,u,a,l;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,r=[],a=0,l=(o=Object.keys(p).sort(function(n,h){return n-h})).length;a<l;a++)v=o[a],r.length>=100&&(u+=`
`+r.length+` beginbfchar
`+r.join(`
`)+`
endbfchar`,r=[]),p[v]!==void 0&&p[v]!==null&&typeof p[v].toString=="function"&&(c=("0000"+p[v].toString(16)).slice(-4),v=("0000"+(+v).toString(16)).slice(-4),r.push("<"+v+"><"+c+">"));return r.length&&(u+=`
`+r.length+` beginbfchar
`+r.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(p){(function(v){var o=v.font,r=v.out,c=v.newObject,u=v.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var a=o.metadata.Unicode.widths,l=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),n="",h=0;h<l.length;h++)n+=String.fromCharCode(l[h]);var g=c();u({data:n,addLength1:!0,objectId:g}),r("endobj");var f=c();u({data:s(o.metadata.toUnicode),addLength1:!0,objectId:f}),r("endobj");var m=c();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+Us(o.fontName)),r("/FontFile2 "+g+" 0 R"),r("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),r("/Flags "+o.metadata.flags),r("/StemV "+o.metadata.stemV),r("/ItalicAngle "+o.metadata.italicAngle),r("/Ascent "+o.metadata.ascender),r("/Descent "+o.metadata.decender),r("/CapHeight "+o.metadata.capHeight),r(">>"),r("endobj");var y=c();r("<<"),r("/Type /Font"),r("/BaseFont /"+Us(o.fontName)),r("/FontDescriptor "+m+" 0 R"),r("/W "+e.API.PDFObject.convert(a)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+o.encoding+")"),r(">>"),r(">>"),r("endobj"),o.objectNumber=c(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+f+" 0 R"),r("/BaseFont /"+Us(o.fontName)),r("/Encoding /"+o.encoding),r("/DescendantFonts ["+y+" 0 R]"),r(">>"),r("endobj"),o.isAlreadyPutted=!0}})(p)}]),t.events.push(["putFont",function(p){(function(v){var o=v.font,r=v.out,c=v.newObject,u=v.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var a=o.metadata.rawData,l="",n=0;n<a.length;n++)l+=String.fromCharCode(a[n]);var h=c();u({data:l,addLength1:!0,objectId:h}),r("endobj");var g=c();u({data:s(o.metadata.toUnicode),addLength1:!0,objectId:g}),r("endobj");var f=c();r("<<"),r("/Descent "+o.metadata.decender),r("/CapHeight "+o.metadata.capHeight),r("/StemV "+o.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+h+" 0 R"),r("/Flags 96"),r("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),r("/FontName /"+Us(o.fontName)),r("/ItalicAngle "+o.metadata.italicAngle),r("/Ascent "+o.metadata.ascender),r(">>"),r("endobj"),o.objectNumber=c();for(var m=0;m<o.metadata.hmtx.widths.length;m++)o.metadata.hmtx.widths[m]=parseInt(o.metadata.hmtx.widths[m]*(1e3/o.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Us(o.fontName)+"/FontDescriptor "+f+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),r("endobj"),o.isAlreadyPutted=!0}})(p)}]);var d=function(p){var v,o=p.text||"",r=p.x,c=p.y,u=p.options||{},a=p.mutex||{},l=a.pdfEscape,n=a.activeFontKey,h=a.fonts,g=n,f="",m=0,y="",x=h[g].encoding;if(h[g].encoding!=="Identity-H")return{text:o,x:r,y:c,options:u,mutex:a};for(y=o,g=n,Array.isArray(o)&&(y=o[0]),m=0;m<y.length;m+=1)h[g].metadata.hasOwnProperty("cmap")&&(v=h[g].metadata.cmap.unicode.codeMap[y[m].charCodeAt(0)]),v||y[m].charCodeAt(0)<256&&h[g].metadata.hasOwnProperty("Unicode")?f+=y[m]:f+="";var S="";return parseInt(g.slice(1))<14||x==="WinAnsiEncoding"?S=l(f,g).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(S=i(f,h[g])),a.isHex=!0,{text:S,x:r,y:c,options:u,mutex:a}};t.events.push(["postProcessText",function(p){var v=p.text||"",o=[],r={text:v,x:p.x,y:p.y,options:p.options,mutex:p.mutex};if(Array.isArray(v)){var c=0;for(c=0;c<v.length;c+=1)Array.isArray(v[c])&&v[c].length===3?o.push([d(Object.assign({},r,{text:v[c][0]})).text,v[c][1],v[c][2]]):o.push(d(Object.assign({},r,{text:v[c]})).text);p.text=o}else p.text=d(Object.assign({},r,{text:v})).text}])}(Jt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0},e.addFileToVFS=function(i,s){return t.call(this),this.internal.vFS[i]=s,this},e.getFileFromVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(Jt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var d,p,v,o,r,c,u,a=t,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],n=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,x=0;this.__bidiEngine__={};var S=function(P){var I=P.charCodeAt(),J=I>>8,V=g[J];return V!==void 0?a[256*V+(255&I)]:J===252||J===253?"AL":m.test(J)?"L":J===8?"R":"N"},A=function(P){for(var I,J=0;J<P.length;J++){if((I=S(P.charAt(J)))==="L")return!1;if(I==="R")return!0}return!1},M=function(P,I,J,V){var rt,at,dt,nt,E=I[V];switch(E){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(E="AN");break;case"AL":y=!0,E="R";break;case"WS":E="N";break;case"CS":V<1||V+1>=I.length||(rt=J[V-1])!=="EN"&&rt!=="AN"||(at=I[V+1])!=="EN"&&at!=="AN"?E="N":y&&(at="AN"),E=at===rt?at:"N";break;case"ES":E=(rt=V>0?J[V-1]:"B")==="EN"&&V+1<I.length&&I[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&J[V-1]==="EN"){E="EN";break}if(y){E="N";break}for(dt=V+1,nt=I.length;dt<nt&&I[dt]==="ET";)dt++;E=dt<nt&&I[dt]==="EN"?"EN":"N";break;case"NSM":if(v&&!o){for(nt=I.length,dt=V+1;dt<nt&&I[dt]==="NSM";)dt++;if(dt<nt){var z=P[V],$=z>=1425&&z<=2303||z===64286;if(rt=I[dt],$&&(rt==="R"||rt==="AL")){E="R";break}}}E=V<1||(rt=I[V-1])==="B"?"N":J[V-1];break;case"B":y=!1,d=!0,E=x;break;case"S":p=!0,E="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":E="N"}return E},T=function(P,I,J){var V=P.split("");return J&&N(V,J,{hiLevel:x}),V.reverse(),I&&I.reverse(),V.join("")},N=function(P,I,J){var V,rt,at,dt,nt,E=-1,z=P.length,$=0,k=[],D=x?n:l,F=[];for(y=!1,d=!1,p=!1,rt=0;rt<z;rt++)F[rt]=S(P[rt]);for(at=0;at<z;at++){if(nt=$,k[at]=M(P,F,k,at),V=240&($=D[nt][h[k[at]]]),$&=15,I[at]=dt=D[$][5],V>0)if(V===16){for(rt=E;rt<at;rt++)I[rt]=1;E=-1}else E=-1;if(D[$][6])E===-1&&(E=at);else if(E>-1){for(rt=E;rt<at;rt++)I[rt]=dt;E=-1}F[at]==="B"&&(I[at]=0),J.hiLevel|=dt}p&&function(O,U,G){for(var tt=0;tt<G;tt++)if(O[tt]==="S"){U[tt]=x;for(var Q=tt-1;Q>=0&&O[Q]==="WS";Q--)U[Q]=x}}(F,I,z)},W=function(P,I,J,V,rt){if(!(rt.hiLevel<P)){if(P===1&&x===1&&!d)return I.reverse(),void(J&&J.reverse());for(var at,dt,nt,E,z=I.length,$=0;$<z;){if(V[$]>=P){for(nt=$+1;nt<z&&V[nt]>=P;)nt++;for(E=$,dt=nt-1;E<dt;E++,dt--)at=I[E],I[E]=I[dt],I[dt]=at,J&&(at=J[E],J[E]=J[dt],J[dt]=at);$=nt}$++}}},K=function(P,I,J){var V=P.split(""),rt={hiLevel:x};return J||(J=[]),N(V,J,rt),function(at,dt,nt){if(nt.hiLevel!==0&&u)for(var E,z=0;z<at.length;z++)dt[z]===1&&(E=f.indexOf(at[z]))>=0&&(at[z]=f[E+1])}(V,J,rt),W(2,V,I,J,rt),W(1,V,I,J,rt),V.join("")};return this.__bidiEngine__.doBidiReorder=function(P,I,J){if(function(rt,at){if(at)for(var dt=0;dt<rt.length;dt++)at[dt]=dt;o===void 0&&(o=A(rt)),c===void 0&&(c=A(rt))}(P,I),v||!r||c)if(v&&r&&o^c)x=o?1:0,P=T(P,I,J);else if(!v&&r&&c)x=o?1:0,P=K(P,I,J),P=T(P,I);else if(!v||o||r||c){if(v&&!r&&o^c)P=T(P,I),o?(x=0,P=K(P,I,J)):(x=1,P=K(P,I,J),P=T(P,I));else if(v&&o&&!r&&c)x=1,P=K(P,I,J),P=T(P,I);else if(!v&&!r&&o^c){var V=u;o?(x=1,P=K(P,I,J),x=0,u=!1,P=K(P,I,J),u=V):(x=0,P=K(P,I,J),P=T(P,I),x=1,u=!1,P=K(P,I,J),u=V,P=T(P,I))}}else x=0,P=K(P,I,J);else x=o?1:0,P=K(P,I,J);return P},this.__bidiEngine__.setOptions=function(P){P&&(v=P.isInputVisual,r=P.isOutputVisual,o=P.isInputRtl,c=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var d=s.text,p=(s.x,s.y,s.options||{}),v=(s.mutex,p.lang,[]);if(p.isInputVisual=typeof p.isInputVisual!="boolean"||p.isInputVisual,i.setOptions(p),Object.prototype.toString.call(d)==="[object Array]"){var o=0;for(v=[],o=0;o<d.length;o+=1)Object.prototype.toString.call(d[o])==="[object Array]"?v.push([i.doBidiReorder(d[o][0]),d[o][1],d[o][2]]):v.push([i.doBidiReorder(d[o])]);s.text=v}else s.text=i.doBidiReorder(d);i.setOptions({isInputVisual:!0})}])}(Jt),Jt.API.TTFFont=function(){function e(t){var i;if(this.rawData=t,i=this.contents=new On(t),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new a2(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Vg(this.contents),this.head=new Gg(this),this.name=new Qg(this),this.cmap=new cd(this),this.toUnicode={},this.hhea=new $g(this),this.maxp=new t2(this),this.hmtx=new e2(this),this.post=new Jg(this),this.os2=new Kg(this),this.loca=new s2(this),this.glyf=new i2(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,i,s,d,p;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var v,o,r,c;for(c=[],v=0,o=(r=this.bbox).length;v<o;v++)t=r[v],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(s=255&(d=this.post.italic_angle),32768&(i=d>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(p=this.familyClass)===1||p===2||p===3||p===4||p===5||p===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var i;return((i=this.cmap.unicode)!=null?i.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*i},e.prototype.widthOfString=function(t,i,s){var d,p,v,o;for(v=0,p=0,o=(t=""+t).length;0<=o?p<o:p>o;p=0<=o?++p:--p)d=t.charCodeAt(p),v+=this.widthOfGlyph(this.characterToGlyph(d))+s*(1e3/i)||0;return v*(i/1e3)},e.prototype.lineHeight=function(t,i){var s;return i==null&&(i=!1),s=i?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var _r,On=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var i,s;for(s=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)s[i]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var i,s,d;for(d=[],i=0,s=t.length;0<=s?i<s:i>s;i=0<=s?++i:--i)d.push(this.writeByte(t.charCodeAt(i)));return d},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,i,s,d,p,v,o,r;return t=this.readByte(),i=this.readByte(),s=this.readByte(),d=this.readByte(),p=this.readByte(),v=this.readByte(),o=this.readByte(),r=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^i)+1099511627776*(255^s)+4294967296*(255^d)+16777216*(255^p)+65536*(255^v)+256*(255^o)+(255^r)+1):72057594037927940*t+281474976710656*i+1099511627776*s+4294967296*d+16777216*p+65536*v+256*o+r},e.prototype.writeLongLong=function(t){var i,s;return i=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var i,s;for(i=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)i.push(this.readByte());return i},e.prototype.write=function(t){var i,s,d,p;for(p=[],s=0,d=t.length;s<d;s++)i=t[s],p.push(this.writeByte(i));return p},e}(),Vg=function(){var e;function t(i){var s,d,p;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},d=0,p=this.tableCount;0<=p?d<p:d>p;d=0<=p?++d:--d)s={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(i){var s,d,p,v,o,r,c,u,a,l,n,h,g;for(g in n=Object.keys(i).length,r=Math.log(2),a=16*Math.floor(Math.log(n)/r),v=Math.floor(a/r),u=16*n-a,(d=new On).writeInt(this.scalarType),d.writeShort(n),d.writeShort(a),d.writeShort(v),d.writeShort(u),p=16*n,c=d.pos+p,o=null,h=[],i)for(l=i[g],d.writeString(g),d.writeInt(e(l)),d.writeInt(c),d.writeInt(l.length),h=h.concat(l),g==="head"&&(o=c),c+=l.length;c%4;)h.push(0),c++;return d.write(h),s=2981146554-e(d.data),d.pos=o+8,d.writeUInt32(s),d.data},e=function(i){var s,d,p,v;for(i=hd.call(i);i.length%4;)i.push(0);for(p=new On(i),d=0,s=0,v=i.length;s<v;s=s+=4)d+=p.readUInt32();return 4294967295&d},t}(),Xg={}.hasOwnProperty,zr=function(e,t){for(var i in t)Xg.call(t,i)&&(e[i]=t[i]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};_r=function(){function e(t){var i;this.file=t,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Gg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="head",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},t.prototype.encode=function(i){var s;return(s=new On).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(i),s.writeShort(this.glyphDataFormat),s.data},t}(),Ru=function(){function e(t,i){var s,d,p,v,o,r,c,u,a,l,n,h,g,f,m,y,x;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=i+t.readInt(),a=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(r=0;r<256;++r)this.codeMap[r]=t.readByte();break;case 4:for(n=t.readUInt16(),l=n/2,t.pos+=6,p=function(){var S,A;for(A=[],r=S=0;0<=l?S<l:S>l;r=0<=l?++S:--S)A.push(t.readUInt16());return A}(),t.pos+=2,g=function(){var S,A;for(A=[],r=S=0;0<=l?S<l:S>l;r=0<=l?++S:--S)A.push(t.readUInt16());return A}(),c=function(){var S,A;for(A=[],r=S=0;0<=l?S<l:S>l;r=0<=l?++S:--S)A.push(t.readUInt16());return A}(),u=function(){var S,A;for(A=[],r=S=0;0<=l?S<l:S>l;r=0<=l?++S:--S)A.push(t.readUInt16());return A}(),d=(this.length-t.pos+this.offset)/2,o=function(){var S,A;for(A=[],r=S=0;0<=d?S<d:S>d;r=0<=d?++S:--S)A.push(t.readUInt16());return A}(),r=m=0,x=p.length;m<x;r=++m)for(f=p[r],s=y=h=g[r];h<=f?y<=f:y>=f;s=h<=f?++y:--y)u[r]===0?v=s+c[r]:(v=o[u[r]/2+(s-h)-(l-r)]||0)!==0&&(v+=c[r]),this.codeMap[s]=65535&v}t.pos=a}return e.encode=function(t,i){var s,d,p,v,o,r,c,u,a,l,n,h,g,f,m,y,x,S,A,M,T,N,W,K,P,I,J,V,rt,at,dt,nt,E,z,$,k,D,F,O,U,G,tt,Q,ut,pt,St;switch(V=new On,v=Object.keys(t).sort(function(ot,st){return ot-st}),i){case"macroman":for(g=0,f=function(){var ot=[];for(h=0;h<256;++h)ot.push(0);return ot}(),y={0:0},p={},rt=0,E=v.length;rt<E;rt++)y[Q=t[d=v[rt]]]==null&&(y[Q]=++g),p[d]={old:t[d],new:y[t[d]]},f[d]=y[t[d]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(f),{charMap:p,subtable:V.data,maxGlyphID:g+1};case"unicode":for(I=[],a=[],x=0,y={},s={},m=c=null,at=0,z=v.length;at<z;at++)y[A=t[d=v[at]]]==null&&(y[A]=++x),s[d]={old:A,new:y[A]},o=y[A]-d,m!=null&&o===c||(m&&a.push(m),I.push(d),c=o),m=d;for(m&&a.push(m),a.push(65535),I.push(65535),K=2*(W=I.length),N=2*Math.pow(Math.log(W)/Math.LN2,2),l=Math.log(N/2)/Math.LN2,T=2*W-N,r=[],M=[],n=[],h=dt=0,$=I.length;dt<$;h=++dt){if(P=I[h],u=a[h],P===65535){r.push(0),M.push(0);break}if(P-(J=s[P].new)>=32768)for(r.push(0),M.push(2*(n.length+W-h)),d=nt=P;P<=u?nt<=u:nt>=u;d=P<=u?++nt:--nt)n.push(s[d].new);else r.push(J-P),M.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*W+2*n.length),V.writeUInt16(0),V.writeUInt16(K),V.writeUInt16(N),V.writeUInt16(l),V.writeUInt16(T),G=0,k=a.length;G<k;G++)d=a[G],V.writeUInt16(d);for(V.writeUInt16(0),tt=0,D=I.length;tt<D;tt++)d=I[tt],V.writeUInt16(d);for(ut=0,F=r.length;ut<F;ut++)o=r[ut],V.writeUInt16(o);for(pt=0,O=M.length;pt<O;pt++)S=M[pt],V.writeUInt16(S);for(St=0,U=n.length;St<U;St++)g=n[St],V.writeUInt16(g);return{charMap:s,subtable:V.data,maxGlyphID:x+1}}},e}(),cd=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="cmap",t.prototype.parse=function(i){var s,d,p;for(i.pos=this.offset,this.version=i.readUInt16(),p=i.readUInt16(),this.tables=[],this.unicode=null,d=0;0<=p?d<p:d>p;d=0<=p?++d:--d)s=new Ru(i,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(i,s){var d,p;return s==null&&(s="macroman"),d=Ru.encode(i,s),(p=new On).writeUInt16(0),p.writeUInt16(1),d.table=p.data.concat(d.subtable),d},t}(),$g=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="hhea",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},t}(),Kg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="OS/2",t.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var s,d;for(d=[],s=0;s<10;++s)d.push(i.readByte());return d}(),this.charRange=function(){var s,d;for(d=[],s=0;s<4;++s)d.push(i.readInt());return d}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var s,d;for(d=[],s=0;s<2;s=++s)d.push(i.readInt());return d}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},t}(),Jg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="post",t.prototype.parse=function(i){var s,d,p;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var v;for(d=i.readUInt16(),this.glyphNameIndex=[],v=0;0<=d?v<d:v>d;v=0<=d?++v:--v)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],p=[];i.pos<this.offset+this.length;)s=i.readByte(),p.push(this.names.push(i.readString(s)));return p;case 151552:return d=i.readUInt16(),this.offsets=i.read(d);case 196608:break;case 262144:return this.map=(function(){var o,r,c;for(c=[],v=o=0,r=this.file.maxp.numGlyphs;0<=r?o<r:o>r;v=0<=r?++o:--o)c.push(i.readUInt32());return c}).call(this)}},t}(),Zg=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Qg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="name",t.prototype.parse=function(i){var s,d,p,v,o,r,c,u,a,l,n;for(i.pos=this.offset,i.readShort(),s=i.readShort(),r=i.readShort(),d=[],v=0;0<=s?v<s:v>s;v=0<=s?++v:--v)d.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+r+i.readShort()});for(c={},v=a=0,l=d.length;a<l;v=++a)p=d[v],i.pos=p.offset,u=i.readString(p.length),o=new Zg(u,p),c[n=p.nameID]==null&&(c[n]=[]),c[p.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),t2=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="maxp",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},t}(),e2=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="hmtx",t.prototype.parse=function(i){var s,d,p,v,o,r,c;for(i.pos=this.offset,this.metrics=[],s=0,r=this.file.hhea.numberOfMetrics;0<=r?s<r:s>r;s=0<=r?++s:--s)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(p=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,a;for(a=[],s=u=0;0<=p?u<p:u>p;s=0<=p?++u:--u)a.push(i.readInt16());return a}(),this.widths=(function(){var u,a,l,n;for(n=[],u=0,a=(l=this.metrics).length;u<a;u++)v=l[u],n.push(v.advance);return n}).call(this),d=this.widths[this.widths.length-1],c=[],s=o=0;0<=p?o<p:o>p;s=0<=p?++o:--o)c.push(this.widths.push(d));return c},t.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},t}(),hd=[].slice,i2=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(i){var s,d,p,v,o,r,c,u,a,l;return i in this.cache?this.cache[i]:(v=this.file.loca,s=this.file.contents,d=v.indexOf(i),(p=v.lengthOf(i))===0?this.cache[i]=null:(s.pos=this.offset+d,o=(r=new On(s.read(p))).readShort(),u=r.readShort(),l=r.readShort(),c=r.readShort(),a=r.readShort(),this.cache[i]=o===-1?new n2(r,u,l,c,a):new r2(r,o,u,l,c,a),this.cache[i]))},t.prototype.encode=function(i,s,d){var p,v,o,r,c;for(o=[],v=[],r=0,c=s.length;r<c;r++)p=i[s[r]],v.push(o.length),p&&(o=o.concat(p.encode(d)));return v.push(o.length),{table:o,offsets:v}},t}(),r2=function(){function e(t,i,s,d,p,v){this.raw=t,this.numberOfContours=i,this.xMin=s,this.yMin=d,this.xMax=p,this.yMax=v,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),n2=function(){function e(t,i,s,d,p){var v,o;for(this.raw=t,this.xMin=i,this.yMin=s,this.xMax=d,this.yMax=p,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],v=this.raw;o=v.readShort(),this.glyphOffsets.push(v.pos),this.glyphIDs.push(v.readUInt16()),32&o;)v.pos+=1&o?4:2,128&o?v.pos+=8:64&o?v.pos+=4:8&o&&(v.pos+=2)}return e.prototype.encode=function(){var t,i,s;for(i=new On(hd.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)i.pos=this.glyphOffsets[t];return i.data},e}(),s2=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return zr(t,_r),t.prototype.tag="loca",t.prototype.parse=function(i){var s,d;return i.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var p,v;for(v=[],d=0,p=this.length;d<p;d+=2)v.push(2*i.readUInt16());return v}).call(this):(function(){var p,v;for(v=[],d=0,p=this.length;d<p;d+=4)v.push(i.readUInt32());return v}).call(this)},t.prototype.indexOf=function(i){return this.offsets[i]},t.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},t.prototype.encode=function(i,s){for(var d=new Uint32Array(this.offsets.length),p=0,v=0,o=0;o<d.length;++o)if(d[o]=p,v<s.length&&s[v]==o){++v,d[o]=p;var r=this.offsets[o],c=this.offsets[o+1]-r;c>0&&(p+=c)}for(var u=new Array(4*d.length),a=0;a<d.length;++a)u[4*a+3]=255&d[a],u[4*a+2]=(65280&d[a])>>8,u[4*a+1]=(16711680&d[a])>>16,u[4*a]=(4278190080&d[a])>>24;return u},t}(),a2=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,i,s,d,p;for(i in d=this.font.cmap.tables[0].codeMap,t={},p=this.subset)s=p[i],t[i]=d[s];return t},e.prototype.glyphsFor=function(t){var i,s,d,p,v,o,r;for(d={},v=0,o=t.length;v<o;v++)d[p=t[v]]=this.font.glyf.glyphFor(p);for(p in i=[],d)(s=d[p])!=null&&s.compound&&i.push.apply(i,s.glyphIDs);if(i.length>0)for(p in r=this.glyphsFor(i))s=r[p],d[p]=s;return d},e.prototype.encode=function(t,i){var s,d,p,v,o,r,c,u,a,l,n,h,g,f,m;for(d in s=cd.encode(this.generateCmap(),"unicode"),v=this.glyphsFor(t),n={0:0},m=s.charMap)n[(r=m[d]).old]=r.new;for(h in l=s.maxGlyphID,v)h in n||(n[h]=l++);return u=function(y){var x,S;for(x in S={},y)S[y[x]]=x;return S}(n),a=Object.keys(u).sort(function(y,x){return y-x}),g=function(){var y,x,S;for(S=[],y=0,x=a.length;y<x;y++)o=a[y],S.push(u[o]);return S}(),p=this.font.glyf.encode(v,g,n),c=this.font.loca.encode(p.offsets,g),f={cmap:this.font.cmap.raw(),glyf:p.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();Jt.API.PDFObject=function(){var e;function t(){}return e=function(i,s){return(Array(s+1).join("0")+i).slice(-s)},t.convert=function(i){var s,d,p,v;if(Array.isArray(i))return"["+function(){var o,r,c;for(c=[],o=0,r=i.length;o<r;o++)s=i[o],c.push(t.convert(s));return c}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i!=null&&i.isString)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(d in p=["<<"],i)v=i[d],p.push("/"+d+" "+t.convert(v));return p.push(">>"),p.join(`
`)}return""+i},t}();/*! https://mths.be/cssesc v3.0.0 by @mathias */var o2={},l2=o2.hasOwnProperty,c2=function(t,i){if(!t)return i;var s={};for(var d in i)s[d]=l2.call(t,d)?t[d]:i[d];return s},h2=/[ -,\.\/:-@\[-\^`\{-~]/,u2=/[ -,\.\/:-@\[\]\^`\{-~]/,f2=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,_h=function e(t,i){i=c2(i,e.options),i.quotes!="single"&&i.quotes!="double"&&(i.quotes="single");for(var s=i.quotes=="double"?'"':"'",d=i.isIdentifier,p=t.charAt(0),v="",o=0,r=t.length;o<r;){var c=t.charAt(o++),u=c.charCodeAt(),a=void 0;if(u<32||u>126){if(u>=55296&&u<=56319&&o<r){var l=t.charCodeAt(o++);(l&64512)==56320?u=((u&1023)<<10)+(l&1023)+65536:o--}a="\\"+u.toString(16).toUpperCase()+" "}else i.escapeEverything?h2.test(c)?a="\\"+c:a="\\"+u.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(c)?a="\\"+u.toString(16).toUpperCase()+" ":c=="\\"||!d&&(c=='"'&&s==c||c=="'"&&s==c)||d&&u2.test(c)?a="\\"+c:a=c;v+=a}return d&&(/^-[-\d]/.test(v)?v="\\-"+v.slice(1):/\d/.test(p)&&(v="\\3"+p+" "+v.slice(1))),v=v.replace(f2,function(n,h,g){return h&&h.length%2?n:(h||"")+g}),!d&&i.wrap?s+v+s:v};_h.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};_h.version="3.0.0";var d2=_h;const ud=ch(d2);var qa=0,Ic=1,zu=2,el=3,qu=4,Uu=5,Wu=6,jc=/[a-z0-9_-]/i,il=/[\s\t]/,p2=function(e){for(var t=!0,i=qa,s="",d=0,p,v,o=[];;){if(v=e[d],i===qa){if(!v&&t)break;if(!v&&!t)throw new Error("Parse error");if(v==='"'||v==="'")p=v,i=Ic,t=!1;else if(!il.test(v))if(jc.test(v))i=el,t=!1,d--;else throw new Error("Parse error")}else if(i===Ic)if(v)v==="\\"?i=zu:v===p?(o.push(s),s="",i=qu):s+=v;else throw new Error("Parse Error");else if(i===zu)if(v===p||v==="\\")s+=v,i=Ic;else throw new Error("Parse error");else if(i===el)if(v)jc.test(v)?s+=v:v===","?(o.push(s),s="",i=qa):il.test(v)?i=Uu:v==="\\"&&(i=Wu);else{o.push(s);break}else if(i===Wu){if(/[0-9a-f]/i.test(v))throw new Error("Parse error");s+=v,i=el}else if(i===Uu)if(v){if(jc.test(v))s+=" "+v,i=el;else if(v===",")o.push(s),s="",i=qa;else if(!il.test(v))throw new Error("Parse error")}else{o.push(s);break}else if(i===qu)if(v){if(v===",")i=qa;else if(!il.test(v))throw new Error("Parse error")}else break;d++}return o},g2=/[^a-z0-9_-]/i,m2=function(e,t){var i=t&&t.quote||'"';if(i!=='"'&&i!=="'")throw new Error("Quote must be `'` or `\"`");for(var s=new RegExp(i,"g"),d=[],p=0;p<e.length;++p){var v=e[p];g2.test(v)&&(v=v.replace(/\\/g,"\\\\").replace(s,"\\"+i),v=i+v+i),d.push(v)}return d.join(", ")},v2={parse:p2,stringify:m2};const b2=ch(v2);var cl={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},y2=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function w2(e){return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&y2.indexOf(e)>=0}function x2(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function _2(e){return(e|32)===97}function Rs(e){return e>=48&&e<=57}function S2(e){return e>=48&&e<=57||e===43||e===45||e===46}function C2(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function hl(e){for(;e.index<e.max&&w2(e.path.charCodeAt(e.index));)e.index++}function A2(e){var t=e.path.charCodeAt(e.index);if(t===48){e.param=0,e.index++;return}if(t===49){e.param=1,e.index++;return}e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")"}function k2(e){var t=e.index,i=t,s=e.max,d=!1,p=!1,v=!1,o=!1,r;if(i>=s){e.err="SvgPath: missed param (at pos "+i+")";return}if(r=e.path.charCodeAt(i),(r===43||r===45)&&(i++,r=i<s?e.path.charCodeAt(i):0),!Rs(r)&&r!==46){e.err="SvgPath: param should start with 0..9 or `.` (at pos "+i+")";return}if(r!==46){if(d=r===48,i++,r=i<s?e.path.charCodeAt(i):0,d&&i<s&&r&&Rs(r)){e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+t+")";return}for(;i<s&&Rs(e.path.charCodeAt(i));)i++,p=!0;r=i<s?e.path.charCodeAt(i):0}if(r===46){for(o=!0,i++;Rs(e.path.charCodeAt(i));)i++,v=!0;r=i<s?e.path.charCodeAt(i):0}if(r===101||r===69){if(o&&!p&&!v){e.err="SvgPath: invalid float exponent (at pos "+i+")";return}if(i++,r=i<s?e.path.charCodeAt(i):0,(r===43||r===45)&&i++,i<s&&Rs(e.path.charCodeAt(i)))for(;i<s&&Rs(e.path.charCodeAt(i));)i++;else{e.err="SvgPath: invalid float exponent (at pos "+i+")";return}}e.index=i,e.param=parseFloat(e.path.slice(t,i))+0}function Dc(e){var t,i;t=e.path[e.segmentStart],i=t.toLowerCase();var s=e.data;if(i==="m"&&s.length>2&&(e.result.push([t,s[0],s[1]]),s=s.slice(2),i="l",t=t==="m"?"l":"L"),i==="r")e.result.push([t].concat(s));else for(;s.length>=cl[i]&&(e.result.push([t].concat(s.splice(0,cl[i]))),!!cl[i]););}function L2(e){var t=e.max,i,s,d,p,v;if(e.segmentStart=e.index,i=e.path.charCodeAt(e.index),s=_2(i),!x2(i)){e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")";return}if(p=cl[e.path[e.index].toLowerCase()],e.index++,hl(e),e.data=[],!p){Dc(e);return}for(d=!1;;){for(v=p;v>0;v--){if(s&&(v===3||v===4)?A2(e):k2(e),e.err.length){Dc(e);return}e.data.push(e.param),hl(e),d=!1,e.index<t&&e.path.charCodeAt(e.index)===44&&(e.index++,hl(e),d=!0)}if(!d&&(e.index>=e.max||!S2(e.path.charCodeAt(e.index))))break}Dc(e)}var T2=function(t){var i=new C2(t),s=i.max;for(hl(i);i.index<s&&!i.err.length;)L2(i);return i.result.length&&("mM".indexOf(i.result[0][0])<0?(i.err="SvgPath: string should start with `M` or `m`",i.result=[]):i.result[0][0]="M"),{err:i.err,segments:i.result}};function P2(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function wr(){if(!(this instanceof wr))return new wr;this.queue=[],this.cache=null}wr.prototype.matrix=function(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0?this:(this.cache=null,this.queue.push(e),this)};wr.prototype.translate=function(e,t){return(e!==0||t!==0)&&(this.cache=null,this.queue.push([1,0,0,1,e,t])),this};wr.prototype.scale=function(e,t){return(e!==1||t!==1)&&(this.cache=null,this.queue.push([e,0,0,t,0,0])),this};wr.prototype.rotate=function(e,t,i){var s,d,p;return e!==0&&(this.translate(t,i),s=e*Math.PI/180,d=Math.cos(s),p=Math.sin(s),this.queue.push([d,p,-p,d,0,0]),this.cache=null,this.translate(-t,-i)),this};wr.prototype.skewX=function(e){return e!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this};wr.prototype.skewY=function(e){return e!==0&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this};wr.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=P2(this.cache,this.queue[e]);return this.cache};wr.prototype.calc=function(e,t,i){var s;return this.queue.length?(this.cache||(this.cache=this.toArray()),s=this.cache,[e*s[0]+t*s[2]+(i?0:s[4]),e*s[1]+t*s[3]+(i?0:s[5])]):[e,t]};var fd=wr,O2=fd,M2={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},N2=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,F2=/[\s,]+/,E2=function(t){var i=new O2,s,d;return t.split(N2).forEach(function(p){if(p.length){if(typeof M2[p]<"u"){s=p;return}switch(d=p.split(F2).map(function(v){return+v||0}),s){case"matrix":d.length===6&&i.matrix(d);return;case"scale":d.length===1?i.scale(d[0],d[0]):d.length===2&&i.scale(d[0],d[1]);return;case"rotate":d.length===1?i.rotate(d[0],0,0):d.length===3&&i.rotate(d[0],d[1],d[2]);return;case"translate":d.length===1?i.translate(d[0],0):d.length===2&&i.translate(d[0],d[1]);return;case"skewX":d.length===1&&i.skewX(d[0]);return;case"skewY":d.length===1&&i.skewY(d[0]);return}}}),i},Ya=Math.PI*2;function Hu(e,t,i,s){var d=e*s-t*i<0?-1:1,p=e*i+t*s;return p>1&&(p=1),p<-1&&(p=-1),d*Math.acos(p)}function I2(e,t,i,s,d,p,v,o,r,c){var u=c*(e-i)/2+r*(t-s)/2,a=-r*(e-i)/2+c*(t-s)/2,l=v*v,n=o*o,h=u*u,g=a*a,f=l*n-l*g-n*h;f<0&&(f=0),f/=l*g+n*h,f=Math.sqrt(f)*(d===p?-1:1);var m=f*v/o*a,y=f*-o/v*u,x=c*m-r*y+(e+i)/2,S=r*m+c*y+(t+s)/2,A=(u-m)/v,M=(a-y)/o,T=(-u-m)/v,N=(-a-y)/o,W=Hu(1,0,A,M),K=Hu(A,M,T,N);return p===0&&K>0&&(K-=Ya),p===1&&K<0&&(K+=Ya),[x,S,W,K]}function j2(e,t){var i=1.3333333333333333*Math.tan(t/4),s=Math.cos(e),d=Math.sin(e),p=Math.cos(e+t),v=Math.sin(e+t);return[s,d,s-d*i,d+s*i,p+v*i,v-p*i,p,v]}var D2=function(t,i,s,d,p,v,o,r,c){var u=Math.sin(c*Ya/360),a=Math.cos(c*Ya/360),l=a*(t-s)/2+u*(i-d)/2,n=-u*(t-s)/2+a*(i-d)/2;if(l===0&&n===0)return[];if(o===0||r===0)return[];o=Math.abs(o),r=Math.abs(r);var h=l*l/(o*o)+n*n/(r*r);h>1&&(o*=Math.sqrt(h),r*=Math.sqrt(h));var g=I2(t,i,s,d,p,v,o,r,u,a),f=[],m=g[2],y=g[3],x=Math.max(Math.ceil(Math.abs(y)/(Ya/4)),1);y/=x;for(var S=0;S<x;S++)f.push(j2(m,y)),m+=y;return f.map(function(A){for(var M=0;M<A.length;M+=2){var T=A[M+0],N=A[M+1];T*=o,N*=r;var W=a*T-u*N,K=u*T+a*N;A[M+0]=W+g[0],A[M+1]=K+g[1]}return A})},Va=1e-10,Yu=Math.PI/180;function Ka(e,t,i){if(!(this instanceof Ka))return new Ka(e,t,i);this.rx=e,this.ry=t,this.ax=i}Ka.prototype.transform=function(e){var t=Math.cos(this.ax*Yu),i=Math.sin(this.ax*Yu),s=[this.rx*(e[0]*t+e[2]*i),this.rx*(e[1]*t+e[3]*i),this.ry*(-e[0]*i+e[2]*t),this.ry*(-e[1]*i+e[3]*t)],d=s[0]*s[0]+s[2]*s[2],p=s[1]*s[1]+s[3]*s[3],v=((s[0]-s[3])*(s[0]-s[3])+(s[2]+s[1])*(s[2]+s[1]))*((s[0]+s[3])*(s[0]+s[3])+(s[2]-s[1])*(s[2]-s[1])),o=(d+p)/2;if(v<Va*o)return this.rx=this.ry=Math.sqrt(o),this.ax=0,this;var r=s[0]*s[1]+s[2]*s[3];v=Math.sqrt(v);var c=o+v/2,u=o-v/2;return this.ax=Math.abs(r)<Va&&Math.abs(c-p)<Va?90:Math.atan(Math.abs(r)>Math.abs(c-p)?(c-d)/r:r/(c-p))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)):(this.ax+=90,this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)),this};Ka.prototype.isDegenerate=function(){return this.rx<Va*this.ry||this.ry<Va*this.rx};var B2=Ka,R2=T2,z2=E2,En=fd,q2=D2,U2=B2;function ze(e){if(!(this instanceof ze))return new ze(e);var t=R2(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}ze.from=function(e){if(typeof e=="string")return new ze(e);if(e instanceof ze){var t=new ze("");return t.err=e.err,t.segments=e.segments.map(function(i){return i.slice()}),t.__stack=e.__stack.map(function(i){return En().matrix(i.toArray())}),t}throw new Error("SvgPath.from: invalid param type "+e)};ze.prototype.__matrix=function(e){var t=this,i;e.queue.length&&this.iterate(function(s,d,p,v){var o,r,c,u;switch(s[0]){case"v":o=e.calc(0,s[1],!0),r=o[0]===0?["v",o[1]]:["l",o[0],o[1]];break;case"V":o=e.calc(p,s[1],!1),r=o[0]===e.calc(p,v,!1)[0]?["V",o[1]]:["L",o[0],o[1]];break;case"h":o=e.calc(s[1],0,!0),r=o[1]===0?["h",o[0]]:["l",o[0],o[1]];break;case"H":o=e.calc(s[1],v,!1),r=o[1]===e.calc(p,v,!1)[1]?["H",o[0]]:["L",o[0],o[1]];break;case"a":case"A":var a=e.toArray(),l=U2(s[1],s[2],s[3]).transform(a);if(a[0]*a[3]-a[1]*a[2]<0&&(s[5]=s[5]?"0":"1"),o=e.calc(s[6],s[7],s[0]==="a"),s[0]==="A"&&s[6]===p&&s[7]===v||s[0]==="a"&&s[6]===0&&s[7]===0){r=[s[0]==="a"?"l":"L",o[0],o[1]];break}l.isDegenerate()?r=[s[0]==="a"?"l":"L",o[0],o[1]]:r=[s[0],l.rx,l.ry,l.ax,s[4],s[5],o[0],o[1]];break;case"m":u=d>0,o=e.calc(s[1],s[2],u),r=["m",o[0],o[1]];break;default:for(c=s[0],r=[c],u=c.toLowerCase()===c,i=1;i<s.length;i+=2)o=e.calc(s[i],s[i+1],u),r.push(o[0],o[1])}t.segments[d]=r},!0)};ze.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(e=En(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}};ze.prototype.toString=function(){var e="",t="",i=!1;this.__evaluateStack();for(var s=0,d=this.segments.length;s<d;s++){var p=this.segments[s],v=p[0];v!==t||v==="m"||v==="M"?(v==="m"&&t==="z"&&(e+=" "),e+=v,i=!1):i=!0;for(var o=1;o<p.length;o++){var r=p[o];o===1?i&&r>=0&&(e+=" "):r>=0&&(e+=" "),e+=r}t=v}return e};ze.prototype.translate=function(e,t){return this.__stack.push(En().translate(e,t||0)),this};ze.prototype.scale=function(e,t){return this.__stack.push(En().scale(e,!t&&t!==0?e:t)),this};ze.prototype.rotate=function(e,t,i){return this.__stack.push(En().rotate(e,t||0,i||0)),this};ze.prototype.skewX=function(e){return this.__stack.push(En().skewX(e)),this};ze.prototype.skewY=function(e){return this.__stack.push(En().skewY(e)),this};ze.prototype.matrix=function(e){return this.__stack.push(En().matrix(e)),this};ze.prototype.transform=function(e){return e.trim()?(this.__stack.push(z2(e)),this):this};ze.prototype.round=function(e){var t=0,i=0,s=0,d=0,p;return e=e||0,this.__evaluateStack(),this.segments.forEach(function(v){var o=v[0].toLowerCase()===v[0];switch(v[0]){case"H":case"h":o&&(v[1]+=s),s=v[1]-v[1].toFixed(e),v[1]=+v[1].toFixed(e);return;case"V":case"v":o&&(v[1]+=d),d=v[1]-v[1].toFixed(e),v[1]=+v[1].toFixed(e);return;case"Z":case"z":s=t,d=i;return;case"M":case"m":o&&(v[1]+=s,v[2]+=d),s=v[1]-v[1].toFixed(e),d=v[2]-v[2].toFixed(e),t=s,i=d,v[1]=+v[1].toFixed(e),v[2]=+v[2].toFixed(e);return;case"A":case"a":o&&(v[6]+=s,v[7]+=d),s=v[6]-v[6].toFixed(e),d=v[7]-v[7].toFixed(e),v[1]=+v[1].toFixed(e),v[2]=+v[2].toFixed(e),v[3]=+v[3].toFixed(e+2),v[6]=+v[6].toFixed(e),v[7]=+v[7].toFixed(e);return;default:p=v.length,o&&(v[p-2]+=s,v[p-1]+=d),s=v[p-2]-v[p-2].toFixed(e),d=v[p-1]-v[p-1].toFixed(e),v.forEach(function(r,c){c&&(v[c]=+v[c].toFixed(e))});return}}),this};ze.prototype.iterate=function(e,t){var i=this.segments,s={},d=!1,p=0,v=0,o=0,r=0,c,u,a;if(t||this.__evaluateStack(),i.forEach(function(l,n){var h=e(l,n,p,v);Array.isArray(h)&&(s[n]=h,d=!0);var g=l[0]===l[0].toLowerCase();switch(l[0]){case"m":case"M":p=l[1]+(g?p:0),v=l[2]+(g?v:0),o=p,r=v;return;case"h":case"H":p=l[1]+(g?p:0);return;case"v":case"V":v=l[1]+(g?v:0);return;case"z":case"Z":p=o,v=r;return;default:p=l[l.length-2]+(g?p:0),v=l[l.length-1]+(g?v:0)}}),!d)return this;for(a=[],c=0;c<i.length;c++)if(typeof s[c]<"u")for(u=0;u<s[c].length;u++)a.push(s[c][u]);else a.push(i[c]);return this.segments=a,this};ze.prototype.abs=function(){return this.iterate(function(e,t,i,s){var d=e[0],p=d.toUpperCase(),v;if(d!==p)switch(e[0]=p,d){case"v":e[1]+=s;return;case"a":e[6]+=i,e[7]+=s;return;default:for(v=1;v<e.length;v++)e[v]+=v%2?i:s}},!0),this};ze.prototype.rel=function(){return this.iterate(function(e,t,i,s){var d=e[0],p=d.toLowerCase(),v;if(d!==p&&!(t===0&&d==="M"))switch(e[0]=p,d){case"V":e[1]-=s;return;case"A":e[6]-=i,e[7]-=s;return;default:for(v=1;v<e.length;v++)e[v]-=v%2?i:s}},!0),this};ze.prototype.unarc=function(){return this.iterate(function(e,t,i,s){var d,p,v,o=[],r=e[0];return r!=="A"&&r!=="a"?null:(r==="a"?(p=i+e[6],v=s+e[7]):(p=e[6],v=e[7]),d=q2(i,s,p,v,e[4],e[5],e[1],e[2],e[3]),d.length===0?[[e[0]==="a"?"l":"L",e[6],e[7]]]:(d.forEach(function(c){o.push(["C",c[2],c[3],c[4],c[5],c[6],c[7]])}),o))}),this};ze.prototype.unshort=function(){var e=this.segments,t,i,s,d,p;return this.iterate(function(v,o,r,c){var u=v[0],a=u.toUpperCase(),l;o&&(a==="T"?(l=u==="t",s=e[o-1],s[0]==="Q"?(t=s[1]-r,i=s[2]-c):s[0]==="q"?(t=s[1]-s[3],i=s[2]-s[4]):(t=0,i=0),d=-t,p=-i,l||(d+=r,p+=c),e[o]=[l?"q":"Q",d,p,v[1],v[2]]):a==="S"&&(l=u==="s",s=e[o-1],s[0]==="C"?(t=s[3]-r,i=s[4]-c):s[0]==="c"?(t=s[3]-s[5],i=s[4]-s[6]):(t=0,i=0),d=-t,p=-i,l||(d+=r,p+=c),e[o]=[l?"c":"C",d,p,v[1],v[2],v[3],v[4]]))}),this};var W2=ze,H2=W2;const Y2=ch(H2);var Vu=function(e){var t=e,i,s={a:0,b:0,c:0},d=[],p=/(\[[^\]]+\])/g,v=/(#[^\#\s\+>~\.\[:\)]+)/g,o=/(\.[^\s\+>~\.\[:\)]+)/g,r=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,u=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,a=/([^\s\+>~\.\[:]+)/g;return i=function(l,n){var h,g,f,m,y,x;if(l.test(t))for(h=t.match(l),g=0,f=h.length;g<f;g+=1)s[n]+=1,m=h[g],y=t.indexOf(m),x=m.length,d.push({selector:e.substr(y,x),type:n,index:y,length:x}),t=t.replace(m,Array(x+1).join(" "))},function(){var l=function(f){var m,y,x,S;if(f.test(t))for(m=t.match(f),y=0,x=m.length;y<x;y+=1)S=m[y],t=t.replace(S,Array(S.length+1).join("A"))},n=/\\[0-9A-Fa-f]{6}\s?/g,h=/\\[0-9A-Fa-f]{1,5}\s/g,g=/\\./g;l(n),l(h),l(g)}(),function(){var l=/{[^]*/gm,n,h,g,f;if(l.test(t))for(n=t.match(l),h=0,g=n.length;h<g;h+=1)f=n[h],t=t.replace(f,Array(f.length+1).join(" "))}(),i(p,"b"),i(v,"a"),i(o,"b"),i(r,"c"),i(c,"b"),i(u,"b"),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),t=t.replace(/:not/g,"    "),t=t.replace(/:local/g,"      "),t=t.replace(/:global/g,"       "),t=t.replace(/[\(\)]/g," "),i(a,"c"),d.sort(function(l,n){return l.index-n.index}),{selector:e,specificity:"0,"+s.a.toString()+","+s.b.toString()+","+s.c.toString(),specificityArray:[0,s.a,s.b,s.c],parts:d}},V2=function(e,t){var i,s,d;if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";i=Vu(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(p){return typeof p=="number"}).length!==4)throw"Invalid specificity array";i=e}else throw"Invalid CSS selector or specificity array";if(typeof t=="string"){if(t.indexOf(",")!==-1)throw"Invalid CSS selector";s=Vu(t).specificityArray}else if(Array.isArray(t)){if(t.filter(function(p){return typeof p=="number"}).length!==4)throw"Invalid specificity array";s=t}else throw"Invalid CSS selector or specificity array";for(d=0;d<4;d+=1){if(i[d]<s[d])return-1;if(i[d]>s[d])return 1}return 0},sh=function(e,t){return sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(i[d]=s[d])},sh(e,t)};function Te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}sh(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var vl=function(){return vl=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var d in t=arguments[i])Object.prototype.hasOwnProperty.call(t,d)&&(e[d]=t[d]);return e},vl.apply(this,arguments)};function Ne(e,t,i,s){return new(i||(i=Promise))(function(d,p){function v(c){try{r(s.next(c))}catch(u){p(u)}}function o(c){try{r(s.throw(c))}catch(u){p(u)}}function r(c){var u;c.done?d(c.value):(u=c.value,u instanceof i?u:new i(function(a){a(u)})).then(v,o)}r((s=s.apply(e,t||[])).next())})}function Fe(e,t){var i,s,d,p,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return p={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function o(r){return function(c){return function(u){if(i)throw new TypeError("Generator is already executing.");for(;v;)try{if(i=1,s&&(d=2&u[0]?s.return:u[0]?s.throw||((d=s.return)&&d.call(s),0):s.next)&&!(d=d.call(s,u[1])).done)return d;switch(s=0,d&&(u=[2&u[0],d.value]),u[0]){case 0:case 1:d=u;break;case 4:return v.label++,{value:u[1],done:!1};case 5:v.label++,s=u[1],u=[0];continue;case 7:u=v.ops.pop(),v.trys.pop();continue;default:if(d=v.trys,!((d=d.length>0&&d[d.length-1])||u[0]!==6&&u[0]!==2)){v=0;continue}if(u[0]===3&&(!d||u[1]>d[0]&&u[1]<d[3])){v.label=u[1];break}if(u[0]===6&&v.label<d[1]){v.label=d[1],d=u;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(u);break}d[2]&&v.ops.pop(),v.trys.pop();continue}u=t.call(e,v)}catch(a){u=[6,a],s=0}finally{i=d=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([r,c])}}}var vr=function(){function e(t){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,t){for(var i in t.charAt(0)=="#"&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)t==i&&(t=this.simpleColors[i]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(r){return[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]}},{re:/^rgb\(([0-9.]+)%,\s*([0-9.]+)%,\s*([0-9.]+)%\)$/,example:["rgb(50.5%, 25.75%, 75.5%)","rgb(100%,0%,0%)"],process:function(r){return[Math.round(2.55*parseFloat(r[1])),Math.round(2.55*parseFloat(r[2])),Math.round(2.55*parseFloat(r[3]))]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(r){return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(r){return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]}}];for(var s=0;s<this.colorDefs.length;s++){var d=this.colorDefs[s].re,p=this.colorDefs[s].process,v=d.exec(t);if(v){var o=p(v);this.r=o[0],this.g=o[1],this.b=o[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return e.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},e.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},e.prototype.toHex=function(){var t=this.r.toString(16),i=this.g.toString(16),s=this.b.toString(16);return t.length==1&&(t="0"+t),i.length==1&&(i="0"+i),s.length==1&&(s="0"+s),"#"+t+i+s},e.prototype.getHelpXML=function(){for(var t=[],i=0;i<this.colorDefs.length;i++)for(var s=this.colorDefs[i].example,d=0;d<s.length;d++)t[t.length]=s[d];for(var p in this.simpleColors)t[t.length]=p;var v=document.createElement("ul");for(v.setAttribute("id","rgbcolor-examples"),i=0;i<t.length;i++)try{var o=document.createElement("li"),r=new e(t[i]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+r.toHex()+"; color:"+r.toHex(),c.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+t[i]+" -> "+r.toRGB()+" -> "+r.toHex());o.appendChild(c),o.appendChild(u),v.appendChild(o)}catch{}return v},e}(),mi=function(){function e(t){this.color=t}return e.prototype.getFillData=function(t,i){return Ne(this,void 0,void 0,function(){return Fe(this,function(s){return[2,void 0]})})},e}(),ra=function(){function e(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null,this.contextFill=null,this.contextStroke=null,this.fillRule=null}return e.prototype.clone=function(){var t=new e;return t.xmlSpace=this.xmlSpace,t.fill=this.fill,t.fillOpacity=this.fillOpacity,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.fontStyle=this.fontStyle,t.fontWeight=this.fontWeight,t.opacity=this.opacity,t.stroke=this.stroke,t.strokeDasharray=this.strokeDasharray,t.strokeDashoffset=this.strokeDashoffset,t.strokeLinecap=this.strokeLinecap,t.strokeLinejoin=this.strokeLinejoin,t.strokeMiterlimit=this.strokeMiterlimit,t.strokeOpacity=this.strokeOpacity,t.strokeWidth=this.strokeWidth,t.textAnchor=this.textAnchor,t.alignmentBaseline=this.alignmentBaseline,t.visibility=this.visibility,t.color=this.color,t.fillRule=this.fillRule,t.contextFill=this.contextFill,t.contextStroke=this.contextStroke,t},e.default=function(){var t=new e;return t.xmlSpace="default",t.fill=new mi(new vr("rgb(0, 0, 0)")),t.fillOpacity=1,t.fontFamily="times",t.fontSize=16,t.fontStyle="normal",t.fontWeight="normal",t.opacity=1,t.stroke=null,t.strokeDasharray=null,t.strokeDashoffset=0,t.strokeLinecap="butt",t.strokeLinejoin="miter",t.strokeMiterlimit=4,t.strokeOpacity=1,t.strokeWidth=1,t.alignmentBaseline="baseline",t.textAnchor="start",t.visibility="visible",t.color=new vr("rgb(0, 0, 0)"),t.fillRule="nonzero",t.contextFill=null,t.contextStroke=null,t},e.getContextColors=function(t,i){i===void 0&&(i=!1);var s={};return t.attributeState.contextFill&&(s.contextFill=t.attributeState.contextFill),t.attributeState.contextStroke&&(s.contextStroke=t.attributeState.contextStroke),i&&t.attributeState.color&&(s.color=t.attributeState.color),s},e}(),In=function(){function e(t,i){var s,d,p;this.pdf=t,this.svg2pdfParameters=i.svg2pdfParameters,this.attributeState=i.attributeState?i.attributeState.clone():ra.default(),this.viewport=i.viewport,this.refsHandler=i.refsHandler,this.styleSheets=i.styleSheets,this.textMeasure=i.textMeasure,this.transform=(s=i.transform)!==null&&s!==void 0?s:this.pdf.unitMatrix,this.withinClipPath=(d=i.withinClipPath)!==null&&d!==void 0&&d,this.withinUse=(p=i.withinUse)!==null&&p!==void 0&&p}return e.prototype.clone=function(t){var i,s,d,p;return t===void 0&&(t={}),new e(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:t.attributeState?t.attributeState.clone():this.attributeState.clone(),viewport:(i=t.viewport)!==null&&i!==void 0?i:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(s=t.transform)!==null&&s!==void 0?s:this.transform,withinClipPath:(d=t.withinClipPath)!==null&&d!==void 0?d:this.withinClipPath,withinUse:(p=t.withinUse)!==null&&p!==void 0?p:this.withinUse})},e}(),dd=function(){function e(t){this.renderedElements={},this.idMap=t,this.idPrefix=String(e.instanceCounter++)}return e.prototype.getRendered=function(t,i,s){return Ne(this,void 0,void 0,function(){var d,p;return Fe(this,function(v){switch(v.label){case 0:return d=this.generateKey(t,i),this.renderedElements.hasOwnProperty(d)?[2,this.renderedElements[t]]:(p=this.get(t),this.renderedElements[d]=p,[4,s(p)]);case 1:return v.sent(),[2,p]}})})},e.prototype.get=function(t){return this.idMap[ud(t,{isIdentifier:!0})]},e.prototype.generateKey=function(t,i){var s="";return i&&(s=["color","contextFill","contextStroke"].map(function(d){var p,v;return(v=(p=i[d])===null||p===void 0?void 0:p.toRGBA())!==null&&v!==void 0?v:""}).join("|")),this.idPrefix+"|"+t+"|"+s},e.instanceCounter=0,e}();function Xu(e,t){return Math.atan2(t[1]-e[1],t[0]-e[0])}var Gu=2/3;function $u(e,t){return[Gu*(t[0]-e[0])+e[0],Gu*(t[1]-e[1])+e[1]]}function Ua(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function zs(e,t){return Ua([t[0]-e[0],t[1]-e[1]])}function rl(e,t){return[e[0]+t[0],e[1]+t[1]]}function Bc(e,t){var i=e[0],s=e[1];return[t.a*i+t.c*s+t.e,t.b*i+t.d*s+t.f]}var na=function(){function e(){this.segments=[]}return e.prototype.moveTo=function(t,i){return this.segments.push(new hi(t,i)),this},e.prototype.lineTo=function(t,i){return this.segments.push(new Ln(t,i)),this},e.prototype.curveTo=function(t,i,s,d,p,v){return this.segments.push(new Er(t,i,s,d,p,v)),this},e.prototype.close=function(){return this.segments.push(new ah),this},e.prototype.transform=function(t){this.segments.forEach(function(i){if(i instanceof hi||i instanceof Ln||i instanceof Er){var s=Bc([i.x,i.y],t);i.x=s[0],i.y=s[1]}if(i instanceof Er){var d=Bc([i.x1,i.y1],t),p=Bc([i.x2,i.y2],t);i.x1=d[0],i.y1=d[1],i.x2=p[0],i.y2=p[1]}})},e.prototype.draw=function(t){var i=t.pdf;this.segments.forEach(function(s){s instanceof hi?i.moveTo(s.x,s.y):s instanceof Ln?i.lineTo(s.x,s.y):s instanceof Er?i.curveTo(s.x1,s.y1,s.x2,s.y2,s.x,s.y):i.close()})},e}(),hi=function(e,t){this.x=e,this.y=t},Ln=function(e,t){this.x=e,this.y=t},Er=function(e,t,i,s,d,p){this.x1=e,this.y1=t,this.x2=i,this.y2=s,this.x=d,this.y=p},ah=function(){};function Mn(e,t){return t.split(",").indexOf((e.nodeName||e.tagName).toLowerCase())>=0}function Et(e,t,i,s){var d;s===void 0&&(s=i);var p=(d=e.style)===null||d===void 0?void 0:d.getPropertyValue(s);if(p)return p;var v=t.getPropertyValue(e,s);return v||e.hasAttribute(i)&&e.getAttribute(i)||void 0}function ln(e,t,i){if(Et(e.element,i.styleSheets,"display")==="none")return!1;var s=t,d=Et(e.element,i.styleSheets,"visibility");return d&&(s=d!=="hidden"),s}function jn(e,t,i){var s=ln(e,t,i);return e.element.childNodes.length!==0&&(e.children.forEach(function(d){d.isVisible(s,i)&&(s=!0)}),s)}var X2=function(){function e(){this.markers=[]}return e.prototype.addMarker=function(t){this.markers.push(t)},e.prototype.draw=function(t){return Ne(this,void 0,void 0,function(){var i,s,d,p,v,o,r,c;return Fe(this,function(u){switch(u.label){case 0:i=0,u.label=1;case 1:return i<this.markers.length?(s=this.markers[i],d=void 0,p=s.angle,v=s.anchor,o=Math.cos(p),r=Math.sin(p),d=t.pdf.Matrix(o,r,-r,o,v[0],v[1]),d=t.pdf.matrixMult(t.pdf.Matrix(t.attributeState.strokeWidth,0,0,t.attributeState.strokeWidth,0,0),d),d=t.pdf.matrixMult(d,t.transform),t.pdf.saveGraphicsState(),c=ra.getContextColors(t),[4,t.refsHandler.getRendered(s.id,c,function(a){return a.apply(t)})]):[3,4];case 2:u.sent(),t.pdf.doFormObject(t.refsHandler.generateKey(s.id,c),d),t.pdf.restoreGraphicsState(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e}(),An=function(e,t,i,s){s===void 0&&(s=!1),this.id=e,this.anchor=t,this.angle=i,this.isStartMarker=s},Sh=/url\(["']?#([^"']+)["']?\)/,G2={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"},Ku="http://www.w3.org/2000/svg";function rn(e,t){var i;return(i=e&&e.toString().match(/^([\-0-9.]+)em$/))?parseFloat(i[1])*t:(i=e&&e.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(i[1]):0}function pd(e){return G2[e]||"alphabetic"}function Qi(e){for(var t,i=[],s=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;t=s.exec(e);)i.push(parseFloat(t[0]));return i}function Js(e,t){if(e==="transparent"){var i=new vr("rgb(0,0,0)");return i.a=0,i}if(t&&e.toLowerCase()==="currentcolor")return t.color||new vr("rgb(0,0,0)");if(t&&e.toLowerCase()==="context-stroke")return t.contextStroke||new vr("rgb(0,0,0)");if(t&&e.toLowerCase()==="context-fill")return t.contextFill||new vr("rgb(0,0,0)");var s=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(e);if(s){var d=Qi(s[1]),p=new vr("rgb("+d.slice(0,3).join(",")+")");return p.a=d[3],p}return new vr(e)}var sn={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},Rc,$2=(Rc=Jt.version.split("."),parseFloat(Rc[0])===2&&parseFloat(Rc[1])===3);function gd(e,t){return $2?t==400?e=="italic"?"italic":"normal":t==700&&e!=="italic"?"bold":e+""+t:t==400||t==="normal"?e==="italic"?"italic":"normal":t!=700&&t!=="bold"||e!=="normal"?(t==700?"bold":t)+""+e:"bold"}function Ch(e,t){if(Et(t.element,e.styleSheets,"display")==="none")return[0,0,0,0];var i=[];return t.children.forEach(function(s){var d=s.getBoundingBox(e);if(d[0]!==0||d[1]!==0||d[2]!==0||d[3]!==0){var p=s.computeNodeTransform(e);d[0]=d[0]*p.sx+p.tx,d[1]=d[1]*p.sy+p.ty,d[2]=d[2]*p.sx,d[3]=d[3]*p.sy,i=i.length===0?d:[Math.min(i[0],d[0]),Math.min(i[1],d[1]),Math.max(i[0]+i[2],d[0]+d[2])-Math.min(i[0],d[0]),Math.max(i[1]+i[3],d[1]+d[3])-Math.min(i[1],d[1])]}}),i.length===0?[0,0,0,0]:i}function Ja(e,t){var i=parseFloat,s=i(e.getAttribute("x1"))||i(Et(e,t.styleSheets,"x"))||i(Et(e,t.styleSheets,"cx"))-i(Et(e,t.styleSheets,"r"))||0,d=i(e.getAttribute("x2"))||s+i(Et(e,t.styleSheets,"width"))||i(Et(e,t.styleSheets,"cx"))+i(Et(e,t.styleSheets,"r"))||0,p=i(e.getAttribute("y1"))||i(Et(e,t.styleSheets,"y"))||i(Et(e,t.styleSheets,"cy"))-i(Et(e,t.styleSheets,"r"))||0,v=i(e.getAttribute("y2"))||p+i(Et(e,t.styleSheets,"height"))||i(Et(e,t.styleSheets,"cy"))+i(Et(e,t.styleSheets,"r"))||0;return[Math.min(s,d),Math.min(p,v),Math.max(s,d)-Math.min(s,d),Math.max(p,v)-Math.min(p,v)]}function Za(e,t,i,s,d,p,v,o){o===void 0&&(o=!1);var r,c,u=t[0],a=t[1],l=t[2],n=t[3],h=d/l,g=p/n,f=e.getAttribute("preserveAspectRatio");if(f){var m=f.split(" ");m[0]==="defer"&&(m=m.slice(1)),r=m[0],c=m[1]||"meet"}else r="xMidYMid",c="meet";if(r!=="none"&&(c==="meet"?h=g=Math.min(h,g):c==="slice"&&(h=g=Math.max(h,g))),o)return v.pdf.Matrix(h,0,0,g,0,0);var y=i-u*h,x=s-a*g;r.indexOf("xMid")>=0?y+=(d-l*h)/2:r.indexOf("xMax")>=0&&(y+=d-l*h),r.indexOf("YMid")>=0?x+=(p-n*g)/2:r.indexOf("YMax")>=0&&(x+=p-n*g);var S=v.pdf.Matrix(1,0,0,1,y,x),A=v.pdf.Matrix(h,0,0,g,0,0);return v.pdf.matrixMult(A,S)}function Sl(e,t){if(!e||e==="none")return t.pdf.unitMatrix;for(var i,s,d=/^[\s,]*matrix\(([^)]+)\)\s*/,p=/^[\s,]*translate\(([^)]+)\)\s*/,v=/^[\s,]*rotate\(([^)]+)\)\s*/,o=/^[\s,]*scale\(([^)]+)\)\s*/,r=/^[\s,]*skewX\(([^)]+)\)\s*/,c=/^[\s,]*skewY\(([^)]+)\)\s*/,u=t.pdf.unitMatrix;e.length>0&&e.length!==s;){s=e.length;var a=d.exec(e);if(a&&(i=Qi(a[1]),u=t.pdf.matrixMult(t.pdf.Matrix(i[0],i[1],i[2],i[3],i[4],i[5]),u),e=e.substr(a[0].length)),a=v.exec(e)){i=Qi(a[1]);var l=Math.PI*i[0]/180;if(u=t.pdf.matrixMult(t.pdf.Matrix(Math.cos(l),Math.sin(l),-Math.sin(l),Math.cos(l),0,0),u),i[1]||i[2]){var n=t.pdf.Matrix(1,0,0,1,i[1],i[2]),h=t.pdf.Matrix(1,0,0,1,-i[1],-i[2]);u=t.pdf.matrixMult(h,t.pdf.matrixMult(u,n))}e=e.substr(a[0].length)}(a=p.exec(e))&&(i=Qi(a[1]),u=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,i[0],i[1]||0),u),e=e.substr(a[0].length)),(a=o.exec(e))&&((i=Qi(a[1]))[1]||(i[1]=i[0]),u=t.pdf.matrixMult(t.pdf.Matrix(i[0],0,0,i[1],0,0),u),e=e.substr(a[0].length)),(a=r.exec(e))&&(i=parseFloat(a[1]),i*=Math.PI/180,u=t.pdf.matrixMult(t.pdf.Matrix(1,0,Math.tan(i),1,0,0),u),e=e.substr(a[0].length)),(a=c.exec(e))&&(i=parseFloat(a[1]),i*=Math.PI/180,u=t.pdf.matrixMult(t.pdf.Matrix(1,Math.tan(i),0,1,0,0),u),e=e.substr(a[0].length))}return u}var Ah=function(){function e(t,i){this.element=t,this.children=i,this.parent=null}return e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){return this.parent},e.prototype.getBoundingBox=function(t){return Et(this.element,t.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(t)},e.prototype.computeNodeTransform=function(t){var i=this.computeNodeTransformCore(t),s=Et(this.element,t.styleSheets,"transform");return s?t.pdf.matrixMult(i,Sl(s,t)):i},e}(),Qa=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.render=function(i){return Promise.resolve()},t.prototype.getBoundingBoxCore=function(i){return[]},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t}(Ah),md=function(e){function t(i,s,d){var p=e.call(this,s,d)||this;return p.pdfGradientType=i,p.contextColor=void 0,p}return Te(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o,r;return Fe(this,function(c){return(s=this.element.getAttribute("id"))?(d=this.getStops(i.styleSheets),p=0,v=!1,d.forEach(function(u){var a=u.opacity;a&&a!==1&&(p+=a,v=!0)}),v&&(o=new is({opacity:p/d.length})),r=new kn(this.pdfGradientType,this.getCoordinates(),d,o),i.pdf.addShadingPattern(s,r),[2]):[2]})})},t.prototype.getStops=function(i){var s=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var d=this;d;){var p=Et(d.element,i,"color");if(p){this.contextColor=Js(p,null);break}d=d.getParent()}}var v=[];return this.children.forEach(function(o){if(o.element.tagName.toLowerCase()==="stop"){var r=Et(o.element,i,"color"),c=Js(Et(o.element,i,"stop-color")||"",r?{color:Js(r,null)}:{color:s.contextColor}),u=parseFloat(Et(o.element,i,"stop-opacity")||"1");v.push({offset:t.parseGradientOffset(o.element.getAttribute("offset")||"0"),color:[c.r,c.g,c.b],opacity:u})}}),this.stops=v},t.prototype.getBoundingBoxCore=function(i){return Ja(this.element,i)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,s){return jn(this,i,s)},t.parseGradientOffset=function(i){var s=parseFloat(i);return!isNaN(s)&&i.indexOf("%")>=0?s/100:s},t}(Qa),vd=function(e){function t(i,s){return e.call(this,"axial",i,s)||this}return Te(t,e),t.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},t}(md),bd=function(e){function t(i,s){return e.call(this,"radial",i,s)||this}return Te(t,e),t.prototype.getCoordinates=function(){var i=this.element.getAttribute("cx"),s=this.element.getAttribute("cy"),d=this.element.getAttribute("fx"),p=this.element.getAttribute("fy");return[parseFloat(d||i||"0.5"),parseFloat(p||s||"0.5"),0,parseFloat(i||"0.5"),parseFloat(s||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},t}(md),K2=function(){function e(t,i){this.key=t,this.gradient=i}return e.prototype.getFillData=function(t,i){return Ne(this,void 0,void 0,function(){var s,d,p;return Fe(this,function(v){switch(v.label){case 0:return[4,i.refsHandler.getRendered(this.key,null,function(o){return o.apply(new In(i.pdf,{refsHandler:i.refsHandler,textMeasure:i.textMeasure,styleSheets:i.styleSheets,viewport:i.viewport,svg2pdfParameters:i.svg2pdfParameters}))})];case 1:return v.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?s=i.pdf.unitMatrix:(d=t.getBoundingBox(i),s=i.pdf.Matrix(d[2],0,0,d[3],d[0],d[1])),p=Sl(Et(this.gradient.element,i.styleSheets,"gradientTransform","transform"),i),[2,{key:this.key,matrix:i.pdf.matrixMult(p,s)}]}})})},e}(),yd=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:if(!(s=this.element.getAttribute("id")))return[2];d=this.getBoundingBox(i),p=new Zn([d[0],d[1],d[0]+d[2],d[1]+d[3]],d[2],d[3]),i.pdf.beginTilingPattern(p),v=0,o=this.children,r.label=1;case 1:return v<o.length?[4,o[v].render(new In(i.pdf,{attributeState:i.attributeState,refsHandler:i.refsHandler,styleSheets:i.styleSheets,viewport:i.viewport,svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure}))]:[3,4];case 2:r.sent(),r.label=3;case 3:return v++,[3,1];case 4:return i.pdf.endTilingPattern(s,p),[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Ja(this.element,i)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,s){return jn(this,i,s)},t}(Qa),J2=function(){function e(t,i){this.key=t,this.pattern=i}return e.prototype.getFillData=function(t,i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o,r,c,u,a,l,n,h;return Fe(this,function(g){switch(g.label){case 0:return[4,i.refsHandler.getRendered(this.key,null,function(f){return f.apply(new In(i.pdf,{refsHandler:i.refsHandler,textMeasure:i.textMeasure,styleSheets:i.styleSheets,viewport:i.viewport,svg2pdfParameters:i.svg2pdfParameters}))})];case 1:return g.sent(),s={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},p=i.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(d=t.getBoundingBox(i),p=i.pdf.Matrix(1,0,0,1,d[0],d[1]),o=this.pattern.getBoundingBox(i),r=o[0]*d[0]||0,c=o[1]*d[1]||0,u=o[2]*d[2]||0,a=o[3]*d[3]||0,s.boundingBox=[r,c,r+u,c+a],s.xStep=u,s.yStep=a),v=i.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(d||(d=t.getBoundingBox(i)),v=i.pdf.Matrix(d[2],0,0,d[3],0,0),o=s.boundingBox||this.pattern.getBoundingBox(i),r=o[0]/d[0]||0,c=o[1]/d[1]||0,u=o[2]/d[2]||0,a=o[3]/d[3]||0,s.boundingBox=[r,c,r+u,c+a],s.xStep=u,s.yStep=a),l=i.pdf.unitMatrix,(n=Et(this.pattern.element,i.styleSheets,"patternTransform","transform"))&&(l=Sl(n,i)),h=v,h=i.pdf.matrixMult(h,p),h=i.pdf.matrixMult(h,l),h=i.pdf.matrixMult(h,i.transform),s.matrix=h,[2,s]}})})},e}();function Z2(e,t){var i=Sh.exec(e);if(i){var s=i[1],d=t.refsHandler.get(s);return d&&(d instanceof vd||d instanceof bd)?function(v,o,r){var c=o.getStops(r.styleSheets);if(c.length===0)return null;if(c.length===1){var u=c[0].color,a=new vr;return a.ok=!0,a.r=u[0],a.g=u[1],a.b=u[2],a.a=c[0].opacity,new mi(a)}return new K2(v,o)}(s,d,t):d&&d instanceof yd?new J2(s,d):new mi(new vr("rgb(0, 0, 0)"))}var p=Js(e,t.attributeState);return p.ok?new mi(p):null}function kh(e,t,i){var s=i||t.element,d=Et(s,e.styleSheets,"color");if(d){var p=Js(d,e.attributeState);p.ok?e.attributeState.color=p:e.attributeState.color=new vr("rgb(0,0,0)")}var v=Et(s,e.styleSheets,"visibility");v&&(e.attributeState.visibility=v);var o=Et(s,e.styleSheets,"fill");o&&(e.attributeState.fill=Z2(o,e));var r=Et(s,e.styleSheets,"fill-opacity");r&&(e.attributeState.fillOpacity=parseFloat(r));var c=Et(s,e.styleSheets,"stroke-opacity");c&&(e.attributeState.strokeOpacity=parseFloat(c));var u=Et(s,e.styleSheets,"opacity");u&&(e.attributeState.opacity=parseFloat(u));var a=Et(s,e.styleSheets,"stroke-width");a!==void 0&&a!==""&&(e.attributeState.strokeWidth=Math.abs(parseFloat(a)));var l=Et(s,e.styleSheets,"stroke");if(l)if(l==="none")e.attributeState.stroke=null;else{var n=Js(l,e.attributeState);n.ok&&(e.attributeState.stroke=new mi(n))}l&&e.attributeState.stroke instanceof mi&&(e.attributeState.contextStroke=e.attributeState.stroke.color),o&&e.attributeState.fill instanceof mi&&(e.attributeState.contextFill=e.attributeState.fill.color);var h=Et(s,e.styleSheets,"stroke-linecap");h&&(e.attributeState.strokeLinecap=h);var g=Et(s,e.styleSheets,"stroke-linejoin");g&&(e.attributeState.strokeLinejoin=g);var f=Et(s,e.styleSheets,"stroke-dasharray");if(f){var m=parseInt(Et(s,e.styleSheets,"stroke-dashoffset")||"0");e.attributeState.strokeDasharray=Qi(f),e.attributeState.strokeDashoffset=m}var y=Et(s,e.styleSheets,"stroke-miterlimit");y!==void 0&&y!==""&&(e.attributeState.strokeMiterlimit=parseFloat(y));var x=s.getAttribute("xml:space");x&&(e.attributeState.xmlSpace=x);var S=Et(s,e.styleSheets,"font-weight");S&&(e.attributeState.fontWeight=S);var A=Et(s,e.styleSheets,"font-style");A&&(e.attributeState.fontStyle=A);var M=Et(s,e.styleSheets,"font-family");if(M){var T=b2.parse(M);e.attributeState.fontFamily=function(V,rt,at){var dt=gd(V.fontStyle,V.fontWeight),nt=at.pdf.getFontList(),E="";return rt.some(function(z){var $=nt[z];return $&&$.indexOf(dt)>=0?(E=z,!0):(z=z.toLowerCase(),!!sn.hasOwnProperty(z)&&(E=z,!0))})||(E="times"),E}(e.attributeState,T,e)}var N=Et(s,e.styleSheets,"font-size");if(N){var W=e.pdf.getFontSize();e.attributeState.fontSize=rn(N,W)}var K=Et(s,e.styleSheets,"vertical-align")||Et(s,e.styleSheets,"alignment-baseline");if(K){var P=K.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);P&&(e.attributeState.alignmentBaseline=P[0])}var I=Et(s,e.styleSheets,"text-anchor");I&&(e.attributeState.textAnchor=I);var J=Et(s,e.styleSheets,"fill-rule");J&&(e.attributeState.fillRule=J)}function Lh(e,t,i){var s=1,d=1;s*=e.attributeState.fillOpacity,s*=e.attributeState.opacity,e.attributeState.fill instanceof mi&&e.attributeState.fill.color.a!==void 0&&(s*=e.attributeState.fill.color.a),d*=e.attributeState.strokeOpacity,d*=e.attributeState.opacity,e.attributeState.stroke instanceof mi&&e.attributeState.stroke.color.a!==void 0&&(d*=e.attributeState.stroke.color.a);var p,v,o=s<1,r=d<1;if(Mn(i,"use")?(o=!0,r=!0,s*=e.attributeState.fill?1:0,d*=e.attributeState.stroke?1:0):e.withinUse&&(e.attributeState.fill!==t.attributeState.fill?(o=!0,s*=e.attributeState.fill?1:0):o&&!e.attributeState.fill&&(s=0),e.attributeState.stroke!==t.attributeState.stroke?(r=!0,d*=e.attributeState.stroke?1:0):r&&!e.attributeState.stroke&&(d=0)),o||r){var c={};o&&(c.opacity=s),r&&(c["stroke-opacity"]=d),e.pdf.setGState(new is(c))}if(e.attributeState.fill&&e.attributeState.fill!==t.attributeState.fill&&e.attributeState.fill instanceof mi&&e.attributeState.fill.color.ok&&!Mn(i,"text")&&e.pdf.setFillColor(e.attributeState.fill.color.r,e.attributeState.fill.color.g,e.attributeState.fill.color.b),e.attributeState.strokeWidth!==t.attributeState.strokeWidth&&e.pdf.setLineWidth(e.attributeState.strokeWidth),e.attributeState.stroke!==t.attributeState.stroke&&e.attributeState.stroke instanceof mi&&e.pdf.setDrawColor(e.attributeState.stroke.color.r,e.attributeState.stroke.color.g,e.attributeState.stroke.color.b),e.attributeState.strokeLinecap!==t.attributeState.strokeLinecap&&e.pdf.setLineCap(e.attributeState.strokeLinecap),e.attributeState.strokeLinejoin!==t.attributeState.strokeLinejoin&&e.pdf.setLineJoin(e.attributeState.strokeLinejoin),e.attributeState.strokeDasharray===t.attributeState.strokeDasharray&&e.attributeState.strokeDashoffset===t.attributeState.strokeDashoffset||!e.attributeState.strokeDasharray||e.pdf.setLineDashPattern(e.attributeState.strokeDasharray,e.attributeState.strokeDashoffset),e.attributeState.strokeMiterlimit!==t.attributeState.strokeMiterlimit&&e.pdf.setLineMiterLimit(e.attributeState.strokeMiterlimit),e.attributeState.fontFamily!==t.attributeState.fontFamily&&(p=sn.hasOwnProperty(e.attributeState.fontFamily)?sn[e.attributeState.fontFamily]:e.attributeState.fontFamily),e.attributeState.fill&&e.attributeState.fill!==t.attributeState.fill&&e.attributeState.fill instanceof mi&&e.attributeState.fill.color.ok){var u=e.attributeState.fill.color;e.pdf.setTextColor(u.r,u.g,u.b)}e.attributeState.fontWeight===t.attributeState.fontWeight&&e.attributeState.fontStyle===t.attributeState.fontStyle||(v=gd(e.attributeState.fontStyle,e.attributeState.fontWeight)),p===void 0&&v===void 0||(p===void 0&&(p=sn.hasOwnProperty(e.attributeState.fontFamily)?sn[e.attributeState.fontFamily]:e.attributeState.fontFamily),e.pdf.setFont(p,v)),e.attributeState.fontSize!==t.attributeState.fontSize&&e.pdf.setFontSize(e.attributeState.fontSize*e.pdf.internal.scaleFactor)}function wd(e,t,i){var s=Sh.exec(e);if(s){var d=s[1];return i.refsHandler.get(d)||void 0}}function xd(e,t,i){return Ne(this,void 0,void 0,function(){var s,d;return Fe(this,function(p){switch(p.label){case 0:return s=i.clone(),t.element.hasAttribute("clipPathUnits")&&t.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(d=e.getBoundingBox(i),s.transform=i.pdf.matrixMult(i.pdf.Matrix(d[2],0,0,d[3],d[0],d[1]),i.transform)),[4,t.apply(s)];case 1:return p.sent(),[2]}})})}var _d=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.render=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v;return Fe(this,function(o){switch(o.label){case 0:return this.isVisible(i.attributeState.visibility!=="hidden",i)?((s=i.clone()).transform=s.pdf.matrixMult(this.computeNodeTransform(s),i.transform),kh(s,this),d=Et(this.element,s.styleSheets,"clip-path"),(p=d&&d!=="none")?(v=wd(d,0,s))?v.isVisible(!0,s)?(s.pdf.saveGraphicsState(),[4,xd(this,v,s)]):[3,2]:[3,4]:[3,5]):[2];case 1:return o.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:p=!1,o.label=5;case 5:return s.withinClipPath||s.pdf.saveGraphicsState(),Lh(s,i,this.element),[4,this.renderCore(s)];case 6:return o.sent(),s.withinClipPath||s.pdf.restoreGraphicsState(),p&&s.pdf.restoreGraphicsState(),[2]}})})},t}(Ah),Cl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t}(_d),to=function(e){function t(i,s,d){var p=e.call(this,s,d)||this;return p.cachedPath=null,p.hasMarkers=i,p}return Te(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var s;return Fe(this,function(d){switch(d.label){case 0:return(s=this.getCachedPath(i))===null||s.segments.length===0?[2]:(i.withinClipPath?s.transform(i.transform):i.pdf.setCurrentTransformationMatrix(i.transform),s.draw(i),[4,this.fillOrStroke(i)]);case 1:return d.sent(),this.hasMarkers?[4,this.drawMarkers(i,s)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}})})},t.prototype.getCachedPath=function(i){return this.cachedPath||(this.cachedPath=this.getPath(i))},t.prototype.drawMarkers=function(i,s){return Ne(this,void 0,void 0,function(){return Fe(this,function(d){switch(d.label){case 0:return[4,this.getMarkers(s,i).draw(i.clone({transform:i.pdf.unitMatrix}))];case 1:return d.sent(),[2]}})})},t.prototype.fillOrStroke=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:return i.withinClipPath?[2]:(s=i.attributeState.fill,d=i.attributeState.stroke&&i.attributeState.strokeWidth!==0,s?[4,s.getFillData(this,i)]:[3,2]);case 1:return v=r.sent(),[3,3];case 2:v=void 0,r.label=3;case 3:return p=v,o=i.attributeState.fillRule==="evenodd",s&&d||i.withinUse?o?i.pdf.fillStrokeEvenOdd(p):i.pdf.fillStroke(p):s?o?i.pdf.fillEvenOdd(p):i.pdf.fill(p):d?i.pdf.stroke():i.pdf.discardPath(),[2]}})})},t.prototype.getBoundingBoxCore=function(i){var s=this.getCachedPath(i);if(!s||!s.segments.length)return[0,0,0,0];for(var d=Number.POSITIVE_INFINITY,p=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,r=0,c=0,u=0;u<s.segments.length;u++){var a=s.segments[u];(a instanceof hi||a instanceof Ln||a instanceof Er)&&(r=a.x,c=a.y),a instanceof Er?(d=Math.min(d,r,a.x1,a.x2,a.x),v=Math.max(v,r,a.x1,a.x2,a.x),p=Math.min(p,c,a.y1,a.y2,a.y),o=Math.max(o,c,a.y1,a.y2,a.y)):(d=Math.min(d,r),v=Math.max(v,r),p=Math.min(p,c),o=Math.max(o,c))}return[d,p,v-d,o-p]},t.prototype.getMarkers=function(i,s){var d=Et(this.element,s.styleSheets,"marker-start"),p=Et(this.element,s.styleSheets,"marker-mid"),v=Et(this.element,s.styleSheets,"marker-end"),o=new X2;if(d||p||v){v&&(v=zc(v)),d&&(d=zc(d)),p&&(p=zc(p));for(var r=i.segments,c=[1,0],u=void 0,a=!1,l=[1,0],n=!1,h=function(f){var m=r[f],y=d&&(f===1||!(r[f]instanceof hi)&&r[f-1]instanceof hi);y&&r.forEach(function(N,W){if(!n&&N instanceof ah&&W>f){var K=r[W-1];n=(K instanceof hi||K instanceof Ln||K instanceof Er)&&K}});var x=v&&(f===r.length-1||!(r[f]instanceof hi)&&r[f+1]instanceof hi),S=p&&f>0&&!(f===1&&r[f-1]instanceof hi),A=r[f-1]||null;if(A instanceof hi||A instanceof Ln||A instanceof Er)if(m instanceof Er)y&&o.addMarker(new An(d,[A.x,A.y],Xu(n?[n.x,n.y]:[A.x,A.y],[m.x1,m.y1]),!0)),x&&o.addMarker(new An(v,[m.x,m.y],Xu([m.x2,m.y2],[m.x,m.y]))),S&&(u=zs([A.x,A.y],[m.x1,m.y1]),u=A instanceof hi?u:Ua(rl(c,u)),o.addMarker(new An(p,[A.x,A.y],Math.atan2(u[1],u[0])))),c=zs([m.x2,m.y2],[m.x,m.y]);else if(m instanceof hi||m instanceof Ln){if(u=zs([A.x,A.y],[m.x,m.y]),y){var M=n?zs([n.x,n.y],[m.x,m.y]):u;o.addMarker(new An(d,[A.x,A.y],Math.atan2(M[1],M[0]),!0))}x&&o.addMarker(new An(v,[m.x,m.y],Math.atan2(u[1],u[0]))),S&&(M=m instanceof hi?c:A instanceof hi?u:Ua(rl(c,u)),o.addMarker(new An(p,[A.x,A.y],Math.atan2(M[1],M[0])))),c=u}else m instanceof ah&&(u=zs([A.x,A.y],[a.x,a.y]),S&&(M=A instanceof hi?u:Ua(rl(c,u)),o.addMarker(new An(p,[A.x,A.y],Math.atan2(M[1],M[0])))),x&&(M=Ua(rl(u,l)),o.addMarker(new An(v,[a.x,a.y],Math.atan2(M[1],M[0])))),c=u);else{a=m instanceof hi&&m;var T=r[f+1];(T instanceof hi||T instanceof Ln||T instanceof Er)&&(l=zs([a.x,a.y],[T.x,T.y]))}},g=0;g<r.length;g++)h(g)}return o.markers.forEach(function(f){var m=s.refsHandler.get(f.id);if(m){var y=Et(m.element,s.styleSheets,"orient");y!=null&&(f.isStartMarker&&y==="auto-start-reverse"&&(f.angle+=Math.PI),isNaN(Number(y))||(f.angle=parseFloat(y)/180*Math.PI))}}),o},t}(Cl);function zc(e){var t=Sh.exec(e);return t&&t[1]||void 0}var Q2=function(e){function t(i,s){return e.call(this,!0,i,s)||this}return Te(t,e),t.prototype.getPath=function(i){if(i.withinClipPath||i.attributeState.stroke===null)return null;var s=parseFloat(this.element.getAttribute("x1")||"0"),d=parseFloat(this.element.getAttribute("y1")||"0"),p=parseFloat(this.element.getAttribute("x2")||"0"),v=parseFloat(this.element.getAttribute("y2")||"0");return s||p||d||v?new na().moveTo(s,d).lineTo(p,v):null},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,s){return ln(this,i,s)},t.prototype.fillOrStroke=function(i){return Ne(this,void 0,void 0,function(){return Fe(this,function(s){switch(s.label){case 0:return i.attributeState.fill=null,[4,e.prototype.fillOrStroke.call(this,i)];case 1:return s.sent(),[2]}})})},t}(to),Sd=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:return this.isVisible(i.attributeState.visibility!=="hidden",i)?((s=i.clone()).transform=s.pdf.unitMatrix,kh(s,this),d=Et(this.element,s.styleSheets,"clip-path"),d&&d!=="none"&&(p=wd(d,0,s))?p.isVisible(!0,s)?[4,xd(this,p,s)]:[3,2]:[3,3]):[2];case 1:return r.sent(),[3,3];case 2:return[2];case 3:Lh(s,i,this.element),v=0,o=this.children,r.label=4;case 4:return v<o.length?[4,o[v].render(s)]:[3,7];case 5:r.sent(),r.label=6;case 6:return v++,[3,4];case 7:return[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Ch(i,this)},t.prototype.isVisible=function(i,s){return jn(this,i,s)},t.prototype.computeNodeTransformCore=function(i){var s=parseFloat(Et(this.element,i.styleSheets,"x")||"0"),d=parseFloat(Et(this.element,i.styleSheets,"y")||"0"),p=this.element.getAttribute("viewBox");if(p){var v=Qi(p),o=parseFloat(Et(this.element,i.styleSheets,"width")||Et(this.element.ownerSVGElement,i.styleSheets,"width")||p[2]),r=parseFloat(Et(this.element,i.styleSheets,"height")||Et(this.element.ownerSVGElement,i.styleSheets,"height")||p[3]);return Za(this.element,v,s,d,o,r,i)}return i.pdf.Matrix(1,0,0,1,s,d)},t}(Qa),Al=function(e,t){this.width=e,this.height=t},tm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o,r,c,u,a,l,n,h,g;return Fe(this,function(f){switch(f.label){case 0:return s=parseFloat,(d=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(p=d.substring(1),v=i.refsHandler.get(p),o=Mn(v.element,"symbol,svg")&&v.element.hasAttribute("viewBox"),r=s(Et(this.element,i.styleSheets,"x")||"0"),c=s(Et(this.element,i.styleSheets,"y")||"0"),u=void 0,a=void 0,o?(u=s(Et(this.element,i.styleSheets,"width")||Et(v.element,i.styleSheets,"width")||"0"),a=s(Et(this.element,i.styleSheets,"height")||Et(v.element,i.styleSheets,"height")||"0"),r+=s(Et(v.element,i.styleSheets,"x")||"0"),c+=s(Et(v.element,i.styleSheets,"y")||"0"),n=Qi(v.element.getAttribute("viewBox")),l=Za(v.element,n,r,c,u,a,i)):l=i.pdf.Matrix(1,0,0,1,r,c),h=ra.getContextColors(i,!0),g=new In(i.pdf,{refsHandler:i.refsHandler,styleSheets:i.styleSheets,withinUse:!0,viewport:o?new Al(u,a):i.viewport,svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure,attributeState:Object.assign(ra.default(),h)}),[4,i.refsHandler.getRendered(p,h,function(m){return t.renderReferencedNode(m,p,g)})]):[2];case 1:return f.sent(),i.pdf.saveGraphicsState(),i.pdf.setCurrentTransformationMatrix(i.transform),o&&Et(v.element,i.styleSheets,"overflow")!=="visible"&&(i.pdf.rect(r,c,u,a),i.pdf.clip().discardPath()),i.pdf.doFormObject(i.refsHandler.generateKey(p,h),l),i.pdf.restoreGraphicsState(),[2]}})})},t.renderReferencedNode=function(i,s,d){return Ne(this,void 0,void 0,function(){var p;return Fe(this,function(v){switch(v.label){case 0:return p=[(p=i.getBoundingBox(d))[0]-.5*p[2],p[1]-.5*p[3],2*p[2],2*p[3]],d.pdf.beginFormObject(p[0],p[1],p[2],p[3],d.pdf.unitMatrix),i instanceof Sd?[4,i.apply(d)]:[3,2];case 1:return v.sent(),[3,4];case 2:return[4,i.render(d)];case 3:v.sent(),v.label=4;case 4:return d.pdf.endFormObject(d.refsHandler.generateKey(s,d.attributeState)),[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Ja(this.element,i)},t.prototype.isVisible=function(i,s){return ln(this,i,s)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t}(Cl),em=function(e){function t(i,s){return e.call(this,!1,i,s)||this}return Te(t,e),t.prototype.getPath=function(i){var s=parseFloat(Et(this.element,i.styleSheets,"width")||"0"),d=parseFloat(Et(this.element,i.styleSheets,"height")||"0");if(!isFinite(s)||s<=0||!isFinite(d)||d<=0)return null;var p=Et(this.element,i.styleSheets,"rx"),v=Et(this.element,i.styleSheets,"ry"),o=Math.min(parseFloat(p||v||"0"),.5*s),r=Math.min(parseFloat(v||p||"0"),.5*d),c=parseFloat(Et(this.element,i.styleSheets,"x")||"0"),u=parseFloat(Et(this.element,i.styleSheets,"y")||"0"),a=4/3*(Math.SQRT2-1);return o===0&&r===0?new na().moveTo(c,u).lineTo(c+s,u).lineTo(c+s,u+d).lineTo(c,u+d).close():new na().moveTo(c+=o,u).lineTo(c+=s-2*o,u).curveTo(c+o*a,u,c+o,u+(r-r*a),c+=o,u+=r).lineTo(c,u+=d-2*r).curveTo(c,u+r*a,c-o*a,u+r,c-=o,u+=r).lineTo(c+=2*o-s,u).curveTo(c-o*a,u,c-o,u-r*a,c-=o,u-=r).lineTo(c,u+=2*r-d).curveTo(c,u-r*a,c+o*a,u-r,c+=o,u-=r).close()},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,s){return ln(this,i,s)},t}(to),Cd=function(e){function t(i,s){return e.call(this,!1,i,s)||this}return Te(t,e),t.prototype.getPath=function(i){var s=this.getRx(i),d=this.getRy(i);if(!isFinite(s)||d<=0||!isFinite(d)||d<=0)return null;var p=parseFloat(Et(this.element,i.styleSheets,"cx")||"0"),v=parseFloat(Et(this.element,i.styleSheets,"cy")||"0"),o=4/3*(Math.SQRT2-1)*s,r=4/3*(Math.SQRT2-1)*d;return new na().moveTo(p+s,v).curveTo(p+s,v-r,p+o,v-d,p,v-d).curveTo(p-o,v-d,p-s,v-r,p-s,v).curveTo(p-s,v+r,p-o,v+d,p,v+d).curveTo(p+o,v+d,p+s,v+r,p+s,v)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,s){return ln(this,i,s)},t}(to),im=function(e){function t(i,s){return e.call(this,i,s)||this}return Te(t,e),t.prototype.getRx=function(i){return parseFloat(Et(this.element,i.styleSheets,"rx")||"0")},t.prototype.getRy=function(i){return parseFloat(Et(this.element,i.styleSheets,"ry")||"0")},t}(Cd);function Ad(e){var t="invisible",i=e.stroke&&e.strokeWidth!==0,s=e.fill;return s&&i?t="fillThenStroke":s?t="fill":i&&(t="stroke"),t}function Ju(e){return e.replace(/[\n\r]/g,"")}function Zu(e){return e.replace(/[\t]/g," ")}function Qu(e){return e.replace(/ +/g," ")}function tf(e,t,i){switch(Et(e,i.styleSheets,"text-transform")){case"uppercase":return t.toUpperCase();case"lowercase":return t.toLowerCase();default:return t}}var qc=function(){function e(t,i,s,d){this.textNode=t,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=i,this.originX=s,this.originY=d,this.textMeasures=[]}return e.prototype.setX=function(t){this.originX=t},e.prototype.setY=function(t){this.originY=t},e.prototype.add=function(t,i,s){this.texts.push(i),this.textNodes.push(t),this.contexts.push(s)},e.prototype.rightTrimText=function(){for(var t=this.texts.length-1;t>=0;t--)if(this.contexts[t].attributeState.xmlSpace==="default"&&(this.texts[t]=this.texts[t].replace(/\s+$/,"")),this.texts[t].match(/[^\s]/))return!1;return!0},e.prototype.measureText=function(t){for(var i=0;i<this.texts.length;i++)this.textMeasures.push({width:t.textMeasure.measureTextWidth(this.texts[i],this.contexts[i].attributeState),length:this.texts[i].length})},e.prototype.put=function(t,i){var s,d,p,v,o=[],r=[],c=[],u=this.originX,a=this.originY,l=u,n=u;for(s=0;s<this.textNodes.length;s++){d=this.textNodes[s],p=this.contexts[s],v=this.textMeasures[s]||{width:t.textMeasure.measureTextWidth(this.texts[s],this.contexts[s].attributeState),length:this.texts[s].length};var h=u,g=a;if(d.nodeName!=="#text"&&!o.includes(d)){o.push(d);var f=e.resolveRelativePositionAttribute(d,"dx");f!==null&&(h+=rn(f,p.attributeState.fontSize));var m=e.resolveRelativePositionAttribute(d,"dy");m!==null&&(g+=rn(m,p.attributeState.fontSize))}r[s]=h,c[s]=g,u=h+v.width+v.length*i,a=g,l=Math.min(l,h),n=Math.max(n,u)}var y=0;switch(this.textAnchor){case"start":y=0;break;case"middle":y=(n-l)/2;break;case"end":y=n-l}for(s=0;s<this.textNodes.length;s++)if(d=this.textNodes[s],p=this.contexts[s],d.nodeName==="#text"||p.attributeState.visibility!=="hidden"){t.pdf.saveGraphicsState(),Lh(p,t,d);var x=p.attributeState.alignmentBaseline,S=Ad(p.attributeState);t.pdf.text(this.texts[s],r[s]-y,c[s],{baseline:pd(x),angle:t.transform,renderingMode:S==="fill"?void 0:S,charSpace:i===0?void 0:i}),t.pdf.restoreGraphicsState()}return[u,a]},e.resolveRelativePositionAttribute=function(t,i){for(var s,d=t;d&&Mn(d,"tspan");){if(d.hasAttribute(i))return d.getAttribute(i);if(((s=t.parentElement)===null||s===void 0?void 0:s.firstChild)!==t)break;d=d.parentElement}return null},e}(),rm=function(e){function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.boundingBox=[],i}return Te(t,e),t.prototype.processTSpans=function(i,s,d,p,v,o){for(var r=d.pdf.getFontSize(),c=d.attributeState.xmlSpace,u=!0,a=!1,l=0;l<s.childNodes.length;l++){var n=s.childNodes[l];if(n.textContent){var h=n.textContent;if(n.nodeName==="#text"){var g=Ju(h);g=Zu(g),c==="default"&&(g=Qu(g),u&&g.match(/^\s/)&&(a=!0),g.match(/[^\s]/)&&(u=!1),o.prevText.match(/\s$/)&&(g=g.replace(/^\s+/,"")));var f=tf(s,g,d);v.add(s,f,d),o.prevText=h,o.prevContext=d}else if(!Mn(n,"title")){if(Mn(n,"tspan")){var m=n,y=m.getAttribute("x");if(y!==null){var x=rn(y,r);v=new qc(this,Et(m,d.styleSheets,"text-anchor")||d.attributeState.textAnchor,x,0),p.push({type:"y",chunk:v})}var S=m.getAttribute("y");if(S!==null){var A=rn(S,r);v=new qc(this,Et(m,d.styleSheets,"text-anchor")||d.attributeState.textAnchor,0,A),p.push({type:"x",chunk:v})}var M=d.clone();kh(M,i,m),this.processTSpans(i,m,M,p,v,o)}}}}return a},t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o,r,c,u,a,l,n,h,g,f,m,y,x,S,A,M,T,N,W;return Fe(this,function(K){if(i.pdf.saveGraphicsState(),s=0,d=0,p=1,v=i.pdf.getFontSize(),o=rn(this.element.getAttribute("x"),v),r=rn(this.element.getAttribute("y"),v),c=rn(this.element.getAttribute("dx"),v),u=rn(this.element.getAttribute("dy"),v),a=parseFloat(this.element.getAttribute("textLength")||"0"),l=i.attributeState.visibility,this.element.childElementCount===0)n=this.element.textContent||"",h=function(P,I){return P=Zu(P=Ju(P)),I.xmlSpace==="default"&&(P=Qu(P=P.trim())),P}(n,i.attributeState),g=tf(this.element,h,i),s=i.textMeasure.getTextOffset(g,i.attributeState),a>0&&(f=i.textMeasure.measureTextWidth(g,i.attributeState),i.attributeState.xmlSpace==="default"&&n.match(/^\s/)&&(p=0),d=(a-f)/(g.length-p)||0),l==="visible"&&(m=i.attributeState.alignmentBaseline,y=Ad(i.attributeState),i.pdf.text(g,o+c-s,r+u,{baseline:pd(m),angle:i.transform,renderingMode:y==="fill"?void 0:y,charSpace:d===0?void 0:d}),this.boundingBox=[o+c-s,r+u+.1*v,i.textMeasure.measureTextWidth(g,i.attributeState),v]);else{for(x=[],S=new qc(this,i.attributeState.textAnchor,o+c,r+u),x.push({type:"",chunk:S}),A=this.processTSpans(this,this.element,i,x,S,{prevText:" ",prevContext:i}),p=A?0:1,M=!0,T=x.length-1;T>=0;T--)M&&(M=x[T].chunk.rightTrimText());a>0&&(N=0,W=0,x.forEach(function(P){var I=P.chunk;I.measureText(i),I.textMeasures.forEach(function(J){var V=J.width,rt=J.length;N+=V,W+=rt})}),d=(a-N)/(W-p)),x.reduce(function(P,I){var J=I.type,V=I.chunk;return J==="x"?V.setX(P[0]):J==="y"&&V.setY(P[1]),V.put(i,d)},[0,0])}return i.pdf.restoreGraphicsState(),[2]})})},t.prototype.isVisible=function(i,s){return jn(this,i,s)},t.prototype.getBoundingBoxCore=function(i){return this.boundingBox.length>0?this.boundingBox:Ja(this.element,i)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t}(Cl),nm=function(e){function t(i,s){return e.call(this,!0,i,s)||this}return Te(t,e),t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,s){return ln(this,i,s)},t.prototype.getPath=function(i){var s,d,p=new Y2(Et(this.element,i.styleSheets,"d")||"").unshort().unarc().abs(),v=new na;return p.iterate(function(o){switch(o[0]){case"M":v.moveTo(o[1],o[2]);break;case"L":v.lineTo(o[1],o[2]);break;case"H":v.lineTo(o[1],d);break;case"V":v.lineTo(s,o[1]);break;case"C":v.curveTo(o[1],o[2],o[3],o[4],o[5],o[6]);break;case"Q":var r=$u([s,d],[o[1],o[2]]),c=$u([o[3],o[4]],[o[1],o[2]]);v.curveTo(r[0],r[1],c[0],c[1],o[3],o[4]);break;case"Z":v.close()}switch(o[0]){case"M":case"L":s=o[1],d=o[2];break;case"H":s=o[1];break;case"V":d=o[1];break;case"C":s=o[5],d=o[6];break;case"Q":s=o[3],d=o[4]}}),v},t}(to),sm=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,am=function(e){function t(i,s){var d=e.call(this,i,s)||this;return d.imageLoadingPromise=null,d.imageUrl=d.element.getAttribute("xlink:href")||d.element.getAttribute("href"),d.imageUrl&&(d.imageLoadingPromise=t.fetchImageData(d.imageUrl)),d}return Te(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o,r,c,u,a,l,n,h,g,f,m,y,x,S;return Fe(this,function(A){switch(A.label){case 0:return this.imageLoadingPromise?(i.pdf.setCurrentTransformationMatrix(i.transform),s=parseFloat(Et(this.element,i.styleSheets,"width")||"0"),d=parseFloat(Et(this.element,i.styleSheets,"height")||"0"),p=parseFloat(Et(this.element,i.styleSheets,"x")||"0"),v=parseFloat(Et(this.element,i.styleSheets,"y")||"0"),!isFinite(s)||s<=0||!isFinite(d)||d<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return o=A.sent(),r=o.data,(c=o.format).indexOf("svg")!==0?[3,3]:(u=new DOMParser,a=u.parseFromString(r,"image/svg+xml").firstElementChild,(!(l=this.element.getAttribute("preserveAspectRatio"))||l.indexOf("defer")<0||!a.getAttribute("preserveAspectRatio"))&&a.setAttribute("preserveAspectRatio",l||""),a.setAttribute("x",String(p)),a.setAttribute("y",String(v)),a.setAttribute("width",String(s)),a.setAttribute("height",String(d)),[4,Th(a,n={}).render(new In(i.pdf,{refsHandler:new dd(n),styleSheets:i.styleSheets,viewport:new Al(s,d),svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure}))]);case 2:return A.sent(),[2];case 3:h="data:image/".concat(c,";base64,").concat(btoa(r)),A.label=4;case 4:return A.trys.push([4,6,,7]),[4,t.getImageDimensions(h)];case 5:return g=A.sent(),f=g[0],m=g[1],y=[0,0,f,m],x=Za(this.element,y,p,v,s,d,i),i.pdf.setCurrentTransformationMatrix(x),i.pdf.addImage(h,"",0,0,f,m),[3,7];case 6:return S=A.sent(),typeof console=="object"&&console.warn&&console.warn("Could not load image ".concat(this.imageUrl,`. 
`).concat(S)),[3,7];case 7:return[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Ja(this.element,i)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,s){return ln(this,i,s)},t.fetchImageData=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:if(!(p=i.match(sm)))return[3,1];if(v=p[2],(o=v.split("/"))[0]!=="image")throw new Error("Unsupported image URL: ".concat(i));return d=o[1],s=p[5],p[4]==="base64"?(s=s.replace(/\s/g,""),s=atob(s)):s=decodeURIComponent(s),[3,3];case 1:return[4,t.fetchImage(i)];case 2:s=r.sent(),d=i.substring(i.lastIndexOf(".")+1),r.label=3;case 3:return[2,{data:s,format:d}]}})})},t.fetchImage=function(i){return new Promise(function(s,d){var p=new XMLHttpRequest;p.open("GET",i,!0),p.responseType="arraybuffer",p.onload=function(){if(p.status!==200)throw new Error("Error ".concat(p.status,": Failed to load image '").concat(i,"'"));for(var v=new Uint8Array(p.response),o="",r=0;r<v.length;r++)o+=String.fromCharCode(v[r]);s(o)},p.onerror=d,p.onabort=d,p.send(null)})},t.getMimeType=function(i){switch(i=i.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/".concat(i)}},t.getImageDimensions=function(i){return new Promise(function(s,d){var p=new Image;p.onload=function(){s([p.width,p.height])},p.onerror=d,p.src=i})},t}(Cl),kd=function(e){function t(i,s,d){var p=e.call(this,!0,s,d)||this;return p.closed=i,p}return Te(t,e),t.prototype.getPath=function(i){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var s=t.parsePointsString(this.element.getAttribute("points")),d=new na;if(s.length<1)return d;d.moveTo(s[0][0],s[0][1]);for(var p=1;p<s.length;p++)d.lineTo(s[p][0],s[p][1]);return this.closed&&d.close(),d},t.prototype.isVisible=function(i,s){return ln(this,i,s)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.parsePointsString=function(i){for(var s=Qi(i),d=[],p=0;p<s.length-1;p+=2){var v=s[p],o=s[p+1];d.push([v,o])}return d},t}(to),om=function(e){function t(i,s){return e.call(this,!0,i,s)||this}return Te(t,e),t}(kd),lm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.render=function(i){return Promise.resolve()},t.prototype.getBoundingBoxCore=function(i){return[0,0,0,0]},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,s){return ln(this,i,s)},t}(Ah),cm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o,r;return Fe(this,function(c){switch(c.label){case 0:s=this.computeNodeTransform(i),d=this.getBoundingBox(i),i.pdf.beginFormObject(d[0],d[1],d[2],d[3],s),p=ra.getContextColors(i),function(u){var a=u.attributeState,l=u.pdf,n=1,h=1;n*=a.fillOpacity,n*=a.opacity,a.fill instanceof mi&&a.fill.color.a!==void 0&&(n*=a.fill.color.a),h*=a.strokeOpacity,h*=a.opacity,a.stroke instanceof mi&&a.stroke.color.a!==void 0&&(h*=a.stroke.color.a);var g,f={};if(f.opacity=n,f["stroke-opacity"]=h,l.setGState(new is(f)),a.fill&&a.fill instanceof mi&&a.fill.color.ok?l.setFillColor(a.fill.color.r,a.fill.color.g,a.fill.color.b):l.setFillColor(0,0,0),l.setLineWidth(a.strokeWidth),a.stroke instanceof mi?l.setDrawColor(a.stroke.color.r,a.stroke.color.g,a.stroke.color.b):l.setDrawColor(0,0,0),l.setLineCap(a.strokeLinecap),l.setLineJoin(a.strokeLinejoin),a.strokeDasharray?l.setLineDashPattern(a.strokeDasharray,a.strokeDashoffset):l.setLineDashPattern([],0),l.setLineMiterLimit(a.strokeMiterlimit),g=sn.hasOwnProperty(a.fontFamily)?sn[a.fontFamily]:a.fontFamily,a.fill&&a.fill instanceof mi&&a.fill.color.ok){var m=a.fill.color;l.setTextColor(m.r,m.g,m.b)}else l.setTextColor(0,0,0);var y="";a.fontWeight==="bold"&&(y="bold"),a.fontStyle==="italic"&&(y+="italic"),y===""&&(y="normal"),g!==void 0||y!==void 0?(g===void 0&&(g=sn.hasOwnProperty(a.fontFamily)?sn[a.fontFamily]:a.fontFamily),l.setFont(g,y)):l.setFont("helvetica",y),l.setFontSize(a.fontSize*l.internal.scaleFactor)}(v=new In(i.pdf,{refsHandler:i.refsHandler,styleSheets:i.styleSheets,viewport:i.viewport,svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure,attributeState:Object.assign(ra.default(),p)})),o=0,r=this.children,c.label=1;case 1:return o<r.length?[4,r[o].render(v)]:[3,4];case 2:c.sent(),c.label=3;case 3:return o++,[3,1];case 4:return i.pdf.endFormObject(v.refsHandler.generateKey(this.element.getAttribute("id"),p)),[2]}})})},t.prototype.getBoundingBoxCore=function(i){var s,d=this.element.getAttribute("viewBox");return d&&(s=Qi(d)),[s&&s[0]||0,s&&s[1]||0,s&&s[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),s&&s[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},t.prototype.computeNodeTransformCore=function(i){var s,d=parseFloat(this.element.getAttribute("refX")||"0"),p=parseFloat(this.element.getAttribute("refY")||"0"),v=this.element.getAttribute("viewBox");if(v){var o=Qi(v);s=Za(this.element,o,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),i,!0),s=i.pdf.matrixMult(i.pdf.Matrix(1,0,0,1,-d,-p),s)}else s=i.pdf.Matrix(1,0,0,1,-d,-p);return s},t.prototype.isVisible=function(i,s){return jn(this,i,s)},t}(Qa),hm=function(e){function t(i,s){return e.call(this,i,s)||this}return Te(t,e),t.prototype.getR=function(i){var s;return(s=this.r)!==null&&s!==void 0?s:this.r=parseFloat(Et(this.element,i.styleSheets,"r")||"0")},t.prototype.getRx=function(i){return this.getR(i)},t.prototype.getRy=function(i){return this.getR(i)},t}(Cd),um=function(e){function t(i,s){return e.call(this,!1,i,s)||this}return Te(t,e),t}(kd),Ld=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var s,d;return Fe(this,function(p){switch(p.label){case 0:s=0,d=this.children,p.label=1;case 1:return s<d.length?[4,d[s].render(i)]:[3,4];case 2:p.sent(),p.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Ch(i,this)},t}(_d),fm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.isVisible=function(i,s){return jn(this,i,s)},t.prototype.render=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:return this.isVisible(i.attributeState.visibility!=="hidden",i)?(s=this.getX(i),d=this.getY(i),p=this.getWidth(i),v=this.getHeight(i),i.pdf.saveGraphicsState(),o=i.transform,this.element.hasAttribute("transform")&&(o=i.pdf.matrixMult(Sl(this.element.getAttribute("transform"),i),o)),i.pdf.setCurrentTransformationMatrix(o),i.withinUse||Et(this.element,i.styleSheets,"overflow")==="visible"||i.pdf.rect(s,d,p,v).clip().discardPath(),[4,e.prototype.render.call(this,i.clone({transform:i.pdf.unitMatrix,viewport:i.withinUse?i.viewport:new Al(p,v)}))]):[2];case 1:return r.sent(),i.pdf.restoreGraphicsState(),[2]}})})},t.prototype.computeNodeTransform=function(i){return this.computeNodeTransformCore(i)},t.prototype.computeNodeTransformCore=function(i){if(i.withinUse)return i.pdf.unitMatrix;var s,d=this.getX(i),p=this.getY(i),v=this.getViewBox();if(v){var o=this.getWidth(i),r=this.getHeight(i);s=Za(this.element,v,d,p,o,r,i)}else s=i.pdf.Matrix(1,0,0,1,d,p);return s},t.prototype.getWidth=function(i){if(this.width!==void 0)return this.width;var s,d,p=i.svg2pdfParameters;if(this.isOutermostSvg(i))if(p.width!=null)s=p.width;else if(d=Et(this.element,i.styleSheets,"width"))s=parseFloat(d);else{var v=this.getViewBox();if(v&&(p.height!=null||Et(this.element,i.styleSheets,"height"))){var o=v[2]/v[3];s=this.getHeight(i)*o}else s=Math.min(300,i.viewport.width,2*i.viewport.height)}else s=(d=Et(this.element,i.styleSheets,"width"))?parseFloat(d):i.viewport.width;return this.width=s},t.prototype.getHeight=function(i){if(this.height!==void 0)return this.height;var s,d,p=i.svg2pdfParameters;if(this.isOutermostSvg(i))if(p.height!=null)s=p.height;else if(d=Et(this.element,i.styleSheets,"height"))s=parseFloat(d);else{var v=this.getViewBox();if(v){var o=v[2]/v[3];s=this.getWidth(i)/o}else s=Math.min(150,i.viewport.width/2,i.viewport.height)}else s=(d=Et(this.element,i.styleSheets,"height"))?parseFloat(d):i.viewport.height;return this.height=s},t.prototype.getX=function(i){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(i))return this.x=0;var s=Et(this.element,i.styleSheets,"x");return this.x=s?parseFloat(s):0},t.prototype.getY=function(i){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(i))return this.y=0;var s=Et(this.element,i.styleSheets,"y");return this.y=s?parseFloat(s):0},t.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var i=this.element.getAttribute("viewBox");return this.viewBox=i?Qi(i):void 0},t.prototype.isOutermostSvg=function(i){return i.svg2pdfParameters.element===this.element},t}(Ld),Td=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.isVisible=function(i,s){return jn(this,i,s)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t}(Ld),dm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var s,d,p,v;return Fe(this,function(o){switch(o.label){case 0:return[4,e.prototype.renderCore.call(this,i)];case 1:return o.sent(),(s=Et(this.element,i.styleSheets,"href"))&&(d=this.getBoundingBox(i),p=i.pdf.internal.scaleFactor,v=i.pdf.internal.pageSize.getHeight(),i.pdf.link(p*(d[0]*i.transform.sx+i.transform.tx),v-p*(d[1]*i.transform.sy+i.transform.ty),p*d[2],p*d[3],{url:s})),[2]}})})},t}(Td),pm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Te(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var s,d,p;return Fe(this,function(v){switch(v.label){case 0:if(!this.isVisible(!0,i))return[2];s=i.pdf.matrixMult(this.computeNodeTransform(i),i.transform),i.pdf.setCurrentTransformationMatrix(s),d=0,p=this.children,v.label=1;case 1:return d<p.length?[4,p[d].render(new In(i.pdf,{refsHandler:i.refsHandler,styleSheets:i.styleSheets,viewport:i.viewport,withinClipPath:!0,svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure}))]:[3,4];case 2:v.sent(),v.label=3;case 3:return d++,[3,1];case 4:return i.pdf.clip().discardPath(),i.pdf.setCurrentTransformationMatrix(s.inversed()),[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Ch(i,this)},t.prototype.isVisible=function(i,s){return jn(this,i,s)},t}(Qa);function Th(e,t){var i,s=[];switch(function(p,v){for(var o=[],r=0;r<p.childNodes.length;r++){var c=p.childNodes[r];c.nodeName.charAt(0)!=="#"&&o.push(c)}for(r=0;r<o.length;r++)v(r,o[r])}(e,function(p,v){return s.push(Th(v,t))}),e.tagName.toLowerCase()){case"a":i=new dm(e,s);break;case"g":i=new Td(e,s);break;case"circle":i=new hm(e,s);break;case"clippath":i=new pm(e,s);break;case"ellipse":i=new im(e,s);break;case"lineargradient":i=new vd(e,s);break;case"image":i=new am(e,s);break;case"line":i=new Q2(e,s);break;case"marker":i=new cm(e,s);break;case"path":i=new nm(e,s);break;case"pattern":i=new yd(e,s);break;case"polygon":i=new om(e,s);break;case"polyline":i=new um(e,s);break;case"radialgradient":i=new bd(e,s);break;case"rect":i=new em(e,s);break;case"svg":i=new fm(e,s);break;case"symbol":i=new Sd(e,s);break;case"text":i=new rm(e,s);break;case"use":i=new tm(e,s);break;default:i=new lm(e,s)}if(t!=null&&i.element.hasAttribute("id")){var d=ud(i.element.id,{isIdentifier:!0});t[d]=t[d]||i}return i.children.forEach(function(p){return p.setParent(i)}),i}var gm=function(){function e(t,i){this.rootSvg=t,this.loadExternalSheets=i,this.styleSheets=[]}return e.prototype.load=function(){return Ne(this,void 0,void 0,function(){var t;return Fe(this,function(i){switch(i.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return t=i.sent(),this.parseCssSheets(t),[2]}})})},e.prototype.collectStyleSheetTexts=function(){return Ne(this,void 0,void 0,function(){var t,i,s,d,p;return Fe(this,function(v){switch(v.label){case 0:if(t=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(d=0;d<this.rootSvg.ownerDocument.childNodes.length;d++)(i=this.rootSvg.ownerDocument.childNodes[d]).nodeName==="xml-stylesheet"&&typeof i.data=="string"&&t.push(e.loadSheet(i.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(s=this.rootSvg.querySelectorAll("style,link"),d=0;d<s.length;d++)Mn(p=s[d],"style")?t.push(p.textContent):this.loadExternalSheets&&Mn(p,"link")&&p.getAttribute("rel")==="stylesheet"&&p.hasAttribute("href")&&t.push(e.loadSheet(p.getAttribute("href")));return[4,Promise.all(t)];case 1:return[2,v.sent().filter(function(o){return o!==null})]}})})},e.prototype.parseCssSheets=function(t){for(var i=document.implementation.createHTMLDocument(""),s=0,d=t;s<d.length;s++){var p=d[s],v=i.createElement("style");v.textContent=p,i.body.appendChild(v);var o=v.sheet;if(o instanceof CSSStyleSheet){for(var r=o.cssRules.length-1;r>=0;r--){var c=o.cssRules[r];if(c instanceof CSSStyleRule){var u=c;if(u.selectorText.indexOf(",")>=0){o.deleteRule(r);for(var a=u.cssText.substring(u.selectorText.length),l=e.splitSelectorAtCommas(u.selectorText),n=0;n<l.length;n++)o.insertRule(l[n]+a,r+n)}}else o.deleteRule(r)}this.styleSheets.push(o)}}},e.splitSelectorAtCommas=function(t){for(var i,s=/,|["']/g,d=/[^\\]["]/g,p=/[^\\][']/g,v=[],o="initial",r=-1,c=d,u=0;u<t.length;)switch(o){case"initial":s.lastIndex=u,(i=s.exec(t))?(i[0]===","?(v.push(t.substring(r+1,s.lastIndex-1).trim()),r=s.lastIndex-1):(o="withinQuotes",c=i[0]==='"'?d:p),u=s.lastIndex):(v.push(t.substring(r+1).trim()),u=t.length);break;case"withinQuotes":c.lastIndex=u,(i=c.exec(t))&&(u=c.lastIndex,o="initial")}return v},e.loadSheet=function(t){return new Promise(function(i,s){var d=new XMLHttpRequest;d.open("GET",t,!0),d.responseType="text",d.onload=function(){d.status!==200&&s(new Error("Error ".concat(d.status,": Failed to load '").concat(t,"'"))),i(d.responseText)},d.onerror=s,d.onabort=s,d.send(null)}).catch(function(){return null})},e.prototype.getPropertyValue=function(t,i){for(var s=[],d=0,p=this.styleSheets;d<p.length;d++)for(var v=p[d],o=0;o<v.cssRules.length;o++){var r=v.cssRules[o];r.style.getPropertyValue(i)&&t.matches(r.selectorText)&&s.push(r)}if(s.length!==0)return s.reduce(function(c,u){return l=u,((n=(a=c).style.getPropertyPriority(i))!==l.style.getPropertyPriority(i)?n==="important"?1:-1:V2(a.selectorText,l.selectorText))===1?c:u;var a,l,n}).style.getPropertyValue(i)||void 0},e}(),mm=function(){function e(){this.measureMethods={}}return e.prototype.getTextOffset=function(t,i){var s=i.textAnchor;if(s==="start")return 0;var d=this.measureTextWidth(t,i),p=0;switch(s){case"end":p=d;break;case"middle":p=d/2}return p},e.prototype.measureTextWidth=function(t,i){if(t.length===0)return 0;var s=i.fontFamily;return this.getMeasureFunction(s).call(this,t,i.fontFamily,i.fontSize+"px",i.fontStyle,i.fontWeight)},e.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS(Ku,"text");var t=document.createElementNS(Ku,"svg");t.appendChild(this.textMeasuringTextElement),t.style.setProperty("position","absolute"),t.style.setProperty("visibility","hidden"),document.body.appendChild(t)}return this.textMeasuringTextElement},e.prototype.canvasTextMeasure=function(t,i,s,d,p){var v=document.createElement("canvas").getContext("2d");return v!=null?(v.font=[d,p,s,i].join(" "),v.measureText(t).width):0},e.prototype.svgTextMeasure=function(t,i,s,d,p,v){v===void 0&&(v=this.getMeasurementTextNode());var o=v;return o.setAttribute("font-family",i),o.setAttribute("font-size",s),o.setAttribute("font-style",d),o.setAttribute("font-weight",p),o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.textContent=t,o.getBBox().width},e.prototype.getMeasureFunction=function(t){var i=this.measureMethods[t];if(!i){var s="16px",d="normal",p="normal",v=this.canvasTextMeasure(e.testString,t,s,d,p),o=this.svgTextMeasure(e.testString,t,s,d,p);i=Math.abs(v-o)<e.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[t]=i}return i},e.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var t=this.textMeasuringTextElement.parentNode;t&&document.body.removeChild(t),this.textMeasuringTextElement=void 0}},e.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,e.epsilon=.1,e}();function vm(e,t){return Ne(this,arguments,void 0,function(i,s,d){var p,v,o,r,c,u,a,l,n,h,g,f,m,y;return d===void 0&&(d={}),Fe(this,function(x){switch(x.label){case 0:return p=(f=d.x)!==null&&f!==void 0?f:0,v=(m=d.y)!==null&&m!==void 0?m:0,o=(y=d.loadExternalStyleSheets)!==null&&y!==void 0&&y,c=new dd(r={}),[4,(u=new gm(i,o)).load()];case 1:return x.sent(),a=new Al(s.internal.pageSize.getWidth(),s.internal.pageSize.getHeight()),l=vl(vl({},d),{element:i}),n=new mm,h=new In(s,{refsHandler:c,styleSheets:u,viewport:a,svg2pdfParameters:l,textMeasure:n}),s.advancedAPI(),s.saveGraphicsState(),s.setCurrentTransformationMatrix(s.Matrix(1,0,0,1,p,v)),s.setLineWidth(h.attributeState.strokeWidth),g=h.attributeState.fill.color,s.setFillColor(g.r,g.g,g.b),s.setFont(h.attributeState.fontFamily),s.setFontSize(h.attributeState.fontSize*s.internal.scaleFactor),[4,Th(i,r).render(h)];case 2:return x.sent(),s.restoreGraphicsState(),s.compatAPI(),h.textMeasure.cleanupTextMeasuring(),[2,s]}})})}Jt.API.svg=function(e,t){return t===void 0&&(t={}),vm(e,this,t)};const bm=(e,t)=>{switch(e){case"rect":return ym(t);case"triangle":return wm(t);case"ellipse":return xm(t);case"line":return _m(t);case"text":return Sm(t,"Tap to Type");default:return null}},ym=e=>new De.fabric.Rect({left:e.x,top:e.y,width:100,height:100,fill:"#d9d9d9",objectId:Rr()}),wm=e=>new De.fabric.Triangle({left:e.x,top:e.y,width:100,height:100,fill:"#d9d9d9",objectId:Rr()}),xm=e=>new De.fabric.Ellipse({left:e.x,top:e.y,rx:100,ry:100,fill:"#d9d9d9",objectId:Rr()}),_m=e=>new De.fabric.Line([e.x,e.y,e.x+100,e.y+100],{stroke:"#d9d9d9",strokeWidth:2,objectId:Rr()}),Sm=(e,t)=>new De.fabric.IText(t,{left:e.x,top:e.y,fill:"black",fontFamily:"Helvetica",fontSize:16,fontWeight:"400",lockScalingX:!0,lockScalingY:!0,objectId:Rr()}),ef=(e,t,i,s)=>new De.fabric.Group(e,{left:t,top:i,objectId:s||Rr()}),Cm=(e,t)=>e==="fill"||e==="stroke"?t:e==="opacity"?parseFloat(t):parseInt(t),Pd=e=>de(e).hex(),rf=e=>e?e==="Mixed"?e:de(e).hex().toUpperCase().slice(1):"",Am=e=>e?e==="Mixed"?e:""+ +e*100:"",km=e=>""+ +e/100,Od=(e,t)=>{e&&(e.type==="group"&&e.getObjects().forEach((i,s)=>{Od(i,t.objects[s])}),t.objectId=e.objectId)},Lm=({canvas:e,property:t,value:i,syncShapeInStorage:s})=>{if(!e)return;const d=e.getActiveObject();if(!(!d||(d==null?void 0:d.type)==="activeSelection")){if(i=Cm(t,i),t==="width")d.set("scaleX",1),d.set("width",i);else if(t==="height")d.set("scaleY",1),d.set("height",i);else{if(d[t]===i)return;d.set(t,i)}e.renderAll(),s(d)}},Tm=({canvas:e,objectId:t})=>{if(!e)return;const i=e.getObjects().find(s=>s.objectId===t);i&&(i.visible=!i.visible,e.renderAll())},Pm=({canvas:e,objectId:t})=>{if(!e)return;const i=e.getObjects().find(s=>s.objectId===t);i&&(i.selectable=!i.selectable,e.renderAll())},oh=(e,t)=>{e.getObjects().forEach(i=>{e.remove(i),e.renderAll()}),De.fabric.util.enlivenObjects(t,i=>{i.forEach(s=>{e.add(s)}),e.renderAll()},"fabric")},Om=(e,t)=>{const i=e.getActiveObject();if(!i)return;const{left:s,top:d,width:p,height:v}=i.getBoundingRect(),o=0,r=e.toDataURL({format:t,left:s-o,top:d-o,width:p+o*2,height:v+o*2,multiplier:1}),c=document.createElement("a");c.href=r,c.download=`element.${t}`,c.click()},Mm=e=>{const t=e.getActiveObject();if(!t)return;const i=t.toSVG(),{left:s,top:d,width:p,height:v}=t.getBoundingRect(),o=0,r=`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      width="${p+o*2}"
      height="${v+o*2}"
      viewBox="${s-o} ${d-o} ${p+o*2} ${v+o*2}"
    >
      ${i}
    </svg>
  `,c=new Blob([r],{type:"image/svg+xml"}),u=URL.createObjectURL(c),a=document.createElement("a");a.href=u,a.download="element.svg",a.click(),URL.revokeObjectURL(u)},Nm=e=>{const t=e.getActiveObject();if(!t)return;const i=t.toSVG(),{left:s,top:d,width:p,height:v}=t.getBoundingRect(),o=0,r=`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      width="${p+o*2}"
      height="${v+o*2}"
      viewBox="${s-o} ${d-o} ${p+o*2} ${v+o*2}"
    >
      ${i}
    </svg>
  `,c=new Jt({orientation:p>v?"l":"p",unit:"px",format:[p+o*2,v+o*2]}),u=new DOMParser().parseFromString(r,"image/svg+xml").documentElement;c.svg(u,{x:o,y:o,width:p,height:v}).then(()=>{c.save("element.pdf")})},Fm=(e,t)=>{e==="png"||e==="jpeg"?Om(t,e):e==="svg"?Mm(t):e==="pdf"&&Nm(t)},Em={class:"custom-multi-input"},Im={class:"multi-input-container"},jm={class:"right-slot"},Dm=ir({__name:"FillInput",props:{rawLeftValue:{},leftValue:{},rightValue:{},leftText:{},rightText:{},handleLeftChange:{type:Function},handleRightChange:{type:Function}},setup(e){const t=e,i=ue(null),s=ue(null),d=ue(null),p=ue(t.rawLeftValue),v=ue(t.leftValue),o=ue(t.rightValue);es(()=>t.leftValue,h=>{v.value=h}),es(()=>t.rightValue,h=>{o.value=h});const r=()=>{d.value&&d.value.click()},c=()=>{d.value&&(console.log(d.value.value),p.value=d.value.value,t.handleLeftChange(p.value))},u=()=>{t.handleLeftChange(Pd(v.value))},a=()=>{t.handleRightChange(km(o.value))},l=()=>{u(),i.value&&i.value.blur()},n=()=>{a(),s.value&&s.value.blur()};return(h,g)=>(ce(),ge("div",Em,[$t("div",Im,[$t("div",{class:"left-slot",onClick:r},[Zs(h.$slots,"left",{},()=>[$t("span",null,on(h.leftText),1)])]),Hs($t("input",{ref_key:"leftInputRef",ref:i,"onUpdate:modelValue":g[0]||(g[0]=f=>Vs(v)?v.value=f:null),class:"left-input-field",onBlur:u,onKeydown:fl(l,["enter"])},null,544),[[Ys,Xt(v)]]),Hs($t("input",{ref_key:"rightInputRef",ref:s,"onUpdate:modelValue":g[1]||(g[1]=f=>Vs(o)?o.value=f:null),class:"right-input-field",onBlur:a,onKeydown:fl(n,["enter"])},null,544),[[Ys,Xt(o)]]),$t("div",jm,[Zs(h.$slots,"right",{},()=>[$t("span",null,on(h.rightText),1)])])]),Hs($t("input",{type:"color","onUpdate:modelValue":g[2]||(g[2]=f=>Vs(p)?p.value=f:null),onChange:c,ref_key:"colorInput",ref:d,style:{visibility:"hidden",width:"0",height:"0"}},null,544),[[Ys,Xt(p)]])]))}}),Bm=rr(Dm,[["__scopeId","data-v-a6819a1a"]]),Rm={class:"custom-input"},zm={class:"input-container"},qm=ir({__name:"StrokeInput",props:{rawValue:{},value:{},leftText:{},handleChange:{type:Function}},setup(e){const t=e,i=ue(null),s=ue(null),d=ue(t.rawValue),p=ue(t.value),v=()=>{s.value&&s.value.click()},o=()=>{s.value&&(d.value=s.value.value,t.handleChange(d.value))};es(()=>t.value,u=>{p.value=u},{immediate:!0});const r=()=>{t.handleChange(Pd(p.value))},c=()=>{r(),i.value&&i.value.blur()};return(u,a)=>(ce(),ge("div",Rm,[$t("div",zm,[$t("div",{class:"left-slot",onClick:v},[Zs(u.$slots,"left",{},()=>[$t("span",null,on(u.leftText),1)])]),Hs($t("input",{ref_key:"inputRef",ref:i,"onUpdate:modelValue":a[0]||(a[0]=l=>Vs(p)?p.value=l:null),class:"input-field",onBlur:r,onKeydown:fl(c,["enter"])},null,544),[[Ys,Xt(p)]])]),Hs($t("input",{type:"color","onUpdate:modelValue":a[1]||(a[1]=l=>Vs(d)?d.value=l:null),onChange:o,ref_key:"colorInput",ref:s,style:{visibility:"hidden",width:"0",height:"0"}},null,544),[[Ys,Xt(d)]])]))}}),Um=rr(qm,[["__scopeId","data-v-fe149344"]]),Wm={class:"custom-select"},Hm={class:"selected-option"},Ym={class:"arrow-icon"},Vm={key:0,class:"dropdown"},Xm=["onClick"],Gm=ir({__name:"Select",props:{options:{},value:{},handleChange:{type:Function}},setup(e){var v;const t=e,i=ue(!1),s=ue((v=t.options.find(o=>o.value===t.value))==null?void 0:v.label);es(()=>t.value,o=>{var r;s.value=((r=t.options.find(c=>c.value===o))==null?void 0:r.label)||""});const d=()=>{i.value=!i.value},p=o=>{s.value=o.label,t.handleChange(o.value),i.value=!1};return(o,r)=>(ce(),ge("div",Wm,[$t("div",{class:"select-container",onClick:d},[$t("div",Hm,[$t("span",null,on(Xt(s)),1)]),$t("div",Ym,[Ae(Xt(lf),{size:12,"stroke-width":1,color:"black"})])]),Xt(i)?(ce(),ge("div",Vm,[(ce(!0),ge(Qs,null,ta(o.options,c=>(ce(),ge("div",{key:c.value,class:"dropdown-item",onClick:u=>p(c)},on(c.label),9,Xm))),128))])):ji("",!0)]))}}),Uc=rr(Gm,[["__scopeId","data-v-8bbbee98"]]),$m={class:"right-side-bar"},Km={class:"block"},Jm={key:0,class:"pb-2 px-4 flex gap-2"},Zm={key:1,class:"pb-2 px-4 flex gap-2"},Qm={class:"block"},tv={key:0,class:"pb-2 px-4 flex gap-2"},ev={class:"block"},iv={key:0,class:"pb-2 px-4 flex gap-2"},rv={class:"block"},nv={class:"flex justify-between items-center"},sv={key:0,class:"pb-2 px-4 flex gap-11"},av={class:"block"},ov={class:"flex justify-between items-center"},lv={key:0,class:"pb-2 px-4 flex gap-2"},cv={class:"block"},hv={key:0,class:"pb-2 px-4 flex gap-2"},uv=ir({__name:"RightSideBar",props:{fabric:{},elAttrs:{},setElAttrs:{type:Function},syncShapeInStorage:{type:Function}},setup(e){of(P=>({"0c5ff419":Xt(d),"04ed7cd0":Xt(p),"012b4f0a":Xt(v),"6981728b":Xt(o),"0fb85064":Xt(r)}));const t=e,i=ue("png"),s=P=>P===""||P==="Mixed"?"#ababab":P,d=Ir(()=>t.elAttrs.stroke&&t.elAttrs.stroke!=="Mixed"?"#000":"#ababab"),p=Ir(()=>t.elAttrs.fontWeight&&t.elAttrs.fontWeight!=="Mixed"?"#000":"#ababab"),v=Ir(()=>t.elAttrs.left?"#000":"#ababab"),o=Ir(()=>t.elAttrs.width?"#000":"#ababab"),r=Ir(()=>t.elAttrs.fill&&t.elAttrs.fill!=="transparent"?"#000":"#ababab"),c=({property:P,value:I})=>{Lm({canvas:t.fabric,property:P,value:I,syncShapeInStorage:t.syncShapeInStorage})},u=P=>{t.setElAttrs({...t.elAttrs,left:P}),c({property:"left",value:P})},a=P=>{t.setElAttrs({...t.elAttrs,top:P}),c({property:"top",value:P})},l=P=>{t.setElAttrs({...t.elAttrs,width:P}),c({property:"width",value:P})},n=P=>{t.setElAttrs({...t.elAttrs,height:P}),c({property:"height",value:P})},h=P=>{t.setElAttrs({...t.elAttrs,angle:P}),c({property:"angle",value:P})},g=P=>{t.setElAttrs({...t.elAttrs,fill:P}),c({property:"fill",value:P})},f=P=>{t.setElAttrs({...t.elAttrs,opacity:P}),c({property:"opacity",value:P})},m=()=>{t.setElAttrs({...t.elAttrs,strokeWidth:"1",stroke:"#000000"}),c({property:"stroke",value:"#000000"}),c({property:"strokeWidth",value:"1"})},y=()=>{t.setElAttrs({...t.elAttrs,fill:"#000000"}),c({property:"fill",value:"#000000"})},x=()=>{t.setElAttrs({...t.elAttrs,strokeWidth:"",stroke:""}),c({property:"stroke",value:null})},S=()=>{t.setElAttrs({...t.elAttrs,fill:""}),c({property:"fill",value:null})},A=P=>{t.setElAttrs({...t.elAttrs,stroke:P}),c({property:"stroke",value:P})},M=P=>{t.setElAttrs({...t.elAttrs,strokeWidth:P}),c({property:"strokeWidth",value:P})},T=P=>{t.setElAttrs({...t.elAttrs,fontWeight:P}),c({property:"fontWeight",value:P})},N=P=>{t.setElAttrs({...t.elAttrs,fontSize:P}),c({property:"fontSize",value:P})},W=P=>{i.value=P},K=()=>{t.fabric&&Fm(i.value,t.fabric)};return(P,I)=>(ce(),ge("div",$m,[$t("div",Km,[I[0]||(I[0]=$t("div",{class:"py-3 px-4 font-medium text-[12px] position-block"}," Position ",-1)),P.$props.elAttrs.left?(ce(),ge("div",Jm,[Ae(Fs,{"left-text":"X",value:P.$props.elAttrs.left,"handle-change":u},null,8,["value"]),Ae(Fs,{"left-text":"Y",value:P.$props.elAttrs.top,"handle-change":a},null,8,["value"])])):ji("",!0),P.$props.elAttrs.left?(ce(),ge("div",Zm,[Ae(Fs,{"left-text":"",value:P.$props.elAttrs.angle,"handle-change":h},{left:Ws(()=>[Ae(Xt(j0),{size:12,color:"#ababab"})]),_:1},8,["value"])])):ji("",!0)]),$t("div",Qm,[I[1]||(I[1]=$t("div",{class:"py-3 px-4 font-medium text-[12px] layout-block"}," Layout ",-1)),P.$props.elAttrs.width?(ce(),ge("div",tv,[Ae(Fs,{"left-text":"W",value:P.$props.elAttrs.width,"handle-change":l},null,8,["value"]),Ae(Fs,{"left-text":"H",value:P.$props.elAttrs.height,"handle-change":n},null,8,["value"])])):ji("",!0)]),$t("div",ev,[I[2]||(I[2]=$t("div",{class:"py-3 px-4 font-medium text-[12px] typography-block"}," Typography ",-1)),P.$props.elAttrs.fontWeight&&P.$props.elAttrs.fontWeight!=="Mixed"?(ce(),ge("div",iv,[$t("div",null,[Ae(Uc,{value:P.$props.elAttrs.fontWeight,options:Xt(v0),"handle-change":T},null,8,["value","options"])]),$t("div",null,[Ae(Uc,{value:P.$props.elAttrs.fontSize,options:Xt(b0),"handle-change":N},null,8,["value","options"])])])):ji("",!0)]),$t("div",rv,[$t("div",nv,[I[3]||(I[3]=$t("div",{class:"py-3 px-4 font-medium text-[12px] fill-block"}," Fill ",-1)),P.$props.elAttrs.fill!=="Mixed"?(ce(),ge("div",{key:0,class:"plus",onClick:y},[Ae(Xt(su),{size:18,color:Xt(r),"stroke-width":"1"},null,8,["color"])])):ji("",!0)]),P.$props.elAttrs.fill&&P.$props.elAttrs.fill!=="transparent"?(ce(),ge("div",sv,[Ae(Bm,{"left-text":"","right-text":"%","raw-left-value":P.$props.elAttrs.fill,"left-value":Xt(rf)(P.$props.elAttrs.fill),"right-value":Xt(Am)(P.$props.elAttrs.opacity),"handle-left-change":g,"handle-right-change":f},{left:Ws(()=>[Ae(Xt(Xa),{size:12,color:s(P.$props.elAttrs.fill),fill:s(P.$props.elAttrs.fill)},null,8,["color","fill"])]),_:1},8,["raw-left-value","left-value","right-value"]),$t("div",{class:"minus",onClick:S},[Ae(Xt(nu),{size:18,color:"#000","stroke-width":"1"})])])):ji("",!0)]),$t("div",av,[$t("div",ov,[I[4]||(I[4]=$t("div",{class:"py-3 px-4 font-medium text-[12px] stroke-block"}," Stroke ",-1)),P.$props.elAttrs.fill&&P.$props.elAttrs.stroke!=="Mixed"?(ce(),ge("div",{key:0,class:"plus",onClick:m},[Ae(Xt(su),{size:18,color:Xt(d),"stroke-width":"1"},null,8,["color"])])):ji("",!0)]),P.$props.elAttrs.stroke&&P.$props.elAttrs.stroke!=="Mixed"?(ce(),ge("div",lv,[Ae(Um,{"left-text":"","raw-value":P.$props.elAttrs.stroke,value:Xt(rf)(P.$props.elAttrs.stroke),"handle-change":A},{left:Ws(()=>[Ae(Xt(Xa),{size:12,color:s(P.$props.elAttrs.stroke),fill:s(P.$props.elAttrs.stroke)},null,8,["color","fill"])]),_:1},8,["raw-value","value"]),Ae(Fs,{"left-text":"",value:P.$props.elAttrs.strokeWidth,"handle-change":M},{left:Ws(()=>[Ae(Xt(A0),{size:12,color:"#ababab"})]),_:1},8,["value"]),$t("div",{class:"minus",onClick:x},[Ae(Xt(nu),{size:18,color:"#000","stroke-width":"1"})])])):ji("",!0)]),$t("div",cv,[I[6]||(I[6]=$t("div",{class:"py-3 px-4 font-medium text-[12px] layout-block"}," Export ",-1)),P.$props.elAttrs.width?(ce(),ge("div",hv,[$t("div",null,[Ae(Uc,{value:Xt(i),options:Xt(y0),"handle-change":W},null,8,["value","options"])]),$t("div",{class:"export-button",onClick:K},I[5]||(I[5]=[$t("div",null," Export ",-1)]))])):ji("",!0)])]))}}),fv=rr(uv,[["__scopeId","data-v-3fb72beb"]]),Ph=w0("main",{state:()=>({canvasObjects:[],undoStack:[],redoStack:[]}),getters:{getObjectById:e=>t=>e.canvasObjects.find(i=>i.objectId===t),getIndexById:e=>t=>e.canvasObjects.findIndex(i=>i.objectId===t)},actions:{saveState(){this.undoStack.length>=50&&this.undoStack.shift(),this.undoStack.push(JSON.stringify(this.canvasObjects)),this.redoStack=[]},undo(e){if(this.undoStack.length>0){const t=this.undoStack.pop();this.redoStack.push(JSON.stringify(this.canvasObjects)),this.canvasObjects=JSON.parse(t),oh(e,this.canvasObjects),localStorage.setItem("canvasObjects",t)}},redo(e){if(this.redoStack.length>0){const t=this.redoStack.pop();this.undoStack.push(JSON.stringify(this.canvasObjects)),this.canvasObjects=JSON.parse(t),oh(e,this.canvasObjects),localStorage.setItem("canvasObjects",t)}},loadCanvasFromStorage(){const e=localStorage.getItem("canvasObjects");if(e==null)return this.canvasObjects=[],localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects)),this.canvasObjects;const t=JSON.parse(e);return Array.isArray(t)?this.canvasObjects=t:(this.canvasObjects=[],localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))),this.saveState(),this.canvasObjects},syncShapeInStorage(e){if(!e)return;const{objectId:t}=e;this.saveState();const i=e.toJSON(["selectable","lockScalingX","lockScalingY"]);Od(e,i);const s=this.getIndexById(t);s===-1?this.canvasObjects.push(i):this.canvasObjects[s]=i,localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))},frontShapeInStorage(e){const t=this.getIndexById(e);if(t===-1)return;this.saveState();const i=this.canvasObjects.splice(t,1)[0];this.canvasObjects.push(i),localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))},backShapeInStorage(e){const t=this.getIndexById(e);if(t===-1)return;this.saveState();const i=this.canvasObjects.splice(t,1)[0];this.canvasObjects.unshift(i),localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))},deleteShapeInStorage(e){this.saveState(),this.canvasObjects=this.canvasObjects.filter(t=>t.objectId!==e),localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))},modifyShapeInStorage(e,t,i){const s=this.getIndexById(e);s!==-1&&(this.saveState(),this.canvasObjects[s][t]=i,localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects)))}}}),dv={class:"type-text"},pv={class:"flex gap-3"},gv={key:0,class:"nested-items"},mv=ir({__name:"LayerItem",props:{fabric:{},object:{},selectedObjectIds:{},grouped:{type:Boolean},visibility:{type:Boolean},selectablility:{type:Boolean}},setup(e){of(h=>({c365d220:Xt(r)}));const t=Ph(),i=e,s=ue(!1),d=ue(!1),p=Ir(()=>!i.grouped&&(d.value||!i.visibility)),v=Ir(()=>!i.grouped&&(d.value||!i.selectablility)),o=Ir(()=>i.selectedObjectIds.includes(i.object.objectId)),r=Ir(()=>i.visibility?"#000":"#ababab"),c=()=>{s.value=!s.value},u=h=>{i.object.visible=!i.object.visible,Tm({canvas:i.fabric,objectId:h}),t.modifyShapeInStorage(h,"visible",i.object.visible)},a=h=>{i.object.selectable=!i.object.selectable,Pm({canvas:i.fabric,objectId:h}),t.modifyShapeInStorage(h,"selectable",i.object.selectable)},l=h=>o.value||h==="group"||h==="image"?"#000":"#ababab",n=h=>{switch(h){case"rect":return{icon:Xa,name:"Rectangle"};case"line":return{icon:uf,name:"Line"};case"ellipse":return{icon:cf,name:"Ellipse"};case"triangle":return{icon:ff,name:"Triangle"};case"i-text":return{icon:df,name:"Text"};case"path":return{icon:D0,name:"Path"};case"image":return{icon:hf,name:"Image"};case"group":return{icon:B0,name:"Group"};default:return{icon:Xa,name:h}}};return(h,g)=>{const f=x0("LayerItem",!0);return ce(),ge("div",null,[$t("div",{class:"shape-item",onMouseenter:g[2]||(g[2]=m=>d.value=!0),onMouseleave:g[3]||(g[3]=m=>d.value=!1)},[$t("div",{onClick:nl(c,["stop"])},[Ae(Xt(L0),{size:12,class:lh({rotated:Xt(s)}),color:h.$props.object.type==="group"?"#ababab":"#fff0"},null,8,["class","color"])]),$t("div",null,[(ce(),Jn(Wa(n(h.object.type).icon),{size:12,"stroke-width":2,color:l(h.object.type)},null,8,["color"]))]),$t("div",dv,on(n(h.object.type).name),1),$t("div",pv,[(ce(),Jn(Wa(h.$props.selectablility?Xt(M0):Xt(N0)),{style:ul({visibility:Xt(v)?"visible":"hidden"}),size:12,"stroke-width":2,onClick:g[0]||(g[0]=nl(m=>a(h.object.objectId),["stop"]))},null,8,["style"])),(ce(),Jn(Wa(h.$props.visibility?Xt(P0):Xt(T0)),{style:ul({visibility:Xt(p)?"visible":"hidden"}),size:12,"stroke-width":2,onClick:g[1]||(g[1]=nl(m=>u(h.object.objectId),["stop"]))},null,8,["style"]))])],32),h.object.type==="group"&&Xt(s)?(ce(),ge("div",gv,[(ce(!0),ge(Qs,null,ta(h.object.objects,m=>(ce(),Jn(f,{key:m.objectId,object:m,fabric:h.fabric,"selected-object-ids":h.selectedObjectIds,grouped:!0,visibility:h.$props.visibility,selectablility:h.$props.selectablility},null,8,["object","fabric","selected-object-ids","visibility","selectablility"]))),128))])):ji("",!0)])}}}),vv=rr(mv,[["__scopeId","data-v-26eccb3b"]]),bv={class:"left-side-bar"},yv={class:"flex flex-col px-3"},wv=ir({__name:"LeftSideBar",props:{fabric:{},selectedObjectIds:{},setSelectedObjectIds:{type:Function}},setup(e){const t=Ph(),i=Ir(()=>t.canvasObjects.toReversed()),s=e,d=p=>{s.setSelectedObjectIds([p])};return(p,v)=>(ce(),ge("div",bv,[v[0]||(v[0]=$t("div",{class:"pt-4 pb-2 px-4 font-medium text-[12px]"}," Layers ",-1)),$t("div",yv,[(ce(!0),ge(Qs,null,ta(Xt(i).map(o=>o.objectId),(o,r)=>(ce(),Jn(vv,{key:o,fabric:p.$props.fabric,object:Xt(i)[r],"selected-object-ids":p.$props.selectedObjectIds,class:lh([{selected:p.selectedObjectIds.includes(o)},"layer-item"]),grouped:!1,visibility:Xt(i)[r].visible,selectablility:Xt(i)[r].selectable,onClick:c=>d(o)},null,8,["fabric","object","selected-object-ids","class","visibility","selectablility","onClick"]))),128))])]))}}),xv=rr(wv,[["__scopeId","data-v-6f19a836"]]),tn=e=>Object.keys(e);class _v{constructor({canvas:t,aligningOptions:i,ignoreObjTypes:s,pickObjTypes:d}){Zi(this,"aligningLineMargin",4);Zi(this,"aligningLineWidth",.75);Zi(this,"aligningLineColor","#F68066");Zi(this,"ignoreObjTypes",[]);Zi(this,"pickObjTypes",[]);Zi(this,"canvas");Zi(this,"ctx");Zi(this,"viewportTransform");Zi(this,"verticalLines",[]);Zi(this,"horizontalLines",[]);Zi(this,"activeObj",new De.fabric.Object);this.canvas=t,this.ctx=t.getSelectionContext(),this.ignoreObjTypes=s||[],this.pickObjTypes=d||[],i&&(this.aligningLineMargin=i.lineMargin||this.aligningLineMargin,this.aligningLineWidth=i.lineWidth||this.aligningLineWidth,this.aligningLineColor=i.lineColor||this.aligningLineColor)}drawSign(t,i){const s=this.ctx;s.lineWidth=.5,s.strokeStyle=this.aligningLineColor,s.beginPath();const d=2;s.moveTo(t-d,i-d),s.lineTo(t+d,i+d),s.moveTo(t+d,i-d),s.lineTo(t-d,i+d),s.stroke()}drawLine(t,i,s,d){const p=this.ctx,v=De.fabric.util.transformPoint(new De.fabric.Point(t,i),this.canvas.viewportTransform),o=De.fabric.util.transformPoint(new De.fabric.Point(s,d),this.canvas.viewportTransform);p.save(),p.lineWidth=this.aligningLineWidth,p.strokeStyle=this.aligningLineColor,p.beginPath(),p.moveTo(v.x,v.y),p.lineTo(o.x,o.y),p.stroke(),this.drawSign(v.x,v.y),this.drawSign(o.x,o.y),p.restore()}drawVerticalLine(t){const i=this.getObjDraggingObjCoords(this.activeObj);!tn(i).some(s=>Math.abs(i[s].x-t.x)<1e-4)||this.drawLine(t.x,Math.min(t.y1,t.y2),t.x,Math.max(t.y1,t.y2))}drawHorizontalLine(t){const i=this.getObjDraggingObjCoords(this.activeObj);!tn(i).some(s=>Math.abs(i[s].y-t.y)<1e-4)||this.drawLine(Math.min(t.x1,t.x2),t.y,Math.max(t.x1,t.x2),t.y)}isInRange(t,i){return Math.abs(Math.round(t)-Math.round(i))<=this.aligningLineMargin/this.canvas.getZoom()}watchMouseDown(){this.canvas.on("mouse:down",()=>{this.clearLinesMeta(),this.viewportTransform=this.canvas.viewportTransform})}watchMouseUp(){this.canvas.on("mouse:up",()=>{this.clearLinesMeta(),this.canvas.renderAll()})}watchMouseWheel(){this.canvas.on("mouse:wheel",()=>{this.clearLinesMeta()})}clearLinesMeta(){this.verticalLines.length=this.horizontalLines.length=0}watchObjectMoving(){this.canvas.on("object:moving",t=>{this.clearLinesMeta();const i=t.target;this.activeObj=i;const s=this.canvas.getObjects().filter(d=>this.ignoreObjTypes.length?!this.ignoreObjTypes.some(p=>d[p.key]===p.value):this.pickObjTypes.length?this.pickObjTypes.some(p=>d[p.key]===p.value):!0);!this.canvas._currentTransform||this.traversAllObjects(i,s)})}getObjDraggingObjCoords(t){const i=t.aCoords,s=new De.fabric.Point((i.tl.x+i.br.x)/2,(i.tl.y+i.br.y)/2),d=s.x-t.getCenterPoint().x,p=s.y-t.getCenterPoint().y;return tn(i).reduce((v,o)=>({...v,[o]:{x:i[o].x-d,y:i[o].y-p}}),{c:t.getCenterPoint()})}omitCoords(t,i){let s;if(i==="vertical"){let d=["tl",t.tl],p=["tl",t.tl];tn(t).forEach(v=>{t[v].x<d[1].x&&(d=[v,t[v]]),t[v].x>p[1].x&&(p=[v,t[v]])}),s={[d[0]]:d[1],[p[0]]:p[1],c:t.c}}else{let d=["tl",t.tl],p=["tl",t.tl];tn(t).forEach(v=>{t[v].y<d[1].y&&(d=[v,t[v]]),t[v].y>p[1].y&&(p=[v,t[v]])}),s={[d[0]]:d[1],[p[0]]:p[1],c:t.c}}return s}getObjMaxWidthHeightByCoords(t){const i=Math.max(Math.abs(t.c.y-t.tl.y),Math.abs(t.c.y-t.tr.y))*2,s=Math.max(Math.abs(t.c.x-t.tl.x),Math.abs(t.c.x-t.tr.x))*2;return{objHeight:i,objWidth:s}}calcCenterPointByACoords(t){return new De.fabric.Point((t.tl.x+t.br.x)/2,(t.tl.y+t.br.y)/2)}traversAllObjects(t,i){const s=this.getObjDraggingObjCoords(t),d=[],p=[];for(let v=i.length;v--;){if(i[v]===t)continue;const o={...i[v].aCoords,c:i[v].getCenterPoint()},{objHeight:r,objWidth:c}=this.getObjMaxWidthHeightByCoords(o);tn(s).forEach(u=>{const a=i[v].angle!==0?this.omitCoords(o,"horizontal"):o;function l(n,h){let g,f;return n==="c"?(g=Math.min(o.c.x-c/2,h[u].x),f=Math.max(o.c.x+c/2,h[u].x)):(g=Math.min(o[n].x,h[u].x),f=Math.max(o[n].x,h[u].x)),{x1:g,x2:f}}tn(a).forEach(n=>{if(this.isInRange(s[u].y,o[n].y)){const h=o[n].y;let{x1:g,x2:f}=l(n,s);const m=s[u].y-h;if(p.push(s.c.y-m),t.aCoords){let{x1:y,x2:x}=l(n,{...t.aCoords,c:this.calcCenterPointByACoords(t.aCoords)});this.horizontalLines.push({y:h,x1:y,x2:x})}else this.horizontalLines.push({y:h,x1:g,x2:f})}})}),tn(s).forEach(u=>{const a=i[v].angle!==0?this.omitCoords(o,"vertical"):o;function l(n,h){let g,f;return n==="c"?(g=Math.min(a.c.y-r/2,h[u].y),f=Math.max(a.c.y+r/2,h[u].y)):(g=Math.min(o[n].y,h[u].y),f=Math.max(o[n].y,h[u].y)),{y1:g,y2:f}}tn(a).forEach(n=>{if(this.isInRange(s[u].x,o[n].x)){const h=o[n].x;let{y1:g,y2:f}=l(n,s);const m=s[u].x-h;if(d.push(s.c.x-m),t.aCoords){let{y1:y,y2:x}=l(n,{...t.aCoords,c:this.calcCenterPointByACoords(t.aCoords)});this.verticalLines.push({x:h,y1:y,y2:x})}else this.verticalLines.push({x:h,y1:g,y2:f})}})}),this.snap({activeObject:t,draggingObjCoords:s,snapXPoints:d,snapYPoints:p})}}snap({activeObject:t,snapXPoints:i,draggingObjCoords:s,snapYPoints:d}){const p=(v,o)=>v.length?v.map(r=>({abs:Math.abs(o-r),val:r})).sort((r,c)=>r.abs-c.abs)[0].val:o;t.setPositionByOrigin(new De.fabric.Point(p(i,s.c.x),p(d,s.c.y)),"center","center")}clearGuideline(){this.canvas.clearContext(this.ctx)}watchRender(){this.canvas.on("before:render",()=>{this.clearGuideline()}),this.canvas.on("after:render",()=>{for(let t=this.verticalLines.length;t--;)this.drawVerticalLine(this.verticalLines[t]);for(let t=this.horizontalLines.length;t--;)this.drawHorizontalLine(this.horizontalLines[t]);this.canvas.calcOffset()})}init(){this.watchObjectMoving(),this.watchRender(),this.watchMouseDown(),this.watchMouseUp(),this.watchMouseWheel()}}const Oh={type:"Mixed",left:"Mixed",top:"Mixed",width:"Mixed",height:"Mixed",angle:"Mixed",fill:"Mixed",opacity:"Mixed",stroke:"Mixed",strokeWidth:"Mixed",fontSize:"Mixed",fontWeight:"Mixed"},Sv={type:"",left:"",top:"",width:"",height:"",angle:"",fill:"",opacity:"",stroke:"",strokeWidth:"",fontSize:"",fontWeight:""},Cv=({canvasRef:e})=>{if(!e.value)return console.error("Canvas element is not available."),{};const t=e.value;return t?new De.fabric.Canvas(e.value,{width:t.clientWidth,height:t.clientHeight,backgroundColor:"#f5f5f5",selectionBorderColor:"#0d99ff",selectionColor:"#0d99ff22"}):(console.error("Canvas is not available."),{})},Av=({options:e,canvas:t,selectedToolRef:i,shapeRef:s,pathToDrawRef:d,isMouseDownRef:p})=>{var r;const v=t.getPointer(e.e),o=t.findTarget(e.e,!1);if(i.value==="pen"){if(p.value=!0,!d.value)d.value=new De.fabric.Path(`M${v.x} ${v.y} L${v.x} ${v.y}`,{strokeWidth:1,stroke:"#000000",fill:"transparent",objectId:Rr()}),d.value.selectable=!1,d.value.strokeUniform=!0,t.add(d.value);else{(r=d.value.path)==null||r.push(["L",v.x,v.y]);let c=d.value._calcDimensions();d.value.set({width:c.width,height:c.height,left:c.left,top:c.top,pathOffset:{x:c.width/2+c.left,y:c.height/2+c.top},dirty:!0}),d.value.setCoords()}t.renderAll();return}o&&o.type===i.value?(t.setActiveObject(o),o.setCoords()):(s.value=bm(i.value,v),s.value&&(s.value.set({visible:!1}),t.add(s.value)))},kv=({options:e,canvas:t,selectedToolRef:i,shapeRef:s,pathToDrawRef:d,updatedPathRef:p,isMouseDownRef:v,rememberedPositionRef:o,isDrawingCurveRef:r})=>{var a,l,n,h,g,f,m,y,x,S,A,M;const c=(T,N,W,K,P)=>Math.abs(N-K)<=T&&Math.abs(W-P)<=T;if(i.value==="pencil")return;const u=t.getPointer(e.e);if(i.value==="pen"&&d.value){if(r.value||(p.value=["L",u.x,u.y]),(a=d.value.path)==null||a.pop(),d.value.path&&d.value.path.length>1){let N=[...d.value.path];N.pop();for(let W of N){if((W[0]==="L"||W[0]==="M")&&c(10,u.x,u.y,W[1],W[2])&&p.value){p.value[1]=W[1],p.value[2]=W[2];break}if(W[0]==="Q"&&c(10,u.x,u.y,W[3],W[4])&&p.value){p.value[1]=W[3],p.value[2]=W[4];break}}}if(v.value){if(!r.value&&d.value.path&&d.value.path.length>1){r.value=!0;let N=d.value.path.pop();N[0]==="Q"?(p.value=["Q",N[3],N[4],N[3],N[4]],o.value.x=N[3],o.value.y=N[4]):(p.value=["Q",N[1],N[2],N[1],N[2]],o.value.x=N[1],o.value.y=N[2])}else if(r.value){let N=u.x-p.value[3],W=u.y-p.value[4];p.value=["Q",o.value.x-N,o.value.y-W,o.value.x,o.value.y]}}(l=d.value.path)==null||l.push(p.value);let T=d.value._calcDimensions();d.value.set({width:T.width,height:T.height,left:T.left,top:T.top,pathOffset:{x:T.width/2+T.left,y:T.height/2+T.top},dirty:!0}),t.renderAll();return}switch(t.isDrawingMode=!1,s.value&&s.value.set({visible:!0}),i==null?void 0:i.value){case"rect":(g=s.value)==null||g.set({width:u.x-(((n=s.value)==null?void 0:n.left)||0),height:u.y-(((h=s.value)==null?void 0:h.top)||0)}),t.renderAll();break;case"ellipse":(y=s.value)==null||y.set({rx:Math.abs(u.x-(((f=s.value)==null?void 0:f.left)||0))/2,ry:Math.abs(u.y-(((m=s.value)==null?void 0:m.top)||0))/2}),t.renderAll();break;case"triangle":(A=s.value)==null||A.set({width:u.x-(((x=s.value)==null?void 0:x.left)||0),height:u.y-(((S=s.value)==null?void 0:S.top)||0)}),t.renderAll();break;case"line":(M=s.value)==null||M.set({x2:u.x,y2:u.y}),t.renderAll();break}},Lv=({options:e,canvas:t,shapeRef:i,pathToDrawRef:s,isDrawingCurveRef:d,isMouseDownRef:p,selectedToolRef:v,syncShapeInStorage:o})=>{var c;p.value=!1;const r=t.getPointer(e.e);if(v.value==="pen"&&d.value&&s.value){(c=s.value.path)==null||c.push(["L",r.x,r.y]);let u=s.value._calcDimensions();s.value.set({width:u.width,height:u.height,left:u.left,top:u.top,pathOffset:{x:u.width/2+u.left,y:u.height/2+u.top},dirty:!0}),s.value.setCoords(),t.renderAll()}d.value=!1,i.value&&(i.value.set({visible:!0}),o(i.value)),i.value=null},nf=({options:e,setElAttrsRef:t,setSelectedObjectIdsRef:i,isProgrammaticSelectionRef:s})=>{var v,o,r,c,u,a,l,n,h;if(!(e!=null&&e.selected))return;s.value=!1;const d=e.selected.map(g=>g.objectId);i(d);const p=e==null?void 0:e.selected[0];if(console.log(p),p&&e.selected.length===1){const g=p!=null&&p.scaleX?(p==null?void 0:p.width)*(p==null?void 0:p.scaleX):p==null?void 0:p.width,f=p!=null&&p.scaleY?(p==null?void 0:p.height)*(p==null?void 0:p.scaleY):p==null?void 0:p.height;t({type:(p==null?void 0:p.type)||"",left:((v=p.left)==null?void 0:v.toFixed(0).toString())||"",top:((o=p.top)==null?void 0:o.toFixed(0).toString())||"",width:(g==null?void 0:g.toFixed(0).toString())||"",height:(f==null?void 0:f.toFixed(0).toString())||"",angle:((r=p.angle)==null?void 0:r.toFixed(0).toString())||"",fill:(p==null?void 0:p.type)==="group"?"Mixed":((c=p.fill)==null?void 0:c.toString())||"",opacity:(p==null?void 0:p.type)==="group"?"Mixed":((u=p.opacity)==null?void 0:u.toString())||"",stroke:((a=p.stroke)==null?void 0:a.toString())||"",strokeWidth:((l=p.strokeWidth)==null?void 0:l.toString())||"",fontSize:((n=p.fontSize)==null?void 0:n.toString())||"",fontWeight:((h=p.fontWeight)==null?void 0:h.toString())||""})}else e.selected.length>1&&t(Oh);s.value=!0},Tv=({setElAttrsRef:e,setSelectedObjectIdsRef:t})=>{t([]),e(Sv)},Pv=({options:e,syncShapeInStorage:t})=>{const i=e.path;i&&(i.set({objectId:Rr()}),t(i))},Ov=({options:e,canvas:t,elAttrsRef:i,setElAttrsRef:s})=>{var v,o;if(!e.target)return;if(t.getActiveObjects().length>1){s(Oh);return}const p=e.target;p&&s({...i.value,left:((v=p.left)==null?void 0:v.toFixed(0).toString())||"",top:((o=p.top)==null?void 0:o.toFixed(0).toString())||""})},Mv=({options:e,canvas:t,elAttrsRef:i,setElAttrsRef:s})=>{var r,c,u,a,l,n,h,g;if(!e.target)return;if(t.getActiveObjects().length>1){s(Oh);return}const p=(r=e.target)!=null&&r.scaleX?((c=e.target)==null?void 0:c.width)*((u=e.target)==null?void 0:u.scaleX):(a=e.target)==null?void 0:a.width,v=(l=e.target)!=null&&l.scaleY?((n=e.target)==null?void 0:n.height)*((h=e.target)==null?void 0:h.scaleY):(g=e.target)==null?void 0:g.height;e.target&&s({...i.value,width:(p==null?void 0:p.toFixed(0).toString())||"",height:(v==null?void 0:v.toFixed(0).toString())||""})},Nv=({options:e,syncShapeInStorage:t})=>{const i=e.target;i&&((i==null?void 0:i.type)=="activeSelection"||t(i))},Fv=({canvas:e,objectIds:t,isProgrammaticSelectionRef:i})=>{if(!i.value)return;const d=e.getObjects().filter(p=>t.includes(p.objectId));d.length===0?e.discardActiveObject():d.length===1?e.setActiveObject(d[0]):d.length>1&&(e.discardActiveObject(),e.setActiveObject(new De.fabric.ActiveSelection(d,{canvas:e}))),e.renderAll()},Ev=({canvas:e,syncShapeInStorage:t,deleteShapeInStorage:i})=>{const s=e.getActiveObjects();if(s.length>1){const d=s[0].group.left,p=s[0].group.top,v=s.map(r=>r.type==="group"?ef(r.getObjects().map(c=>De.fabric.util.object.clone(c)),r.left,r.top,r.objectId):{...De.fabric.util.object.clone(r),objectId:r.objectId}),o=ef(v,d,p);e.add(o),t(o),e.discardActiveObject(),e.remove(...s),s.forEach(r=>{i(r==null?void 0:r.objectId)}),e.setActiveObject(o),e.renderAll()}},Iv=({canvas:e,syncShapeInStorage:t,deleteShapeInStorage:i})=>{const s=e.getActiveObjects();if(s.length===1&&s[0].type==="group"){const d=s[0],p=d.getObjects();d.destroy(),e.remove(d),i(d==null?void 0:d.objectId),p.forEach(v=>{e.add(v),t(v)}),e.discardActiveObject(),e.renderAll()}},jv=({canvas:e,frontShapeInStorage:t})=>{const i=e.getActiveObjects();if(i.length===1){const s=i[0];e.bringToFront(s),t(s==null?void 0:s.objectId),e.renderAll()}},Dv=({canvas:e,backShapeInStorage:t})=>{const i=e.getActiveObjects();if(i.length===1){const s=i[0];e.sendToBack(s),t(s==null?void 0:s.objectId),e.renderAll()}},Bv=({canvas:e,imgUrl:t,syncShapeInStorage:i})=>{De.fabric.Image.fromURL(t,s=>{s.set({left:0,top:0,objectId:Rr()}),e.add(s),e.setActiveObject(s),e.renderAll(),i(s)})},Rv={class:"canvas-container"},zv=ir({__name:"CanvasContainer",props:{onMounted:{type:Function}},setup(e){const t=ue(null),i=e;return _0(()=>{i.onMounted(t.value)}),(s,d)=>(ce(),ge("div",Rv,[$t("canvas",{id:"canvas",ref_key:"canvasRef",ref:t,class:"canvas"},null,512)]))}}),qv=rr(zv,[["__scopeId","data-v-475042e3"]]),Uv=["onClick"],Wv=ir({__name:"ContextMenu",emits:["select"],setup(e,{expose:t,emit:i}){const s=ue([{label:"Bring to front",value:"front"},{label:"Send to back",value:"back"},{label:"Group selection",value:"group"},{label:"Ungroup",value:"ungroup"}]),d=i,p=ue(!1),v=ue(0),o=ue(0),r=a=>{p.value=!0,v.value=a.clientX,o.value=a.clientY,document.addEventListener("click",c)},c=()=>{p.value=!1,document.removeEventListener("click",c)},u=a=>{d("select",a.value),c()};return t({openMenu:r,closeMenu:c}),(a,l)=>Xt(p)?(ce(),ge("div",{key:0,class:"context-menu",style:ul({left:Xt(v)+"px",top:Xt(o)+"px"})},[(ce(!0),ge(Qs,null,ta(Xt(s),(n,h)=>(ce(),ge("div",{key:h,class:"menu-item",onClick:g=>u(n)},on(n.label),9,Uv))),128))],4)):ji("",!0)}}),Hv=rr(Wv,[["__scopeId","data-v-eb1eb3df"]]),sf=e=>{var s,d,p,v;const t=e.getActiveObjects(),i=20;if(t.length===1){const o=[{...t[0].toObject(),left:t[0].left+i,top:t[0].top+i}];localStorage.setItem("clipboard",JSON.stringify(o))}else if(t.length>1){const o=(s=t[0].group)==null?void 0:s.left,r=(d=t[0].group)==null?void 0:d.top,c=(p=t[0].group)==null?void 0:p.width,u=(v=t[0].group)==null?void 0:v.height,a=t.map(l=>{const n=l.left,h=l.top;return{...l.toObject(),left:o+c/2+n+i,top:r+u/2+h+i}});localStorage.setItem("clipboard",JSON.stringify(a))}},Yv=(e,t)=>{if(!e||!(e instanceof De.fabric.Canvas))return;const i=localStorage.getItem("clipboard");if(i)try{JSON.parse(i).forEach(d=>{De.fabric.util.enlivenObjects([d],p=>{p.forEach(v=>{v.set({objectId:Rr()}),e.add(v),t(v)}),e.renderAll()},"fabric")})}catch(s){console.error("Error parsing clipboard data:",s)}},af=(e,t)=>{const i=e.getActiveObjects();i.length>0&&i.forEach(s=>{e.remove(s),e.discardActiveObject(),t(s==null?void 0:s.objectId)}),e.renderAll()},Vv=({e,canvas:t,selectedToolRef:i,syncShapeInStorage:s,deleteShapeInStorage:d,undo:p,redo:v,cancelDrawing:o})=>{e.key==="Escape"&&(i.value==="pen"&&o(),t.discardActiveObject(),t.renderAll()),e.key==="Enter"&&i.value==="pen"&&(o(),i.value="move"),e.key==="Delete"&&af(t,d),(e!=null&&e.ctrlKey||e!=null&&e.metaKey)&&e.key==="c"&&sf(t),(e!=null&&e.ctrlKey||e!=null&&e.metaKey)&&e.key==="v"&&Yv(t,s),(e!=null&&e.ctrlKey||e!=null&&e.metaKey)&&e.key==="x"&&(sf(t),af(t,d)),(e!=null&&e.ctrlKey||e!=null&&e.metaKey)&&(e.key==="z"||e.key==="Z")&&(e.shiftKey?v(t):p(t))},Xv=ir({__name:"home",setup(e){const t=Ph(),i=t.syncShapeInStorage,s=t.deleteShapeInStorage,d=t.undo,p=t.redo,v=t.frontShapeInStorage,o=t.backShapeInStorage;let r={};const c=ue(null),u=ue(null),a=ue("move"),l=ue(!1),n=ue([]),h=ue(!0),g=ue({type:"",left:"",top:"",width:"",height:"",angle:"",fill:"",opacity:"",stroke:"",strokeWidth:"",fontSize:"",fontWeight:""}),f=ue(null),m=ue(null),y=ue(null),x=ue(!1),S=ue({x:0,y:0}),A=ue(!1);let M={x:0,y:0};const T=V=>{r&&Bv({canvas:r,imgUrl:V,syncShapeInStorage:i})},N=V=>{var rt;!r||r.getActiveObjects().length<1||(rt=f.value)==null||rt.openMenu(V)},W=V=>{r&&(V==="group"?Ev({canvas:r,syncShapeInStorage:i,deleteShapeInStorage:s}):V==="ungroup"?Iv({canvas:r,syncShapeInStorage:i,deleteShapeInStorage:s}):V=="front"?jv({canvas:r,frontShapeInStorage:v}):V==="back"&&Dv({canvas:r,backShapeInStorage:o}))},K=V=>{a.value=V},P=V=>{g.value=V},I=V=>{r&&(n.value=V,Fv({canvas:r,objectIds:V,isProgrammaticSelectionRef:h}))};es(()=>a.value,V=>{V==="pencil"&&r&&(r.isDrawingMode=!0,r.freeDrawingBrush.width=1)});const J=V=>{c.value=V,r=Cv({canvasRef:c}),De.fabric.Object.prototype.set({borderColor:"#0d99ff",cornerStrokeColor:"#0d99ff",cornerColor:"white",cornerSize:8,transparentCorners:!1,strokeUniform:!0,borderOpacityWhenMoving:0,borderScaleFactor:1.5});const at=De.fabric.Object.prototype.controls.mtr;if(at.visible=!1,!r)return;const dt=t.loadCanvasFromStorage();dt&&oh(r,dt),new _v({canvas:r,aligningOptions:{lineWidth:1.3}}).init();const E=()=>{var z;if(m.value){if((z=m.value.path)==null||z.pop(),m.value.path&&m.value.path.length>1){let $=m.value._calcDimensions();m.value.set({width:$.width,height:$.height,left:$.left,top:$.top,pathOffset:{x:$.width/2+$.left,y:$.height/2+$.top},dirty:!0,selectable:!0}),i(m.value),r.setActiveObject(m.value)}else r.remove(m.value);r.renderAll(),m.value=null}};r.on("mouse:down",z=>{a.value==="hand"?(l.value=!0,r.selection=!1,M={x:z.e.clientX,y:z.e.clientY}):Av({options:z,canvas:r,shapeRef:u,selectedToolRef:a,pathToDrawRef:m,isMouseDownRef:x})}),r.on("mouse:move",z=>{if(l.value){const $=z.e,k=r.viewportTransform;if(!k)return;k[4]+=$.clientX-M.x,k[5]+=$.clientY-M.y,M={x:$.clientX,y:$.clientY},r.renderAll()}else kv({options:z,canvas:r,shapeRef:u,selectedToolRef:a,pathToDrawRef:m,updatedPathRef:y,rememberedPositionRef:S,isDrawingCurveRef:A,isMouseDownRef:x})}),r.on("mouse:up",z=>{l.value=!1,r.selection=!0,Lv({options:z,canvas:r,shapeRef:u,syncShapeInStorage:i,isDrawingCurveRef:A,isMouseDownRef:x,pathToDrawRef:m,selectedToolRef:a}),["rect","line","ellipse","triangle","text"].includes(a.value)&&(a.value="move")}),r.on("mouse:wheel",function(z){const $=z.e.deltaY;if(z.e.ctrlKey){let D=r.getZoom();D*=.999**$,D>20&&(D=20),D<.01&&(D=.01);const F=r.getPointer(z.e);r.zoomToPoint({x:F.x,y:F.y},D),z.e.preventDefault(),z.e.stopPropagation()}}),r.on("selection:created",z=>{nf({options:z,setElAttrsRef:P,setSelectedObjectIdsRef:I,isProgrammaticSelectionRef:h})}),r.on("selection:updated",z=>{nf({options:z,setElAttrsRef:P,setSelectedObjectIdsRef:I,isProgrammaticSelectionRef:h})}),r.on("selection:cleared",()=>{Tv({setElAttrsRef:P,setSelectedObjectIdsRef:I})}),r.on("object:moving",z=>{Ov({options:z,elAttrsRef:g,canvas:r,setElAttrsRef:P})}),r.on("object:scaling",z=>{Mv({options:z,elAttrsRef:g,canvas:r,setElAttrsRef:P})}),r.on("object:modified",z=>{Nv({options:z,syncShapeInStorage:i})}),r.on("path:created",z=>{Pv({options:z,syncShapeInStorage:i})}),window.addEventListener("keydown",z=>{Vv({e:z,canvas:r,selectedToolRef:a,syncShapeInStorage:i,deleteShapeInStorage:s,undo:d,redo:p,cancelDrawing:E})})};return(V,rt)=>{const at=xv,dt=fv,nt=K0;return ce(),ge("div",{class:"container",onContextmenu:nl(N,["prevent"])},[Ae(at,{fabric:Xt(r),selectedObjectIds:Xt(n),setSelectedObjectIds:I},null,8,["fabric","selectedObjectIds"]),Ae(qv,{onMounted:J}),Ae(dt,{fabric:Xt(r),setElAttrs:P,elAttrs:Xt(g),syncShapeInStorage:Xt(i)},null,8,["fabric","elAttrs","syncShapeInStorage"]),Ae(nt,{fabric:Xt(r),selectedToolRef:Xt(a),setSelectedToolRef:K,addImage:T},null,8,["fabric","selectedToolRef"]),Ae(Hv,{ref_key:"contextMenuRef",ref:f,onSelect:W},null,512)],32)}}}),Gv=rr(Xv,[["__scopeId","data-v-42a85553"]]),Jv=Object.freeze(Object.defineProperty({__proto__:null,default:Gv},Symbol.toStringTag,{value:"Module"}));export{ke as _,Jv as h};

/**
 * name: figma
 * version: v0.0.0
 * description: 
 * author: 
 */
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CMw1vGlC.js","assets/index-CqvZLMZP.js","assets/index-BiXZxQ3b.css"])))=>i.map(i=>d[i]);
import{h as qc,d as er,r as me,c as ve,a as Jt,b as Ui,e as Xs,o as he,w as Qn,F as Gs,f as $s,u as Xt,g as $n,i as Ba,n as sh,j as Oe,k as qs,l as al,t as nn,m as ol,v as ll,p as cl,q as hl,s as o0,_ as Uc,x as ah,y as Er,z as l0,A as c0,B as h0,C as Qu,D as u0,E as f0,G as Qo,H as d0}from"./index-CqvZLMZP.js";/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=({size:e,strokeWidth:t=2,absoluteStrokeWidth:i,color:a,iconNode:d,name:p,class:v,...o},{slots:r})=>qc("svg",{...qo,width:e||qo.width,height:e||qo.height,stroke:a||qo.stroke,"stroke-width":i?Number(t)*24/Number(e):t,class:["lucide",`lucide-${p0(p??"icon")}`],...o},[...d.map(c=>qc(...c)),...r.default?[r.default()]:[]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(e,t)=>(i,{slots:a})=>qc(g0,{...i,iconNode:t,name:e},a);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=Ye("AlignJustifyIcon",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=Ye("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=Ye("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Ye("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Ye("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Ye("EyeClosedIcon",[["path",{d:"m15 18-.722-3.25",key:"1j64jw"}],["path",{d:"M2 8a10.645 10.645 0 0 0 20 0",key:"1e7gxb"}],["path",{d:"m20 15-1.726-2.05",key:"1cnuld"}],["path",{d:"m4 15 1.726-2.05",key:"1dsqqd"}],["path",{d:"m9 18 .722-3.25",key:"ypw2yx"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=Ye("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=Ye("HandIcon",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=Ye("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Ye("LockOpenIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=Ye("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Ye("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=Ye("MousePointer2Icon",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=Ye("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=Ye("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=Ye("RotateCwIcon",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=Ye("SlashIcon",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Ye("SplineIcon",[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=Ye("SquareDashedIcon",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Ye("SquareIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=Ye("TriangleIcon",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]);/**
 * @license lucide-vue-next v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Ye("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),M0={class:"popover-container"},N0=er({__name:"Popover",setup(e,{expose:t}){const i=me(!1),a=me(null),d=()=>{i.value=!i.value};return t({closePopover:()=>{i.value=!1}}),(v,o)=>(he(),ve("div",M0,[Jt("div",{onClick:d,class:"popover-trigger"},[Xs(v.$slots,"trigger",{},void 0)]),i.value?(he(),ve("div",{key:0,class:"popover-content",ref_key:"popoverContent",ref:a},[Xs(v.$slots,"content",{},void 0)],512)):Ui("",!0)]))}}),ir=(e,t)=>{const i=e.__vccOpts||e;for(const[a,d]of t)i[a]=d;return i},F0=ir(N0,[["__scopeId","data-v-db7c9afa"]]),E0={class:"tool-belt"},I0=["onClick"],j0={key:0},D0=["onClick"],B0={class:"bg-[#1e1e1e]"},R0=["onClick"],z0={class:"ml-3 text-white text-[13px]"},q0=er({__name:"ToolBelt",props:{fabric:{},selectedToolRef:{},setSelectedToolRef:{type:Function},addImage:{type:Function}},setup(e){const t=e,i=me([]),a=me(1),d=me([{name:"move",selectedIndex:0,options:[{icon:A0,name:"Move",type:"move"},{icon:x0,name:"Hand tool",type:"hand"}]},{name:"shape",selectedIndex:0,options:[{icon:Ua,name:"Rectangle",type:"rect"},{icon:nf,name:"Line",type:"line"},{icon:ef,name:"Ellipse",type:"ellipse"},{icon:sf,name:"Triangle",type:"triangle"},{icon:rf,name:"Image",type:"image"}]},{name:"creation",selectedIndex:0,options:[{icon:k0,name:"Pencil",type:"pencil"}]},{name:"text",selectedIndex:0,options:[{icon:af,name:"Text",type:"text"}]}]);function p(r){a.value=r;const c=d.value[r];t.setSelectedToolRef(c.options[c.selectedIndex].type),i.value.forEach(u=>{u.closePopover()})}function v(r,c,u){if(r==="image"){const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=l=>{var g;l.preventDefault();const n=(g=l.target.files)==null?void 0:g[0];if(!n)return;const h=new FileReader;h.onload=f=>{var y;const m=(y=f.target)==null?void 0:y.result;t.fabric&&t.addImage(m)},h.readAsDataURL(n)},s.click(),t.setSelectedToolRef("move"),s.remove()}else a.value=c,d.value[c].selectedIndex=u,t.setSelectedToolRef(r);i.value[c]&&i.value[c].closePopover()}function o(r){i.value.forEach((c,u)=>{u!==r&&c.closePopover()})}return Qn(()=>t.selectedToolRef,r=>{const c=d.value.findIndex(u=>u.options.some(s=>s.type===r));if(c!==-1){a.value=c;const u=d.value[c].selectedIndex,s=d.value[c].options.findIndex(l=>l.type===r);u!==s&&(d.value[c].selectedIndex=s)}},{immediate:!0}),(r,c)=>(he(),ve("div",E0,[(he(!0),ve(Gs,null,$s(Xt(d),(u,s)=>(he(),ve("div",{key:u.name,class:"icon-group"},[Jt("div",{class:sh(["icon-container",{"selected-group":Xt(a)===s}]),onClick:l=>p(s)},[(he(),$n(Ba(u.options[u.selectedIndex].icon),{size:20,"stroke-width":1,color:Xt(a)===s?"white":"black"},null,8,["color"]))],10,I0),u.options.length>1?(he(),ve("div",j0,[Oe(F0,{ref_for:!0,ref_key:"popoverRefs",ref:i},{trigger:qs(()=>[Jt("div",{class:"select-container",onClick:l=>o(s)},[Oe(Xt(tf),{size:12,"stroke-width":1})],8,D0)]),content:qs(()=>[Jt("div",B0,[(he(!0),ve(Gs,null,$s(u.options,(l,n)=>(he(),ve("div",{key:l.type,class:"shape-tool-item",onClick:h=>v(l.type,s,n)},[Oe(Xt(v0),{size:12,"stroke-width":1,color:"white",style:al({visibility:u.selectedIndex===n?"visible":"hidden"})},null,8,["style"]),(he(),$n(Ba(l.icon),{size:16,"stroke-width":1,class:"ml-1",color:"white"})),Jt("div",z0,nn(l.name),1)],8,R0))),128))])]),_:2},1536)])):Ui("",!0)]))),128))]))}}),U0=ir(q0,[["__scopeId","data-v-91c34ab1"]]),W0={class:"custom-input"},H0={class:"input-container"},Y0={class:"left-slot"},V0=er({__name:"Input",props:{value:{},leftText:{},handleChange:{type:Function}},setup(e){const t=e,i=me(null),a=me(t.value);Qn(()=>t.value,v=>{a.value=v});const d=()=>{t.handleChange(a.value)},p=()=>{d(),i.value&&i.value.blur()};return(v,o)=>(he(),ve("div",W0,[Jt("div",H0,[Jt("div",Y0,[Xs(v.$slots,"left",{},()=>[Jt("span",null,nn(v.leftText),1)])]),ol(Jt("input",{ref_key:"inputRef",ref:i,"onUpdate:modelValue":o[0]||(o[0]=r=>hl(a)?a.value=r:null),class:"input-field",onBlur:d,onKeydown:cl(p,["enter"])},null,544),[[ll,Xt(a)]])])]))}}),Ms=ir(V0,[["__scopeId","data-v-a47bd4b9"]]);var Ti={};const X0={},G0=Object.freeze(Object.defineProperty({__proto__:null,default:X0},Symbol.toStringTag,{value:"Module"})),fc=o0(G0);(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.4.2"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var i=fc,a=new i.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=a.document,t.jsdomImplForWrapper=fc.implForWrapper,t.nodeCanvas=fc.Canvas,t.window=a,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function o(n,h){if(this.__eventListeners[n]){var g=this.__eventListeners[n];h?g[g.indexOf(h)]=!1:t.util.array.fill(g,!1)}}function r(n,h){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var g in n)this.on(g,n[g]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(h);return this}function c(n,h){var g=(function(){h.apply(this,arguments),this.off(n,g)}).bind(this);this.on(n,g)}function u(n,h){if(arguments.length===1)for(var g in n)c.call(this,g,n[g]);else c.call(this,n,h);return this}function s(n,h){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)o.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var g in n)o.call(this,g,n[g]);else o.call(this,n,h);return this}function l(n,h){if(!this.__eventListeners)return this;var g=this.__eventListeners[n];if(!g)return this;for(var f=0,m=g.length;f<m;f++)g[f]&&g[f].call(this,h||{});return this.__eventListeners[n]=g.filter(function(y){return y!==!1}),this}t.Observable={fire:l,on:r,once:u,off:s}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var o=0,r=arguments.length;o<r;o++)this._onObjectAdded(arguments[o]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(o,r,c){var u=this._objects;return c?u[r]=o:u.splice(r,0,o),this._onObjectAdded&&this._onObjectAdded(o),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var o=this._objects,r,c=!1,u=0,s=arguments.length;u<s;u++)r=o.indexOf(arguments[u]),r!==-1&&(c=!0,o.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(o,r){for(var c=this.getObjects(),u=0,s=c.length;u<s;u++)o.call(r,c[u],u,c);return this},getObjects:function(o){return typeof o>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===o})},item:function(o){return this._objects[o]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(o,r){return this._objects.indexOf(o)>-1?!0:r?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(o,!0)}):!1},complexity:function(){return this._objects.reduce(function(o,r){return o+=r.complexity?r.complexity():0,o},0)}},t.CommonMethods={_setOptions:function(o){for(var r in o)this.set(r,o[r])},_initGradient:function(o,r){o&&o.colorStops&&!(o instanceof t.Gradient)&&this.set(r,new t.Gradient(o))},_initPattern:function(o,r,c){o&&o.source&&!(o instanceof t.Pattern)?this.set(r,new t.Pattern(o,c)):c&&c()},_setObject:function(o){for(var r in o)this._set(r,o[r])},set:function(o,r){return typeof o=="object"?this._setObject(o):this._set(o,r),this},_set:function(o,r){this[o]=r},toggle:function(o){var r=this.get(o);return typeof r=="boolean"&&this.set(o,!r),this},get:function(o){return this[o]}},function(o){var r=Math.sqrt,c=Math.atan2,u=Math.pow,s=Math.PI/180,l=Math.PI/2;t.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var h=n/l;switch(h){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var h=n/l,g=1;switch(n<0&&(g=-1),h){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(n)},removeFromArray:function(n,h){var g=n.indexOf(h);return g!==-1&&n.splice(g,1),n},getRandomInt:function(n,h){return Math.floor(Math.random()*(h-n+1))+n},degreesToRadians:function(n){return n*s},radiansToDegrees:function(n){return n/s},rotatePoint:function(n,h,g){var f=new t.Point(n.x-h.x,n.y-h.y),m=t.util.rotateVector(f,g);return new t.Point(m.x,m.y).addEquals(h)},rotateVector:function(n,h){var g=t.util.sin(h),f=t.util.cos(h),m=n.x*f-n.y*g,y=n.x*g+n.y*f;return{x:m,y}},createVector:function(n,h){return new t.Point(h.x-n.x,h.y-n.y)},calcAngleBetweenVectors:function(n,h){return Math.acos((n.x*h.x+n.y*h.y)/(Math.hypot(n.x,n.y)*Math.hypot(h.x,h.y)))},getHatVector:function(n){return new t.Point(n.x,n.y).multiply(1/Math.hypot(n.x,n.y))},getBisector:function(n,h,g){var f=t.util.createVector(n,h),m=t.util.createVector(n,g),y=t.util.calcAngleBetweenVectors(f,m),x=t.util.calcAngleBetweenVectors(t.util.rotateVector(f,y),m),_=y*(x===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(f,_)),angle:y}},projectStrokeOnPoints:function(n,h,g){var f=[],m=h.strokeWidth/2,y=h.strokeUniform?new t.Point(1/h.scaleX,1/h.scaleY):new t.Point(1,1),x=function(_){var A=m/Math.hypot(_.x,_.y);return new t.Point(_.x*A*y.x,_.y*A*y.y)};return n.length<=1||n.forEach(function(_,A){var M=new t.Point(_.x,_.y),T,O;A===0?(O=n[A+1],T=g?x(t.util.createVector(O,M)).addEquals(M):n[n.length-1]):A===n.length-1?(T=n[A-1],O=g?x(t.util.createVector(T,M)).addEquals(M):n[0]):(T=n[A-1],O=n[A+1]);var B=t.util.getBisector(M,T,O),X=B.vector,F=B.angle,I,K;if(h.strokeLineJoin==="miter"&&(I=-m/Math.sin(F/2),K=new t.Point(X.x*I*y.x,X.y*I*y.y),Math.hypot(K.x,K.y)/m<=h.strokeMiterLimit)){f.push(M.add(K)),f.push(M.subtract(K));return}I=-m*Math.SQRT2,K=new t.Point(X.x*I*y.x,X.y*I*y.y),f.push(M.add(K)),f.push(M.subtract(K))}),f},transformPoint:function(n,h,g){return g?new t.Point(h[0]*n.x+h[2]*n.y,h[1]*n.x+h[3]*n.y):new t.Point(h[0]*n.x+h[2]*n.y+h[4],h[1]*n.x+h[3]*n.y+h[5])},makeBoundingBoxFromPoints:function(n,h){if(h)for(var g=0;g<n.length;g++)n[g]=t.util.transformPoint(n[g],h);var f=[n[0].x,n[1].x,n[2].x,n[3].x],m=t.util.array.min(f),y=t.util.array.max(f),x=y-m,_=[n[0].y,n[1].y,n[2].y,n[3].y],A=t.util.array.min(_),M=t.util.array.max(_),T=M-A;return{left:m,top:A,width:x,height:T}},invertTransform:function(n){var h=1/(n[0]*n[3]-n[1]*n[2]),g=[h*n[3],-h*n[1],-h*n[2],h*n[0]],f=t.util.transformPoint({x:n[4],y:n[5]},g,!0);return g[4]=-f.x,g[5]=-f.y,g},toFixed:function(n,h){return parseFloat(Number(n).toFixed(h))},parseUnit:function(n,h){var g=/\D{0,2}$/.exec(n),f=parseFloat(n);switch(h||(h=t.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return f*t.DPI/25.4;case"cm":return f*t.DPI/2.54;case"in":return f*t.DPI;case"pt":return f*t.DPI/72;case"pc":return f*t.DPI/72*12;case"em":return f*h;default:return f}},falseFunction:function(){return!1},getKlass:function(n,h){return n=t.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),t.util.resolveNamespace(h)[n]},getSvgAttributes:function(n){var h=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":h=h.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":h=h.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":h=h.concat(["offset","stop-color","stop-opacity"]);break}return h},resolveNamespace:function(n){if(!n)return t;var h=n.split("."),g=h.length,f,m=o||t.window;for(f=0;f<g;++f)m=m[h[f]];return m},loadImage:function(n,h,g,f){if(!n){h&&h.call(g,n);return}var m=t.util.createImage(),y=function(){h&&h.call(g,m,!1),m=m.onload=m.onerror=null};m.onload=y,m.onerror=function(){t.log("Error loading "+m.src),h&&h.call(g,null,!0),m=m.onload=m.onerror=null},n.indexOf("data")!==0&&f!==void 0&&f!==null&&(m.crossOrigin=f),n.substring(0,14)==="data:image/svg"&&(m.onload=null,t.util.loadImageInDom(m,y)),m.src=n},loadImageInDom:function(n,h){var g=t.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(n),t.document.querySelector("body").appendChild(g),n.onload=function(){h(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(n,h,g,f){n=n||[];var m=[],y=0,x=n.length;function _(){++y===x&&h&&h(m.filter(function(A){return A}))}if(!x){h&&h(m);return}n.forEach(function(A,M){if(!A||!A.type){_();return}var T=t.util.getKlass(A.type,g);T.fromObject(A,function(O,B){B||(m[M]=O),f&&f(A,O,B),_()})})},enlivenObjectEnlivables:function(n,h,g){var f=t.Object.ENLIVEN_PROPS.filter(function(m){return!!n[m]});t.util.enlivenObjects(f.map(function(m){return n[m]}),function(m){var y={};f.forEach(function(x,_){y[x]=m[_],h&&(h[x]=m[_])}),g&&g(y)})},enlivenPatterns:function(n,h){n=n||[];function g(){++m===y&&h&&h(f)}var f=[],m=0,y=n.length;if(!y){h&&h(f);return}n.forEach(function(x,_){x&&x.source?new t.Pattern(x,function(A){f[_]=A,g()}):(f[_]=x,g())})},groupSVGElements:function(n,h,g){var f;return n&&n.length===1?(typeof g<"u"&&(n[0].sourcePath=g),n[0]):(h&&(h.width&&h.height?h.centerPoint={x:h.width/2,y:h.height/2}:(delete h.width,delete h.height)),f=new t.Group(n,h),typeof g<"u"&&(f.sourcePath=g),f)},populateWithProperties:function(n,h,g){if(g&&Array.isArray(g))for(var f=0,m=g.length;f<m;f++)g[f]in n&&(h[g[f]]=n[g[f]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(n){var h=t.util.createCanvasElement();return h.width=n.width,h.height=n.height,h.getContext("2d").drawImage(n,0,0),h},toDataURL:function(n,h,g){return n.toDataURL("image/"+h,g)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(n,h,g){return[n[0]*h[0]+n[2]*h[1],n[1]*h[0]+n[3]*h[1],n[0]*h[2]+n[2]*h[3],n[1]*h[2]+n[3]*h[3],g?0:n[0]*h[4]+n[2]*h[5]+n[4],g?0:n[1]*h[4]+n[3]*h[5]+n[5]]},qrDecompose:function(n){var h=c(n[1],n[0]),g=u(n[0],2)+u(n[1],2),f=r(g),m=(n[0]*n[3]-n[2]*n[1])/f,y=c(n[0]*n[2]+n[1]*n[3],g);return{angle:h/s,scaleX:f,scaleY:m,skewX:y/s,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return t.iMatrix.concat();var h=t.util.degreesToRadians(n.angle),g=t.util.cos(h),f=t.util.sin(h);return[g,f,-f,g,0,0]},calcDimensionsMatrix:function(n){var h=typeof n.scaleX>"u"?1:n.scaleX,g=typeof n.scaleY>"u"?1:n.scaleY,f=[n.flipX?-h:h,0,0,n.flipY?-g:g,0,0],m=t.util.multiplyTransformMatrices,y=t.util.degreesToRadians;return n.skewX&&(f=m(f,[1,0,Math.tan(y(n.skewX)),1],!0)),n.skewY&&(f=m(f,[1,Math.tan(y(n.skewY)),0,1],!0)),f},composeMatrix:function(n){var h=[1,0,0,1,n.translateX||0,n.translateY||0],g=t.util.multiplyTransformMatrices;return n.angle&&(h=g(h,t.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(h=g(h,t.util.calcDimensionsMatrix(n))),h},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,h,g,f){f>0&&(h>f?h-=f:h=0,g>f?g-=f:g=0);var m=!0,y,x,_=n.getImageData(h,g,f*2||1,f*2||1),A=_.data.length;for(y=3;y<A&&(x=_.data[y],m=x<=0,m!==!1);y+=4);return _=null,m},parsePreserveAspectRatioAttribute:function(n){var h="meet",g="Mid",f="Mid",m=n.split(" "),y;return m&&m.length&&(h=m.pop(),h!=="meet"&&h!=="slice"?(y=h,h="meet"):m.length&&(y=m.pop())),g=y!=="none"?y.slice(1,4):"none",f=y!=="none"?y.slice(5,8):"none",{meetOrSlice:h,alignX:g,alignY:f}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?t.charWidthsCache[n]&&delete t.charWidthsCache[n]:t.charWidthsCache={}},limitDimsByArea:function(n,h){var g=Math.sqrt(h*n),f=Math.floor(h/g);return{x:Math.floor(g),y:f}},capValue:function(n,h,g){return Math.max(n,Math.min(h,g))},findScaleToFit:function(n,h){return Math.min(h.width/n.width,h.height/n.height)},findScaleToCover:function(n,h){return Math.max(h.width/n.width,h.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(h){return t.util.toFixed(h,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,h){var g=t.util.invertTransform(h),f=t.util.multiplyTransformMatrices(g,n.calcOwnMatrix());t.util.applyTransformToObject(n,f)},addTransformToObject:function(n,h){t.util.applyTransformToObject(n,t.util.multiplyTransformMatrices(h,n.calcOwnMatrix()))},applyTransformToObject:function(n,h){var g=t.util.qrDecompose(h),f=new t.Point(g.translateX,g.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",g.scaleX),n.set("scaleY",g.scaleY),n.skewX=g.skewX,n.skewY=g.skewY,n.angle=g.angle,n.setPositionByOrigin(f,"center","center")},sizeAfterTransform:function(n,h,g){var f=n/2,m=h/2,y=[{x:-f,y:-m},{x:f,y:-m},{x:-f,y:m},{x:f,y:m}],x=t.util.calcDimensionsMatrix(g),_=t.util.makeBoundingBoxFromPoints(y,x);return{x:_.width,y:_.height}},mergeClipPaths:function(n,h){var g=n,f=h;g.inverted&&!f.inverted&&(g=h,f=n),t.util.applyTransformToObject(f,t.util.multiplyTransformMatrices(t.util.invertTransform(g.calcTransformMatrix()),f.calcTransformMatrix()));var m=g.inverted&&f.inverted;return m&&(g.inverted=f.inverted=!1),new t.Group([g],{clipPath:f,inverted:m})},hasStyleChanged:function(n,h,g){return g=g||!1,n.fill!==h.fill||n.stroke!==h.stroke||n.strokeWidth!==h.strokeWidth||n.fontSize!==h.fontSize||n.fontFamily!==h.fontFamily||n.fontWeight!==h.fontWeight||n.fontStyle!==h.fontStyle||n.textBackgroundColor!==h.textBackgroundColor||n.deltaY!==h.deltaY||g&&(n.overline!==h.overline||n.underline!==h.underline||n.linethrough!==h.linethrough)},stylesToArray:function(g,h){for(var g=t.util.object.clone(g,!0),f=h.split(`
`),m=-1,y={},x=[],_=0;_<f.length;_++){if(!g[_]){m+=f[_].length;continue}for(var A=0;A<f[_].length;A++){m++;var M=g[_][A];if(M&&Object.keys(M).length>0){var T=t.util.hasStyleChanged(y,M,!0);T?x.push({start:m,end:m+1,style:M}):x[x.length-1].end++}y=M||{}}}return x},stylesFromArray:function(n,h){if(!Array.isArray(n))return n;for(var g=h.split(`
`),f=-1,m=0,y={},x=0;x<g.length;x++)for(var _=0;_<g[x].length;_++)f++,n[m]&&n[m].start<=f&&f<n[m].end&&(y[x]=y[x]||{},y[x][_]=Object.assign({},n[m].style),f===n[m].end-1&&m++);return y}}}(e),function(){var o=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function u(E,Y,J,k,R,N,P,U,$,tt,Q){var ut=t.util.cos(E),dt=t.util.sin(E),St=t.util.cos(Y),ot=t.util.sin(Y),st=J*R*St-k*N*ot+P,it=k*R*St+J*N*ot+U,W=tt+$*(-J*R*dt-k*N*ut),vt=Q+$*(-k*R*dt+J*N*ut),yt=st+$*(J*R*ot+k*N*St),bt=it+$*(k*R*ot-J*N*St);return["C",W,vt,yt,bt,st,it]}function s(E,Y,J,k,R,N,P){var U=Math.PI,$=P*U/180,tt=t.util.sin($),Q=t.util.cos($),ut=0,dt=0;J=Math.abs(J),k=Math.abs(k);var St=-Q*E*.5-tt*Y*.5,ot=-Q*Y*.5+tt*E*.5,st=J*J,it=k*k,W=ot*ot,vt=St*St,yt=st*it-st*W-it*vt,bt=0;if(yt<0){var Lt=Math.sqrt(1-yt/(st*it));J*=Lt,k*=Lt}else bt=(R===N?-1:1)*Math.sqrt(yt/(st*W+it*vt));var At=bt*J*ot/k,ft=-bt*k*St/J,Mt=Q*At-tt*ft+E*.5,jt=tt*At+Q*ft+Y*.5,Rt=l(1,0,(St-At)/J,(ot-ft)/k),Yt=l((St-At)/J,(ot-ft)/k,(-St-At)/J,(-ot-ft)/k);N===0&&Yt>0?Yt-=2*U:N===1&&Yt<0&&(Yt+=2*U);for(var Vt=Math.ceil(Math.abs(Yt/U*2)),ie=[],Wt=Yt/Vt,te=8/3*Math.sin(Wt/4)*Math.sin(Wt/4)/Math.sin(Wt/2),Bt=Rt+Wt,Te=0;Te<Vt;Te++)ie[Te]=u(Rt,Bt,Q,tt,J,k,Mt,jt,te,ut,dt),ut=ie[Te][5],dt=ie[Te][6],Rt=Bt,Bt+=Wt;return ie}function l(E,Y,J,k){var R=Math.atan2(Y,E),N=Math.atan2(k,J);return N>=R?N-R:2*Math.PI-(R-N)}function n(E,Y,J,k,R,N,P,U){var $;if(t.cachesBoundsOfCurve&&($=o.call(arguments),t.boundsOfCurveCache[$]))return t.boundsOfCurveCache[$];var tt=Math.sqrt,Q=Math.min,ut=Math.max,dt=Math.abs,St=[],ot=[[],[]],st,it,W,vt,yt,bt,Lt,At;it=6*E-12*J+6*R,st=-3*E+9*J-9*R+3*P,W=3*J-3*E;for(var ft=0;ft<2;++ft){if(ft>0&&(it=6*Y-12*k+6*N,st=-3*Y+9*k-9*N+3*U,W=3*k-3*Y),dt(st)<1e-12){if(dt(it)<1e-12)continue;vt=-W/it,0<vt&&vt<1&&St.push(vt);continue}Lt=it*it-4*W*st,!(Lt<0)&&(At=tt(Lt),yt=(-it+At)/(2*st),0<yt&&yt<1&&St.push(yt),bt=(-it-At)/(2*st),0<bt&&bt<1&&St.push(bt))}for(var Mt,jt,Rt=St.length,Yt=Rt,Vt;Rt--;)vt=St[Rt],Vt=1-vt,Mt=Vt*Vt*Vt*E+3*Vt*Vt*vt*J+3*Vt*vt*vt*R+vt*vt*vt*P,ot[0][Rt]=Mt,jt=Vt*Vt*Vt*Y+3*Vt*Vt*vt*k+3*Vt*vt*vt*N+vt*vt*vt*U,ot[1][Rt]=jt;ot[0][Yt]=E,ot[1][Yt]=Y,ot[0][Yt+1]=P,ot[1][Yt+1]=U;var ie=[{x:Q.apply(null,ot[0]),y:Q.apply(null,ot[1])},{x:ut.apply(null,ot[0]),y:ut.apply(null,ot[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[$]=ie),ie}function h(E,Y,J){for(var k=J[1],R=J[2],N=J[3],P=J[4],U=J[5],$=J[6],tt=J[7],Q=s($-E,tt-Y,k,R,P,U,N),ut=0,dt=Q.length;ut<dt;ut++)Q[ut][1]+=E,Q[ut][2]+=Y,Q[ut][3]+=E,Q[ut][4]+=Y,Q[ut][5]+=E,Q[ut][6]+=Y;return Q}function g(E){var Y=0,J=0,k=E.length,R=0,N=0,P,U,$,tt=[],Q,ut,dt;for(U=0;U<k;++U){switch($=!1,P=E[U].slice(0),P[0]){case"l":P[0]="L",P[1]+=Y,P[2]+=J;case"L":Y=P[1],J=P[2];break;case"h":P[1]+=Y;case"H":P[0]="L",P[2]=J,Y=P[1];break;case"v":P[1]+=J;case"V":P[0]="L",J=P[1],P[1]=Y,P[2]=J;break;case"m":P[0]="M",P[1]+=Y,P[2]+=J;case"M":Y=P[1],J=P[2],R=P[1],N=P[2];break;case"c":P[0]="C",P[1]+=Y,P[2]+=J,P[3]+=Y,P[4]+=J,P[5]+=Y,P[6]+=J;case"C":ut=P[3],dt=P[4],Y=P[5],J=P[6];break;case"s":P[0]="S",P[1]+=Y,P[2]+=J,P[3]+=Y,P[4]+=J;case"S":Q==="C"?(ut=2*Y-ut,dt=2*J-dt):(ut=Y,dt=J),Y=P[3],J=P[4],P[0]="C",P[5]=P[3],P[6]=P[4],P[3]=P[1],P[4]=P[2],P[1]=ut,P[2]=dt,ut=P[3],dt=P[4];break;case"q":P[0]="Q",P[1]+=Y,P[2]+=J,P[3]+=Y,P[4]+=J;case"Q":ut=P[1],dt=P[2],Y=P[3],J=P[4];break;case"t":P[0]="T",P[1]+=Y,P[2]+=J;case"T":Q==="Q"?(ut=2*Y-ut,dt=2*J-dt):(ut=Y,dt=J),P[0]="Q",Y=P[1],J=P[2],P[1]=ut,P[2]=dt,P[3]=Y,P[4]=J;break;case"a":P[0]="A",P[6]+=Y,P[7]+=J;case"A":$=!0,tt=tt.concat(h(Y,J,P)),Y=P[6],J=P[7];break;case"z":case"Z":Y=R,J=N;break}$||tt.push(P),Q=P[0]}return tt}function f(E,Y,J,k){return Math.sqrt((J-E)*(J-E)+(k-Y)*(k-Y))}function m(E){return E*E*E}function y(E){return 3*E*E*(1-E)}function x(E){return 3*E*(1-E)*(1-E)}function _(E){return(1-E)*(1-E)*(1-E)}function A(E,Y,J,k,R,N,P,U){return function($){var tt=m($),Q=y($),ut=x($),dt=_($);return{x:P*tt+R*Q+J*ut+E*dt,y:U*tt+N*Q+k*ut+Y*dt}}}function M(E,Y,J,k,R,N,P,U){return function($){var tt=1-$,Q=3*tt*tt*(J-E)+6*tt*$*(R-J)+3*$*$*(P-R),ut=3*tt*tt*(k-Y)+6*tt*$*(N-k)+3*$*$*(U-N);return Math.atan2(ut,Q)}}function T(E){return E*E}function O(E){return 2*E*(1-E)}function B(E){return(1-E)*(1-E)}function X(E,Y,J,k,R,N){return function(P){var U=T(P),$=O(P),tt=B(P);return{x:R*U+J*$+E*tt,y:N*U+k*$+Y*tt}}}function F(E,Y,J,k,R,N){return function(P){var U=1-P,$=2*U*(J-E)+2*P*(R-J),tt=2*U*(k-Y)+2*P*(N-k);return Math.atan2(tt,$)}}function I(E,Y,J){var k={x:Y,y:J},R,N=0,P;for(P=1;P<=100;P+=1)R=E(P/100),N+=f(k.x,k.y,R.x,R.y),k=R;return N}function K(E,Y){for(var J=0,k=0,R=E.iterator,N={x:E.x,y:E.y},P,U,$=.01,tt=E.angleFinder,Q;k<Y&&$>1e-4;)P=R(J),Q=J,U=f(N.x,N.y,P.x,P.y),U+k>Y?(J-=$,$/=2):(N=P,J+=$,k+=U);return P.angle=tt(Q),P}function G(E){for(var Y=0,J=E.length,k,R=0,N=0,P=0,U=0,$=[],tt,Q,ut,dt=0;dt<J;dt++){switch(k=E[dt],Q={x:R,y:N,command:k[0]},k[0]){case"M":Q.length=0,P=R=k[1],U=N=k[2];break;case"L":Q.length=f(R,N,k[1],k[2]),R=k[1],N=k[2];break;case"C":tt=A(R,N,k[1],k[2],k[3],k[4],k[5],k[6]),ut=M(R,N,k[1],k[2],k[3],k[4],k[5],k[6]),Q.iterator=tt,Q.angleFinder=ut,Q.length=I(tt,R,N),R=k[5],N=k[6];break;case"Q":tt=X(R,N,k[1],k[2],k[3],k[4]),ut=F(R,N,k[1],k[2],k[3],k[4]),Q.iterator=tt,Q.angleFinder=ut,Q.length=I(tt,R,N),R=k[3],N=k[4];break;case"Z":case"z":Q.destX=P,Q.destY=U,Q.length=f(R,N,P,U),R=P,N=U;break}Y+=Q.length,$.push(Q)}return $.push({length:Y,x:R,y:N}),$}function rt(E,Y,J){J||(J=G(E));for(var k=0;Y-J[k].length>0&&k<J.length-2;)Y-=J[k].length,k++;var R=J[k],N=Y/R.length,P=R.command,U=E[k],$;switch(P){case"M":return{x:R.x,y:R.y,angle:0};case"Z":case"z":return $=new t.Point(R.x,R.y).lerp(new t.Point(R.destX,R.destY),N),$.angle=Math.atan2(R.destY-R.y,R.destX-R.x),$;case"L":return $=new t.Point(R.x,R.y).lerp(new t.Point(U[1],U[2]),N),$.angle=Math.atan2(U[2]-R.y,U[1]-R.x),$;case"C":return K(R,Y);case"Q":return K(R,Y)}}function at(E){var Y=[],J=[],k,R,N=t.rePathCommand,P="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",U="("+P+")"+t.commaWsp,$="([01])"+t.commaWsp+"?",tt=U+"?"+U+"?"+U+$+$+U+"?("+P+")",Q=new RegExp(tt,"g"),ut,dt,St;if(!E||!E.match)return Y;St=E.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ot=0,st,it=St.length;ot<it;ot++){k=St[ot],dt=k.slice(1).trim(),J.length=0;var W=k.charAt(0);if(st=[W],W.toLowerCase()==="a")for(var vt;vt=Q.exec(dt);)for(var yt=1;yt<vt.length;yt++)J.push(vt[yt]);else for(;ut=N.exec(dt);)J.push(ut[0]);for(var yt=0,bt=J.length;yt<bt;yt++)R=parseFloat(J[yt]),isNaN(R)||st.push(R);var Lt=r[W.toLowerCase()],At=c[W]||W;if(st.length-1>Lt)for(var ft=1,Mt=st.length;ft<Mt;ft+=Lt)Y.push([W].concat(st.slice(ft,ft+Lt))),W=At;else Y.push(st)}return Y}function gt(E,Y){var J=[],k,R=new t.Point(E[0].x,E[0].y),N=new t.Point(E[1].x,E[1].y),P=E.length,U=1,$=0,tt=P>2;for(Y=Y||0,tt&&(U=E[2].x<N.x?-1:E[2].x===N.x?0:1,$=E[2].y<N.y?-1:E[2].y===N.y?0:1),J.push(["M",R.x-U*Y,R.y-$*Y]),k=1;k<P;k++){if(!R.eq(N)){var Q=R.midPointFrom(N);J.push(["Q",R.x,R.y,Q.x,Q.y])}R=E[k],k+1<E.length&&(N=E[k+1])}return tt&&(U=R.x>E[k-2].x?1:R.x===E[k-2].x?0:-1,$=R.y>E[k-2].y?1:R.y===E[k-2].y?0:-1),J.push(["L",R.x+U*Y,R.y+$*Y]),J}function nt(E,Y,J){return J&&(Y=t.util.multiplyTransformMatrices(Y,[1,0,0,1,-J.x,-J.y])),E.map(function(k){for(var R=k.slice(0),N={},P=1;P<k.length-1;P+=2)N.x=k[P],N.y=k[P+1],N=t.util.transformPoint(N,Y),R[P]=N.x,R[P+1]=N.y;return R})}t.util.joinPath=function(E){return E.map(function(Y){return Y.join(" ")}).join(" ")},t.util.parsePath=at,t.util.makePathSimpler=g,t.util.getSmoothPathFromPoints=gt,t.util.getPathSegmentsInfo=G,t.util.getBoundsOfCurve=n,t.util.getPointOnPath=rt,t.util.transformPath=nt}(),function(){var o=Array.prototype.slice;function r(n,h){for(var g=o.call(arguments,2),f=[],m=0,y=n.length;m<y;m++)f[m]=g.length?n[m][h].apply(n[m],g):n[m][h].call(n[m]);return f}function c(n,h){return l(n,h,function(g,f){return g>=f})}function u(n,h){return l(n,h,function(g,f){return g<f})}function s(n,h){for(var g=n.length;g--;)n[g]=h;return n}function l(n,h,g){if(!(!n||n.length===0)){var f=n.length-1,m=h?n[f][h]:n[f];if(h)for(;f--;)g(n[f][h],m)&&(m=n[f][h]);else for(;f--;)g(n[f],m)&&(m=n[f]);return m}}t.util.array={fill:s,invoke:r,min:u,max:c}}(),function(){function o(c,u,s){if(s)if(!t.isLikelyNode&&u instanceof Element)c=u;else if(u instanceof Array){c=[];for(var l=0,n=u.length;l<n;l++)c[l]=o({},u[l],s)}else if(u&&typeof u=="object")for(var h in u)h==="canvas"||h==="group"?c[h]=null:u.hasOwnProperty(h)&&(c[h]=o({},u[h],s));else c=u;else for(var h in u)c[h]=u[h];return c}function r(c,u){return o({},c,u)}t.util.object={extend:o,clone:r},t.util.object.extend(t.util,t.Observable)}(),function(){function o(l){return l.replace(/-+(.)?/g,function(n,h){return h?h.toUpperCase():""})}function r(l,n){return l.charAt(0).toUpperCase()+(n?l.slice(1):l.slice(1).toLowerCase())}function c(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(l){var n=0,h,g=[];for(n=0,h;n<l.length;n++)(h=s(l,n))!==!1&&g.push(h);return g}function s(l,n){var h=l.charCodeAt(n);if(isNaN(h))return"";if(h<55296||h>57343)return l.charAt(n);if(55296<=h&&h<=56319){if(l.length<=n+1)throw"High surrogate without following low surrogate";var g=l.charCodeAt(n+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return l.charAt(n)+l.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var f=l.charCodeAt(n-1);if(55296>f||f>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:o,capitalize:r,escapeXml:c,graphemeSplit:u}}(),function(){var o=Array.prototype.slice,r=function(){},c=function(){for(var h in{toString:1})if(h==="toString")return!1;return!0}(),u=function(h,g,f){for(var m in g)m in h.prototype&&typeof h.prototype[m]=="function"&&(g[m]+"").indexOf("callSuper")>-1?h.prototype[m]=function(y){return function(){var x=this.constructor.superclass;this.constructor.superclass=f;var _=g[y].apply(this,arguments);if(this.constructor.superclass=x,y!=="initialize")return _}}(m):h.prototype[m]=g[m],c&&(g.toString!==Object.prototype.toString&&(h.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(h.prototype.valueOf=g.valueOf))};function s(){}function l(h){for(var g=null,f=this;f.constructor.superclass;){var m=f.constructor.superclass.prototype[h];if(f[h]!==m){g=m;break}f=f.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,o.call(arguments,1)):g.call(this):console.log("tried to callSuper "+h+", method not found in prototype chain",this)}function n(){var h=null,g=o.call(arguments,0);typeof g[0]=="function"&&(h=g.shift());function f(){this.initialize.apply(this,arguments)}f.superclass=h,f.subclasses=[],h&&(s.prototype=h.prototype,f.prototype=new s,h.subclasses.push(f));for(var m=0,y=g.length;m<y;m++)u(f,g[m],h);return f.prototype.initialize||(f.prototype.initialize=r),f.prototype.constructor=f,f.prototype.callSuper=l,f}t.util.createClass=n}(),function(){var o=!!t.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];t.util.addListener=function(u,s,l,n){u&&u.addEventListener(s,l,o?!1:n)},t.util.removeListener=function(u,s,l,n){u&&u.removeEventListener(s,l,o?!1:n)};function c(u){var s=u.changedTouches;return s&&s[0]?s[0]:u}t.util.getPointer=function(u){var s=u.target,l=t.util.getScrollLeftTop(s),n=c(u);return{x:n.clientX+l.left,y:n.clientY+l.top}},t.util.isTouchEvent=function(u){return r.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function o(n,h){var g=n.style;if(!g)return n;if(typeof h=="string")return n.style.cssText+=";"+h,h.indexOf("opacity")>-1?l(n,h.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var f in h)if(f==="opacity")l(n,h[f]);else{var m=f==="float"||f==="cssFloat"?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":f;g.setProperty(m,h[f])}return n}var r=t.document.createElement("div"),c=typeof r.style.opacity=="string",u=typeof r.style.filter=="string",s=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(n){return n};c?l=function(n,h){return n.style.opacity=h,n}:u&&(l=function(n,h){var g=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(g.zoom=1),s.test(g.filter)?(h=h>=.9999?"":"alpha(opacity="+h*100+")",g.filter=g.filter.replace(s,h)):g.filter+=" alpha(opacity="+h*100+")",n}),t.util.setStyle=o}(),function(){var o=Array.prototype.slice;function r(_){return typeof _=="string"?t.document.getElementById(_):_}var c,u=function(_){return o.call(_,0)};try{c=u(t.document.childNodes)instanceof Array}catch{}c||(u=function(_){for(var A=new Array(_.length),M=_.length;M--;)A[M]=_[M];return A});function s(_,A){var M=t.document.createElement(_);for(var T in A)T==="class"?M.className=A[T]:T==="for"?M.htmlFor=A[T]:M.setAttribute(T,A[T]);return M}function l(_,A){_&&(" "+_.className+" ").indexOf(" "+A+" ")===-1&&(_.className+=(_.className?" ":"")+A)}function n(_,A,M){return typeof A=="string"&&(A=s(A,M)),_.parentNode&&_.parentNode.replaceChild(A,_),A.appendChild(_),A}function h(_){for(var A=0,M=0,T=t.document.documentElement,O=t.document.body||{scrollLeft:0,scrollTop:0};_&&(_.parentNode||_.host)&&(_=_.parentNode||_.host,_===t.document?(A=O.scrollLeft||T.scrollLeft||0,M=O.scrollTop||T.scrollTop||0):(A+=_.scrollLeft||0,M+=_.scrollTop||0),!(_.nodeType===1&&_.style.position==="fixed")););return{left:A,top:M}}function g(_){var A,M=_&&_.ownerDocument,T={left:0,top:0},O={left:0,top:0},B,X={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!M)return O;for(var F in X)O[X[F]]+=parseInt(f(_,F),10)||0;return A=M.documentElement,typeof _.getBoundingClientRect<"u"&&(T=_.getBoundingClientRect()),B=h(_),{left:T.left+B.left-(A.clientLeft||0)+O.left,top:T.top+B.top-(A.clientTop||0)+O.top}}var f;t.document.defaultView&&t.document.defaultView.getComputedStyle?f=function(_,A){var M=t.document.defaultView.getComputedStyle(_,null);return M?M[A]:void 0}:f=function(_,A){var M=_.style[A];return!M&&_.currentStyle&&(M=_.currentStyle[A]),M},function(){var _=t.document.documentElement.style,A="userSelect"in _?"userSelect":"MozUserSelect"in _?"MozUserSelect":"WebkitUserSelect"in _?"WebkitUserSelect":"KhtmlUserSelect"in _?"KhtmlUserSelect":"";function M(O){return typeof O.onselectstart<"u"&&(O.onselectstart=t.util.falseFunction),A?O.style[A]="none":typeof O.unselectable=="string"&&(O.unselectable="on"),O}function T(O){return typeof O.onselectstart<"u"&&(O.onselectstart=null),A?O.style[A]="":typeof O.unselectable=="string"&&(O.unselectable=""),O}t.util.makeElementUnselectable=M,t.util.makeElementSelectable=T}();function m(_){var A=t.jsdomImplForWrapper(_);return A._canvas||A._image}function y(_){if(t.isLikelyNode){var A=t.jsdomImplForWrapper(_);A&&(A._image=null,A._canvas=null,A._currentSrc=null,A._attributes=null,A._classList=null)}}function x(_,A){_.imageSmoothingEnabled=_.imageSmoothingEnabled||_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled||_.oImageSmoothingEnabled,_.imageSmoothingEnabled=A}t.util.setImageSmoothing=x,t.util.getById=r,t.util.toArray=u,t.util.addClass=l,t.util.makeElement=s,t.util.wrapElement=n,t.util.getScrollLeftTop=h,t.util.getElementOffset=g,t.util.getNodeCanvas=m,t.util.cleanUpJsdomNode=y}(),function(){function o(u,s){return u+(/\?/.test(u)?"&":"?")+s}function r(){}function c(u,s){s||(s={});var l=s.method?s.method.toUpperCase():"GET",n=s.onComplete||function(){},h=new t.window.XMLHttpRequest,g=s.body||s.parameters;return h.onreadystatechange=function(){h.readyState===4&&(n(h),h.onreadystatechange=r)},l==="GET"&&(g=null,typeof s.parameters=="string"&&(u=o(u,s.parameters))),h.open(l,u,!0),(l==="POST"||l==="PUT")&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(g),h}t.util.request=c}(),t.log=console.log,t.warn=console.warn,function(){var o=t.util.object.extend,r=t.util.object.clone,c=[];t.util.object.extend(c,{cancelAll:function(){var m=this.splice(0);return m.forEach(function(y){y.cancel()}),m},cancelByCanvas:function(m){if(!m)return[];var y=this.filter(function(x){return typeof x.target=="object"&&x.target.canvas===m});return y.forEach(function(x){x.cancel()}),y},cancelByTarget:function(m){var y=this.findAnimationsByTarget(m);return y.forEach(function(x){x.cancel()}),y},findAnimationIndex:function(m){return this.indexOf(this.findAnimation(m))},findAnimation:function(m){return this.find(function(y){return y.cancel===m})},findAnimationsByTarget:function(m){return m?this.filter(function(y){return y.target===m}):[]}});function u(){return!1}function s(m,y,x,_){return-x*Math.cos(m/_*(Math.PI/2))+x+y}function l(m){m||(m={});var y=!1,x,_=function(){var A=t.runningAnimations.indexOf(x);return A>-1&&t.runningAnimations.splice(A,1)[0]};return x=o(r(m),{cancel:function(){return y=!0,_()},currentValue:"startValue"in m?m.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(x),g(function(A){var M=A||+new Date,T=m.duration||500,O=M+T,B,X=m.onChange||u,F=m.abort||u,I=m.onComplete||u,K=m.easing||s,G="startValue"in m?m.startValue.length>0:!1,rt="startValue"in m?m.startValue:0,at="endValue"in m?m.endValue:100,gt=m.byValue||(G?rt.map(function(nt,E){return at[E]-rt[E]}):at-rt);m.onStart&&m.onStart(),function nt(E){B=E||+new Date;var Y=B>O?T:B-M,J=Y/T,k=G?rt.map(function(N,P){return K(Y,rt[P],gt[P],T)}):K(Y,rt,gt,T),R=Math.abs(G?(k[0]-rt[0])/gt[0]:(k-rt)/gt);if(x.currentValue=G?k.slice():k,x.completionRate=R,x.durationRate=J,!y){if(F(k,R,J)){_();return}if(B>O){x.currentValue=G?at.slice():at,x.completionRate=1,x.durationRate=1,X(G?at.slice():at,1,1),I(at,1,1),_();return}else X(k,R,J),g(nt)}}(M)}),x.cancel}var n=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(m){return t.window.setTimeout(m,1e3/60)},h=t.window.cancelAnimationFrame||t.window.clearTimeout;function g(){return n.apply(t.window,arguments)}function f(){return h.apply(t.window,arguments)}t.util.animate=l,t.util.requestAnimFrame=g,t.util.cancelAnimFrame=f,t.runningAnimations=c}(),function(){function o(c,u,s){var l="rgba("+parseInt(c[0]+s*(u[0]-c[0]),10)+","+parseInt(c[1]+s*(u[1]-c[1]),10)+","+parseInt(c[2]+s*(u[2]-c[2]),10);return l+=","+(c&&u?parseFloat(c[3]+s*(u[3]-c[3])):1),l+=")",l}function r(c,u,s,l){var n=new t.Color(c).getSource(),h=new t.Color(u).getSource(),g=l.onComplete,f=l.onChange;return l=l||{},t.util.animate(t.util.object.extend(l,{duration:s||500,startValue:n,endValue:h,byValue:h,easing:function(m,y,x,_){var A=l.colorEasing?l.colorEasing(m,_):1-Math.cos(m/_*(Math.PI/2));return o(y,x,A)},onComplete:function(m,y,x){if(g)return g(o(h,h,0),y,x)},onChange:function(m,y,x){if(f){if(Array.isArray(m))return f(o(m,m,0),y,x);f(m,y,x)}}}))}t.util.animateColor=r}(),function(){function o(E,Y,J,k){return E<Math.abs(Y)?(E=Y,k=J/4):Y===0&&E===0?k=J/(2*Math.PI)*Math.asin(1):k=J/(2*Math.PI)*Math.asin(Y/E),{a:E,c:Y,p:J,s:k}}function r(E,Y,J){return E.a*Math.pow(2,10*(Y-=1))*Math.sin((Y*J-E.s)*(2*Math.PI)/E.p)}function c(E,Y,J,k){return J*((E=E/k-1)*E*E+1)+Y}function u(E,Y,J,k){return E/=k/2,E<1?J/2*E*E*E+Y:J/2*((E-=2)*E*E+2)+Y}function s(E,Y,J,k){return J*(E/=k)*E*E*E+Y}function l(E,Y,J,k){return-J*((E=E/k-1)*E*E*E-1)+Y}function n(E,Y,J,k){return E/=k/2,E<1?J/2*E*E*E*E+Y:-J/2*((E-=2)*E*E*E-2)+Y}function h(E,Y,J,k){return J*(E/=k)*E*E*E*E+Y}function g(E,Y,J,k){return J*((E=E/k-1)*E*E*E*E+1)+Y}function f(E,Y,J,k){return E/=k/2,E<1?J/2*E*E*E*E*E+Y:J/2*((E-=2)*E*E*E*E+2)+Y}function m(E,Y,J,k){return-J*Math.cos(E/k*(Math.PI/2))+J+Y}function y(E,Y,J,k){return J*Math.sin(E/k*(Math.PI/2))+Y}function x(E,Y,J,k){return-J/2*(Math.cos(Math.PI*E/k)-1)+Y}function _(E,Y,J,k){return E===0?Y:J*Math.pow(2,10*(E/k-1))+Y}function A(E,Y,J,k){return E===k?Y+J:J*(-Math.pow(2,-10*E/k)+1)+Y}function M(E,Y,J,k){return E===0?Y:E===k?Y+J:(E/=k/2,E<1?J/2*Math.pow(2,10*(E-1))+Y:J/2*(-Math.pow(2,-10*--E)+2)+Y)}function T(E,Y,J,k){return-J*(Math.sqrt(1-(E/=k)*E)-1)+Y}function O(E,Y,J,k){return J*Math.sqrt(1-(E=E/k-1)*E)+Y}function B(E,Y,J,k){return E/=k/2,E<1?-J/2*(Math.sqrt(1-E*E)-1)+Y:J/2*(Math.sqrt(1-(E-=2)*E)+1)+Y}function X(E,Y,J,k){var R=1.70158,N=0,P=J;if(E===0)return Y;if(E/=k,E===1)return Y+J;N||(N=k*.3);var U=o(P,J,N,R);return-r(U,E,k)+Y}function F(E,Y,J,k){var R=1.70158,N=0,P=J;if(E===0)return Y;if(E/=k,E===1)return Y+J;N||(N=k*.3);var U=o(P,J,N,R);return U.a*Math.pow(2,-10*E)*Math.sin((E*k-U.s)*(2*Math.PI)/U.p)+U.c+Y}function I(E,Y,J,k){var R=1.70158,N=0,P=J;if(E===0)return Y;if(E/=k/2,E===2)return Y+J;N||(N=k*(.3*1.5));var U=o(P,J,N,R);return E<1?-.5*r(U,E,k)+Y:U.a*Math.pow(2,-10*(E-=1))*Math.sin((E*k-U.s)*(2*Math.PI)/U.p)*.5+U.c+Y}function K(E,Y,J,k,R){return R===void 0&&(R=1.70158),J*(E/=k)*E*((R+1)*E-R)+Y}function G(E,Y,J,k,R){return R===void 0&&(R=1.70158),J*((E=E/k-1)*E*((R+1)*E+R)+1)+Y}function rt(E,Y,J,k,R){return R===void 0&&(R=1.70158),E/=k/2,E<1?J/2*(E*E*(((R*=1.525)+1)*E-R))+Y:J/2*((E-=2)*E*(((R*=1.525)+1)*E+R)+2)+Y}function at(E,Y,J,k){return J-gt(k-E,0,J,k)+Y}function gt(E,Y,J,k){return(E/=k)<1/2.75?J*(7.5625*E*E)+Y:E<2/2.75?J*(7.5625*(E-=1.5/2.75)*E+.75)+Y:E<2.5/2.75?J*(7.5625*(E-=2.25/2.75)*E+.9375)+Y:J*(7.5625*(E-=2.625/2.75)*E+.984375)+Y}function nt(E,Y,J,k){return E<k/2?at(E*2,0,J,k)*.5+Y:gt(E*2-k,0,J,k)*.5+J*.5+Y}t.util.ease={easeInQuad:function(E,Y,J,k){return J*(E/=k)*E+Y},easeOutQuad:function(E,Y,J,k){return-J*(E/=k)*(E-2)+Y},easeInOutQuad:function(E,Y,J,k){return E/=k/2,E<1?J/2*E*E+Y:-J/2*(--E*(E-2)-1)+Y},easeInCubic:function(E,Y,J,k){return J*(E/=k)*E*E+Y},easeOutCubic:c,easeInOutCubic:u,easeInQuart:s,easeOutQuart:l,easeInOutQuart:n,easeInQuint:h,easeOutQuint:g,easeInOutQuint:f,easeInSine:m,easeOutSine:y,easeInOutSine:x,easeInExpo:_,easeOutExpo:A,easeInOutExpo:M,easeInCirc:T,easeOutCirc:O,easeInOutCirc:B,easeInElastic:X,easeOutElastic:F,easeInOutElastic:I,easeInBack:K,easeOutBack:G,easeInOutBack:rt,easeInBounce:at,easeOutBounce:gt,easeInOutBounce:nt}}(),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.util.object.clone,s=r.util.toFixed,l=r.util.parseUnit,n=r.util.multiplyTransformMatrices,h=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],g=["symbol","image","marker","pattern","view","svg"],f=["pattern","defs","symbol","metadata","clipPath","mask","desc"],m=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},x={stroke:"strokeOpacity",fill:"fillOpacity"},_="font-size",A="clip-path";r.svgValidTagNamesRegEx=O(h),r.svgViewBoxElementsRegEx=O(g),r.svgInvalidAncestorsRegEx=O(f),r.svgValidParentsRegEx=O(m),r.cssRules={},r.gradientDefs={},r.clipPaths={};function M(N){return N in y?y[N]:N}function T(N,P,U,$){var tt=Array.isArray(P),Q;if((N==="fill"||N==="stroke")&&P==="none")P="";else{if(N==="strokeUniform")return P==="non-scaling-stroke";if(N==="strokeDashArray")P==="none"?P=null:P=P.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(N==="transformMatrix")U&&U.transformMatrix?P=n(U.transformMatrix,r.parseTransformAttribute(P)):P=r.parseTransformAttribute(P);else if(N==="visible")P=P!=="none"&&P!=="hidden",U&&U.visible===!1&&(P=!1);else if(N==="opacity")P=parseFloat(P),U&&typeof U.opacity<"u"&&(P*=U.opacity);else if(N==="textAnchor")P=P==="start"?"left":P==="end"?"right":"center";else if(N==="charSpacing")Q=l(P,$)/$*1e3;else if(N==="paintFirst"){var ut=P.indexOf("fill"),dt=P.indexOf("stroke"),P="fill";(ut>-1&&dt>-1&&dt<ut||ut===-1&&dt>-1)&&(P="stroke")}else{if(N==="href"||N==="xlink:href"||N==="font")return P;if(N==="imageSmoothing")return P==="optimizeQuality";Q=tt?P.map(l):l(P,$)}}return!tt&&isNaN(Q)?P:Q}function O(N){return new RegExp("^("+N.join("|")+")\\b","i")}function B(N){for(var P in x)if(!(typeof N[x[P]]>"u"||N[P]==="")){if(typeof N[P]>"u"){if(!r.Object.prototype[P])continue;N[P]=r.Object.prototype[P]}if(N[P].indexOf("url(")!==0){var U=new r.Color(N[P]);N[P]=U.setAlpha(s(U.getAlpha()*N[x[P]],2)).toRgba()}}return N}function X(N,P){var U,$=[],tt,Q,ut;for(Q=0,ut=P.length;Q<ut;Q++)U=P[Q],tt=N.getElementsByTagName(U),$=$.concat(Array.prototype.slice.call(tt));return $}r.parseTransformAttribute=function(){function N(ft,Mt){var jt=r.util.cos(Mt[0]),Rt=r.util.sin(Mt[0]),Yt=0,Vt=0;Mt.length===3&&(Yt=Mt[1],Vt=Mt[2]),ft[0]=jt,ft[1]=Rt,ft[2]=-Rt,ft[3]=jt,ft[4]=Yt-(jt*Yt-Rt*Vt),ft[5]=Vt-(Rt*Yt+jt*Vt)}function P(ft,Mt){var jt=Mt[0],Rt=Mt.length===2?Mt[1]:Mt[0];ft[0]=jt,ft[3]=Rt}function U(ft,Mt,jt){ft[jt]=Math.tan(r.util.degreesToRadians(Mt[0]))}function $(ft,Mt){ft[4]=Mt[0],Mt.length===2&&(ft[5]=Mt[1])}var tt=r.iMatrix,Q=r.reNum,ut=r.commaWsp,dt="(?:(skewX)\\s*\\(\\s*("+Q+")\\s*\\))",St="(?:(skewY)\\s*\\(\\s*("+Q+")\\s*\\))",ot="(?:(rotate)\\s*\\(\\s*("+Q+")(?:"+ut+"("+Q+")"+ut+"("+Q+"))?\\s*\\))",st="(?:(scale)\\s*\\(\\s*("+Q+")(?:"+ut+"("+Q+"))?\\s*\\))",it="(?:(translate)\\s*\\(\\s*("+Q+")(?:"+ut+"("+Q+"))?\\s*\\))",W="(?:(matrix)\\s*\\(\\s*("+Q+")"+ut+"("+Q+")"+ut+"("+Q+")"+ut+"("+Q+")"+ut+"("+Q+")"+ut+"("+Q+")\\s*\\))",vt="(?:"+W+"|"+it+"|"+st+"|"+ot+"|"+dt+"|"+St+")",yt="(?:"+vt+"(?:"+ut+"*"+vt+")*)",bt="^\\s*(?:"+yt+"?)\\s*$",Lt=new RegExp(bt),At=new RegExp(vt,"g");return function(ft){var Mt=tt.concat(),jt=[];if(!ft||ft&&!Lt.test(ft))return Mt;ft.replace(At,function(Yt){var Vt=new RegExp(vt).exec(Yt).filter(function(te){return!!te}),ie=Vt[1],Wt=Vt.slice(2).map(parseFloat);switch(ie){case"translate":$(Mt,Wt);break;case"rotate":Wt[0]=r.util.degreesToRadians(Wt[0]),N(Mt,Wt);break;case"scale":P(Mt,Wt);break;case"skewX":U(Mt,Wt,2);break;case"skewY":U(Mt,Wt,1);break;case"matrix":Mt=Wt;break}jt.push(Mt.concat()),Mt=tt.concat()});for(var Rt=jt[0];jt.length>1;)jt.shift(),Rt=r.util.multiplyTransformMatrices(Rt,jt[0]);return Rt}}();function F(N,P){var U,$;N.replace(/;\s*$/,"").split(";").forEach(function(tt){var Q=tt.split(":");U=Q[0].trim().toLowerCase(),$=Q[1].trim(),P[U]=$})}function I(N,P){var U,$;for(var tt in N)typeof N[tt]>"u"||(U=tt.toLowerCase(),$=N[tt],P[U]=$)}function K(N,P){var U={};for(var $ in r.cssRules[P])if(G(N,$.split(" ")))for(var tt in r.cssRules[P][$])U[tt]=r.cssRules[P][$][tt];return U}function G(N,P){var U,$=!0;return U=at(N,P.pop()),U&&P.length&&($=rt(N,P)),U&&$&&P.length===0}function rt(N,P){for(var U,$=!0;N.parentNode&&N.parentNode.nodeType===1&&P.length;)$&&(U=P.pop()),N=N.parentNode,$=at(N,U);return P.length===0}function at(N,P){var U=N.nodeName,$=N.getAttribute("class"),tt=N.getAttribute("id"),Q,ut;if(Q=new RegExp("^"+U,"i"),P=P.replace(Q,""),tt&&P.length&&(Q=new RegExp("#"+tt+"(?![a-zA-Z\\-]+)","i"),P=P.replace(Q,"")),$&&P.length)for($=$.split(" "),ut=$.length;ut--;)Q=new RegExp("\\."+$[ut]+"(?![a-zA-Z\\-]+)","i"),P=P.replace(Q,"");return P.length===0}function gt(N,P){var U;if(N.getElementById&&(U=N.getElementById(P)),U)return U;var $,tt,Q,ut=N.getElementsByTagName("*");for(tt=0,Q=ut.length;tt<Q;tt++)if($=ut[tt],P===$.getAttribute("id"))return $}function nt(N){for(var P=X(N,["use","svg:use"]),U=0;P.length&&U<P.length;){var $=P[U],tt=$.getAttribute("xlink:href")||$.getAttribute("href");if(tt===null)return;var Q=tt.slice(1),ut=$.getAttribute("x")||0,dt=$.getAttribute("y")||0,St=gt(N,Q).cloneNode(!0),ot=(St.getAttribute("transform")||"")+" translate("+ut+", "+dt+")",st,it=P.length,W,vt,yt,bt,Lt=r.svgNS;if(Y(St),/^svg$/i.test(St.nodeName)){var At=St.ownerDocument.createElementNS(Lt,"g");for(vt=0,yt=St.attributes,bt=yt.length;vt<bt;vt++)W=yt.item(vt),At.setAttributeNS(Lt,W.nodeName,W.nodeValue);for(;St.firstChild;)At.appendChild(St.firstChild);St=At}for(vt=0,yt=$.attributes,bt=yt.length;vt<bt;vt++)W=yt.item(vt),!(W.nodeName==="x"||W.nodeName==="y"||W.nodeName==="xlink:href"||W.nodeName==="href")&&(W.nodeName==="transform"?ot=W.nodeValue+" "+ot:St.setAttribute(W.nodeName,W.nodeValue));St.setAttribute("transform",ot),St.setAttribute("instantiated_by_use","1"),St.removeAttribute("id"),st=$.parentNode,st.replaceChild(St,$),P.length===it&&U++}}var E=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function Y(N){if(!r.svgViewBoxElementsRegEx.test(N.nodeName))return{};var P=N.getAttribute("viewBox"),U=1,$=1,tt=0,Q=0,ut,dt,St,ot,st=N.getAttribute("width"),it=N.getAttribute("height"),W=N.getAttribute("x")||0,vt=N.getAttribute("y")||0,yt=N.getAttribute("preserveAspectRatio")||"",bt=!P||!(P=P.match(E)),Lt=!st||!it||st==="100%"||it==="100%",At=bt&&Lt,ft={},Mt="",jt=0,Rt=0;if(ft.width=0,ft.height=0,ft.toBeParsed=At,bt&&(W||vt)&&N.parentNode&&N.parentNode.nodeName!=="#document"&&(Mt=" translate("+l(W)+" "+l(vt)+") ",St=(N.getAttribute("transform")||"")+Mt,N.setAttribute("transform",St),N.removeAttribute("x"),N.removeAttribute("y")),At)return ft;if(bt)return ft.width=l(st),ft.height=l(it),ft;if(tt=-parseFloat(P[1]),Q=-parseFloat(P[2]),ut=parseFloat(P[3]),dt=parseFloat(P[4]),ft.minX=tt,ft.minY=Q,ft.viewBoxWidth=ut,ft.viewBoxHeight=dt,Lt?(ft.width=ut,ft.height=dt):(ft.width=l(st),ft.height=l(it),U=ft.width/ut,$=ft.height/dt),yt=r.util.parsePreserveAspectRatioAttribute(yt),yt.alignX!=="none"&&(yt.meetOrSlice==="meet"&&($=U=U>$?$:U),yt.meetOrSlice==="slice"&&($=U=U>$?U:$),jt=ft.width-ut*U,Rt=ft.height-dt*U,yt.alignX==="Mid"&&(jt/=2),yt.alignY==="Mid"&&(Rt/=2),yt.alignX==="Min"&&(jt=0),yt.alignY==="Min"&&(Rt=0)),U===1&&$===1&&tt===0&&Q===0&&W===0&&vt===0)return ft;if((W||vt)&&N.parentNode.nodeName!=="#document"&&(Mt=" translate("+l(W)+" "+l(vt)+") "),St=Mt+" matrix("+U+" 0 0 "+$+" "+(tt*U+jt)+" "+(Q*$+Rt)+") ",N.nodeName==="svg"){for(ot=N.ownerDocument.createElementNS(r.svgNS,"g");N.firstChild;)ot.appendChild(N.firstChild);N.appendChild(ot)}else ot=N,ot.removeAttribute("x"),ot.removeAttribute("y"),St=ot.getAttribute("transform")+St;return ot.setAttribute("transform",St),ft}function J(N,P){for(;N&&(N=N.parentNode);)if(N.nodeName&&P.test(N.nodeName.replace("svg:",""))&&!N.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(N,P,U,$){if(N){nt(N);var tt=r.Object.__uid++,Q,ut,dt=Y(N),St=r.util.toArray(N.getElementsByTagName("*"));if(dt.crossOrigin=$&&$.crossOrigin,dt.svgUid=tt,St.length===0&&r.isLikelyNode){St=N.selectNodes('//*[name(.)!="svg"]');var ot=[];for(Q=0,ut=St.length;Q<ut;Q++)ot[Q]=St[Q];St=ot}var st=St.filter(function(W){return Y(W),r.svgValidTagNamesRegEx.test(W.nodeName.replace("svg:",""))&&!J(W,r.svgInvalidAncestorsRegEx)});if(!st||st&&!st.length){P&&P([],{});return}var it={};St.filter(function(W){return W.nodeName.replace("svg:","")==="clipPath"}).forEach(function(W){var vt=W.getAttribute("id");it[vt]=r.util.toArray(W.getElementsByTagName("*")).filter(function(yt){return r.svgValidTagNamesRegEx.test(yt.nodeName.replace("svg:",""))})}),r.gradientDefs[tt]=r.getGradientDefs(N),r.cssRules[tt]=r.getCSSRules(N),r.clipPaths[tt]=it,r.parseElements(st,function(W,vt){P&&(P(W,dt,vt,St),delete r.gradientDefs[tt],delete r.cssRules[tt],delete r.clipPaths[tt])},u(dt),U,$)}};function k(N,P){var U=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],$="xlink:href",tt=P.getAttribute($).slice(1),Q=gt(N,tt);if(Q&&Q.getAttribute($)&&k(N,Q),U.forEach(function(dt){Q&&!P.hasAttribute(dt)&&Q.hasAttribute(dt)&&P.setAttribute(dt,Q.getAttribute(dt))}),!P.children.length)for(var ut=Q.cloneNode(!0);ut.firstChild;)P.appendChild(ut.firstChild);P.removeAttribute($)}var R=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");c(r,{parseFontDeclaration:function(N,P){var U=N.match(R);if(U){var $=U[1],tt=U[3],Q=U[4],ut=U[5],dt=U[6];$&&(P.fontStyle=$),tt&&(P.fontWeight=isNaN(parseFloat(tt))?tt:parseFloat(tt)),Q&&(P.fontSize=l(Q)),dt&&(P.fontFamily=dt),ut&&(P.lineHeight=ut==="normal"?1:ut)}},getGradientDefs:function(N){var P=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],U=X(N,P),$,tt=0,Q={};for(tt=U.length;tt--;)$=U[tt],$.getAttribute("xlink:href")&&k(N,$),Q[$.getAttribute("id")]=$;return Q},parseAttributes:function(N,P,U){if(N){var $,tt={},Q,ut;typeof U>"u"&&(U=N.getAttribute("svgUid")),N.parentNode&&r.svgValidParentsRegEx.test(N.parentNode.nodeName)&&(tt=r.parseAttributes(N.parentNode,P,U));var dt=P.reduce(function(yt,bt){return $=N.getAttribute(bt),$&&(yt[bt]=$),yt},{}),St=c(K(N,U),r.parseStyleAttribute(N));dt=c(dt,St),St[A]&&N.setAttribute(A,St[A]),Q=ut=tt.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,dt[_]&&(dt[_]=Q=l(dt[_],ut));var ot,st,it={};for(var W in dt)ot=M(W),st=T(ot,dt[W],tt,Q),it[ot]=st;it&&it.font&&r.parseFontDeclaration(it.font,it);var vt=c(tt,it);return r.svgValidParentsRegEx.test(N.nodeName)?vt:B(vt)}},parseElements:function(N,P,U,$,tt){new r.ElementsParser(N,P,U,$,tt).parse()},parseStyleAttribute:function(N){var P={},U=N.getAttribute("style");return U&&(typeof U=="string"?F(U,P):I(U,P)),P},parsePointsAttribute:function(N){if(!N)return null;N=N.replace(/,/g," ").trim(),N=N.split(/\s+/);var P=[],U,$;for(U=0,$=N.length;U<$;U+=2)P.push({x:parseFloat(N[U]),y:parseFloat(N[U+1])});return P},getCSSRules:function(N){var P=N.getElementsByTagName("style"),U,$,tt={},Q;for(U=0,$=P.length;U<$;U++){var ut=P[U].textContent;ut=ut.replace(/\/\*[\s\S]*?\*\//g,""),ut.trim()!==""&&(Q=ut.split("}"),Q=Q.filter(function(dt){return dt.trim()}),Q.forEach(function(dt){var St=dt.split("{"),ot={},st=St[1].trim(),it=st.split(";").filter(function(bt){return bt.trim()});for(U=0,$=it.length;U<$;U++){var W=it[U].split(":"),vt=W[0].trim(),yt=W[1].trim();ot[vt]=yt}dt=St[0].trim(),dt.split(",").forEach(function(bt){bt=bt.replace(/^svg/i,"").trim(),bt!==""&&(tt[bt]?r.util.object.extend(tt[bt],ot):tt[bt]=r.util.object.clone(ot))})}))}return tt},loadSVGFromURL:function(N,P,U,$){N=N.replace(/^\n\s*/,"").trim(),new r.util.request(N,{method:"get",onComplete:tt});function tt(Q){var ut=Q.responseXML;if(!ut||!ut.documentElement)return P&&P(null),!1;r.parseSVGDocument(ut.documentElement,function(dt,St,ot,st){P&&P(dt,St,ot,st)},U,$)}},loadSVGFromString:function(N,P,U,$){var tt=new r.window.DOMParser,Q=tt.parseFromString(N.trim(),"text/xml");r.parseSVGDocument(Q.documentElement,function(ut,dt,St,ot){P(ut,dt,St,ot)},U,$)}})}(e),t.ElementsParser=function(o,r,c,u,s,l){this.elements=o,this.callback=r,this.options=c,this.reviver=u,this.svgUid=c&&c.svgUid||0,this.parsingOptions=s,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(o){o.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},o.createObjects=function(){var r=this;this.elements.forEach(function(c,u){c.setAttribute("svgUid",r.svgUid),r.createObject(c,u)})},o.findTag=function(r){return t[t.util.string.capitalize(r.tagName.replace("svg:",""))]},o.createObject=function(r,c){var u=this.findTag(r);if(u&&u.fromElement)try{u.fromElement(r,this.createCallback(c,r),this.options)}catch(s){t.log(s)}else this.checkIfDone()},o.createCallback=function(r,c){var u=this;return function(s){var l;u.resolveGradient(s,c,"fill"),u.resolveGradient(s,c,"stroke"),s instanceof t.Image&&s._originalElement&&(l=s.parsePreserveAspectRatioAttribute(c)),s._removeTransformMatrix(l),u.resolveClipPath(s,c),u.reviver&&u.reviver(c,s),u.instances[r]=s,u.checkIfDone()}},o.extractPropertyDefinition=function(r,c,u){var s=r[c],l=this.regexUrl;if(l.test(s)){l.lastIndex=0;var n=l.exec(s)[1];return l.lastIndex=0,t[u][this.svgUid][n]}},o.resolveGradient=function(r,c,u){var s=this.extractPropertyDefinition(r,u,"gradientDefs");if(s){var l=c.getAttribute(u+"-opacity"),n=t.Gradient.fromElement(s,r,l,this.options);r.set(u,n)}},o.createClipPathCallback=function(r,c){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,c.push(u)}},o.resolveClipPath=function(r,c){var u=this.extractPropertyDefinition(r,"clipPath","clipPaths"),s,l,n,h,g,f;if(u){h=[],n=t.util.invertTransform(r.calcTransformMatrix());for(var m=u[0].parentNode,y=c;y.parentNode&&y.getAttribute("clip-path")!==r.clipPath;)y=y.parentNode;y.parentNode.appendChild(m);for(var x=0;x<u.length;x++)s=u[x],l=this.findTag(s),l.fromElement(s,this.createClipPathCallback(r,h),this.options);h.length===1?u=h[0]:u=new t.Group(h),g=t.util.multiplyTransformMatrices(n,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,y);var f=t.util.qrDecompose(g);u.flipX=!1,u.flipY=!1,u.set("scaleX",f.scaleX),u.set("scaleY",f.scaleY),u.angle=f.angle,u.skewX=f.skewX,u.skewY=0,u.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),r.clipPath=u}else delete r.clipPath},o.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(o){var r=o.fabric||(o.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=c;function c(u,s){this.x=u,this.y=s}c.prototype={type:"point",constructor:c,add:function(u){return new c(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new c(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new c(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new c(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new c(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new c(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,s){return typeof s>"u"&&(s=.5),s=Math.max(Math.min(1,s),0),new c(this.x+(u.x-this.x)*s,this.y+(u.y-this.y)*s)},distanceFrom:function(u){var s=this.x-u.x,l=this.y-u.y;return Math.sqrt(s*s+l*l)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new c(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new c(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,s){return this.x=u,this.y=s,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var s=this.x,l=this.y;this.x=u.x,this.y=u.y,u.x=s,u.y=l},clone:function(){return new c(this.x,this.y)}}}(e),function(o){var r=o.fabric||(o.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function c(u){this.status=u,this.points=[]}r.Intersection=c,r.Intersection.prototype={constructor:c,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},r.Intersection.intersectLineLine=function(u,s,l,n){var h,g=(n.x-l.x)*(u.y-l.y)-(n.y-l.y)*(u.x-l.x),f=(s.x-u.x)*(u.y-l.y)-(s.y-u.y)*(u.x-l.x),m=(n.y-l.y)*(s.x-u.x)-(n.x-l.x)*(s.y-u.y);if(m!==0){var y=g/m,x=f/m;0<=y&&y<=1&&0<=x&&x<=1?(h=new c("Intersection"),h.appendPoint(new r.Point(u.x+y*(s.x-u.x),u.y+y*(s.y-u.y)))):h=new c}else g===0||f===0?h=new c("Coincident"):h=new c("Parallel");return h},r.Intersection.intersectLinePolygon=function(u,s,l){var n=new c,h=l.length,g,f,m,y;for(y=0;y<h;y++)g=l[y],f=l[(y+1)%h],m=c.intersectLineLine(u,s,g,f),n.appendPoints(m.points);return n.points.length>0&&(n.status="Intersection"),n},r.Intersection.intersectPolygonPolygon=function(u,s){var l=new c,n=u.length,h;for(h=0;h<n;h++){var g=u[h],f=u[(h+1)%n],m=c.intersectLinePolygon(g,f,s);l.appendPoints(m.points)}return l.points.length>0&&(l.status="Intersection"),l},r.Intersection.intersectPolygonRectangle=function(u,s,l){var n=s.min(l),h=s.max(l),g=new r.Point(h.x,n.y),f=new r.Point(n.x,h.y),m=c.intersectLinePolygon(n,g,u),y=c.intersectLinePolygon(g,h,u),x=c.intersectLinePolygon(h,f,u),_=c.intersectLinePolygon(f,n,u),A=new c;return A.appendPoints(m.points),A.appendPoints(y.points),A.appendPoints(x.points),A.appendPoints(_.points),A.points.length>0&&(A.status="Intersection"),A}}(e),function(o){var r=o.fabric||(o.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function c(s){s?this._tryParsingColor(s):this.setSource([0,0,0,1])}r.Color=c,r.Color.prototype={_tryParsingColor:function(s){var l;s in c.colorNameMap&&(s=c.colorNameMap[s]),s==="transparent"&&(l=[255,255,255,0]),l||(l=c.sourceFromHex(s)),l||(l=c.sourceFromRgb(s)),l||(l=c.sourceFromHsl(s)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(s,l,n){s/=255,l/=255,n/=255;var h,g,f,m=r.util.array.max([s,l,n]),y=r.util.array.min([s,l,n]);if(f=(m+y)/2,m===y)h=g=0;else{var x=m-y;switch(g=f>.5?x/(2-m-y):x/(m+y),m){case s:h=(l-n)/x+(l<n?6:0);break;case l:h=(n-s)/x+2;break;case n:h=(s-l)/x+4;break}h/=6}return[Math.round(h*360),Math.round(g*100),Math.round(f*100)]},getSource:function(){return this._source},setSource:function(s){this._source=s},toRgb:function(){var s=this.getSource();return"rgb("+s[0]+","+s[1]+","+s[2]+")"},toRgba:function(){var s=this.getSource();return"rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")"},toHsl:function(){var s=this.getSource(),l=this._rgbToHsl(s[0],s[1],s[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var s=this.getSource(),l=this._rgbToHsl(s[0],s[1],s[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+s[3]+")"},toHex:function(){var s=this.getSource(),l,n,h;return l=s[0].toString(16),l=l.length===1?"0"+l:l,n=s[1].toString(16),n=n.length===1?"0"+n:n,h=s[2].toString(16),h=h.length===1?"0"+h:h,l.toUpperCase()+n.toUpperCase()+h.toUpperCase()},toHexa:function(){var s=this.getSource(),l;return l=Math.round(s[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(s){var l=this.getSource();return l[3]=s,this.setSource(l),this},toGrayscale:function(){var s=this.getSource(),l=parseInt((s[0]*.3+s[1]*.59+s[2]*.11).toFixed(0),10),n=s[3];return this.setSource([l,l,l,n]),this},toBlackWhite:function(s){var l=this.getSource(),n=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),h=l[3];return s=s||127,n=Number(n)<Number(s)?0:255,this.setSource([n,n,n,h]),this},overlayWith:function(s){s instanceof c||(s=new c(s));var l=[],n=this.getAlpha(),h=.5,g=this.getSource(),f=s.getSource(),m;for(m=0;m<3;m++)l.push(Math.round(g[m]*(1-h)+f[m]*h));return l[3]=n,this.setSource(l),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(s,l,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(l-s)*6*n:n<1/2?l:n<2/3?s+(l-s)*(2/3-n)*6:s}r.Color.fromRgb=function(s){return c.fromSource(c.sourceFromRgb(s))},r.Color.sourceFromRgb=function(s){var l=s.match(c.reRGBa);if(l){var n=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),h=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),g=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(n,10),parseInt(h,10),parseInt(g,10),l[4]?parseFloat(l[4]):1]}},r.Color.fromRgba=c.fromRgb,r.Color.fromHsl=function(s){return c.fromSource(c.sourceFromHsl(s))},r.Color.sourceFromHsl=function(s){var l=s.match(c.reHSLa);if(l){var n=(parseFloat(l[1])%360+360)%360/360,h=parseFloat(l[2])/(/%$/.test(l[2])?100:1),g=parseFloat(l[3])/(/%$/.test(l[3])?100:1),f,m,y;if(h===0)f=m=y=g;else{var x=g<=.5?g*(h+1):g+h-g*h,_=g*2-x;f=u(_,x,n+1/3),m=u(_,x,n),y=u(_,x,n-1/3)}return[Math.round(f*255),Math.round(m*255),Math.round(y*255),l[4]?parseFloat(l[4]):1]}},r.Color.fromHsla=c.fromHsl,r.Color.fromHex=function(s){return c.fromSource(c.sourceFromHex(s))},r.Color.sourceFromHex=function(s){if(s.match(c.reHex)){var l=s.slice(s.indexOf("#")+1),n=l.length===3||l.length===4,h=l.length===8||l.length===4,g=n?l.charAt(0)+l.charAt(0):l.substring(0,2),f=n?l.charAt(1)+l.charAt(1):l.substring(2,4),m=n?l.charAt(2)+l.charAt(2):l.substring(4,6),y=h?n?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(g,16),parseInt(f,16),parseInt(m,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},r.Color.fromSource=function(s){var l=new c;return l.setSource(s),l}}(e),function(o){var r=o.fabric||(o.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],s={},l="left",n="top",h="right",g="bottom",f="center",m={top:g,bottom:n,left:h,right:l,center:f},y=r.util.radiansToDegrees,x=Math.sign||function(ot){return(ot>0)-(ot<0)||+ot};function _(ot,st){var it=ot.angle+y(Math.atan2(st.y,st.x))+360;return Math.round(it%360/45)}function A(ot,st){var it=st.transform.target,W=it.canvas,vt=r.util.object.clone(st);vt.target=it,W&&W.fire("object:"+ot,vt),it.fire(ot,st)}function M(ot,st){var it=st.canvas,W=it.uniScaleKey,vt=ot[W];return it.uniformScaling&&!vt||!it.uniformScaling&&vt}function T(ot){return ot.originX===f&&ot.originY===f}function O(ot,st,it){var W=ot.lockScalingX,vt=ot.lockScalingY;return!!(W&&vt||!st&&(W||vt)&&it||W&&st==="x"||vt&&st==="y")}function B(ot,st,it){var W="not-allowed",vt=M(ot,it),yt="";if(st.x!==0&&st.y===0?yt="x":st.x===0&&st.y!==0&&(yt="y"),O(it,yt,vt))return W;var bt=_(it,st);return c[bt]+"-resize"}function X(ot,st,it){var W="not-allowed";if(st.x!==0&&it.lockSkewingY||st.y!==0&&it.lockSkewingX)return W;var vt=_(it,st)%4;return u[vt]+"-resize"}function F(ot,st,it){return ot[it.canvas.altActionKey]?s.skewCursorStyleHandler(ot,st,it):s.scaleCursorStyleHandler(ot,st,it)}function I(ot,st,it){var W=ot[it.canvas.altActionKey];if(st.x===0)return W?"skewX":"scaleY";if(st.y===0)return W?"skewY":"scaleX"}function K(ot,st,it){return it.lockRotation?"not-allowed":st.cursorStyle}function G(ot,st,it,W){return{e:ot,transform:st,pointer:{x:it,y:W}}}function rt(ot){return function(st,it,W,vt){var yt=it.target,bt=yt.getCenterPoint(),Lt=yt.translateToOriginPoint(bt,it.originX,it.originY),At=ot(st,it,W,vt);return yt.setPositionByOrigin(Lt,it.originX,it.originY),At}}function at(ot,st){return function(it,W,vt,yt){var bt=st(it,W,vt,yt);return bt&&A(ot,G(it,W,vt,yt)),bt}}function gt(ot,st,it,W,vt){var yt=ot.target,bt=yt.controls[ot.corner],Lt=yt.canvas.getZoom(),At=yt.padding/Lt,ft=yt.toLocalPoint(new r.Point(W,vt),st,it);return ft.x>=At&&(ft.x-=At),ft.x<=-At&&(ft.x+=At),ft.y>=At&&(ft.y-=At),ft.y<=At&&(ft.y+=At),ft.x-=bt.offsetX,ft.y-=bt.offsetY,ft}function nt(ot){return ot.flipX!==ot.flipY}function E(ot,st,it,W,vt){if(ot[st]!==0){var yt=ot._getTransformedDimensions()[W],bt=vt/yt*ot[it];ot.set(it,bt)}}function Y(ot,st,it,W){var vt=st.target,yt=vt._getTransformedDimensions(0,vt.skewY),bt=gt(st,st.originX,st.originY,it,W),Lt=Math.abs(bt.x*2)-yt.x,At=vt.skewX,ft;Lt<2?ft=0:(ft=y(Math.atan2(Lt/vt.scaleX,yt.y/vt.scaleY)),st.originX===l&&st.originY===g&&(ft=-ft),st.originX===h&&st.originY===n&&(ft=-ft),nt(vt)&&(ft=-ft));var Mt=At!==ft;if(Mt){var jt=vt._getTransformedDimensions().y;vt.set("skewX",ft),E(vt,"skewY","scaleY","y",jt)}return Mt}function J(ot,st,it,W){var vt=st.target,yt=vt._getTransformedDimensions(vt.skewX,0),bt=gt(st,st.originX,st.originY,it,W),Lt=Math.abs(bt.y*2)-yt.y,At=vt.skewY,ft;Lt<2?ft=0:(ft=y(Math.atan2(Lt/vt.scaleY,yt.x/vt.scaleX)),st.originX===l&&st.originY===g&&(ft=-ft),st.originX===h&&st.originY===n&&(ft=-ft),nt(vt)&&(ft=-ft));var Mt=At!==ft;if(Mt){var jt=vt._getTransformedDimensions().x;vt.set("skewY",ft),E(vt,"skewX","scaleX","x",jt)}return Mt}function k(ot,st,it,W){var vt=st.target,yt=vt.skewX,bt,Lt=st.originY;if(vt.lockSkewingX)return!1;if(yt===0){var At=gt(st,f,f,it,W);At.x>0?bt=l:bt=h}else yt>0&&(bt=Lt===n?l:h),yt<0&&(bt=Lt===n?h:l),nt(vt)&&(bt=bt===l?h:l);st.originX=bt;var ft=at("skewing",rt(Y));return ft(ot,st,it,W)}function R(ot,st,it,W){var vt=st.target,yt=vt.skewY,bt,Lt=st.originX;if(vt.lockSkewingY)return!1;if(yt===0){var At=gt(st,f,f,it,W);At.y>0?bt=n:bt=g}else yt>0&&(bt=Lt===l?n:g),yt<0&&(bt=Lt===l?g:n),nt(vt)&&(bt=bt===n?g:n);st.originY=bt;var ft=at("skewing",rt(J));return ft(ot,st,it,W)}function N(ot,st,it,W){var vt=st,yt=vt.target,bt=yt.translateToOriginPoint(yt.getCenterPoint(),vt.originX,vt.originY);if(yt.lockRotation)return!1;var Lt=Math.atan2(vt.ey-bt.y,vt.ex-bt.x),At=Math.atan2(W-bt.y,it-bt.x),ft=y(At-Lt+vt.theta),Mt=!0;if(yt.snapAngle>0){var jt=yt.snapAngle,Rt=yt.snapThreshold||jt,Yt=Math.ceil(ft/jt)*jt,Vt=Math.floor(ft/jt)*jt;Math.abs(ft-Vt)<Rt?ft=Vt:Math.abs(ft-Yt)<Rt&&(ft=Yt)}return ft<0&&(ft=360+ft),ft%=360,Mt=yt.angle!==ft,yt.angle=ft,Mt}function P(ot,st,it,W,vt){vt=vt||{};var yt=st.target,bt=yt.lockScalingX,Lt=yt.lockScalingY,At=vt.by,ft,Mt,jt,Rt,Yt=M(ot,yt),Vt=O(yt,At,Yt),ie,Wt,te=st.gestureScale;if(Vt)return!1;if(te)Mt=st.scaleX*te,jt=st.scaleY*te;else{if(ft=gt(st,st.originX,st.originY,it,W),ie=At!=="y"?x(ft.x):1,Wt=At!=="x"?x(ft.y):1,st.signX||(st.signX=ie),st.signY||(st.signY=Wt),yt.lockScalingFlip&&(st.signX!==ie||st.signY!==Wt))return!1;if(Rt=yt._getTransformedDimensions(),Yt&&!At){var Bt=Math.abs(ft.x)+Math.abs(ft.y),Te=st.original,pe=Math.abs(Rt.x*Te.scaleX/yt.scaleX)+Math.abs(Rt.y*Te.scaleY/yt.scaleY),Pi=Bt/pe;Mt=Te.scaleX*Pi,jt=Te.scaleY*Pi}else Mt=Math.abs(ft.x*yt.scaleX/Rt.x),jt=Math.abs(ft.y*yt.scaleY/Rt.y);T(st)&&(Mt*=2,jt*=2),st.signX!==ie&&At!=="y"&&(st.originX=m[st.originX],Mt*=-1,st.signX=ie),st.signY!==Wt&&At!=="x"&&(st.originY=m[st.originY],jt*=-1,st.signY=Wt)}var _e=yt.scaleX,Ee=yt.scaleY;return At?(At==="x"&&yt.set("scaleX",Mt),At==="y"&&yt.set("scaleY",jt)):(!bt&&yt.set("scaleX",Mt),!Lt&&yt.set("scaleY",jt)),_e!==yt.scaleX||Ee!==yt.scaleY}function U(ot,st,it,W){return P(ot,st,it,W)}function $(ot,st,it,W){return P(ot,st,it,W,{by:"x"})}function tt(ot,st,it,W){return P(ot,st,it,W,{by:"y"})}function Q(ot,st,it,W){return ot[st.target.canvas.altActionKey]?s.skewHandlerX(ot,st,it,W):s.scalingY(ot,st,it,W)}function ut(ot,st,it,W){return ot[st.target.canvas.altActionKey]?s.skewHandlerY(ot,st,it,W):s.scalingX(ot,st,it,W)}function dt(ot,st,it,W){var vt=st.target,yt=gt(st,st.originX,st.originY,it,W),bt=vt.strokeWidth/(vt.strokeUniform?vt.scaleX:1),Lt=T(st)?2:1,At=vt.width,ft=Math.abs(yt.x*Lt/vt.scaleX)-bt;return vt.set("width",Math.max(ft,0)),At!==ft}function St(ot,st,it,W){var vt=st.target,yt=it-st.offsetX,bt=W-st.offsetY,Lt=!vt.get("lockMovementX")&&vt.left!==yt,At=!vt.get("lockMovementY")&&vt.top!==bt;return Lt&&vt.set("left",yt),At&&vt.set("top",bt),(Lt||At)&&A("moving",G(ot,st,it,W)),Lt||At}s.scaleCursorStyleHandler=B,s.skewCursorStyleHandler=X,s.scaleSkewCursorStyleHandler=F,s.rotationWithSnapping=at("rotating",rt(N)),s.scalingEqually=at("scaling",rt(U)),s.scalingX=at("scaling",rt($)),s.scalingY=at("scaling",rt(tt)),s.scalingYOrSkewingX=Q,s.scalingXOrSkewingY=ut,s.changeWidth=at("resizing",rt(dt)),s.skewHandlerX=k,s.skewHandlerY=R,s.dragHandler=St,s.scaleOrSkewActionName=I,s.rotationStyleHandler=K,s.fireEvent=A,s.wrapWithFixedAnchor=rt,s.wrapWithFireEvent=at,s.getLocalPoint=gt,r.controlsUtils=s}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.degreesToRadians,u=r.controlsUtils;function s(n,h,g,f,m){f=f||{};var y=this.sizeX||f.cornerSize||m.cornerSize,x=this.sizeY||f.cornerSize||m.cornerSize,_=typeof f.transparentCorners<"u"?f.transparentCorners:m.transparentCorners,A=_?"stroke":"fill",M=!_&&(f.cornerStrokeColor||m.cornerStrokeColor),T=h,O=g,B;n.save(),n.fillStyle=f.cornerColor||m.cornerColor,n.strokeStyle=f.cornerStrokeColor||m.cornerStrokeColor,y>x?(B=y,n.scale(1,x/y),O=g*y/x):x>y?(B=x,n.scale(y/x,1),T=h*x/y):B=y,n.lineWidth=1,n.beginPath(),n.arc(T,O,B/2,0,2*Math.PI,!1),n[A](),M&&n.stroke(),n.restore()}function l(n,h,g,f,m){f=f||{};var y=this.sizeX||f.cornerSize||m.cornerSize,x=this.sizeY||f.cornerSize||m.cornerSize,_=typeof f.transparentCorners<"u"?f.transparentCorners:m.transparentCorners,A=_?"stroke":"fill",M=!_&&(f.cornerStrokeColor||m.cornerStrokeColor),T=y/2,O=x/2;n.save(),n.fillStyle=f.cornerColor||m.cornerColor,n.strokeStyle=f.cornerStrokeColor||m.cornerStrokeColor,n.lineWidth=1,n.translate(h,g),n.rotate(c(m.angle)),n[A+"Rect"](-T,-O,y,x),M&&n.strokeRect(-T,-O,y,x),n.restore()}u.renderCircleControl=s,u.renderSquareControl=l}(e),function(o){var r=o.fabric||(o.fabric={});function c(u){for(var s in u)this[s]=u[s]}r.Control=c,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,s){return s.cursorStyle},getActionName:function(u,s){return s.actionName},getVisibility:function(u,s){var l=u._controlsVisibility;return l&&typeof l[s]<"u"?l[s]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,s){var l=r.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},s);return l},calcCornerCoords:function(u,s,l,n,h){var g,f,m,y,x=h?this.touchSizeX:this.sizeX,_=h?this.touchSizeY:this.sizeY;if(x&&_&&x!==_){var A=Math.atan2(_,x),M=Math.sqrt(x*x+_*_)/2,T=A-r.util.degreesToRadians(u),O=Math.PI/2-A-r.util.degreesToRadians(u);g=M*r.util.cos(T),f=M*r.util.sin(T),m=M*r.util.cos(O),y=M*r.util.sin(O)}else{var B=x&&_?x:s;M=B*.7071067812;var T=r.util.degreesToRadians(45-u);g=m=M*r.util.cos(T),f=y=M*r.util.sin(T)}return{tl:{x:l-y,y:n-m},tr:{x:l+g,y:n-f},bl:{x:l-g,y:n+f},br:{x:l+y,y:n+m}}},render:function(u,s,l,n,h){switch(n=n||{},n.cornerStyle||h.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,u,s,l,n,h);break;default:r.controlsUtils.renderSquareControl.call(this,u,s,l,n,h)}}}}(e),function(){function o(l,n){var h=l.getAttribute("style"),g=l.getAttribute("offset")||0,f,m,y,x;if(g=parseFloat(g)/(/%$/.test(g)?100:1),g=g<0?0:g>1?1:g,h){var _=h.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),x=_.length;x--;){var A=_[x].split(/\s*:\s*/),M=A[0].trim(),T=A[1].trim();M==="stop-color"?f=T:M==="stop-opacity"&&(y=T)}}return f||(f=l.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=l.getAttribute("stop-opacity")),f=new t.Color(f),m=f.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=m*n,{offset:g,color:f.toRgb(),opacity:y}}function r(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function c(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var u=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var n,h=this;Object.keys(l).forEach(function(g){h[g]=l[g]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,n={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(n.r1=l.coords.r1||0,n.r2=l.coords.r2||0),this.coords=n,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var n in l){var h=new t.Color(l[n]);this.colorStops.push({offset:parseFloat(n),color:h.toRgb(),opacity:h.getAlpha()})}return this},toObject:function(l){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,n,l),n},toSVG:function(l,m){var h=u(this.coords,!0),g,f,m=m||{},y,x,_=u(this.colorStops,!0),A=h.r1>h.r2,M=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),T=-this.offsetX,O=-this.offsetY,B=!!m.additionalTransform,X=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_.sort(function(rt,at){return rt.offset-at.offset}),X==="objectBoundingBox"?(T/=l.width,O/=l.height):(T+=l.width/2,O+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(T-=l.pathOffset.x,O-=l.pathOffset.y),M[4]-=T,M[5]-=O,x='id="SVGID_'+this.id+'" gradientUnits="'+X+'"',x+=' gradientTransform="'+(B?m.additionalTransform+" ":"")+t.util.matrixToSVG(M)+'" ',this.type==="linear"?y=["<linearGradient ",x,' x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",x,' cx="',A?h.x1:h.x2,'" cy="',A?h.y1:h.y2,'" r="',A?h.r1:h.r2,'" fx="',A?h.x2:h.x1,'" fy="',A?h.y2:h.y1,`">
`]),this.type==="radial"){if(A)for(_=_.concat(),_.reverse(),g=0,f=_.length;g<f;g++)_[g].offset=1-_[g].offset;var F=Math.min(h.r1,h.r2);if(F>0){var I=Math.max(h.r1,h.r2),K=F/I;for(g=0,f=_.length;g<f;g++)_[g].offset+=K*(1-_[g].offset)}}for(g=0,f=_.length;g<f;g++){var G=_[g];y.push("<stop ",'offset="',G.offset*100+"%",'" style="stop-color:',G.color,typeof G.opacity<"u"?";stop-opacity: "+G.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(l){var n,h=t.util.object.clone(this.coords),g,f;if(this.type){for(this.type==="linear"?n=l.createLinearGradient(h.x1,h.y1,h.x2,h.y2):this.type==="radial"&&(n=l.createRadialGradient(h.x1,h.y1,h.r1,h.x2,h.y2,h.r2)),g=0,f=this.colorStops.length;g<f;g++){var m=this.colorStops[g].color,y=this.colorStops[g].opacity,x=this.colorStops[g].offset;typeof y<"u"&&(m=new t.Color(m).setAlpha(y).toRgba()),n.addColorStop(x,m)}return n}}}),t.util.object.extend(t.Gradient,{fromElement:function(l,n,h,g){var f=parseFloat(h)/(/%$/.test(h)?100:1);f=f<0?0:f>1?1:f,isNaN(f)&&(f=1);var m=l.getElementsByTagName("stop"),y,x=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_=l.getAttribute("gradientTransform")||"",A=[],M,T,O=0,B=0,X;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(y="linear",M=r(l)):(y="radial",M=c(l)),T=m.length;T--;)A.push(o(m[T],f));X=t.parseTransformAttribute(_),s(n,M,g,x),x==="pixels"&&(O=-n.left,B=-n.top);var F=new t.Gradient({id:l.getAttribute("id"),type:y,coords:M,colorStops:A,gradientUnits:x,gradientTransform:X,offsetX:O,offsetY:B});return F}});function s(l,n,h,g){var f,m;Object.keys(n).forEach(function(y){f=n[y],f==="Infinity"?m=1:f==="-Infinity"?m=0:(m=parseFloat(n[y],10),typeof f=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(f)&&(m*=.01,g==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(m*=h.viewBoxWidth||h.width),(y==="y1"||y==="y2")&&(m*=h.viewBoxHeight||h.height)))),n[y]=m})}}(),function(){var o=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,c){if(r||(r={}),this.id=t.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){c&&c(this);return}else{var u=this;this.source=t.util.createImage(),t.util.loadImage(r.source,function(s,l){u.source=s,c&&c(u,l)},null,this.crossOrigin)}},toObject:function(r){var c=t.Object.NUM_FRACTION_DIGITS,u,s;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),s={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:o(this.offsetX,c),offsetY:o(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,s,r),s},toSVG:function(r){var c=typeof this.source=="function"?this.source():this.source,u=c.width/r.width,s=c.height/r.height,l=this.offsetX/r.width,n=this.offsetY/r.height,h="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(s=1,n&&(s+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,l&&(u+=Math.abs(l))),c.src?h=c.src:c.toDataURL&&(h=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+n+'" width="'+u+'" height="'+s+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+h+`"></image>
</pattern>
`},setOptions:function(r){for(var c in r)this[c]=r[c]},toLive:function(r){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":r.createPattern(c,this.repeat)}})}(),function(o){var r=o.fabric||(o.fabric={}),c=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var s in u)this[s]=u[s];this.id=r.Object.__uid++},_parseShadow:function(u){var s=u.trim(),l=r.Shadow.reOffsetsAndBlur.exec(s)||[],n=s.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var s=40,l=40,n=r.Object.NUM_FRACTION_DIGITS,h=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-u.angle)),g=20,f=new r.Color(this.color);return u.width&&u.height&&(s=c((Math.abs(h.x)+this.blur)/u.width,n)*100+g,l=c((Math.abs(h.y)+this.blur)/u.height,n)*100+g),u.flipX&&(h.x*=-1),u.flipY&&(h.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+s+'%" width="'+(100+2*s)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+c(h.x,n)+'" dy="'+c(h.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+f.toRgb()+'" flood-opacity="'+f.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},s=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==s[l]&&(u[l]=this[l])},this),u}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var o=t.util.object.extend,r=t.util.getElementOffset,c=t.util.removeFromArray,u=t.util.toFixed,s=t.util.transformPoint,l=t.util.invertTransform,n=t.util.getNodeCanvas,h=t.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(f,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(f,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(f,m){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(f),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,y),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,y),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,y),m.overlayColor&&this.setOverlayColor(m.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var f=t.devicePixelRatio;this.__initRetinaScaling(f,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(f,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(f,m,y){m.setAttribute("width",this.width*f),m.setAttribute("height",this.height*f),y.scale(f,f)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(f,m,y){return this.__setBgOverlayImage("overlayImage",f,m,y)},setBackgroundImage:function(f,m,y){return this.__setBgOverlayImage("backgroundImage",f,m,y)},setOverlayColor:function(f,m){return this.__setBgOverlayColor("overlayColor",f,m)},setBackgroundColor:function(f,m){return this.__setBgOverlayColor("backgroundColor",f,m)},__setBgOverlayImage:function(f,m,y,x){return typeof m=="string"?t.util.loadImage(m,function(_,A){if(_){var M=new t.Image(_,x);this[f]=M,M.canvas=this}y&&y(_,A)},this,x&&x.crossOrigin):(x&&m.setOptions(x),this[f]=m,m&&(m.canvas=this),y&&y(m,!1)),this},__setBgOverlayColor:function(f,m,y){return this[f]=m,this._initGradient(m,f),this._initPattern(m,f,y),this},_createCanvasElement:function(){var f=h();if(!f||(f.style||(f.style={}),typeof f.getContext>"u"))throw g;return f},_initOptions:function(f){var m=this.lowerCanvasEl;this._setOptions(f),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(f){f&&f.getContext?this.lowerCanvasEl=f:this.lowerCanvasEl=t.util.getById(f)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(f,m){return this.setDimensions({width:f},m)},setHeight:function(f,m){return this.setDimensions({height:f},m)},setDimensions:function(f,m){var y;m=m||{};for(var x in f)y=f[x],m.cssOnly||(this._setBackstoreDimension(x,f[x]),y+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(x,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(f,m){return this.lowerCanvasEl[f]=m,this.upperCanvasEl&&(this.upperCanvasEl[f]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[f]=m),this[f]=m,this},_setCssDimension:function(f,m){return this.lowerCanvasEl.style[f]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[f]=m),this.wrapperEl&&(this.wrapperEl.style[f]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(f){var m=this._activeObject,y=this.backgroundImage,x=this.overlayImage,_,A,M;for(this.viewportTransform=f,A=0,M=this._objects.length;A<M;A++)_=this._objects[A],_.group||_.setCoords(!0);return m&&m.setCoords(),y&&y.setCoords(!0),x&&x.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(f,m){var y=f,x=this.viewportTransform.slice(0);f=s(f,l(this.viewportTransform)),x[0]=m,x[3]=m;var _=s(f,x);return x[4]+=y.x-_.x,x[5]+=y.y-_.y,this.setViewportTransform(x)},setZoom:function(f){return this.zoomToPoint(new t.Point(0,0),f),this},absolutePan:function(f){var m=this.viewportTransform.slice(0);return m[4]=-f.x,m[5]=-f.y,this.setViewportTransform(m)},relativePan:function(f){return this.absolutePan(new t.Point(-f.x-this.viewportTransform[4],-f.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(f){this.stateful&&f.setupState(),f._set("canvas",this),f.setCoords(),this.fire("object:added",{target:f}),f.fire("added")},_onObjectRemoved:function(f){this.fire("object:removed",{target:f}),f.fire("removed"),delete f.canvas},clearContext:function(f){return f.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var f=this.contextContainer;return this.renderCanvas(f,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var f={},m=this.width,y=this.height,x=l(this.viewportTransform);return f.tl=s({x:0,y:0},x),f.br=s({x:m,y},x),f.tr=new t.Point(f.br.x,f.tl.y),f.bl=new t.Point(f.tl.x,f.br.y),this.vptCoords=f,f},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(f,m){var y=this.viewportTransform,x=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(f),t.util.setImageSmoothing(f,this.imageSmoothingEnabled),this.fire("before:render",{ctx:f}),this._renderBackground(f),f.save(),f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(f,m),f.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),x&&(x.canvas=this,x.shouldCache(),x._transformDone=!0,x.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(f)),this._renderOverlay(f),this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),this.fire("after:render",{ctx:f})},drawClipPathOnCanvas:function(f){var m=this.viewportTransform,y=this.clipPath;f.save(),f.transform(m[0],m[1],m[2],m[3],m[4],m[5]),f.globalCompositeOperation="destination-in",y.transform(f),f.scale(1/y.zoomX,1/y.zoomY),f.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),f.restore()},_renderObjects:function(f,m){var y,x;for(y=0,x=m.length;y<x;++y)m[y]&&m[y].render(f)},_renderBackgroundOrOverlay:function(f,m){var y=this[m+"Color"],x=this[m+"Image"],_=this.viewportTransform,A=this[m+"Vpt"];if(!(!y&&!x)){if(y){f.save(),f.beginPath(),f.moveTo(0,0),f.lineTo(this.width,0),f.lineTo(this.width,this.height),f.lineTo(0,this.height),f.closePath(),f.fillStyle=y.toLive?y.toLive(f,this):y,A&&f.transform(_[0],_[1],_[2],_[3],_[4],_[5]),f.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var M=y.gradientTransform||y.patternTransform;M&&f.transform(M[0],M[1],M[2],M[3],M[4],M[5]),f.fill(),f.restore()}if(x){f.save();var T=this.skipOffscreen;this.skipOffscreen=A,A&&f.transform(_[0],_[1],_[2],_[3],_[4],_[5]),x.render(f),this.skipOffscreen=T,f.restore()}}},_renderBackground:function(f){this._renderBackgroundOrOverlay(f,"background")},_renderOverlay:function(f){this._renderBackgroundOrOverlay(f,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(f){return this._centerObject(f,new t.Point(this.getCenterPoint().x,f.getCenterPoint().y))},centerObjectV:function(f){return this._centerObject(f,new t.Point(f.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(f){var m=this.getCenterPoint();return this._centerObject(f,m)},viewportCenterObject:function(f){var m=this.getVpCenter();return this._centerObject(f,m)},viewportCenterObjectH:function(f){var m=this.getVpCenter();return this._centerObject(f,new t.Point(m.x,f.getCenterPoint().y)),this},viewportCenterObjectV:function(f){var m=this.getVpCenter();return this._centerObject(f,new t.Point(f.getCenterPoint().x,m.y))},getVpCenter:function(){var f=this.getCenterPoint(),m=l(this.viewportTransform);return s(f,m)},_centerObject:function(f,m){return f.setPositionByOrigin(m,"center","center"),f.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(f){return this.toDatalessObject(f)},toObject:function(f){return this._toObjectMethod("toObject",f)},toDatalessObject:function(f){return this._toObjectMethod("toDatalessObject",f)},_toObjectMethod:function(f,m){var y=this.clipPath,x={version:t.version,objects:this._toObjects(f,m)};return y&&!y.excludeFromExport&&(x.clipPath=this._toObject(this.clipPath,f,m)),o(x,this.__serializeBgOverlay(f,m)),t.util.populateWithProperties(this,x,m),x},_toObjects:function(f,m){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,f,m)},this)},_toObject:function(f,m,y){var x;this.includeDefaultValues||(x=f.includeDefaultValues,f.includeDefaultValues=!1);var _=f[m](y);return this.includeDefaultValues||(f.includeDefaultValues=x),_},__serializeBgOverlay:function(f,m){var y={},x=this.backgroundImage,_=this.overlayImage,A=this.backgroundColor,M=this.overlayColor;return A&&A.toObject?A.excludeFromExport||(y.background=A.toObject(m)):A&&(y.background=A),M&&M.toObject?M.excludeFromExport||(y.overlay=M.toObject(m)):M&&(y.overlay=M),x&&!x.excludeFromExport&&(y.backgroundImage=this._toObject(x,f,m)),_&&!_.excludeFromExport&&(y.overlayImage=this._toObject(_,f,m)),y},svgViewportTransformation:!0,toSVG:function(f,m){f||(f={}),f.reviver=m;var y=[];return this._setSVGPreamble(y,f),this._setSVGHeader(y,f),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",m),this._setSVGObjects(y,m),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",m),y.push("</svg>"),y.join("")},_setSVGPreamble:function(f,m){m.suppressPreamble||f.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(f,m){var y=m.width||this.width,x=m.height||this.height,_,A='viewBox="0 0 '+this.width+" "+this.height+'" ',M=t.Object.NUM_FRACTION_DIGITS;m.viewBox?A='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,A='viewBox="'+u(-_[4]/_[0],M)+" "+u(-_[5]/_[3],M)+" "+u(this.width/_[0],M)+" "+u(this.height/_[3],M)+'" '),f.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',x,'" ',A,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),`</defs>
`)},createSVGClipPathMarkup:function(f){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+m.clipPathId+`" >
`+this.clipPath.toClipPathSVG(f.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var f=this,m=["background","overlay"].map(function(y){var x=f[y+"Color"];if(x&&x.toLive){var _=f[y+"Vpt"],A=f.viewportTransform,M={width:f.width/(_?A[0]:1),height:f.height/(_?A[3]:1)};return x.toSVG(M,{additionalTransform:_?t.util.matrixToSVG(A):""})}});return m.join("")},createSVGFontFacesMarkup:function(){var f="",m={},y,x,_,A,M,T,O,B,X,F=t.fontPaths,I=[];for(this._objects.forEach(function G(rt){I.push(rt),rt._objects&&rt._objects.forEach(G)}),B=0,X=I.length;B<X;B++)if(y=I[B],x=y.fontFamily,!(y.type.indexOf("text")===-1||m[x]||!F[x])&&(m[x]=!0,!!y.styles)){_=y.styles;for(M in _){A=_[M];for(O in A)T=A[O],x=T.fontFamily,!m[x]&&F[x]&&(m[x]=!0)}}for(var K in m)f+=[`		@font-face {
`,"			font-family: '",K,`';
`,"			src: url('",F[K],`');
`,`		}
`].join("");return f&&(f=['	<style type="text/css">',`<![CDATA[
`,f,"]]>",`</style>
`].join("")),f},_setSVGObjects:function(f,m){var y,x,_,A=this._objects;for(x=0,_=A.length;x<_;x++)y=A[x],!y.excludeFromExport&&this._setSVGObject(f,y,m)},_setSVGObject:function(f,m,y){f.push(m.toSVG(y))},_setSVGBgOverlayImage:function(f,m,y){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&f.push(this[m].toSVG(y))},_setSVGBgOverlayColor:function(f,m){var y=this[m+"Color"],x=this.viewportTransform,_=this.width,A=this.height;if(y)if(y.toLive){var M=y.repeat,T=t.util.invertTransform(x),O=this[m+"Vpt"],B=O?t.util.matrixToSVG(T):"";f.push('<rect transform="'+B+" translate(",_/2,",",A/2,')"',' x="',y.offsetX-_/2,'" y="',y.offsetY-A/2,'" ','width="',M==="repeat-y"||M==="no-repeat"?y.source.width:_,'" height="',M==="repeat-x"||M==="no-repeat"?y.source.height:A,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else f.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(f){if(!f)return this;var m=this._activeObject,y,x,_;if(f===m&&f.type==="activeSelection")for(_=m._objects,y=_.length;y--;)x=_[y],c(this._objects,x),this._objects.unshift(x);else c(this._objects,f),this._objects.unshift(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(f){if(!f)return this;var m=this._activeObject,y,x,_;if(f===m&&f.type==="activeSelection")for(_=m._objects,y=0;y<_.length;y++)x=_[y],c(this._objects,x),this._objects.push(x);else c(this._objects,f),this._objects.push(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(f,m){if(!f)return this;var y=this._activeObject,x,_,A,M,T,O=0;if(f===y&&f.type==="activeSelection")for(T=y._objects,x=0;x<T.length;x++)_=T[x],A=this._objects.indexOf(_),A>0+O&&(M=A-1,c(this._objects,_),this._objects.splice(M,0,_)),O++;else A=this._objects.indexOf(f),A!==0&&(M=this._findNewLowerIndex(f,A,m),c(this._objects,f),this._objects.splice(M,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(f,m,y){var x,_;if(y)for(x=m,_=m-1;_>=0;--_){var A=f.intersectsWithObject(this._objects[_])||f.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(f);if(A){x=_;break}}else x=m-1;return x},bringForward:function(f,m){if(!f)return this;var y=this._activeObject,x,_,A,M,T,O=0;if(f===y&&f.type==="activeSelection")for(T=y._objects,x=T.length;x--;)_=T[x],A=this._objects.indexOf(_),A<this._objects.length-1-O&&(M=A+1,c(this._objects,_),this._objects.splice(M,0,_)),O++;else A=this._objects.indexOf(f),A!==this._objects.length-1&&(M=this._findNewUpperIndex(f,A,m),c(this._objects,f),this._objects.splice(M,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(f,m,y){var x,_,A;if(y)for(x=m,_=m+1,A=this._objects.length;_<A;++_){var M=f.intersectsWithObject(this._objects[_])||f.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(f);if(M){x=_;break}}else x=m+1;return x},moveTo:function(f,m){return c(this._objects,f),this._objects.splice(m,0,f),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(f){f.dispose&&f.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),o(t.StaticCanvas.prototype,t.Observable),o(t.StaticCanvas.prototype,t.Collection),o(t.StaticCanvas.prototype,t.DataURLExporter),o(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(f){var m=h();if(!m||!m.getContext)return null;var y=m.getContext("2d");if(!y)return null;switch(f){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var f=n(this.lowerCanvasEl);return f&&f.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(f){var m=n(this.lowerCanvasEl);return m&&m.createJPEGStream(f)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(o){o.strokeStyle=this.color,o.lineWidth=this.width,o.lineCap=this.strokeLineCap,o.miterLimit=this.strokeMiterLimit,o.lineJoin=this.strokeLineJoin,o.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(o){var r=this.canvas.viewportTransform;o.save(),o.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var o=this.canvas,r=this.shadow,c=o.contextTop,u=o.getZoom();o&&o._isRetinaScaling()&&(u*=t.devicePixelRatio),c.shadowColor=r.color,c.shadowBlur=r.blur*u,c.shadowOffsetX=r.offsetX*u,c.shadowOffsetY=r.offsetY*u}},needsFullRender:function(){var o=new t.Color(this.color);return o.getAlpha()<1||!!this.shadow},_resetShadow:function(){var o=this.canvas.contextTop;o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0},_isOutSideCanvas:function(o){return o.x<0||o.x>this.canvas.getWidth()||o.y<0||o.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(o){this.canvas=o,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(o,r,c){var u=r.midPointFrom(c);return o.quadraticCurveTo(r.x,r.y,u.x,u.y),u},onMouseDown:function(o,r){this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],this._prepareForDrawing(o),this._captureDrawingPath(o),this._render())},onMouseMove:function(o,r){if(this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o))&&this._captureDrawingPath(o)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,u=c.length,s=this.canvas.contextTop;this._saveAndTransform(s),this.oldEnd&&(s.beginPath(),s.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(s,c[u-2],c[u-1],!0),s.stroke(),s.restore()}},onMouseUp:function(o){return this.canvas._isMainEvent(o.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(o){var r=new t.Point(o.x,o.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(o){return this._points.length>1&&o.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(o),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(o){var r=new t.Point(o.x,o.y);return this._addPoint(r)},_render:function(o){var r,c,u=this._points[0],s=this._points[1];if(o=o||this.canvas.contextTop,this._saveAndTransform(o),o.beginPath(),this._points.length===2&&u.x===s.x&&u.y===s.y){var l=this.width/1e3;u=new t.Point(u.x,u.y),s=new t.Point(s.x,s.y),u.x-=l,s.x+=l}for(o.moveTo(u.x,u.y),r=1,c=this._points.length;r<c;r++)this._drawSegment(o,u,s),u=this._points[r],s=this._points[r+1];o.lineTo(u.x,u.y),o.stroke(),o.restore()},convertPointsToSVGPath:function(o){var r=this.width/1e3;return t.util.getSmoothPathFromPoints(o,r)},_isEmptySVGPath:function(o){var r=t.util.joinPath(o);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(o){var r=new t.Path(o,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new t.Shadow(this.shadow)),r},decimatePoints:function(o,r){if(o.length<=2)return o;var c=this.canvas.getZoom(),u=Math.pow(r/c,2),s,l=o.length-1,n=o[0],h=[n],g;for(s=1;s<l-1;s++)g=Math.pow(n.x-o[s].x,2)+Math.pow(n.y-o[s].y,2),g>=u&&(n=o[s],h.push(n));return h.push(o[l]),h},_finalizeAndAddPath:function(){var o=this.canvas.contextTop;o.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var c=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(o){this.canvas=o,this.points=[]},drawDot:function(o){var r=this.addPoint(o),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,r),c.restore()},dot:function(o,r){o.fillStyle=r.fill,o.beginPath(),o.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),o.closePath(),o.fill()},onMouseDown:function(o){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(o)},_render:function(){var o=this.canvas.contextTop,r,c,u=this.points;for(this._saveAndTransform(o),r=0,c=u.length;r<c;r++)this.dot(o,u[r]);o.restore()},onMouseMove:function(o){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(o),this._render()):this.drawDot(o))},onMouseUp:function(){var o=this.canvas.renderOnAddRemove,r,c;this.canvas.renderOnAddRemove=!1;var u=[];for(r=0,c=this.points.length;r<c;r++){var s=this.points[r],l=new t.Circle({radius:s.radius,left:s.x,top:s.y,originX:"center",originY:"center",fill:s.fill});this.shadow&&(l.shadow=new t.Shadow(this.shadow)),u.push(l)}var n=new t.Group(u);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=o,this.canvas.requestRenderAll()},addPoint:function(o){var r=new t.Point(o.x,o.y),c=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return r.radius=c,r.fill=u,this.points.push(r),r}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(o){this.canvas=o,this.sprayChunks=[]},onMouseDown:function(o){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(o),this.render(this.sprayChunkPoints)},onMouseMove:function(o){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(o)||(this.addSprayChunk(o),this.render(this.sprayChunkPoints))},onMouseUp:function(){var o=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],c=0,u=this.sprayChunks.length;c<u;c++)for(var s=this.sprayChunks[c],l=0,n=s.length;l<n;l++){var h=new t.Rect({width:s[l].width,height:s[l].width,left:s[l].x+1,top:s[l].y+1,originX:"center",originY:"center",fill:this.color});r.push(h)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var g=new t.Group(r);this.shadow&&g.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=o,this.canvas.requestRenderAll()},_getOptimizedRects:function(o){var r={},c,u,s;for(u=0,s=o.length;u<s;u++)c=o[u].left+""+o[u].top,r[c]||(r[c]=o[u]);var l=[];for(c in r)l.push(r[c]);return l},render:function(o){var r=this.canvas.contextTop,c,u;for(r.fillStyle=this.color,this._saveAndTransform(r),c=0,u=o.length;c<u;c++){var s=o[c];typeof s.opacity<"u"&&(r.globalAlpha=s.opacity),r.fillRect(s.x,s.y,s.width,s.width)}r.restore()},_render:function(){var o=this.canvas.contextTop,r,c;for(o.fillStyle=this.color,this._saveAndTransform(o),r=0,c=this.sprayChunks.length;r<c;r++)this.render(this.sprayChunks[r]);o.restore()},addSprayChunk:function(o){this.sprayChunkPoints=[];var r,c,u,s=this.width/2,l;for(l=0;l<this.density;l++){r=t.util.getRandomInt(o.x-s,o.x+s),c=t.util.getRandomInt(o.y-s,o.y+s),this.dotWidthVariance?u=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var n=new t.Point(r,c);n.width=u,this.randomOpacity&&(n.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var o=20,r=5,c=t.util.createCanvasElement(),u=c.getContext("2d");return c.width=c.height=o+r,u.fillStyle=this.color,u.beginPath(),u.arc(o/2,o/2,o/2,0,Math.PI*2,!1),u.closePath(),u.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(o){return o.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(o){this.callSuper("_setBrushStyles",o),o.strokeStyle=this.getPattern(o)},createPath:function(o){var r=this.callSuper("createPath",o),c=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),r}}),function(){var o=t.util.getPointer,r=t.util.degreesToRadians,c=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(s,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var s=this.getActiveObjects(),l,n,h;if(s.length>0&&!this.preserveObjectStacking){n=[],h=[];for(var g=0,f=this._objects.length;g<f;g++)l=this._objects[g],s.indexOf(l)===-1?n.push(l):h.push(l);s.length>1&&(this._activeObject._objects=h),n.push.apply(n,h)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var s=this.contextContainer;return this.renderCanvas(s,this._chooseObjectsToRender()),this},renderTopLayer:function(s){s.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(s),this.contextTopDirty=!0),s.restore()},renderTop:function(){var s=this.contextTop;return this.clearContext(s),this.renderTopLayer(s),this.fire("after:render"),this},_normalizePointer:function(s,l){var n=s.calcTransformMatrix(),h=t.util.invertTransform(n),g=this.restorePointerVpt(l);return t.util.transformPoint(g,h)},isTargetTransparent:function(s,l,n){if(s.shouldCache()&&s._cacheCanvas&&s!==this._activeObject){var h=this._normalizePointer(s,{x:l,y:n}),g=Math.max(s.cacheTranslationX+h.x*s.zoomX,0),f=Math.max(s.cacheTranslationY+h.y*s.zoomY,0),_=t.util.isTransparent(s._cacheContext,Math.round(g),Math.round(f),this.targetFindTolerance);return _}var m=this.contextCache,y=s.selectionBackgroundColor,x=this.viewportTransform;s.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(x[0],x[1],x[2],x[3],x[4],x[5]),s.render(m),m.restore(),s.selectionBackgroundColor=y;var _=t.util.isTransparent(m,l,n,this.targetFindTolerance);return _},_isSelectionKeyPressed:function(s){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(n){return s[n]===!0}):l=s[this.selectionKey],l},_shouldClearSelection:function(s,l){var n=this.getActiveObjects(),h=this._activeObject;return!l||l&&h&&n.length>1&&n.indexOf(l)===-1&&h!==l&&!this._isSelectionKeyPressed(s)||l&&!l.evented||l&&!l.selectable&&h&&h!==l},_shouldCenterTransform:function(s,l,n){if(s){var h;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?h=this.centeredScaling||s.centeredScaling:l==="rotate"&&(h=this.centeredRotation||s.centeredRotation),h?!n:n}},_getOriginFromCorner:function(s,l){var n={x:s.originX,y:s.originY};return l==="ml"||l==="tl"||l==="bl"?n.x="right":(l==="mr"||l==="tr"||l==="br")&&(n.x="left"),l==="tl"||l==="mt"||l==="tr"?n.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(n.y="top"),n},_getActionFromCorner:function(s,l,n,h){if(!l||!s)return"drag";var g=h.controls[l];return g.getActionName(n,g,h)},_setupCurrentTransform:function(s,l,n){if(l){var h=this.getPointer(s),g=l.__corner,f=l.controls[g],m=n&&g?f.getActionHandler(s,l,f):t.controlsUtils.dragHandler,y=this._getActionFromCorner(n,g,s,l),x=this._getOriginFromCorner(l,g),_=s[this.centeredKey],A={target:l,action:y,actionHandler:m,corner:g,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:h.x-l.left,offsetY:h.y-l.top,originX:x.x,originY:x.y,ex:h.x,ey:h.y,lastX:h.x,lastY:h.y,theta:r(l.angle),width:l.width*l.scaleX,shiftKey:s.shiftKey,altKey:_,original:t.util.saveObjectTransform(l)};this._shouldCenterTransform(l,y,_)&&(A.originX="center",A.originY="center"),A.original.originX=x.x,A.original.originY=x.y,this._currentTransform=A,this._beforeTransform(s)}},setCursor:function(s){this.upperCanvasEl.style.cursor=s},_drawSelection:function(s){var l=this._groupSelector,n=new t.Point(l.ex,l.ey),h=t.util.transformPoint(n,this.viewportTransform),g=new t.Point(l.ex+l.left,l.ey+l.top),f=t.util.transformPoint(g,this.viewportTransform),m=Math.min(h.x,f.x),y=Math.min(h.y,f.y),x=Math.max(h.x,f.x),_=Math.max(h.y,f.y),A=this.selectionLineWidth/2;this.selectionColor&&(s.fillStyle=this.selectionColor,s.fillRect(m,y,x-m,_-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(s.lineWidth=this.selectionLineWidth,s.strokeStyle=this.selectionBorderColor,m+=A,y+=A,x-=A,_-=A,t.Object.prototype._setLineDash.call(this,s,this.selectionDashArray),s.strokeRect(m,y,x-m,_-y))},findTarget:function(s,l){if(!this.skipTargetFind){var n=!0,h=this.getPointer(s,n),g=this._activeObject,f=this.getActiveObjects(),m,y,x=c(s),_=f.length>1&&!l||f.length===1;if(this.targets=[],_&&g._findTargetCorner(h,x)||f.length>1&&!l&&g===this._searchPossibleTargets([g],h))return g;if(f.length===1&&g===this._searchPossibleTargets([g],h))if(this.preserveObjectStacking)m=g,y=this.targets,this.targets=[];else return g;var A=this._searchPossibleTargets(this._objects,h);return s[this.altSelectionKey]&&A&&m&&A!==m&&(A=m,this.targets=y),A}},_checkTarget:function(s,l,n){if(l&&l.visible&&l.evented&&l.containsPoint(s))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var h=this.isTargetTransparent(l,n.x,n.y);if(!h)return!0}else return!0},_searchPossibleTargets:function(s,l){for(var n,h=s.length,g;h--;){var f=s[h],m=f.group?this._normalizePointer(f.group,l):l;if(this._checkTarget(m,f,l)){n=s[h],n.subTargetCheck&&n instanceof t.Group&&(g=this._searchPossibleTargets(n._objects,l),g&&this.targets.push(g));break}}return n},restorePointerVpt:function(s){return t.util.transformPoint(s,t.util.invertTransform(this.viewportTransform))},getPointer:function(s,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var n=o(s),h=this.upperCanvasEl,g=h.getBoundingClientRect(),f=g.width||0,m=g.height||0,y;(!f||!m)&&("top"in g&&"bottom"in g&&(m=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(f=Math.abs(g.right-g.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,l||(n=this.restorePointerVpt(n));var x=this.getRetinaScaling();return x!==1&&(n.x/=x,n.y/=x),f===0||m===0?y={width:1,height:1}:y={width:h.width/f,height:h.height/m},{x:n.x*y.width,y:n.y*y.height}},_createUpperCanvas:function(){var s=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),t.util.addClass(n,"upper-canvas "+s),this.wrapperEl.appendChild(n),this._copyCanvasStyle(l,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(s){var l=this.width||s.width,n=this.height||s.height;t.util.setStyle(s,{position:"absolute",width:l+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),s.width=l,s.height=n,t.util.makeElementUnselectable(s)},_copyCanvasStyle:function(s,l){l.style.cssText=s.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var s=this._activeObject;return s?s.type==="activeSelection"&&s._objects?s._objects.slice(0):[s]:[]},_onObjectRemoved:function(s){s===this._activeObject&&(this.fire("before:selection:cleared",{target:s}),this._discardActiveObject(),this.fire("selection:cleared",{target:s}),s.fire("deselected")),s===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",s)},_fireSelectionEvents:function(s,l){var n=!1,h=this.getActiveObjects(),g=[],f=[];s.forEach(function(m){h.indexOf(m)===-1&&(n=!0,m.fire("deselected",{e:l,target:m}),f.push(m))}),h.forEach(function(m){s.indexOf(m)===-1&&(n=!0,m.fire("selected",{e:l,target:m}),g.push(m))}),s.length>0&&h.length>0?n&&this.fire("selection:updated",{e:l,selected:g,deselected:f}):h.length>0?this.fire("selection:created",{e:l,selected:g}):s.length>0&&this.fire("selection:cleared",{e:l,deselected:f})},setActiveObject:function(s,l){var n=this.getActiveObjects();return this._setActiveObject(s,l),this._fireSelectionEvents(n,l),this},_setActiveObject:function(s,l){return this._activeObject===s||!this._discardActiveObject(l,s)||s.onSelect({e:l})?!1:(this._activeObject=s,!0)},_discardActiveObject:function(s,l){var n=this._activeObject;if(n){if(n.onDeselect({e:s,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(s){var l=this.getActiveObjects(),n=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:n,e:s}),this._discardActiveObject(s),this._fireSelectionEvents(l,s),this},dispose:function(){var s=this.wrapperEl;return this.removeListeners(),s.removeChild(this.upperCanvasEl),s.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){t.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),s.parentNode&&s.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(s){var l=this._activeObject;l&&l._renderControls(s)},_toObject:function(s,l,n){var h=this._realizeGroupTransformOnObject(s),g=this.callSuper("_toObject",s,l,n);return this._unwindGroupTransformOnObject(s,h),g},_realizeGroupTransformOnObject:function(s){if(s.group&&s.group.type==="activeSelection"&&this._activeObject===s.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return l.forEach(function(h){n[h]=s[h]}),t.util.addTransformToObject(s,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(s,l){l&&s.set(l)},_setSVGObject:function(s,l,n){var h=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",s,l,n),this._unwindGroupTransformOnObject(l,h)},setViewportTransform:function(s){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,s)}});for(var u in t.StaticCanvas)u!=="prototype"&&(t.Canvas[u]=t.StaticCanvas[u])}(),function(){var o=t.util.addListener,r=t.util.removeListener,c=3,u=2,s=1,l={passive:!1};function n(h,g){return h.button&&h.button===g-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(o,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(h,g){var f=this.upperCanvasEl,m=this._getEventPrefix();h(t.window,"resize",this._onResize),h(f,m+"down",this._onMouseDown),h(f,m+"move",this._onMouseMove,l),h(f,m+"out",this._onMouseOut),h(f,m+"enter",this._onMouseEnter),h(f,"wheel",this._onMouseWheel),h(f,"contextmenu",this._onContextMenu),h(f,"dblclick",this._onDoubleClick),h(f,"dragover",this._onDragOver),h(f,"dragenter",this._onDragEnter),h(f,"dragleave",this._onDragLeave),h(f,"drop",this._onDrop),this.enablePointerEvents||h(f,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](f,"gesture",this._onGesture),eventjs[g](f,"drag",this._onDrag),eventjs[g](f,"orientation",this._onOrientationChange),eventjs[g](f,"shake",this._onShake),eventjs[g](f,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var h=this._getEventPrefix();r(t.document,h+"up",this._onMouseUp),r(t.document,"touchend",this._onTouchEnd,l),r(t.document,h+"move",this._onMouseMove,l),r(t.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(h,g){this.__onTransformGesture&&this.__onTransformGesture(h,g)},_onDrag:function(h,g){this.__onDrag&&this.__onDrag(h,g)},_onMouseWheel:function(h){this.__onMouseWheel(h)},_onMouseOut:function(h){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:h}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:h});var f=this;this._hoveredTargets.forEach(function(m){f.fire("mouse:out",{target:m,e:h}),m&&m.fire("mouseout",{e:h})}),this._hoveredTargets=[]},_onMouseEnter:function(h){!this._currentTransform&&!this.findTarget(h)&&(this.fire("mouse:over",{target:null,e:h}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(h,g){this.__onOrientationChange&&this.__onOrientationChange(h,g)},_onShake:function(h,g){this.__onShake&&this.__onShake(h,g)},_onLongPress:function(h,g){this.__onLongPress&&this.__onLongPress(h,g)},_onDragOver:function(h){h.preventDefault();var g=this._simpleEventHandler("dragover",h);this._fireEnterLeaveEvents(g,h)},_onDrop:function(h){return this._simpleEventHandler("drop:before",h),this._simpleEventHandler("drop",h)},_onContextMenu:function(h){return this.stopContextMenu&&(h.stopPropagation(),h.preventDefault()),!1},_onDoubleClick:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"dblclick"),this._resetTransformEventData(h)},getPointerId:function(h){var g=h.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?h.pointerId:-1},_isMainEvent:function(h){return h.isPrimary===!0?!0:h.isPrimary===!1?!1:h.type==="touchend"&&h.touches.length===0?!0:h.changedTouches?h.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(h){h.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(h)),this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();o(t.document,"touchend",this._onTouchEnd,l),o(t.document,"touchmove",this._onMouseMove,l),r(g,f+"down",this._onMouseDown)},_onMouseDown:function(h){this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();r(g,f+"move",this._onMouseMove,l),o(t.document,f+"up",this._onMouseUp),o(t.document,f+"move",this._onMouseMove,l)},_onTouchEnd:function(h){if(!(h.touches.length>0)){this.__onMouseUp(h),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();r(t.document,"touchend",this._onTouchEnd,l),r(t.document,"touchmove",this._onMouseMove,l);var f=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){o(f.upperCanvasEl,g+"down",f._onMouseDown),f._willAddMouseDown=0},400)}},_onMouseUp:function(h){this.__onMouseUp(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();this._isMainEvent(h)&&(r(t.document,f+"up",this._onMouseUp),r(t.document,f+"move",this._onMouseMove,l),o(g,f+"move",this._onMouseMove,l))},_onMouseMove:function(h){!this.allowTouchScrolling&&h.preventDefault&&h.preventDefault(),this.__onMouseMove(h)},_onResize:function(){this.calcOffset()},_shouldRender:function(h){var g=this._activeObject;return!!g!=!!h||g&&h&&g!==h?!0:(g&&g.isEditing,!1)},__onMouseUp:function(h){var g,f=this._currentTransform,m=this._groupSelector,y=!1,x=!m||m.left===0&&m.top===0;if(this._cacheTransformEventData(h),g=this._target,this._handleEvent(h,"up:before"),n(h,c)){this.fireRightClick&&this._handleEvent(h,"up",c,x);return}if(n(h,u)){this.fireMiddleClick&&this._handleEvent(h,"up",u,x),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(h);return}if(this._isMainEvent(h)){if(f&&(this._finalizeCurrentTransform(h),y=f.actionPerformed),!x){var _=g===this._activeObject;this._maybeGroupObjects(h),y||(y=this._shouldRender(g)||!_&&g===this._activeObject)}var A,M;if(g){if(A=g._findTargetCorner(this.getPointer(h,!0),t.util.isTouchEvent(h)),g.selectable&&g!==this._activeObject&&g.activeOn==="up")this.setActiveObject(g,h),y=!0;else{var T=g.controls[A],O=T&&T.getMouseUpHandler(h,g,T);O&&(M=this.getPointer(h),O(h,f,M.x,M.y))}g.isMoving=!1}if(f&&(f.target!==g||f.corner!==A)){var B=f.target&&f.target.controls[f.corner],X=B&&B.getMouseUpHandler(h,g,T);M=M||this.getPointer(h),X&&X(h,f,M.x,M.y)}this._setCursorFromEvent(h,g),this._handleEvent(h,"up",s,x),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),y?this.requestRenderAll():x||this.renderTop()}},_simpleEventHandler:function(h,g){var f=this.findTarget(g),m=this.targets,y={e:g,target:f,subTargets:m};if(this.fire(h,y),f&&f.fire(h,y),!m)return f;for(var x=0;x<m.length;x++)m[x].fire(h,y);return f},_handleEvent:function(h,g,f,m){var y=this._target,x=this.targets||[],_={e:h,target:y,subTargets:x,button:f||s,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};g==="up"&&(_.currentTarget=this.findTarget(h),_.currentSubTargets=this.targets),this.fire("mouse:"+g,_),y&&y.fire("mouse"+g,_);for(var A=0;A<x.length;A++)x[A].fire("mouse"+g,_)},_finalizeCurrentTransform:function(h){var g=this._currentTransform,f=g.target,m={e:h,target:f,transform:g,action:g.action};f._scaling&&(f._scaling=!1),f.setCoords(),(g.actionPerformed||this.stateful&&f.hasStateChanged())&&this._fire("modified",m)},_onMouseDownInDrawingMode:function(h){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(h).requestRenderAll();var g=this.getPointer(h);this.freeDrawingBrush.onMouseDown(g,{e:h,pointer:g}),this._handleEvent(h,"down")},_onMouseMoveInDrawingMode:function(h){if(this._isCurrentlyDrawing){var g=this.getPointer(h);this.freeDrawingBrush.onMouseMove(g,{e:h,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(h,"move")},_onMouseUpInDrawingMode:function(h){var g=this.getPointer(h);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:h,pointer:g}),this._handleEvent(h,"up")},__onMouseDown:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"down:before");var g=this._target;if(n(h,c)){this.fireRightClick&&this._handleEvent(h,"down",c);return}if(n(h,u)){this.fireMiddleClick&&this._handleEvent(h,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(h);return}if(this._isMainEvent(h)&&!this._currentTransform){var f=this._pointer;this._previousPointer=f;var m=this._shouldRender(g),y=this._shouldGroup(h,g);if(this._shouldClearSelection(h,g)?this.discardActiveObject(h):y&&(this._handleGrouping(h,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var x=g===this._activeObject;g.selectable&&g.activeOn==="down"&&this.setActiveObject(g,h);var _=g._findTargetCorner(this.getPointer(h,!0),t.util.isTouchEvent(h));if(g.__corner=_,g===this._activeObject&&(_||!y)){this._setupCurrentTransform(h,g,x);var A=g.controls[_],f=this.getPointer(h),M=A&&A.getMouseDownHandler(h,g,A);M&&M(h,this._currentTransform,f.x,f.y)}}this._handleEvent(h,"down"),(m||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(h){this._resetTransformEventData(),this._pointer=this.getPointer(h,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(h)||null},_beforeTransform:function(h){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:h,transform:g})},__onMouseMove:function(h){this._handleEvent(h,"move:before"),this._cacheTransformEventData(h);var g,f;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(h);return}if(this._isMainEvent(h)){var m=this._groupSelector;m?(f=this._absolutePointer,m.left=f.x-m.ex,m.top=f.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(h):(g=this.findTarget(h)||null,this._setCursorFromEvent(h,g),this._fireOverOutEvents(g,h)),this._handleEvent(h,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(h,g){var f=this._hoveredTarget,m=this._hoveredTargets,y=this.targets,x=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:f,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<x;_++)this.fireSyntheticInOutEvents(y[_],g,{oldTarget:m[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=h,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(h,g){var f=this._draggedoverTarget,m=this._hoveredTargets,y=this.targets,x=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:f,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<x;_++)this.fireSyntheticInOutEvents(y[_],g,{oldTarget:m[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=h},fireSyntheticInOutEvents:function(h,g,f){var m,y,x=f.oldTarget,_,A,M=x!==h,T=f.canvasEvtIn,O=f.canvasEvtOut;M&&(m={e:g,target:h,previousTarget:x},y={e:g,target:x,nextTarget:h}),A=h&&M,_=x&&M,_&&(O&&this.fire(O,y),x.fire(f.evtOut,y)),A&&(T&&this.fire(T,m),h.fire(f.evtIn,m))},__onMouseWheel:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"wheel"),this._resetTransformEventData()},_transformObject:function(h){var g=this.getPointer(h),f=this._currentTransform;f.reset=!1,f.shiftKey=h.shiftKey,f.altKey=h[this.centeredKey],this._performTransformAction(h,f,g),f.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(h,g,f){var m=f.x,y=f.y,x=g.action,_=!1,A=g.actionHandler;A&&(_=A(h,g,m,y)),x==="drag"&&_&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||_},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(h,g){if(!g)return this.setCursor(this.defaultCursor),!1;var f=g.hoverCursor||this.hoverCursor,m=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!m||!m.contains(g))&&g._findTargetCorner(this.getPointer(h,!0));y?this.setCursor(this.getCornerCursor(y,g,h)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(x){f=x.hoverCursor||f}),this.setCursor(f))},getCornerCursor:function(h,g,f){var m=g.controls[h];return m.cursorStyleHandler(f,m,g)}})}(),function(){var o=Math.min,r=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(c,u){var s=this._activeObject;return s&&this._isSelectionKeyPressed(c)&&u&&u.selectable&&this.selection&&(s!==u||s.type==="activeSelection")&&!u.onSelect({e:c})},_handleGrouping:function(c,u){var s=this._activeObject;s.__corner||u===s&&(u=this.findTarget(c,!0),!u||!u.selectable)||(s&&s.type==="activeSelection"?this._updateActiveSelection(u,c):this._createActiveSelection(u,c))},_updateActiveSelection:function(c,u){var s=this._activeObject,l=s._objects.slice(0);s.contains(c)?(s.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),s.size()===1&&this._setActiveObject(s.item(0),u)):(s.addWithUpdate(c),this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,u)},_createActiveSelection:function(c,u){var s=this.getActiveObjects(),l=this._createGroup(c);this._hoveredTarget=l,this._setActiveObject(l,u),this._fireSelectionEvents(s,u)},_createGroup:function(c){var u=this._objects,s=u.indexOf(this._activeObject)<u.indexOf(c),l=s?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(c){var u=this._collectObjects(c),s;u.length===1?this.setActiveObject(u[0],c):u.length>1&&(s=new t.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(s,c))},_collectObjects:function(c){for(var u=[],s,l=this._groupSelector.ex,n=this._groupSelector.ey,h=l+this._groupSelector.left,g=n+this._groupSelector.top,f=new t.Point(o(l,h),o(n,g)),m=new t.Point(r(l,h),r(n,g)),y=!this.selectionFullyContained,x=l===h&&n===g,_=this._objects.length;_--&&(s=this._objects[_],!(!(!s||!s.selectable||!s.visible)&&(y&&s.intersectsWithRect(f,m,!0)||s.isContainedWithinRect(f,m,!0)||y&&s.containsPoint(f,null,!0)||y&&s.containsPoint(m,null,!0))&&(u.push(s),x))););return u.length>1&&(u=u.filter(function(A){return!A.onSelect({e:c})})),u},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(o){o||(o={});var r=o.format||"png",c=o.quality||1,u=(o.multiplier||1)*(o.enableRetinaScaling?this.getRetinaScaling():1),s=this.toCanvasElement(u,o);return t.util.toDataURL(s,r,c)},toCanvasElement:function(o,r){o=o||1,r=r||{};var c=(r.width||this.width)*o,u=(r.height||this.height)*o,s=this.getZoom(),l=this.width,n=this.height,h=s*o,g=this.viewportTransform,f=(g[4]-(r.left||0))*o,m=(g[5]-(r.top||0))*o,y=this.interactive,x=[h,0,0,h,f,m],_=this.enableRetinaScaling,A=t.util.createCanvasElement(),M=this.contextTop;return A.width=c,A.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=x,this.width=c,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(A.getContext("2d"),this._objects),this.viewportTransform=g,this.width=l,this.height=n,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=_,this.contextTop=M,A}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(o,r,c){if(o){var u=typeof o=="string"?JSON.parse(o):t.util.object.clone(o),s=this,l=u.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(h){s.clear(),s._setBgOverlay(u,function(){l?s._enlivenObjects([l],function(g){s.clipPath=g[0],s.__setupCanvas.call(s,u,h,n,r)}):s.__setupCanvas.call(s,u,h,n,r)})},c),this}},__setupCanvas:function(o,r,c,u){var s=this;r.forEach(function(l,n){s.insertAt(l,n)}),this.renderOnAddRemove=c,delete o.objects,delete o.backgroundImage,delete o.overlayImage,delete o.background,delete o.overlay,this._setOptions(o),this.renderAll(),u&&u()},_setBgOverlay:function(o,r){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!o.backgroundImage&&!o.overlayImage&&!o.background&&!o.overlay){r&&r();return}var u=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",o.backgroundImage,c,u),this.__setBgOverlay("overlayImage",o.overlayImage,c,u),this.__setBgOverlay("backgroundColor",o.background,c,u),this.__setBgOverlay("overlayColor",o.overlay,c,u)},__setBgOverlay:function(o,r,c,u){var s=this;if(!r){c[o]=!0,u&&u();return}o==="backgroundImage"||o==="overlayImage"?t.util.enlivenObjects([r],function(l){s[o]=l[0],c[o]=!0,u&&u()}):this["set"+t.util.string.capitalize(o,!0)](r,function(){c[o]=!0,u&&u()})},_enlivenObjects:function(o,r,c){if(!o||o.length===0){r&&r([]);return}t.util.enlivenObjects(o,function(u){r&&r(u)},null,c)},_toDataURL:function(o,r){this.clone(function(c){r(c.toDataURL(o))})},_toDataURLWithMultiplier:function(o,r,c){this.clone(function(u){c(u.toDataURLWithMultiplier(o,r))})},clone:function(o,r){var c=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(u){u.loadFromJSON(c,function(){o&&o(u)})})},cloneWithoutData:function(o){var r=t.util.createCanvasElement();r.width=this.width,r.height=this.height;var c=new t.Canvas(r);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),o&&o(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):o&&o(c)}}),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.util.object.clone,s=r.util.toFixed,l=r.util.string.capitalize,n=r.util.degreesToRadians,h=!r.isLikelyNode,g=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:h,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(f){f&&this.setOptions(f)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(f){var m=r.perfLimitSizeTotal,y=f.width,x=f.height,_=r.maxCacheSideLimit,A=r.minCacheSideLimit;if(y<=_&&x<=_&&y*x<=m)return y<A&&(f.width=A),x<A&&(f.height=A),f;var M=y/x,T=r.util.limitDimsByArea(M,m),O=r.util.capValue,B=O(A,T.x,_),X=O(A,T.y,_);return y>B&&(f.zoomX/=y/B,f.width=B,f.capped=!0),x>X&&(f.zoomY/=x/X,f.height=X,f.capped=!0),f},_getCacheCanvasDimensions:function(){var f=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),y=m.x*f.scaleX/this.scaleX,x=m.y*f.scaleY/this.scaleY;return{width:Math.ceil(y+g),height:Math.ceil(x+g),zoomX:f.scaleX,zoomY:f.scaleY,x:y,y:x}},_updateCacheCanvas:function(){var f=this.canvas;if(this.noScaleCache&&f&&f._currentTransform){var m=f._currentTransform.target,y=f._currentTransform.action;if(this===m&&y.slice&&y.slice(0,5)==="scale")return!1}var x=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),A=_.width,M=_.height,T,O,B=_.zoomX,X=_.zoomY,F=A!==this.cacheWidth||M!==this.cacheHeight,I=this.zoomX!==B||this.zoomY!==X,K=F||I;return K?(F?(x.width=A,x.height=M):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,x.width,x.height)),T=_.x/2,O=_.y/2,this.cacheTranslationX=Math.round(x.width/2-T)+T,this.cacheTranslationY=Math.round(x.height/2-O)+O,this.cacheWidth=A,this.cacheHeight=M,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(B,X),this.zoomX=B,this.zoomY=X,!0):!1},setOptions:function(f){this._setOptions(f),this._initGradient(f.fill,"fill"),this._initGradient(f.stroke,"stroke"),this._initPattern(f.fill,"fill"),this._initPattern(f.stroke,"stroke")},transform:function(f){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&f===this.canvas.contextTop,y=this.calcTransformMatrix(!m);f.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(f){var m=r.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:s(this.left,m),top:s(this.top,m),width:s(this.width,m),height:s(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:s(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:s(this.strokeMiterLimit,m),scaleX:s(this.scaleX,m),scaleY:s(this.scaleY,m),angle:s(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:s(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:s(this.skewX,m),skewY:s(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(f),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,y,f),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(f){return this.toObject(f)},_removeDefaultValues:function(f){var m=r.util.getKlass(f.type).prototype,y=m.stateProperties;return y.forEach(function(x){x==="left"||x==="top"||(f[x]===m[x]&&delete f[x],Array.isArray(f[x])&&Array.isArray(m[x])&&f[x].length===0&&m[x].length===0&&delete f[x])}),f},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var f=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(f.scaleX),scaleY:Math.abs(f.scaleY)}},getTotalObjectScaling:function(){var f=this.getObjectScaling(),m=f.scaleX,y=f.scaleY;if(this.canvas){var x=this.canvas.getZoom(),_=this.canvas.getRetinaScaling();m*=x*_,y*=x*_}return{scaleX:m,scaleY:y}},getObjectOpacity:function(){var f=this.opacity;return this.group&&(f*=this.group.getObjectOpacity()),f},_set:function(f,m){var y=f==="scaleX"||f==="scaleY",x=this[f]!==m,_=!1;return y&&(m=this._constrainScale(m)),f==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):f==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):f==="shadow"&&m&&!(m instanceof r.Shadow)?m=new r.Shadow(m):f==="dirty"&&this.group&&this.group.set("dirty",m),this[f]=m,x&&(_=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(f)>-1?(this.dirty=!0,_&&this.group.set("dirty",!0)):_&&this.stateProperties.indexOf(f)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(f){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(f.save(),this._setupCompositeOperation(f),this.drawSelectionBackground(f),this.transform(f),this._setOpacity(f),this._setShadow(f,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(f)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(f),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),f.restore())},renderCache:function(f){f=f||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,f.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(f,m){if(f.save(),m.inverted?f.globalCompositeOperation="destination-out":f.globalCompositeOperation="destination-in",m.absolutePositioned){var y=r.util.invertTransform(this.calcTransformMatrix());f.transform(y[0],y[1],y[2],y[3],y[4],y[5])}m.transform(f),f.scale(1/m.zoomX,1/m.zoomY),f.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),f.restore()},drawObject:function(f,m){var y=this.fill,x=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(f)):this._renderBackground(f),this._render(f),this._drawClipPath(f,this.clipPath),this.fill=y,this.stroke=x},_drawClipPath:function(f,m){m&&(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(f,m))},drawCacheOnCanvas:function(f){f.scale(1/this.zoomX,1/this.zoomY),f.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(f){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!f&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!f){var m=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-y/2,m,y)}return!0}return!1},_renderBackground:function(f){if(this.backgroundColor){var m=this._getNonTransformedDimensions();f.fillStyle=this.backgroundColor,f.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(f)}},_setOpacity:function(f){this.group&&!this.group._transformDone?f.globalAlpha=this.getObjectOpacity():f.globalAlpha*=this.opacity},_setStrokeStyles:function(f,m){var y=m.stroke;y&&(f.lineWidth=m.strokeWidth,f.lineCap=m.strokeLineCap,f.lineDashOffset=m.strokeDashOffset,f.lineJoin=m.strokeLineJoin,f.miterLimit=m.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(f,y):(f.strokeStyle=y.toLive(f,this),this._applyPatternGradientTransform(f,y)):f.strokeStyle=m.stroke)},_setFillStyles:function(f,m){var y=m.fill;y&&(y.toLive?(f.fillStyle=y.toLive(f,this),this._applyPatternGradientTransform(f,m.fill)):f.fillStyle=y)},_setClippingProperties:function(f){f.globalAlpha=1,f.strokeStyle="transparent",f.fillStyle="#000000"},_setLineDash:function(f,m){!m||m.length===0||(1&m.length&&m.push.apply(m,m),f.setLineDash(m))},_renderControls:function(f,m){var y=this.getViewportTransform(),x=this.calcTransformMatrix(),_,A,M;m=m||{},A=typeof m.hasBorders<"u"?m.hasBorders:this.hasBorders,M=typeof m.hasControls<"u"?m.hasControls:this.hasControls,x=r.util.multiplyTransformMatrices(y,x),_=r.util.qrDecompose(x),f.save(),f.translate(_.translateX,_.translateY),f.lineWidth=1*this.borderScaleFactor,this.group||(f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(_.angle-=180),f.rotate(n(this.group?_.angle:this.angle)),m.forActiveSelection||this.group?A&&this.drawBordersInGroup(f,_,m):A&&this.drawBorders(f,m),M&&this.drawControls(f,m),f.restore()},_setShadow:function(f){if(this.shadow){var m=this.shadow,y=this.canvas,x,_=y&&y.viewportTransform[0]||1,A=y&&y.viewportTransform[3]||1;m.nonScaling?x={scaleX:1,scaleY:1}:x=this.getObjectScaling(),y&&y._isRetinaScaling()&&(_*=r.devicePixelRatio,A*=r.devicePixelRatio),f.shadowColor=m.color,f.shadowBlur=m.blur*r.browserShadowBlurConstant*(_+A)*(x.scaleX+x.scaleY)/4,f.shadowOffsetX=m.offsetX*_*x.scaleX,f.shadowOffsetY=m.offsetY*A*x.scaleY}},_removeShadow:function(f){this.shadow&&(f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0)},_applyPatternGradientTransform:function(f,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var y=m.gradientTransform||m.patternTransform,x=-this.width/2+m.offsetX||0,_=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?f.transform(this.width,0,0,this.height,x,_):f.transform(1,0,0,1,x,_),y&&f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:x,offsetY:_}},_renderPaintInOrder:function(f){this.paintFirst==="stroke"?(this._renderStroke(f),this._renderFill(f)):(this._renderFill(f),this._renderStroke(f))},_render:function(){},_renderFill:function(f){this.fill&&(f.save(),this._setFillStyles(f,this),this.fillRule==="evenodd"?f.fill("evenodd"):f.fill(),f.restore())},_renderStroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(f),f.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();f.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&f.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(f,this.strokeDashArray),this._setStrokeStyles(f,this),f.stroke(),f.restore()}},_applyPatternForTransformedGradient:function(f,m){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),x=r.util.createCanvasElement(),_,A=this.canvas.getRetinaScaling(),M=y.x/this.scaleX/A,T=y.y/this.scaleY/A;x.width=Math.ceil(M),x.height=Math.ceil(T),_=x.getContext("2d"),_.beginPath(),_.moveTo(0,0),_.lineTo(M,0),_.lineTo(M,T),_.lineTo(0,T),_.closePath(),_.translate(M/2,T/2),_.scale(y.zoomX/this.scaleX/A,y.zoomY/this.scaleY/A),this._applyPatternGradientTransform(_,m),_.fillStyle=m.toLive(f),_.fill(),f.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),f.scale(A*this.scaleX/y.zoomX,A*this.scaleY/y.zoomY),f.strokeStyle=_.createPattern(x,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var f=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",f.scaleX),this.set("scaleY",f.scaleY),this.angle=f.angle,this.skewX=f.skewX,this.skewY=0}},_removeTransformMatrix:function(f){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=r.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,f&&(this.scaleX*=f.scaleX,this.scaleY*=f.scaleY,this.cropX=f.cropX,this.cropY=f.cropY,m.x+=f.offsetLeft,m.y+=f.offsetTop,this.width=f.width,this.height=f.height),this.setPositionByOrigin(m,"center","center")},clone:function(f,m){var y=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(y,f):r.Object._fromObject("Object",y,f)},cloneAsImage:function(f,m){var y=this.toCanvasElement(m);return f&&f(new r.Image(y)),this},toCanvasElement:function(f){f||(f={});var m=r.util,y=m.saveObjectTransform(this),x=this.group,_=this.shadow,A=Math.abs,M=(f.multiplier||1)*(f.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,f.withoutTransform&&m.resetObjectTransform(this),f.withoutShadow&&(this.shadow=null);var T=r.util.createCanvasElement(),O=this.getBoundingRect(!0,!0),B=this.shadow,X,F={x:0,y:0},I,K,G;B&&(I=B.blur,B.nonScaling?X={scaleX:1,scaleY:1}:X=this.getObjectScaling(),F.x=2*Math.round(A(B.offsetX)+I)*A(X.scaleX),F.y=2*Math.round(A(B.offsetY)+I)*A(X.scaleY)),K=O.width+F.x,G=O.height+F.y,T.width=Math.ceil(K),T.height=Math.ceil(G);var rt=new r.StaticCanvas(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});f.format==="jpeg"&&(rt.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(rt.width/2,rt.height/2),"center","center");var at=this.canvas;rt.add(this);var gt=rt.toCanvasElement(M||1,f);return this.shadow=_,this.set("canvas",at),x&&(this.group=x),this.set(y).setCoords(),rt._objects=[],rt.dispose(),rt=null,gt},toDataURL:function(f){return f||(f={}),r.util.toDataURL(this.toCanvasElement(f),f.format||"png",f.quality||1)},isType:function(f){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===f},complexity:function(){return 1},toJSON:function(f){return this.toObject(f)},rotate:function(f){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",f),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(f,m){m=m||this.canvas.getPointer(f);var y=new r.Point(m.x,m.y),x=this._getLeftTopCoords();return this.angle&&(y=r.util.rotatePoint(y,x,n(-this.angle))),{x:y.x-x.x,y:y.y-x.y}},_setupCompositeOperation:function(f){this.globalCompositeOperation&&(f.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){r.runningAnimations&&r.runningAnimations.cancelByTarget(this)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),c(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object.ENLIVEN_PROPS=["clipPath"],r.Object._fromObject=function(f,m,y,x){var _=r[f];m=u(m,!0),r.util.enlivenPatterns([m.fill,m.stroke],function(A){typeof A[0]<"u"&&(m.fill=A[0]),typeof A[1]<"u"&&(m.stroke=A[1]),r.util.enlivenObjectEnlivables(m,m,function(){var M=x?new _(m[x],m):new _(m);y&&y(M)})})},r.Object.__uid=0)}(e),function(){var o=t.util.degreesToRadians,r={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(u,s,l,n,h){var g=u.x,f=u.y,m,y,x;return typeof s=="string"?s=r[s]:s-=.5,typeof n=="string"?n=r[n]:n-=.5,m=n-s,typeof l=="string"?l=c[l]:l-=.5,typeof h=="string"?h=c[h]:h-=.5,y=h-l,(m||y)&&(x=this._getTransformedDimensions(),g=u.x+m*x.x,f=u.y+y*x.y),new t.Point(g,f)},translateToCenterPoint:function(u,s,l){var n=this.translateToGivenOrigin(u,s,l,"center","center");return this.angle?t.util.rotatePoint(n,u,o(this.angle)):n},translateToOriginPoint:function(u,s,l){var n=this.translateToGivenOrigin(u,"center","center",s,l);return this.angle?t.util.rotatePoint(n,u,o(this.angle)):n},getCenterPoint:function(){var u=new t.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,s){var l=this.getCenterPoint();return this.translateToOriginPoint(l,u,s)},toLocalPoint:function(u,s,l){var n=this.getCenterPoint(),h,g;return typeof s<"u"&&typeof l<"u"?h=this.translateToGivenOrigin(n,"center","center",s,l):h=new t.Point(this.left,this.top),g=new t.Point(u.x,u.y),this.angle&&(g=t.util.rotatePoint(g,n,-o(this.angle))),g.subtractEquals(h)},setPositionByOrigin:function(u,s,l){var n=this.translateToCenterPoint(u,s,l),h=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",h.x),this.set("top",h.y)},adjustPosition:function(u){var s=o(this.angle),l=this.getScaledWidth(),n=t.util.cos(s)*l,h=t.util.sin(s)*l,g,f;typeof this.originX=="string"?g=r[this.originX]:g=this.originX-.5,typeof u=="string"?f=r[u]:f=u-.5,this.left+=n*(f-g),this.top+=h*(f-g),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function o(l){return[new t.Point(l.tl.x,l.tl.y),new t.Point(l.tr.x,l.tr.y),new t.Point(l.br.x,l.br.y),new t.Point(l.bl.x,l.bl.y)]}var r=t.util,c=r.degreesToRadians,u=r.multiplyTransformMatrices,s=r.transformPoint;r.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,n){return n?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,n){return o(this._getCoords(l,n))},intersectsWithRect:function(l,n,h,g){var f=this.getCoords(h,g),m=t.Intersection.intersectPolygonRectangle(f,l,n);return m.status==="Intersection"},intersectsWithObject:function(l,n,h){var g=t.Intersection.intersectPolygonPolygon(this.getCoords(n,h),l.getCoords(n,h));return g.status==="Intersection"||l.isContainedWithinObject(this,n,h)||this.isContainedWithinObject(l,n,h)},isContainedWithinObject:function(l,n,h){for(var g=this.getCoords(n,h),f=n?l.aCoords:l.lineCoords,m=0,y=l._getImageLines(f);m<4;m++)if(!l.containsPoint(g[m],y))return!1;return!0},isContainedWithinRect:function(l,n,h,g){var f=this.getBoundingRect(h,g);return f.left>=l.x&&f.left+f.width<=n.x&&f.top>=l.y&&f.top+f.height<=n.y},containsPoint:function(l,m,h,g){var f=this._getCoords(h,g),m=m||this._getImageLines(f),y=this._findCrossPoints(l,m);return y!==0&&y%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br,g=this.getCoords(!0,l);return g.some(function(f){return f.x<=h.x&&f.x>=n.x&&f.y<=h.y&&f.y>=n.y})||this.intersectsWithRect(n,h,!0,l)?!0:this._containsCenterOfCanvas(n,h,l)},_containsCenterOfCanvas:function(l,n,h){var g={x:(l.x+n.x)/2,y:(l.y+n.y)/2};return!!this.containsPoint(g,null,!0,h)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,h,!0,l))return!0;var g=this.getCoords(!0,l).every(function(f){return(f.x>=h.x||f.x<=n.x)&&(f.y>=h.y||f.y<=n.y)});return g&&this._containsCenterOfCanvas(n,h,l)},_getImageLines:function(l){var n={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return n},_findCrossPoints:function(l,n){var h,g,f,m,y,x=0,_;for(var A in n)if(_=n[A],!(_.o.y<l.y&&_.d.y<l.y)&&!(_.o.y>=l.y&&_.d.y>=l.y)&&(_.o.x===_.d.x&&_.o.x>=l.x?y=_.o.x:(h=0,g=(_.d.y-_.o.y)/(_.d.x-_.o.x),f=l.y-h*l.x,m=_.o.y-g*_.o.x,y=-(f-m)/(h-g)),y>=l.x&&(x+=1),x===2))break;return x},getBoundingRect:function(l,n){var h=this.getCoords(l,n);return r.makeBoundingBoxFromPoints(h)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,n){var h=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(l/this.width/h)},scaleToHeight:function(l,n){var h=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(l/this.height/h)},calcLineCoords:function(){var l=this.getViewportTransform(),n=this.padding,h=c(this.angle),g=r.cos(h),f=r.sin(h),m=g*n,y=f*n,x=m+y,_=m-y,A=this.calcACoords(),M={tl:s(A.tl,l),tr:s(A.tr,l),bl:s(A.bl,l),br:s(A.br,l)};return n&&(M.tl.x-=_,M.tl.y-=x,M.tr.x+=x,M.tr.y-=_,M.bl.x-=x,M.bl.y+=_,M.br.x+=_,M.br.y+=x),M},calcOCoords:function(){var l=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),h=this.getViewportTransform(),g=u(h,n),f=u(g,l),f=u(f,[1/h[0],0,0,1/h[3],0,0]),m=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(x,_,A){y[_]=x.positionHandler(m,f,A)}),y},calcACoords:function(){var l=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),h=u(n,l),g=this._getTransformedDimensions(),f=g.x/2,m=g.y/2;return{tl:s({x:-f,y:-m},h),tr:s({x:f,y:-m},h),bl:s({x:-f,y:m},h),br:s({x:f,y:m},h)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var n="_",h="";return!l&&this.group&&(h=this.group.transformMatrixKey(l)+n),h+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var n=this.calcOwnMatrix();if(l||!this.group)return n;var h=this.transformMatrixKey(l),g=this.matrixCache||(this.matrixCache={});return g.key===h?g.value:(this.group&&(n=u(this.group.calcTransformMatrix(!1),n)),g.key=h,g.value=n,n)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===l)return n.value;var h=this._calcTranslateMatrix(),g={angle:this.angle,translateX:h[4],translateY:h[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=l,n.value=r.composeMatrix(g),n.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,n=this.width+l,h=this.height+l;return{x:n,y:h}},_getTransformedDimensions:function(l,n){typeof l>"u"&&(l=this.skewX),typeof n>"u"&&(n=this.skewY);var h,g,f,m=l===0&&n===0;if(this.strokeUniform?(g=this.width,f=this.height):(h=this._getNonTransformedDimensions(),g=h.x,f=h.y),m)return this._finalizeDimensions(g*this.scaleX,f*this.scaleY);var y=r.sizeAfterTransform(g,f,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:n});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(l,n){return this.strokeUniform?{x:l+this.strokeWidth,y:n+this.strokeWidth}:{x:l,y:n}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),n=this._getTransformedDimensions(),h=s(n,l,!0);return h.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(o){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,o):this.canvas&&this.canvas.sendBackwards(this,o),this},bringForward:function(o){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,o):this.canvas&&this.canvas.bringForward(this,o),this},moveTo:function(o){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,o):this.canvas&&this.canvas.moveTo(this,o),this}}),function(){function o(c,u){if(u){if(u.toLive)return c+": url(#SVGID_"+u.id+"); ";var s=new t.Color(u),l=c+": "+s.toRgb()+"; ",n=s.getAlpha();return n!==1&&(l+=c+"-opacity: "+n.toString()+"; "),l}else return c+": none; "}var r=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(c){var u=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",f=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",x=c?"":this.getSvgFilter(),_=o("fill",this.fill),A=o("stroke",this.stroke);return[A,"stroke-width: ",s,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",f,"; ",_,"fill-rule: ",u,"; ","opacity: ",m,";",x,y].join("")},getSvgSpanStyles:function(c,u){var s="; ",n=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+s:"",l=c.strokeWidth?"stroke-width: "+c.strokeWidth+s:"",n=n,h=c.fontSize?"font-size: "+c.fontSize+"px"+s:"",g=c.fontStyle?"font-style: "+c.fontStyle+s:"",f=c.fontWeight?"font-weight: "+c.fontWeight+s:"",m=c.fill?o("fill",c.fill):"",y=c.stroke?o("stroke",c.stroke):"",x=this.getSvgTextDecoration(c),_=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return x&&(x="text-decoration: "+x+s),[y,l,n,h,g,f,x,m,_,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(u){return c[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,u){var s=c?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+t.util.matrixToSVG(s);return l+(u||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var u=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,u),'" y="',r(-this.height/2,u),'" width="',r(this.width,u),'" height="',r(this.height,u),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,u){u=u||{};var s=u.reviver,l=u.additionalTransform||"",n=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),h=c.indexOf("COMMON_PARTS");return c[h]=n,s?s(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,u){u=u||{};var s=u.noStyle,l=u.reviver,n=s?"":'style="'+this.getSvgStyles()+'" ',h=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=g&&g.absolutePositioned,y=this.stroke,x=this.fill,_=this.shadow,A,M=[],T,O=c.indexOf("COMMON_PARTS"),B=u.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+t.Object.__uid++,T='<clipPath id="'+g.clipPathId+`" >
`+g.toClipPathSVG(l)+`</clipPath>
`),m&&M.push("<g ",h,this.getSvgCommons(),` >
`),M.push("<g ",this.getSvgTransform(!1),m?"":h+this.getSvgCommons(),` >
`),A=[n,f,s?"":this.addPaintOrder()," ",B?'transform="'+B+'" ':""].join(""),c[O]=A,x&&x.toLive&&M.push(x.toSVG(this)),y&&y.toLive&&M.push(y.toSVG(this)),_&&M.push(_.toSVG(this)),g&&M.push(T),M.push(c.join("")),M.push(`</g>
`),m&&M.push(`</g>
`),l?l(M.join("")):M.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var o=t.util.object.extend,r="stateProperties";function c(s,l,n){var h={},g=!0;n.forEach(function(f){h[f]=s[f]}),o(s[l],h,g)}function u(s,l,n){if(s===l)return!0;if(Array.isArray(s)){if(!Array.isArray(l)||s.length!==l.length)return!1;for(var h=0,g=s.length;h<g;h++)if(!u(s[h],l[h]))return!1;return!0}else if(s&&typeof s=="object"){var f=Object.keys(s),m;if(!l||typeof l!="object"||!n&&f.length!==Object.keys(l).length)return!1;for(var h=0,g=f.length;h<g;h++)if(m=f[h],!(m==="canvas"||m==="group")&&!u(s[m],l[m]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(s){s=s||r;var l="_"+s;return Object.keys(this[l]).length<this[s].length?!0:!u(this[l],this,!0)},saveState:function(s){var l=s&&s.propertySet||r,n="_"+l;return this[n]?(c(this,n,this[l]),s&&s.stateProperties&&c(this,n,s.stateProperties),this):this.setupState(s)},setupState:function(s){s=s||{};var l=s.propertySet||r;return s.propertySet=l,this["_"+l]={},this.saveState(s),this}})}(),function(){var o=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(r,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=r.x,s=r.y,l,n,h=Object.keys(this.oCoords),g=h.length-1,f;for(this.__corner=0;g>=0;g--)if(f=h[g],!!this.isControlVisible(f)&&(n=this._getImageLines(c?this.oCoords[f].touchCorner:this.oCoords[f].corner),l=this._findCrossPoints({x:u,y:s},n),l!==0&&l%2===1))return this.__corner=f,f;return!1},forEachControl:function(r){for(var c in this.controls)r(this.controls[c],c,this)},_setCornerCoords:function(){var r=this.oCoords;for(var c in r){var u=this.controls[c];r[c].corner=u.calcCornerCoords(this.angle,this.cornerSize,r[c].x,r[c].y,!1),r[c].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,r[c].x,r[c].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var c=this.getCenterPoint(),u=this._calculateCurrentDimensions(),s=this.canvas.viewportTransform;return r.translate(c.x,c.y),r.scale(1/s[0],1/s[3]),r.rotate(o(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-u.x/2,-u.y/2,u.x,u.y),r.restore(),this},drawBorders:function(r,c){c=c||{};var u=this._calculateCurrentDimensions(),s=this.borderScaleFactor,l=u.x+s,n=u.y+s,h=typeof c.hasControls<"u"?c.hasControls:this.hasControls,g=!1;return r.save(),r.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(r,c.borderDashArray||this.borderDashArray),r.strokeRect(-l/2,-n/2,l,n),h&&(r.beginPath(),this.forEachControl(function(f,m,y){f.withConnection&&f.getVisibility(y,m)&&(g=!0,r.moveTo(f.x*l,f.y*n),r.lineTo(f.x*l+f.offsetX,f.y*n+f.offsetY))}),g&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,c,u){u=u||{};var s=t.util.sizeAfterTransform(this.width,this.height,c),l=this.strokeWidth,n=this.strokeUniform,h=this.borderScaleFactor,g=s.x+l*(n?this.canvas.getZoom():c.scaleX)+h,f=s.y+l*(n?this.canvas.getZoom():c.scaleY)+h;return r.save(),this._setLineDash(r,u.borderDashArray||this.borderDashArray),r.strokeStyle=u.borderColor||this.borderColor,r.strokeRect(-g/2,-f/2,g,f),r.restore(),this},drawControls:function(r,c){c=c||{},r.save();var u=1,s,l;return this.canvas&&(u=this.canvas.getRetinaScaling()),r.setTransform(u,0,0,u,0,0),r.strokeStyle=r.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(s=this.group.calcTransformMatrix()),this.forEachControl(function(n,h,g){l=g.oCoords[h],n.getVisibility(g,h)&&(s&&(l=t.util.transformPoint(l,s)),n.render(r,l.x,l.y,c,g))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=c,this},setControlsVisibility:function(r){r||(r={});for(var c in r)this.setControlVisible(c,r[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(o,r){r=r||{};var c=function(){},u=r.onComplete||c,s=r.onChange||c,l=this;return t.util.animate({target:this,startValue:o.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(n){o.set("left",n),l.requestRenderAll(),s()},onComplete:function(){o.setCoords(),u()}})},fxCenterObjectV:function(o,r){r=r||{};var c=function(){},u=r.onComplete||c,s=r.onChange||c,l=this;return t.util.animate({target:this,startValue:o.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(n){o.set("top",n),l.requestRenderAll(),s()},onComplete:function(){o.setCoords(),u()}})},fxRemove:function(o,r){r=r||{};var c=function(){},u=r.onComplete||c,s=r.onChange||c,l=this;return t.util.animate({target:this,startValue:o.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){o.set("opacity",n),l.requestRenderAll(),s()},onComplete:function(){l.remove(o),u()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var o=[],r,c,u=[];for(r in arguments[0])o.push(r);for(var s=0,l=o.length;s<l;s++)r=o[s],c=s!==l-1,u.push(this._animate(r,arguments[0][r],arguments[1],c));return u}else return this._animate.apply(this,arguments)},_animate:function(o,r,c,u){var s=this,l;r=r.toString(),c?c=t.util.object.clone(c):c={},~o.indexOf(".")&&(l=o.split("."));var n=s.colorProperties.indexOf(o)>-1||l&&s.colorProperties.indexOf(l[1])>-1,h=l?this.get(l[0])[l[1]]:this.get(o);"from"in c||(c.from=h),n||(~r.indexOf("=")?r=h+parseFloat(r.replace("=","")):r=parseFloat(r));var g={target:this,startValue:c.from,endValue:r,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(f,m,y){return c.abort.call(s,f,m,y)},onChange:function(f,m,y){l?s[l[0]][l[1]]=f:s.set(o,f),!u&&c.onChange&&c.onChange(f,m,y)},onComplete:function(f,m,y){u||(s.setCoords(),c.onComplete&&c.onComplete(f,m,y))}};return n?t.util.animateColor(g.startValue,g.endValue,g.duration,g):t.util.animate(g)}}),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.util.object.clone,s={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,h){n||(n=[0,0,0,0]),this.callSuper("initialize",h),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(h)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,h){return this.callSuper("_set",n,h),typeof s[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var h=this.calcLinePoints();n.moveTo(h.x1,h.y1),n.lineTo(h.x2,h.y2),n.lineWidth=this.strokeWidth;var g=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return c(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,h=this.y1<=this.y2?-1:1,g=n*this.width*.5,f=h*this.height*.5,m=n*this.width*-.5,y=h*this.height*-.5;return{x1:g,x2:m,y1:f,y2:y}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(n,h,g){g=g||{};var f=r.parseAttributes(n,r.Line.ATTRIBUTE_NAMES),m=[f.x1||0,f.y1||0,f.x2||0,f.y2||0];h(new r.Line(m,c(f,g)))},r.Line.fromObject=function(n,h){function g(m){delete m.points,h&&h(m)}var f=u(n,!0);f.points=[n.x1,n.y1,n.x2,n.y2],r.Object._fromObject("Line",f,g,"points")};function l(n,h){var g=n.origin,f=n.axis1,m=n.axis2,y=n.dimension,x=h.nearest,_=h.center,A=h.farthest;return function(){switch(this.get(g)){case x:return Math.min(this.get(f),this.get(m));case _:return Math.min(this.get(f),this.get(m))+.5*this.get(y);case A:return Math.max(this.get(f),this.get(m))}}}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.degreesToRadians;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(s,l){return this.callSuper("_set",s,l),s==="radius"&&this.setRadius(l),this},toObject:function(s){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(s))},_toSVG:function(){var s,l=0,n=0,h=(this.endAngle-this.startAngle)%360;if(h===0)s=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var g=c(this.startAngle),f=c(this.endAngle),m=this.radius,y=r.util.cos(g)*m,x=r.util.sin(g)*m,_=r.util.cos(f)*m,A=r.util.sin(f)*m,M=h>180?"1":"0";s=['<path d="M '+y+" "+x," A "+m+" "+m," 0 ",+M+" 1"," "+_+" "+A,'" ',"COMMON_PARTS",` />
`]}return s},_render:function(s){s.beginPath(),s.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(s)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(s){return this.radius=s,this.set("width",s*2).set("height",s*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(s,l){var n=r.parseAttributes(s,r.Circle.ATTRIBUTE_NAMES);if(!u(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,l(new r.Circle(n))};function u(s){return"radius"in s&&s.radius>=0}r.Circle.fromObject=function(s,l){r.Object._fromObject("Circle",s,l)}}(e),function(o){var r=o.fabric||(o.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(c){var u=this.width/2,s=this.height/2;c.beginPath(),c.moveTo(-u,s),c.lineTo(0,-s),c.lineTo(u,s),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,u=this.height/2,s=[-c+" "+u,"0 "+-u,c+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',s,'" />']}}),r.Triangle.fromObject=function(c,u){return r.Object._fromObject("Triangle",c,u)}}(e),function(o){var r=o.fabric||(o.fabric={}),c=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,s){switch(this.callSuper("_set",u,s),u){case"rx":this.rx=s,this.set("width",s*2);break;case"ry":this.ry=s,this.set("height",s*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,c,!1),u.restore(),this._renderPaintInOrder(u)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(u,s){var l=r.parseAttributes(u,r.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,s(new r.Ellipse(l))},r.Ellipse.fromObject=function(u,s){r.Object._fromObject("Ellipse",u,s)}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var s=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,h=this.height,g=-this.width/2,f=-this.height/2,m=s!==0||l!==0,y=1-.5522847498;u.beginPath(),u.moveTo(g+s,f),u.lineTo(g+n-s,f),m&&u.bezierCurveTo(g+n-y*s,f,g+n,f+y*l,g+n,f+l),u.lineTo(g+n,f+h-l),m&&u.bezierCurveTo(g+n,f+h-y*l,g+n-y*s,f+h,g+n-s,f+h),u.lineTo(g+s,f+h),m&&u.bezierCurveTo(g+y*s,f+h,g,f+h-y*l,g,f+h-l),u.lineTo(g,f+l),m&&u.bezierCurveTo(g,f+y*l,g+y*s,f,g+s,f),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,s=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',s,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(u,s,l){if(!u)return s(null);l=l||{};var n=r.parseAttributes(u,r.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var h=new r.Rect(c(l?r.util.object.clone(l):{},n));h.visible=h.visible&&h.width>0&&h.height>0,s(h)},r.Rect.fromObject=function(u,s){return r.Object._fromObject("Rect",u,s)}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.util.array.min,s=r.util.array.max,l=r.util.toFixed,n=r.util.projectStrokeOnPoints;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(h,g){g=g||{},this.points=h||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return n(this.points,this,!0)},_setPositionDimensions:function(h){var g=this._calcDimensions(h),f,m=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-m,this.height=g.height-m,h.fromSVG||(f=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+m/2,y:g.top-this.strokeWidth/2+m/2},"left","top",this.originX,this.originY)),typeof h.left>"u"&&(this.left=h.fromSVG?g.left:f.x),typeof h.top>"u"&&(this.top=h.fromSVG?g.top:f.y),this.pathOffset={x:g.left+this.width/2+m/2,y:g.top+this.height/2+m/2}},_calcDimensions:function(){var h=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=u(h,"x")||0,f=u(h,"y")||0,m=s(h,"x")||0,y=s(h,"y")||0,x=m-g,_=y-f;return{left:g,top:f,width:x,height:_}},toObject:function(h){return c(this.callSuper("toObject",h),{points:this.points.concat()})},_toSVG:function(){for(var h=[],g=this.pathOffset.x,f=this.pathOffset.y,m=r.Object.NUM_FRACTION_DIGITS,y=0,x=this.points.length;y<x;y++)h.push(l(this.points[y].x-g,m),",",l(this.points[y].y-f,m)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',h.join(""),`" />
`]},commonRender:function(h){var g,f=this.points.length,m=this.pathOffset.x,y=this.pathOffset.y;if(!f||isNaN(this.points[f-1].y))return!1;h.beginPath(),h.moveTo(this.points[0].x-m,this.points[0].y-y);for(var x=0;x<f;x++)g=this.points[x],h.lineTo(g.x-m,g.y-y);return!0},_render:function(h){this.commonRender(h)&&this._renderPaintInOrder(h)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(h){return function(g,f,m){if(!g)return f(null);m||(m={});var y=r.parsePointsAttribute(g.getAttribute("points")),x=r.parseAttributes(g,r[h].ATTRIBUTE_NAMES);x.fromSVG=!0,f(new r[h](y,c(x,m)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(h,g){return r.Object._fromObject("Polyline",h,g,"points")}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.projectStrokeOnPoints;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(u){this.commonRender(u)&&(u.closePath(),this._renderPaintInOrder(u))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(u,s){r.Object._fromObject("Polygon",u,s,"points")}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.array.min,u=r.util.array.max,s=r.util.object.extend,l=r.util.object.clone,n=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(h,g){g=l(g||{}),delete g.path,this.callSuper("initialize",g),this._setPath(h||[],g)},_setPath:function(h,g){this.path=r.util.makePathSimpler(Array.isArray(h)?h:r.util.parsePath(h)),r.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(h){var g,f=0,m=0,y=0,x=0,_=0,A=0,M=-this.pathOffset.x,T=-this.pathOffset.y;h.beginPath();for(var O=0,B=this.path.length;O<B;++O)switch(g=this.path[O],g[0]){case"L":y=g[1],x=g[2],h.lineTo(y+M,x+T);break;case"M":y=g[1],x=g[2],f=y,m=x,h.moveTo(y+M,x+T);break;case"C":y=g[5],x=g[6],_=g[3],A=g[4],h.bezierCurveTo(g[1]+M,g[2]+T,_+M,A+T,y+M,x+T);break;case"Q":h.quadraticCurveTo(g[1]+M,g[2]+T,g[3]+M,g[4]+T),y=g[3],x=g[4],_=g[1],A=g[2];break;case"z":case"Z":y=f,x=m,h.closePath();break}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return s(this.callSuper("toObject",h),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(h){var g=this.toObject(["sourcePath"].concat(h));return g.sourcePath&&delete g.path,g},_toSVG:function(){var h=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',h,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var h=r.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,h)+", "+n(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},toSVG:function(h){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var h=[],g=[],f,m=0,y=0,x=0,_=0,A,M=0,T=this.path.length;M<T;++M){switch(f=this.path[M],f[0]){case"L":x=f[1],_=f[2],A=[];break;case"M":x=f[1],_=f[2],m=x,y=_,A=[];break;case"C":A=r.util.getBoundsOfCurve(x,_,f[1],f[2],f[3],f[4],f[5],f[6]),x=f[5],_=f[6];break;case"Q":A=r.util.getBoundsOfCurve(x,_,f[1],f[2],f[1],f[2],f[3],f[4]),x=f[3],_=f[4];break;case"z":case"Z":x=m,_=y;break}A.forEach(function(G){h.push(G.x),g.push(G.y)}),h.push(x),g.push(_)}var O=c(h)||0,B=c(g)||0,X=u(h)||0,F=u(g)||0,I=X-O,K=F-B;return{left:O,top:B,width:I,height:K}}}),r.Path.fromObject=function(h,g){if(typeof h.sourcePath=="string"){var f=h.sourcePath;r.loadSVGFromURL(f,function(m){var y=m[0];y.setOptions(h),h.clipPath?r.util.enlivenObjects([h.clipPath],function(x){y.clipPath=x[0],g&&g(y)}):g&&g(y)})}else r.Object._fromObject("Path",h,g,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(h,g,f){var m=r.parseAttributes(h,r.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,g(new r.Path(m.d,s(m,f)))}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.array.min,u=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(s,l,n){l=l||{},this._objects=[],n&&this.callSuper("initialize",l),this._objects=s||[];for(var h=this._objects.length;h--;)this._objects[h].group=this;if(n)this._updateObjectsACoords();else{var g=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var s=!0,l=this._objects.length;l--;)this._objects[l].setCoords(s)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],l)},_updateObjectCoords:function(s,l){var n=s.left,h=s.top,g=!0;s.set({left:n-l.x,top:h-l.y}),s.group=this,s.setCoords(g)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(s){var l=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),s&&(l&&r.util.removeTransformFromObject(s,this.group.calcTransformMatrix()),this._objects.push(s),s.group=this,s._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(s){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(s),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(s){this.dirty=!0,s.group=this,s._set("canvas",this.canvas)},_onObjectRemoved:function(s){this.dirty=!0,delete s.group},_set:function(s,l){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(s,l);if(s==="canvas")for(;n--;)this._objects[n]._set(s,l);r.Object.prototype._set.call(this,s,l)},toObject:function(s){var l=this.includeDefaultValues,n=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var f=g.includeDefaultValues;g.includeDefaultValues=l;var m=g.toObject(s);return g.includeDefaultValues=f,m}),h=r.Object.prototype.toObject.call(this,s);return h.objects=n,h},toDatalessObject:function(s){var l,n=this.sourcePath;if(n)l=n;else{var h=this.includeDefaultValues;l=this._objects.map(function(f){var m=f.includeDefaultValues;f.includeDefaultValues=h;var y=f.toDatalessObject(s);return f.includeDefaultValues=m,y})}var g=r.Object.prototype.toDatalessObject.call(this,s);return g.objects=l,g},render:function(s){this._transformDone=!0,this.callSuper("render",s),this._transformDone=!1},shouldCache:function(){var s=r.Object.prototype.shouldCache.call(this);if(s){for(var l=0,n=this._objects.length;l<n;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return s},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var s=0,l=this._objects.length;s<l;s++)if(this._objects[s].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(s){for(var l=0,n=this._objects.length;l<n;l++)this._objects[l].render(s);this._drawClipPath(s,this.clipPath)},isCacheDirty:function(s){if(this.callSuper("isCacheDirty",s))return!0;if(!this.statefullCache)return!1;for(var l=0,n=this._objects.length;l<n;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var h=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-g/2,h,g)}return!0}return!1},_restoreObjectsState:function(){var s=this.calcOwnMatrix();return this._objects.forEach(function(l){r.util.addTransformToObject(l,s),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(s){s.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var s=this._objects,l=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var h=new r.ActiveSelection([]);return h.set(n),h.type="activeSelection",l.remove(this),s.forEach(function(g){g.group=h,g.dirty=!0,l.add(g)}),h.canvas=l,h._objects=s,l._activeObject=h,h.setCoords(),h}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var s=!0;return this.forEachObject(function(l){l.setCoords(s)}),this},_calcBounds:function(s){for(var l=[],n=[],h,g,f,m=["tr","br","bl","tl"],y=0,x=this._objects.length,_,A=m.length;y<x;++y){for(h=this._objects[y],f=h.calcACoords(),_=0;_<A;_++)g=m[_],l.push(f[g].x),n.push(f[g].y);h.aCoords=f}this._getBounds(l,n,s)},_getBounds:function(s,l,n){var h=new r.Point(c(s),c(l)),g=new r.Point(u(s),u(l)),f=h.y||0,m=h.x||0,y=g.x-h.x||0,x=g.y-h.y||0;this.width=y,this.height=x,n||this.setPositionByOrigin({x:m,y:f},"left","top")},_toSVG:function(s){for(var l=["<g ","COMMON_PARTS",` >
`],n=0,h=this._objects.length;n<h;n++)l.push("		",this._objects[n].toSVG(s));return l.push(`</g>
`),l},getSvgStyles:function(){var s=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[s,this.getSvgFilter(),l].join("")},toClipPathSVG:function(s){for(var l=[],n=0,h=this._objects.length;n<h;n++)l.push("	",this._objects[n].toClipPathSVG(s));return this._createBaseClipPathSVGMarkup(l,{reviver:s})}}),r.Group.fromObject=function(s,l){var n=s.objects,h=r.util.object.clone(s,!0);if(delete h.objects,typeof n=="string"){r.loadSVGFromURL(n,function(g){var f=r.util.groupSVGElements(g,s,n),m=h.clipPath;delete h.clipPath,f.set(h),m?r.util.enlivenObjects([m],function(y){f.clipPath=y[0],l&&l(f)}):l&&l(f)});return}r.util.enlivenObjects(n,function(g){r.util.enlivenObjectEnlivables(s,h,function(){l&&l(new r.Group(g,h,!0))})})})}(e),function(o){var r=o.fabric||(o.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(c,u){u=u||{},this._objects=c||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var u=r.Object.prototype.toObject.call(this),s=new r.Group([]);if(delete u.type,s.set(u),c.forEach(function(n){n.canvas.remove(n),n.group=s}),s._objects=c,!this.canvas)return s;var l=this.canvas;return l.add(s),l._activeObject=s,s.setCoords(),s},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,u,s){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,s=s||{},typeof s.hasControls>"u"&&(s.hasControls=!1),s.forActiveSelection=!0;for(var l=0,n=this._objects.length;l<n;l++)this._objects[l]._renderControls(c,s);this.callSuper("_renderControls",c,u),c.restore()}}),r.ActiveSelection.fromObject=function(c,u){r.util.enlivenObjects(c.objects,function(s){delete c.objects,u&&u(new r.ActiveSelection(s,c,!0))})})}(e),function(o){var r=t.util.object.extend;if(o.fabric||(o.fabric={}),o.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,u){u||(u={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",u),this._initElement(c,u)},getElement:function(){return this._element||{}},setElement:function(c,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var u=t.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,s=this.height/2;c.beginPath(),c.moveTo(-u,-s),c.lineTo(u,-s),c.lineTo(u,s),c.lineTo(-u,s),c.lineTo(-u,-s),c.closePath()}},toObject:function(c){var u=[];this.filters.forEach(function(l){l&&u.push(l.toObject())});var s=r(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(s.resizeFilter=this.resizeFilter.toObject()),s},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],u=[],s,l=this._element,n=-this.width/2,h=-this.height/2,g="",f="";if(!l)return[];if(this.hasCrop()){var m=t.Object.__uid++;c.push('<clipPath id="imageCrop_'+m+`">
`,'	<rect x="'+n+'" y="'+h+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),g=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(f='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',h-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,f,'"',g,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,s=["	<rect ",'x="',n,'" y="',h,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?c=c.concat(s,u):c=c.concat(u,s),c},getSrc:function(c){var u=c?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(c,u,s){return t.util.loadImage(c,function(l,n){this.setElement(l,s),this._setWidthHeight(),u&&u(this,n)},this,s&&s.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,u=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),l=s.scaleX,n=s.scaleY,h=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||l>u&&n>u){this._element=h,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=n;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var g=t.util.createCanvasElement(),f=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=h.width,y=h.height;g.width=m,g.height=y,this._element=g,this._lastScaleX=c.scaleX=l,this._lastScaleY=c.scaleY=n,t.filterBackend.applyFilters([c],h,m,y,this._element,f),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(h){return h&&!h.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,s=u.naturalWidth||u.width,l=u.naturalHeight||u.height;if(this._element===this._originalElement){var n=t.util.createCanvasElement();n.width=s,n.height=l,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,l),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(c,this._originalElement,s,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var u=this._element;if(u){var s=this._filterScalingX,l=this._filterScalingY,n=this.width,h=this.height,g=Math.min,f=Math.max,m=f(this.cropX,0),y=f(this.cropY,0),x=u.naturalWidth||u.width,_=u.naturalHeight||u.height,A=m*s,M=y*l,T=g(n*s,x-A),O=g(h*l,_-M),B=-n/2,X=-h/2,F=g(n,x/s-m),I=g(h,_/l-y);u&&c.drawImage(u,A,M,T,O,B,X,F,I)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,u){this.setElement(t.util.getById(c),u),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,u){c&&c.length?t.util.enlivenObjects(c,function(s){u&&u(s)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(c){c||(c={});var u=this.getElement();this.width=c.width||u.naturalWidth||u.width||0,this.height=c.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var c=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,s=this._element.height,l=1,n=1,h=0,g=0,f=0,m=0,y,x=this.width,_=this.height,A={width:x,height:_};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(l=n=t.util.findScaleToFit(this._element,A),y=(x-u*l)/2,c.alignX==="Min"&&(h=-y),c.alignX==="Max"&&(h=y),y=(_-s*n)/2,c.alignY==="Min"&&(g=-y),c.alignY==="Max"&&(g=y)),c.meetOrSlice==="slice"&&(l=n=t.util.findScaleToCover(this._element,A),y=u-x/l,c.alignX==="Mid"&&(f=y/2),c.alignX==="Max"&&(f=y),y=s-_/n,c.alignY==="Mid"&&(m=y/2),c.alignY==="Max"&&(m=y),u=x/l,s=_/n)):(l=x/u,n=_/s),{width:u,height:s,scaleX:l,scaleY:n,offsetLeft:h,offsetTop:g,cropX:f,cropY:m}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(c,u){var s=t.util.object.clone(c);t.util.loadImage(s.src,function(l,n){if(n){u&&u(null,!0);return}t.Image.prototype._initFilters.call(s,s.filters,function(h){s.filters=h||[],t.Image.prototype._initFilters.call(s,[s.resizeFilter],function(g){s.resizeFilter=g[0],t.util.enlivenObjectEnlivables(s,s,function(){var f=new t.Image(l,s);u(f,!1)})})})},null,s.crossOrigin)},t.Image.fromURL=function(c,u,s){t.util.loadImage(c,function(l,n){u&&u(new t.Image(l,s),n)},null,s&&s.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(c,u,s){var l=t.parseAttributes(c,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(l["xlink:href"],u,r(s?t.util.object.clone(s):{},l))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var o=this.angle%360;return o>0?Math.round((o-1)/90)*90:Math.round(o/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(o){o=o||{};var r=function(){},c=o.onComplete||r,u=o.onChange||r,s=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){s.rotate(l),u()},onComplete:function(){s.setCoords(),c()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(o){return o.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(o){return o.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function o(c,u){var s="precision "+u+` float;
void main(){}`,l=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(l,s),c.compileShader(l),!!c.getShaderParameter(l,c.COMPILE_STATUS)}t.isWebglSupported=function(c){if(t.isLikelyNode)return!1;c=c||t.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),s=u.getContext("webgl")||u.getContext("experimental-webgl"),l=!1;if(s){t.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),l=t.maxTextureSize>=c;for(var n=["highp","mediump","lowp"],h=0;h<3;h++)if(o(s,n[h])){t.webGlPrecision=n[h];break}}return this.isSupported=l,l},t.WebglFilterBackend=r;function r(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(c,u){this.dispose(),this.createWebGLCanvas(c,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,u)},chooseFastestCopyGLTo2DMethod:function(c,u){var s=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var n=typeof ArrayBuffer<"u",h=typeof Uint8ClampedArray<"u";if(s&&l&&n&&h){var g=t.util.createCanvasElement(),f=new ArrayBuffer(c*u*4);if(t.forceGLPutImageData){this.imageBuffer=f,this.copyGLTo2D=v;return}var m={imageBuffer:f,destinationWidth:c,destinationHeight:u,targetCanvas:g},y,x,_;g.width=c,g.height=u,y=window.performance.now(),p.call(m,this.gl,m),x=window.performance.now()-y,y=window.performance.now(),v.call(m,this.gl,m),_=window.performance.now()-y,x>_?(this.imageBuffer=f,this.copyGLTo2D=v):this.copyGLTo2D=p}},createWebGLCanvas:function(c,u){var s=t.util.createCanvasElement();s.width=c,s.height=u;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=s.getContext("webgl",l);n||(n=s.getContext("experimental-webgl",l)),n&&(n.clearColor(0,0,0,0),this.canvas=s,this.gl=n)},applyFilters:function(c,u,s,l,n,h){var g=this.gl,f;h&&(f=this.getCachedTexture(h,u));var m={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:s,sourceHeight:l,destinationWidth:s,destinationHeight:l,context:g,sourceTexture:this.createTexture(g,s,l,!f&&u),targetTexture:this.createTexture(g,s,l),originalTexture:f||this.createTexture(g,s,l,!f&&u),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},y=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,y),c.forEach(function(x){x&&x.applyTo(m)}),d(m),this.copyGLTo2D(g,m),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(m.sourceTexture),g.deleteTexture(m.targetTexture),g.deleteFramebuffer(y),n.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,u,s,l,n){var h=c.createTexture();return c.bindTexture(c.TEXTURE_2D,h),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,n||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,n||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),l?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,l):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,u,s,0,c.RGBA,c.UNSIGNED_BYTE,null),h},getCachedTexture:function(c,u){if(this.textureCache[c])return this.textureCache[c];var s=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[c]=s,s},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:p,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,u={renderer:"",vendor:""};if(!c)return u;var s=c.getExtension("WEBGL_debug_renderer_info");if(s){var l=c.getParameter(s.UNMASKED_RENDERER_WEBGL),n=c.getParameter(s.UNMASKED_VENDOR_WEBGL);l&&(u.renderer=l.toLowerCase()),n&&(u.vendor=n.toLowerCase())}return this.gpuInfo=u,u}}}();function d(o){var r=o.targetCanvas,c=r.width,u=r.height,s=o.destinationWidth,l=o.destinationHeight;(c!==s||u!==l)&&(r.width=s,r.height=l)}function p(o,r){var c=o.canvas,u=r.targetCanvas,s=u.getContext("2d");s.translate(0,u.height),s.scale(1,-1);var l=c.height-u.height;s.drawImage(c,0,l,u.width,u.height,0,0,u.width,u.height)}function v(o,r){var c=r.targetCanvas,u=c.getContext("2d"),s=r.destinationWidth,l=r.destinationHeight,n=s*l*4,h=new Uint8Array(this.imageBuffer,0,n),g=new Uint8ClampedArray(this.imageBuffer,0,n);o.readPixels(0,0,s,l,o.RGBA,o.UNSIGNED_BYTE,h);var f=new ImageData(g,s,l);u.putImageData(f,0,0)}(function(){var o=function(){};t.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:o,dispose:o,clearWebGLCaches:o,resources:{},applyFilters:function(c,u,s,l,n){var h=n.getContext("2d");h.drawImage(u,0,0,s,l);var g=h.getImageData(0,0,s,l),f=h.getImageData(0,0,s,l),m={sourceWidth:s,sourceHeight:l,imageData:g,originalEl:u,originalImageData:f,canvasEl:n,ctx:h,filterBackend:this};return c.forEach(function(y){y.applyTo(m)}),(m.imageData.width!==s||m.imageData.height!==l)&&(n.width=m.imageData.width,n.height=m.imageData.height),h.putImageData(m.imageData,0,0),m}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(o){o&&this.setOptions(o)},setOptions:function(o){for(var r in o)this[r]=o[r]},createProgram:function(o,r,c){r=r||this.fragmentSource,c=c||this.vertexSource,t.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var u=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(u,c),o.compileShader(u),!o.getShaderParameter(u,o.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+o.getShaderInfoLog(u));var s=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(s,r),o.compileShader(s),!o.getShaderParameter(s,o.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+o.getShaderInfoLog(s));var l=o.createProgram();if(o.attachShader(l,u),o.attachShader(l,s),o.linkProgram(l),!o.getProgramParameter(l,o.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+o.getProgramInfoLog(l));var n=this.getAttributeLocations(o,l),h=this.getUniformLocations(o,l)||{};return h.uStepW=o.getUniformLocation(l,"uStepW"),h.uStepH=o.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:n,uniformLocations:h}},getAttributeLocations:function(o,r){return{aPosition:o.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(o,r,c){var u=r.aPosition,s=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,s),o.enableVertexAttribArray(u),o.vertexAttribPointer(u,2,o.FLOAT,!1,0,0),o.bufferData(o.ARRAY_BUFFER,c,o.STATIC_DRAW)},_setupFrameBuffer:function(o){var r=o.context,c,u;o.passes>1?(c=o.destinationWidth,u=o.destinationHeight,(o.sourceWidth!==c||o.sourceHeight!==u)&&(r.deleteTexture(o.targetTexture),o.targetTexture=o.filterBackend.createTexture(r,c,u)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(o){o.passes--,o.pass++;var r=o.targetTexture;o.targetTexture=o.sourceTexture,o.sourceTexture=r},isNeutralState:function(){var o=this.mainParameter,r=t.Image.filters[this.type].prototype;if(o)if(Array.isArray(r[o])){for(var c=r[o].length;c--;)if(this[o][c]!==r[o][c])return!1;return!0}else return r[o]===this[o];else return!1},applyTo:function(o){o.webgl?(this._setupFrameBuffer(o),this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},retrieveShader:function(o){return o.programCache.hasOwnProperty(this.type)||(o.programCache[this.type]=this.createProgram(o.context)),o.programCache[this.type]},applyToWebGL:function(o){var r=o.context,c=this.retrieveShader(o);o.pass===0&&o.originalTexture?r.bindTexture(r.TEXTURE_2D,o.originalTexture):r.bindTexture(r.TEXTURE_2D,o.sourceTexture),r.useProgram(c.program),this.sendAttributeData(r,c.attributeLocations,o.aPosition),r.uniform1f(c.uniformLocations.uStepW,1/o.sourceWidth),r.uniform1f(c.uniformLocations.uStepH,1/o.sourceHeight),this.sendUniformData(r,c.uniformLocations),r.viewport(0,0,o.destinationWidth,o.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(o,r,c){o.activeTexture(c),o.bindTexture(o.TEXTURE_2D,r),o.activeTexture(o.TEXTURE0)},unbindAdditionalTexture:function(o,r){o.activeTexture(r),o.bindTexture(o.TEXTURE_2D,null),o.activeTexture(o.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(o){this[this.mainParameter]=o},sendUniformData:function(){},createHelpLayer:function(o){if(!o.helpLayer){var r=document.createElement("canvas");r.width=o.sourceWidth,r.height=o.sourceHeight,o.helpLayer=r}},toObject:function(){var o={type:this.type},r=this.mainParameter;return r&&(o[r]=this[r]),o},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(o,r){var c=new t.Image.filters[o.type](o);return r&&r(c),c},function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.ColorMatrix=u(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(s){this.callSuper("initialize",s),this.matrix=this.matrix.slice(0)},applyTo2d:function(s){var l=s.imageData,n=l.data,h=n.length,g=this.matrix,f,m,y,x,_,A=this.colorsOnly;for(_=0;_<h;_+=4)f=n[_],m=n[_+1],y=n[_+2],A?(n[_]=f*g[0]+m*g[1]+y*g[2]+g[4]*255,n[_+1]=f*g[5]+m*g[6]+y*g[7]+g[9]*255,n[_+2]=f*g[10]+m*g[11]+y*g[12]+g[14]*255):(x=n[_+3],n[_]=f*g[0]+m*g[1]+y*g[2]+x*g[3]+g[4]*255,n[_+1]=f*g[5]+m*g[6]+y*g[7]+x*g[8]+g[9]*255,n[_+2]=f*g[10]+m*g[11]+y*g[12]+x*g[13]+g[14]*255,n[_+3]=f*g[15]+m*g[16]+y*g[17]+x*g[18]+g[19]*255)},getUniformLocations:function(s,l){return{uColorMatrix:s.getUniformLocation(l,"uColorMatrix"),uConstants:s.getUniformLocation(l,"uConstants")}},sendUniformData:function(s,l){var n=this.matrix,h=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],g=[n[4],n[9],n[14],n[19]];s.uniformMatrix4fv(l.uColorMatrix,!1,h),s.uniform4fv(l.uConstants,g)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Brightness=u(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(s){if(this.brightness!==0){var l=s.imageData,n=l.data,h,g=n.length,f=Math.round(this.brightness*255);for(h=0;h<g;h+=4)n[h]=n[h]+f,n[h+1]=n[h+1]+f,n[h+2]=n[h+2]+f}},getUniformLocations:function(s,l){return{uBrightness:s.getUniformLocation(l,"uBrightness")}},sendUniformData:function(s,l){s.uniform1f(l.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.Image.filters,s=r.util.createClass;u.Convolute=s(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var n=Math.sqrt(this.matrix.length),h=this.type+"_"+n+"_"+(this.opaque?1:0),g=this.fragmentSource[h];return l.programCache.hasOwnProperty(h)||(l.programCache[h]=this.createProgram(l.context,g)),l.programCache[h]},applyTo2d:function(l){var n=l.imageData,h=n.data,g=this.matrix,f=Math.round(Math.sqrt(g.length)),m=Math.floor(f/2),y=n.width,x=n.height,_=l.ctx.createImageData(y,x),A=_.data,M=this.opaque?1:0,T,O,B,X,F,I,K,G,rt,at,gt,nt,E;for(gt=0;gt<x;gt++)for(at=0;at<y;at++){for(F=(gt*y+at)*4,T=0,O=0,B=0,X=0,E=0;E<f;E++)for(nt=0;nt<f;nt++)K=gt+E-m,I=at+nt-m,!(K<0||K>=x||I<0||I>=y)&&(G=(K*y+I)*4,rt=g[E*f+nt],T+=h[G]*rt,O+=h[G+1]*rt,B+=h[G+2]*rt,M||(X+=h[G+3]*rt));A[F]=T,A[F+1]=O,A[F+2]=B,M?A[F+3]=h[F+3]:A[F+3]=X}l.imageData=_},getUniformLocations:function(l,n){return{uMatrix:l.getUniformLocation(n,"uMatrix"),uOpaque:l.getUniformLocation(n,"uOpaque"),uHalfSize:l.getUniformLocation(n,"uHalfSize"),uSize:l.getUniformLocation(n,"uSize")}},sendUniformData:function(l,n){l.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Grayscale=u(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(s){var l=s.imageData,n=l.data,h,g=n.length,f,m=this.mode;for(h=0;h<g;h+=4)m==="average"?f=(n[h]+n[h+1]+n[h+2])/3:m==="lightness"?f=(Math.min(n[h],n[h+1],n[h+2])+Math.max(n[h],n[h+1],n[h+2]))/2:m==="luminosity"&&(f=.21*n[h]+.72*n[h+1]+.07*n[h+2]),n[h]=f,n[h+1]=f,n[h+2]=f},retrieveShader:function(s){var l=this.type+"_"+this.mode;if(!s.programCache.hasOwnProperty(l)){var n=this.fragmentSource[this.mode];s.programCache[l]=this.createProgram(s.context,n)}return s.programCache[l]},getUniformLocations:function(s,l){return{uMode:s.getUniformLocation(l,"uMode")}},sendUniformData:function(s,l){var n=1;s.uniform1i(l.uMode,n)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Invert=u(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(s){var l=s.imageData,n=l.data,h,g=n.length;for(h=0;h<g;h+=4)n[h]=255-n[h],n[h+1]=255-n[h+1],n[h+2]=255-n[h+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(s,l){return{uInvert:s.getUniformLocation(l,"uInvert")}},sendUniformData:function(s,l){s.uniform1i(l.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.Image.filters,s=r.util.createClass;u.Noise=s(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var n=l.imageData,h=n.data,g,f=h.length,m=this.noise,y;for(g=0,f=h.length;g<f;g+=4)y=(.5-Math.random())*m,h[g]+=y,h[g+1]+=y,h[g+2]+=y}},getUniformLocations:function(l,n){return{uNoise:l.getUniformLocation(n,"uNoise"),uSeed:l.getUniformLocation(n,"uSeed")}},sendUniformData:function(l,n){l.uniform1f(n.uNoise,this.noise/255),l.uniform1f(n.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Pixelate=u(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(s){var l=s.imageData,n=l.data,h=l.height,g=l.width,f,m,y,x,_,A,M,T,O,B,X;for(m=0;m<h;m+=this.blocksize)for(y=0;y<g;y+=this.blocksize)for(f=m*4*g+y*4,x=n[f],_=n[f+1],A=n[f+2],M=n[f+3],B=Math.min(m+this.blocksize,h),X=Math.min(y+this.blocksize,g),T=m;T<B;T++)for(O=y;O<X;O++)f=T*4*g+O*4,n[f]=x,n[f+1]=_,n[f+2]=A,n[f+3]=M},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(s,l){return{uBlocksize:s.getUniformLocation(l,"uBlocksize"),uStepW:s.getUniformLocation(l,"uStepW"),uStepH:s.getUniformLocation(l,"uStepH")}},sendUniformData:function(s,l){s.uniform1f(l.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.extend,u=r.Image.filters,s=r.util.createClass;u.RemoveColor=s(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var n=l.imageData,h=n.data,g,f=this.distance*255,m,y,x,_=new r.Color(this.color).getSource(),A=[_[0]-f,_[1]-f,_[2]-f],M=[_[0]+f,_[1]+f,_[2]+f];for(g=0;g<h.length;g+=4)m=h[g],y=h[g+1],x=h[g+2],m>A[0]&&y>A[1]&&x>A[2]&&m<M[0]&&y<M[1]&&x<M[2]&&(h[g+3]=0)},getUniformLocations:function(l,n){return{uLow:l.getUniformLocation(n,"uLow"),uHigh:l.getUniformLocation(n,"uHigh")}},sendUniformData:function(l,n){var h=new r.Color(this.color).getSource(),g=parseFloat(this.distance),f=[0+h[0]/255-g,0+h[1]/255-g,0+h[2]/255-g,1],m=[h[0]/255+g,h[1]/255+g,h[2]/255+g,1];l.uniform4fv(n.uLow,f),l.uniform4fv(n.uHigh,m)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass,s={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in s)c[l]=u(c.ColorMatrix,{type:l,matrix:s[l],mainParameter:!1,colorsOnly:!0}),r.Image.filters[l].fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric,c=r.Image.filters,u=r.util.createClass;c.BlendColor=u(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(s){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[s]+`}
}`},retrieveShader:function(s){var l=this.type+"_"+this.mode,n;return s.programCache.hasOwnProperty(l)||(n=this.buildSource(this.mode),s.programCache[l]=this.createProgram(s.context,n)),s.programCache[l]},applyTo2d:function(s){var l=s.imageData,n=l.data,h=n.length,g,f,m,y,x,_,A,M=1-this.alpha;A=new r.Color(this.color).getSource(),g=A[0]*this.alpha,f=A[1]*this.alpha,m=A[2]*this.alpha;for(var T=0;T<h;T+=4)switch(y=n[T],x=n[T+1],_=n[T+2],this.mode){case"multiply":n[T]=y*g/255,n[T+1]=x*f/255,n[T+2]=_*m/255;break;case"screen":n[T]=255-(255-y)*(255-g)/255,n[T+1]=255-(255-x)*(255-f)/255,n[T+2]=255-(255-_)*(255-m)/255;break;case"add":n[T]=y+g,n[T+1]=x+f,n[T+2]=_+m;break;case"diff":case"difference":n[T]=Math.abs(y-g),n[T+1]=Math.abs(x-f),n[T+2]=Math.abs(_-m);break;case"subtract":n[T]=y-g,n[T+1]=x-f,n[T+2]=_-m;break;case"darken":n[T]=Math.min(y,g),n[T+1]=Math.min(x,f),n[T+2]=Math.min(_,m);break;case"lighten":n[T]=Math.max(y,g),n[T+1]=Math.max(x,f),n[T+2]=Math.max(_,m);break;case"overlay":n[T]=g<128?2*y*g/255:255-2*(255-y)*(255-g)/255,n[T+1]=f<128?2*x*f/255:255-2*(255-x)*(255-f)/255,n[T+2]=m<128?2*_*m/255:255-2*(255-_)*(255-m)/255;break;case"exclusion":n[T]=g+y-2*g*y/255,n[T+1]=f+x-2*f*x/255,n[T+2]=m+_-2*m*_/255;break;case"tint":n[T]=g+y*M,n[T+1]=f+x*M,n[T+2]=m+_*M}},getUniformLocations:function(s,l){return{uColor:s.getUniformLocation(l,"uColor")}},sendUniformData:function(s,l){var n=new r.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,s.uniform4fv(l.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric,c=r.Image.filters,u=r.util.createClass;c.BlendImage=u(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(s){var l=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return s.programCache.hasOwnProperty(l)||(s.programCache[l]=this.createProgram(s.context,n)),s.programCache[l]},applyToWebGL:function(s){var l=s.context,n=this.createTexture(s.filterBackend,this.image);this.bindAdditionalTexture(l,n,l.TEXTURE1),this.callSuper("applyToWebGL",s),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(s,l){return s.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var s=this.image,l=s._element.width,n=s._element.height;return[1/s.scaleX,0,0,0,1/s.scaleY,0,-s.left/l,-s.top/n,1]},applyTo2d:function(s){var l=s.imageData,n=s.filterBackend.resources,h=l.data,g=h.length,f=l.width,m=l.height,y,x,_,A,M,T,O,B,X,F,I=this.image,K;n.blendImage||(n.blendImage=r.util.createCanvasElement()),X=n.blendImage,F=X.getContext("2d"),X.width!==f||X.height!==m?(X.width=f,X.height=m):F.clearRect(0,0,f,m),F.setTransform(I.scaleX,0,0,I.scaleY,I.left,I.top),F.drawImage(I._element,0,0,f,m),K=F.getImageData(0,0,f,m).data;for(var G=0;G<g;G+=4)switch(M=h[G],T=h[G+1],O=h[G+2],B=h[G+3],y=K[G],x=K[G+1],_=K[G+2],A=K[G+3],this.mode){case"multiply":h[G]=M*y/255,h[G+1]=T*x/255,h[G+2]=O*_/255,h[G+3]=B*A/255;break;case"mask":h[G+3]=A;break}},getUniformLocations:function(s,l){return{uTransformMatrix:s.getUniformLocation(l,"uTransformMatrix"),uImage:s.getUniformLocation(l,"uImage")}},sendUniformData:function(s,l){var n=this.calculateMatrix();s.uniform1i(l.uImage,1),s.uniformMatrix3fv(l.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(s,l){r.Image.fromObject(s.image,function(n){var h=r.util.object.clone(s);h.image=n,l(new r.Image.filters.BlendImage(h))})}}(e),function(o){var r=o.fabric||(o.fabric={}),c=Math.pow,u=Math.floor,s=Math.sqrt,l=Math.abs,n=Math.round,h=Math.sin,g=Math.ceil,f=r.Image.filters,m=r.util.createClass;f.Resize=m(f.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,x){return{uDelta:y.getUniformLocation(x,"uDelta"),uTaps:y.getUniformLocation(x,"uTaps")}},sendUniformData:function(y,x){y.uniform2fv(x.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(x.uTaps,this.taps)},retrieveShader:function(y){var x=this.getFilterWindow(),_=this.type+"_"+x;if(!y.programCache.hasOwnProperty(_)){var A=this.generateShader(x);y.programCache[_]=this.createProgram(y.context,A)}return y.programCache[_]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),x=this.tempScale,_=this.getFilterWindow(),A=new Array(_),M=1;M<=_;M++)A[M-1]=y(M*x);return A},generateShader:function(A){for(var x=new Array(A),_=this.fragmentSourceTOP,A,M=1;M<=A;M++)x[M-1]=M+".0 * uDelta";return _+="uniform float uTaps["+A+`];
`,_+=`void main() {
`,_+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_+=`  float sum = 1.0;
`,x.forEach(function(T,O){_+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+O+`];
`,_+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+O+`];
`,_+="  sum += 2.0 * uTaps["+O+`];
`}),_+=`  gl_FragColor = color / sum;
`,_+="}",_},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(x){if(x>=y||x<=-y)return 0;if(x<11920929e-14&&x>-11920929e-14)return 1;x*=Math.PI;var _=x/y;return h(x)/x*h(_)/_}},applyTo2d:function(y){var x=y.imageData,_=this.scaleX,A=this.scaleY;this.rcpScaleX=1/_,this.rcpScaleY=1/A;var M=x.width,T=x.height,O=n(M*_),B=n(T*A),X;this.resizeType==="sliceHack"?X=this.sliceByTwo(y,M,T,O,B):this.resizeType==="hermite"?X=this.hermiteFastResize(y,M,T,O,B):this.resizeType==="bilinear"?X=this.bilinearFiltering(y,M,T,O,B):this.resizeType==="lanczos"&&(X=this.lanczosResize(y,M,T,O,B)),y.imageData=X},sliceByTwo:function(y,x,_,A,M){var T=y.imageData,O=.5,B=!1,X=!1,F=x*O,I=_*O,K=r.filterBackend.resources,G,rt,at=0,gt=0,nt=x,E=0;for(K.sliceByTwo||(K.sliceByTwo=document.createElement("canvas")),G=K.sliceByTwo,(G.width<x*1.5||G.height<_)&&(G.width=x*1.5,G.height=_),rt=G.getContext("2d"),rt.clearRect(0,0,x*1.5,_),rt.putImageData(T,0,0),A=u(A),M=u(M);!B||!X;)x=F,_=I,A<u(F*O)?F=u(F*O):(F=A,B=!0),M<u(I*O)?I=u(I*O):(I=M,X=!0),rt.drawImage(G,at,gt,x,_,nt,E,F,I),at=nt,gt=E,E+=I;return rt.getImageData(at,gt,A,M)},lanczosResize:function(y,x,_,A,M){function T(J){var k,R,N,P,U,$,tt,Q,ut,dt,St;for(E.x=(J+.5)*I,Y.x=u(E.x),k=0;k<M;k++){for(E.y=(k+.5)*K,Y.y=u(E.y),U=0,$=0,tt=0,Q=0,ut=0,R=Y.x-at;R<=Y.x+at;R++)if(!(R<0||R>=x)){dt=u(1e3*l(R-E.x)),nt[dt]||(nt[dt]={});for(var ot=Y.y-gt;ot<=Y.y+gt;ot++)ot<0||ot>=_||(St=u(1e3*l(ot-E.y)),nt[dt][St]||(nt[dt][St]=F(s(c(dt*G,2)+c(St*rt,2))/1e3)),N=nt[dt][St],N>0&&(P=(ot*x+R)*4,U+=N,$+=N*O[P],tt+=N*O[P+1],Q+=N*O[P+2],ut+=N*O[P+3]))}P=(k*A+J)*4,X[P]=$/U,X[P+1]=tt/U,X[P+2]=Q/U,X[P+3]=ut/U}return++J<A?T(J):B}var O=y.imageData.data,B=y.ctx.createImageData(A,M),X=B.data,F=this.lanczosCreate(this.lanczosLobes),I=this.rcpScaleX,K=this.rcpScaleY,G=2/this.rcpScaleX,rt=2/this.rcpScaleY,at=g(I*this.lanczosLobes/2),gt=g(K*this.lanczosLobes/2),nt={},E={},Y={};return T(0)},bilinearFiltering:function(y,x,_,A,M){var T,O,B,X,F,I,K,G,rt,at,gt,nt,E=0,Y,J=this.rcpScaleX,k=this.rcpScaleY,R=4*(x-1),N=y.imageData,P=N.data,U=y.ctx.createImageData(A,M),$=U.data;for(K=0;K<M;K++)for(G=0;G<A;G++)for(F=u(J*G),I=u(k*K),rt=J*G-F,at=k*K-I,Y=4*(I*x+F),gt=0;gt<4;gt++)T=P[Y+gt],O=P[Y+4+gt],B=P[Y+R+gt],X=P[Y+R+4+gt],nt=T*(1-rt)*(1-at)+O*rt*(1-at)+B*at*(1-rt)+X*rt*at,$[E++]=nt;return U},hermiteFastResize:function(y,x,_,A,M){for(var T=this.rcpScaleX,O=this.rcpScaleY,B=g(T/2),X=g(O/2),F=y.imageData,I=F.data,K=y.ctx.createImageData(A,M),G=K.data,rt=0;rt<M;rt++)for(var at=0;at<A;at++){for(var gt=(at+rt*A)*4,nt=0,E=0,Y=0,J=0,k=0,R=0,N=0,P=(rt+.5)*O,U=u(rt*O);U<(rt+1)*O;U++)for(var $=l(P-(U+.5))/X,tt=(at+.5)*T,Q=$*$,ut=u(at*T);ut<(at+1)*T;ut++){var dt=l(tt-(ut+.5))/B,St=s(Q+dt*dt);St>1&&St<-1||(nt=2*St*St*St-3*St*St+1,nt>0&&(dt=4*(ut+U*x),N+=nt*I[dt+3],Y+=nt,I[dt+3]<255&&(nt=nt*I[dt+3]/250),J+=nt*I[dt],k+=nt*I[dt+1],R+=nt*I[dt+2],E+=nt))}G[gt]=J/E,G[gt+1]=k/E,G[gt+2]=R/E,G[gt+3]=N/Y}return K},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Contrast=u(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(s){if(this.contrast!==0){var l=s.imageData,n,g,h=l.data,g=h.length,f=Math.floor(this.contrast*255),m=259*(f+255)/(255*(259-f));for(n=0;n<g;n+=4)h[n]=m*(h[n]-128)+128,h[n+1]=m*(h[n+1]-128)+128,h[n+2]=m*(h[n+2]-128)+128}},getUniformLocations:function(s,l){return{uContrast:s.getUniformLocation(l,"uContrast")}},sendUniformData:function(s,l){s.uniform1f(l.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Saturation=u(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(s){if(this.saturation!==0){var l=s.imageData,n=l.data,h=n.length,g=-this.saturation,f,m;for(f=0;f<h;f+=4)m=Math.max(n[f],n[f+1],n[f+2]),n[f]+=m!==n[f]?(m-n[f])*g:0,n[f+1]+=m!==n[f+1]?(m-n[f+1])*g:0,n[f+2]+=m!==n[f+2]?(m-n[f+2])*g:0}},getUniformLocations:function(s,l){return{uSaturation:s.getUniformLocation(l,"uSaturation")}},sendUniformData:function(s,l){s.uniform1f(l.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Vibrance=u(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(s){if(this.vibrance!==0){var l=s.imageData,n=l.data,h=n.length,g=-this.vibrance,f,m,y,x;for(f=0;f<h;f+=4)m=Math.max(n[f],n[f+1],n[f+2]),y=(n[f]+n[f+1]+n[f+2])/3,x=Math.abs(m-y)*2/255*g,n[f]+=m!==n[f]?(m-n[f])*x:0,n[f+1]+=m!==n[f+1]?(m-n[f+1])*x:0,n[f+2]+=m!==n[f+2]?(m-n[f+2])*x:0}},getUniformLocations:function(s,l){return{uVibrance:s.getUniformLocation(l,"uVibrance")}},sendUniformData:function(s,l){s.uniform1f(l.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Blur=u(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(s){s.webgl?(this.aspectRatio=s.sourceWidth/s.sourceHeight,s.passes++,this._setupFrameBuffer(s),this.horizontal=!0,this.applyToWebGL(s),this._swapTextures(s),this._setupFrameBuffer(s),this.horizontal=!1,this.applyToWebGL(s),this._swapTextures(s)):this.applyTo2d(s)},applyTo2d:function(s){s.imageData=this.simpleBlur(s)},simpleBlur:function(s){var l=s.filterBackend.resources,n,h,g=s.imageData.width,f=s.imageData.height;l.blurLayer1||(l.blurLayer1=r.util.createCanvasElement(),l.blurLayer2=r.util.createCanvasElement()),n=l.blurLayer1,h=l.blurLayer2,(n.width!==g||n.height!==f)&&(h.width=n.width=g,h.height=n.height=f);var m=n.getContext("2d"),y=h.getContext("2d"),x=15,_,A,M,T,O=this.blur*.06*.5;for(m.putImageData(s.imageData,0,0),y.clearRect(0,0,g,f),T=-15;T<=x;T++)_=(Math.random()-.5)/4,A=T/x,M=O*A*g+_,y.globalAlpha=1-Math.abs(A),y.drawImage(n,M,_),m.drawImage(h,0,0),y.globalAlpha=1,y.clearRect(0,0,h.width,h.height);for(T=-15;T<=x;T++)_=(Math.random()-.5)/4,A=T/x,M=O*A*f+_,y.globalAlpha=1-Math.abs(A),y.drawImage(n,_,M),m.drawImage(h,0,0),y.globalAlpha=1,y.clearRect(0,0,h.width,h.height);s.ctx.drawImage(n,0,0);var B=s.ctx.getImageData(0,0,n.width,n.height);return m.globalAlpha=1,m.clearRect(0,0,n.width,n.height),B},getUniformLocations:function(s,l){return{delta:s.getUniformLocation(l,"uDelta")}},sendUniformData:function(s,l){var n=this.chooseRightDelta();s.uniform2fv(l.delta,n)},chooseRightDelta:function(){var s=1,l=[0,0],n;return this.horizontal?this.aspectRatio>1&&(s=1/this.aspectRatio):this.aspectRatio<1&&(s=this.aspectRatio),n=s*this.blur*.12,this.horizontal?l[0]=n:l[1]=n,l}}),c.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Gamma=u(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(s){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,s)},applyTo2d:function(s){var l=s.imageData,n=l.data,h=this.gamma,g=n.length,f=1/h[0],m=1/h[1],y=1/h[2],x;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),x=0,g=256;x<g;x++)this.rVals[x]=Math.pow(x/255,f)*255,this.gVals[x]=Math.pow(x/255,m)*255,this.bVals[x]=Math.pow(x/255,y)*255;for(x=0,g=n.length;x<g;x+=4)n[x]=this.rVals[n[x]],n[x+1]=this.gVals[n[x+1]],n[x+2]=this.bVals[n[x+2]]},getUniformLocations:function(s,l){return{uGamma:s.getUniformLocation(l,"uGamma")}},sendUniformData:function(s,l){s.uniform3fv(l.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.Composed=u(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(s){this.callSuper("initialize",s),this.subFilters=this.subFilters.slice(0)},applyTo:function(s){s.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(s)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(s){return s.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(s){return!s.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(s,l){var n=s.subFilters||[],h=n.map(function(f){return new r.Image.filters[f.type](f)}),g=new r.Image.filters.Composed({subFilters:h});return l&&l(g),g}}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.Image.filters,u=r.util.createClass;c.HueRotation=u(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var s=this.rotation*Math.PI,l=r.util.cos(s),n=r.util.sin(s),h=1/3,g=Math.sqrt(h)*n,f=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+f/3,this.matrix[1]=h*f-g,this.matrix[2]=h*f+g,this.matrix[5]=h*f+g,this.matrix[6]=l+h*f,this.matrix[7]=h*f-g,this.matrix[10]=h*f-g,this.matrix[11]=h*f+g,this.matrix[12]=l+h*f},isNeutralState:function(s){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,s)},applyTo:function(s){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,s)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(o){var r=o.fabric||(o.fabric={}),c=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(u),cacheProperties:r.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(s,l){this.styles=l?l.styles||{}:{},this.text=s,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var s=this.path;s&&(s.segmentsInfo=r.util.getPathSegmentsInfo(s.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var s=this._splitTextIntoLines(this.text);return this.textLines=s.lines,this._textLines=s.graphemeLines,this._unwrappedTextLines=s._unwrappedLines,this._text=s.graphemeText,s},initDimensions:function(){if(!this.__skipDimension){if(this._splitText(),this._clearCache(),this.path){var s=this.getHeightOfLine(0)*1.1;this.width=this.path.width+s,this.height=this.path.height+s}else this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight();this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"})}},enlargeSpaces:function(){for(var s,l,n,h,g,f,m,y=0,x=this._textLines.length;y<x;y++)if(!(this.textAlign!=="justify"&&(y===x-1||this.isEndOfWrapping(y)))&&(h=0,g=this._textLines[y],l=this.getLineWidth(y),l<this.width&&(m=this.textLines[y].match(this._reSpacesAndTabs)))){n=m.length,s=(this.width-l)/n;for(var _=0,A=g.length;_<=A;_++)f=this.__charBounds[y][_],this._reSpaceAndTab.test(g[_])?(f.width+=s,f.kernedWidth+=s,f.left+=h,h+=s):f.left+=h}},isEndOfWrapping:function(s){return s===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var s=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return s.width+=l*s.zoomX,s.height+=l*s.zoomY,s},_render:function(s){var l=this.path;l&&!l.isNotVisible()&&l._render(s),this._setTextStyles(s),this._renderTextLinesBackground(s),this._renderTextDecoration(s,"underline"),this._renderText(s),this._renderTextDecoration(s,"overline"),this._renderTextDecoration(s,"linethrough")},_renderText:function(s){this.paintFirst==="stroke"?(this._renderTextStroke(s),this._renderTextFill(s)):(this._renderTextFill(s),this._renderTextStroke(s))},_setTextStyles:function(s,l,n){if(s.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":s.textBaseline="middle";break;case"ascender":s.textBaseline="top";break;case"descender":s.textBaseline="bottom";break}s.font=this._getFontDeclaration(l,n)},calcTextWidth:function(){for(var s=this.getLineWidth(0),l=1,n=this._textLines.length;l<n;l++){var h=this.getLineWidth(l);h>s&&(s=h)}return s},_renderTextLine:function(s,l,n,h,g,f){this._renderChars(s,l,n,h,g,f)},_renderTextLinesBackground:function(s){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,n,h=s.fillStyle,g,f,m=this._getLeftOffset(),y=this._getTopOffset(),x=0,_=0,A,M,T=this.path,O,B=0,X=this._textLines.length;B<X;B++){if(l=this.getHeightOfLine(B),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",B)){y+=l;continue}g=this._textLines[B],n=this._getLineLeftOffset(B),_=0,x=0,f=this.getValueOfPropertyAt(B,0,"textBackgroundColor");for(var F=0,I=g.length;F<I;F++)A=this.__charBounds[B][F],M=this.getValueOfPropertyAt(B,F,"textBackgroundColor"),T?(s.save(),s.translate(A.renderLeft,A.renderTop),s.rotate(A.angle),s.fillStyle=M,M&&s.fillRect(-A.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),A.width,l/this.lineHeight),s.restore()):M!==f?(O=m+n+x,this.direction==="rtl"&&(O=this.width-O-_),s.fillStyle=f,f&&s.fillRect(O,y,_,l/this.lineHeight),x=A.left,_=A.width,f=M):_+=A.kernedWidth;M&&!T&&(O=m+n+x,this.direction==="rtl"&&(O=this.width-O-_),s.fillStyle=M,s.fillRect(O,y,_,l/this.lineHeight)),y+=l}s.fillStyle=h,this._removeShadow(s)}},getFontCache:function(s){var l=s.fontFamily.toLowerCase();r.charWidthsCache[l]||(r.charWidthsCache[l]={});var n=r.charWidthsCache[l],h=s.fontStyle.toLowerCase()+"_"+(s.fontWeight+"").toLowerCase();return n[h]||(n[h]={}),n[h]},_measureChar:function(s,l,n,h){var g=this.getFontCache(l),f=this._getFontDeclaration(l),m=this._getFontDeclaration(h),y=n+s,x=f===m,_,A,M,T=l.fontSize/this.CACHE_FONT_SIZE,O;if(n&&g[n]!==void 0&&(M=g[n]),g[s]!==void 0&&(O=_=g[s]),x&&g[y]!==void 0&&(A=g[y],O=A-M),_===void 0||M===void 0||A===void 0){var B=this.getMeasuringContext();this._setTextStyles(B,l,!0)}return _===void 0&&(O=_=B.measureText(s).width,g[s]=_),M===void 0&&x&&n&&(M=B.measureText(n).width,g[n]=M),x&&A===void 0&&(A=B.measureText(y).width,g[y]=A,O=A-M),{width:_*T,kernedWidth:O*T}},getHeightOfChar:function(s,l){return this.getValueOfPropertyAt(s,l,"fontSize")},measureLine:function(s){var l=this._measureLine(s);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(s){var l=0,n,h,g=this._textLines[s],f,m,y=0,x=new Array(g.length),_=0,A,M,T=this.path,O=this.pathSide==="right";for(this.__charBounds[s]=x,n=0;n<g.length;n++)h=g[n],m=this._getGraphemeBox(h,s,n,f),x[n]=m,l+=m.kernedWidth,f=h;if(x[n]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},T){switch(M=T.segmentsInfo[T.segmentsInfo.length-1].length,A=r.util.getPointOnPath(T.path,0,T.segmentsInfo),A.x+=T.pathOffset.x,A.y+=T.pathOffset.y,this.textAlign){case"left":_=O?M-l:0;break;case"center":_=(M-l)/2;break;case"right":_=O?0:M-l;break}for(_+=this.pathStartOffset*(O?-1:1),n=O?g.length-1:0;O?n>=0:n<g.length;O?n--:n++)m=x[n],_>M?_%=M:_<0&&(_+=M),this._setGraphemeOnPath(_,m,A),_+=m.kernedWidth}return{width:l,numOfSpaces:y}},_setGraphemeOnPath:function(s,l,n){var h=s+l.kernedWidth/2,g=this.path,f=r.util.getPointOnPath(g.path,h,g.segmentsInfo);l.renderLeft=f.x-n.x,l.renderTop=f.y-n.y,l.angle=f.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(s,l,n,h,g){var f=this.getCompleteStyleDeclaration(l,n),m=h?this.getCompleteStyleDeclaration(l,n-1):{},y=this._measureChar(s,f,h,m),x=y.kernedWidth,_=y.width,A;this.charSpacing!==0&&(A=this._getWidthOfCharSpacing(),_+=A,x+=A);var M={width:_,left:0,height:f.fontSize,kernedWidth:x,deltaY:f.deltaY};if(n>0&&!g){var T=this.__charBounds[l][n-1];M.left=T.left+T.width+y.kernedWidth-y.width}return M},getHeightOfLine:function(s){if(this.__lineHeights[s])return this.__lineHeights[s];for(var l=this._textLines[s],n=this.getHeightOfChar(s,0),h=1,g=l.length;h<g;h++)n=Math.max(this.getHeightOfChar(s,h),n);return this.__lineHeights[s]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var s,l=0,n=0,h=this._textLines.length;n<h;n++)s=this.getHeightOfLine(n),l+=n===h-1?s/this.lineHeight:s;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(s,l){s.save();for(var n=0,h=this._getLeftOffset(),g=this._getTopOffset(),f=0,m=this._textLines.length;f<m;f++){var y=this.getHeightOfLine(f),x=y/this.lineHeight,_=this._getLineLeftOffset(f);this._renderTextLine(l,s,this._textLines[f],h+_,g+n+x,f),n+=y}s.restore()},_renderTextFill:function(s){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(s,"fillText")},_renderTextStroke:function(s){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this._setLineDash(s,this.strokeDashArray),s.beginPath(),this._renderTextCommon(s,"strokeText"),s.closePath(),s.restore())},_renderChars:function(s,l,n,h,g,f){var m=this.getHeightOfLine(f),y=this.textAlign.indexOf("justify")!==-1,x,_,A="",M,T=0,O,B=this.path,X=!y&&this.charSpacing===0&&this.isEmptyStyles(f)&&!B,F=this.direction==="ltr",I=this.direction==="ltr"?1:-1,K,G=l.canvas.getAttribute("dir");if(l.save(),G!==this.direction&&(l.canvas.setAttribute("dir",F?"ltr":"rtl"),l.direction=F?"ltr":"rtl",l.textAlign=F?"left":"right"),g-=m*this._fontSizeFraction/this.lineHeight,X){this._renderChar(s,l,f,0,n.join(""),h,g,m),l.restore();return}for(var rt=0,at=n.length-1;rt<=at;rt++)O=rt===at||this.charSpacing||B,A+=n[rt],M=this.__charBounds[f][rt],T===0?(h+=I*(M.kernedWidth-M.width),T+=M.width):T+=M.kernedWidth,y&&!O&&this._reSpaceAndTab.test(n[rt])&&(O=!0),O||(x=x||this.getCompleteStyleDeclaration(f,rt),_=this.getCompleteStyleDeclaration(f,rt+1),O=r.util.hasStyleChanged(x,_,!1)),O&&(B?(l.save(),l.translate(M.renderLeft,M.renderTop),l.rotate(M.angle),this._renderChar(s,l,f,rt,A,-T/2,0,m),l.restore()):(K=h,this._renderChar(s,l,f,rt,A,K,g,m)),A="",x=_,h+=I*T,T=0);l.restore()},_applyPatternGradientTransformText:function(s){var l=r.util.createCanvasElement(),n,h=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return l.width=h,l.height=g,n=l.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(h,0),n.lineTo(h,g),n.lineTo(0,g),n.closePath(),n.translate(h/2,g/2),n.fillStyle=s.toLive(n),this._applyPatternGradientTransform(n,s),n.fill(),n.createPattern(l,"no-repeat")},handleFiller:function(s,l,n){var h,g;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(h=-this.width/2,g=-this.height/2,s.translate(h,g),s[l]=this._applyPatternGradientTransformText(n),{offsetX:h,offsetY:g}):(s[l]=n.toLive(s,this),this._applyPatternGradientTransform(s,n)):(s[l]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(s,l){return s.lineWidth=l.strokeWidth,s.lineCap=this.strokeLineCap,s.lineDashOffset=this.strokeDashOffset,s.lineJoin=this.strokeLineJoin,s.miterLimit=this.strokeMiterLimit,this.handleFiller(s,"strokeStyle",l.stroke)},_setFillStyles:function(s,l){return this.handleFiller(s,"fillStyle",l.fill)},_renderChar:function(s,l,n,h,g,f,m){var y=this._getStyleDeclaration(n,h),x=this.getCompleteStyleDeclaration(n,h),_=s==="fillText"&&x.fill,A=s==="strokeText"&&x.stroke&&x.strokeWidth,M,T;!A&&!_||(l.save(),_&&(M=this._setFillStyles(l,x)),A&&(T=this._setStrokeStyles(l,x)),l.font=this._getFontDeclaration(x),y&&y.textBackgroundColor&&this._removeShadow(l),y&&y.deltaY&&(m+=y.deltaY),_&&l.fillText(g,f-M.offsetX,m-M.offsetY),A&&l.strokeText(g,f-T.offsetX,m-T.offsetY),l.restore())},setSuperscript:function(s,l){return this._setScript(s,l,this.superscript)},setSubscript:function(s,l){return this._setScript(s,l,this.subscript)},_setScript:function(s,l,n){var h=this.get2DCursorLocation(s,!0),g=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize"),f=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"deltaY"),m={fontSize:g*n.size,deltaY:f+g*n.baseline};return this.setSelectionStyles(m,s,l),this},_getLineLeftOffset:function(s){var l=this.getLineWidth(s),n=this.width-l,h=this.textAlign,g=this.direction,m,f=0,m=this.isEndOfWrapping(s);return h==="justify"||h==="justify-center"&&!m||h==="justify-right"&&!m||h==="justify-left"&&!m?0:(h==="center"&&(f=n/2),h==="right"&&(f=n),h==="justify-center"&&(f=n/2),h==="justify-right"&&(f=n),g==="rtl"&&(f-=n),f)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var s=this._forceClearCache;return s||(s=this.hasStateChanged("_dimensionAffectingProps")),s&&(this.dirty=!0,this._forceClearCache=!1),s},getLineWidth:function(s){if(this.__lineWidths[s]!==void 0)return this.__lineWidths[s];var l=this.measureLine(s),n=l.width;return this.__lineWidths[s]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(s,l,n){var h=this._getStyleDeclaration(s,l);return h&&typeof h[n]<"u"?h[n]:this[n]},_renderTextDecoration:function(s,l){if(!(!this[l]&&!this.styleHas(l))){s.save(),(l==="overline"||l==="linethrough")&&this._removeShadow(s);for(var n,h,g,f,m,y,x,_,A=this._getLeftOffset(),M=this._getTopOffset(),T,O,B,X,F,I,K,G,rt=this.path,at=this._getWidthOfCharSpacing(),gt=this.offsets[l],nt=0,E=this._textLines.length;nt<E;nt++){if(n=this.getHeightOfLine(nt),!this[l]&&!this.styleHas(l,nt)){M+=n;continue}x=this._textLines[nt],I=n/this.lineHeight,f=this._getLineLeftOffset(nt),O=0,B=0,_=this.getValueOfPropertyAt(nt,0,l),G=this.getValueOfPropertyAt(nt,0,"fill"),T=M+I*(1-this._fontSizeFraction),h=this.getHeightOfChar(nt,0),m=this.getValueOfPropertyAt(nt,0,"deltaY");for(var Y=0,J=x.length;Y<J;Y++)if(X=this.__charBounds[nt][Y],F=this.getValueOfPropertyAt(nt,Y,l),K=this.getValueOfPropertyAt(nt,Y,"fill"),g=this.getHeightOfChar(nt,Y),y=this.getValueOfPropertyAt(nt,Y,"deltaY"),rt&&F&&K)s.save(),s.fillStyle=G,s.translate(X.renderLeft,X.renderTop),s.rotate(X.angle),s.fillRect(-X.kernedWidth/2,gt*g+y,X.kernedWidth,this.fontSize/15),s.restore();else if((F!==_||K!==G||g!==h||y!==m)&&B>0){var k=A+f+O;this.direction==="rtl"&&(k=this.width-k-B),_&&G&&(s.fillStyle=G,s.fillRect(k,T+gt*h+m,B,this.fontSize/15)),O=X.left,B=X.width,_=F,G=K,h=g,m=y}else B+=X.kernedWidth;var k=A+f+O;this.direction==="rtl"&&(k=this.width-k-B),s.fillStyle=K,F&&K&&s.fillRect(k,T+gt*h+m,B-at,this.fontSize/15),M+=n}s.restore()}},_getFontDeclaration:function(s,l){var n=s||this,h=this.fontFamily,g=r.Text.genericFonts.indexOf(h.toLowerCase())>-1,f=h===void 0||h.indexOf("'")>-1||h.indexOf(",")>-1||h.indexOf('"')>-1||g?n.fontFamily:'"'+n.fontFamily+'"';return[r.isLikelyNode?n.fontWeight:n.fontStyle,r.isLikelyNode?n.fontStyle:n.fontWeight,l?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",f].join(" ")},render:function(s){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",s)))},_splitTextIntoLines:function(s){for(var l=s.split(this._reNewline),n=new Array(l.length),h=[`
`],g=[],f=0;f<l.length;f++)n[f]=r.util.string.graphemeSplit(l[f]),g=g.concat(n[f],h);return g.pop(),{_unwrappedLines:n,lines:l,graphemeText:g,graphemeLines:n}},toObject:function(s){var l=u.concat(s),n=this.callSuper("toObject",l);return n.styles=r.util.stylesToArray(this.styles,this.text),n.path&&(n.path=this.path.toObject()),n},set:function(s,l){this.callSuper("set",s,l);var n=!1,h=!1;if(typeof s=="object")for(var g in s)g==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(g)!==-1,h=h||g==="path";else n=this._dimensionAffectingProps.indexOf(s)!==-1,h=s==="path";return h&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(s,l,n){if(!s)return l(null);var h=r.parseAttributes(s,r.Text.ATTRIBUTE_NAMES),g=h.textAnchor||"left";if(n=r.util.object.extend(n?c(n):{},h),n.top=n.top||0,n.left=n.left||0,h.textDecoration){var f=h.textDecoration;f.indexOf("underline")!==-1&&(n.underline=!0),f.indexOf("overline")!==-1&&(n.overline=!0),f.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in h&&(n.left+=h.dx),"dy"in h&&(n.top+=h.dy),"fontSize"in n||(n.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in s?m=s.textContent:"firstChild"in s&&s.firstChild!==null&&"data"in s.firstChild&&s.firstChild.data!==null&&(m=s.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=n.strokeWidth;n.strokeWidth=0;var x=new r.Text(m,n),_=x.getScaledHeight()/x.height,A=(x.height+x.strokeWidth)*x.lineHeight-x.height,M=A*_,T=x.getScaledHeight()+M,O=0;g==="center"&&(O=x.getScaledWidth()/2),g==="right"&&(O=x.getScaledWidth()),x.set({left:x.left-O,top:x.top-(T-x.fontSize*(.07+x._fontSizeFraction))/x.lineHeight,strokeWidth:typeof y<"u"?y:1}),l(x)},r.Text.fromObject=function(s,l){var n=c(s),h=s.path;return delete n.path,r.Object._fromObject("Text",n,function(g){g.styles=r.util.stylesFromArray(s.styles,s.text),h?r.Object._fromObject("Path",h,function(f){g.set("path",f),l(g)},"path"):l(g)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(o){if(!this.styles||typeof o<"u"&&!this.styles[o])return!0;var r=typeof o>"u"?this.styles:{line:this.styles[o]};for(var c in r)for(var u in r[c])for(var s in r[c][u])return!1;return!0},styleHas:function(o,r){if(!this.styles||!o||o===""||typeof r<"u"&&!this.styles[r])return!1;var c=typeof r>"u"?this.styles:{0:this.styles[r]};for(var u in c)for(var s in c[u])if(typeof c[u][s][o]<"u")return!0;return!1},cleanStyle:function(o){if(!this.styles||!o||o==="")return!1;var r=this.styles,c=0,u,s,l=!0,n=0,h;for(var g in r){u=0;for(var f in r[g]){var h=r[g][f],m=h.hasOwnProperty(o);c++,m?(s?h[o]!==s&&(l=!1):s=h[o],h[o]===this[o]&&delete h[o]):l=!1,Object.keys(h).length!==0?u++:delete r[g][f]}u===0&&delete r[g]}for(var y=0;y<this._textLines.length;y++)n+=this._textLines[y].length;l&&c===n&&(this[o]=s,this.removeStyle(o))},removeStyle:function(o){if(!(!this.styles||!o||o==="")){var r=this.styles,c,u,s;for(u in r){c=r[u];for(s in c)delete c[s][o],Object.keys(c[s]).length===0&&delete c[s];Object.keys(c).length===0&&delete r[u]}}},_extendStyles:function(o,r){var c=this.get2DCursorLocation(o);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),r)},get2DCursorLocation:function(o,r){typeof o>"u"&&(o=this.selectionStart);for(var c=r?this._unwrappedTextLines:this._textLines,u=c.length,s=0;s<u;s++){if(o<=c[s].length)return{lineIndex:s,charIndex:o};o-=c[s].length+this.missingNewlineOffset(s,r)}return{lineIndex:s-1,charIndex:c[s-1].length<o?c[s-1].length:o}},getSelectionStyles:function(o,r,c){typeof o>"u"&&(o=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||o);for(var u=[],s=o;s<r;s++)u.push(this.getStyleAtPosition(s,c));return u},getStyleAtPosition:function(o,r){var c=this.get2DCursorLocation(o),u=r?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return u||{}},setSelectionStyles:function(o,r,c){typeof r>"u"&&(r=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||r);for(var u=r;u<c;u++)this._extendStyles(u,o);return this._forceClearCache=!0,this},_getStyleDeclaration:function(o,r){var c=this.styles&&this.styles[o];return c?c[r]:null},getCompleteStyleDeclaration:function(o,r){for(var c=this._getStyleDeclaration(o,r)||{},u={},s,l=0;l<this._styleProperties.length;l++)s=this._styleProperties[l],u[s]=typeof c[s]>"u"?this[s]:c[s];return u},_setStyleDeclaration:function(o,r,c){this.styles[o][r]=c},_deleteStyleDeclaration:function(o,r){delete this.styles[o][r]},_getLineStyle:function(o){return!!this.styles[o]},_setLineStyle:function(o){this.styles[o]={}},_deleteLineStyle:function(o){delete this.styles[o]}})}(),function(){function o(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,c){this.callSuper("initialize",r,c),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,c){this[r]!==c&&(this._fireSelectionChanged(),this[r]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,u=this.canvas.viewportTransform;c.save(),c.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(c),this._clearTextArea(c),r||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,c):this.renderSelection(r,c),c.restore()}},_clearTextArea:function(r){var c=this.width+4,u=this.height+4;r.clearRect(-c/2,-u/2,c,u)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var c=this._getLeftOffset(),u=this._getTopOffset(),s=this._getCursorBoundariesOffsets(r);return{left:c,top:u,leftOffset:s.left,topOffset:s.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,u,s,l=0,n=0,h,g=this.get2DCursorLocation(r);s=g.charIndex,u=g.lineIndex;for(var f=0;f<u;f++)l+=this.getHeightOfLine(f);c=this._getLineLeftOffset(u);var m=this.__charBounds[u][s];return m&&(n=m.left),this.charSpacing!==0&&s===this._textLines[u].length&&(n-=this._getWidthOfCharSpacing()),h={top:l,left:c+(n>0?n:0)},this.direction==="rtl"&&(h.left*=-1),this.cursorOffsetCache=h,this.cursorOffsetCache},renderCursor:function(r,c){var u=this.get2DCursorLocation(),s=u.lineIndex,l=u.charIndex>0?u.charIndex-1:0,n=this.getValueOfPropertyAt(s,l,"fontSize"),h=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/h,f=r.topOffset,m=this.getValueOfPropertyAt(s,l,"deltaY");f+=(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(s,l,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(r.left+r.leftOffset-g/2,f+r.top+m,g,n)},renderSelection:function(r,c){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,s=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(u),h=this.get2DCursorLocation(s),g=n.lineIndex,f=h.lineIndex,m=n.charIndex<0?0:n.charIndex,y=h.charIndex<0?0:h.charIndex,x=g;x<=f;x++){var _=this._getLineLeftOffset(x)||0,A=this.getHeightOfLine(x),M=0,T=0,O=0;if(x===g&&(T=this.__charBounds[g][m].left),x>=g&&x<f)O=l&&!this.isEndOfWrapping(x)?this.width:this.getLineWidth(x)||5;else if(x===f)if(y===0)O=this.__charBounds[f][y].left;else{var B=this._getWidthOfCharSpacing();O=this.__charBounds[f][y-1].left+this.__charBounds[f][y-1].width-B}M=A,(this.lineHeight<1||x===f&&this.lineHeight>1)&&(A/=this.lineHeight);var X=r.left+_+T,F=O-T,I=A,K=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",I=1,K=A):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(X=this.width-X-F),c.fillRect(X,r.top+r.topOffset+K,F,I),r.topOffset+=M}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),c=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c}}}),t.IText.fromObject=function(r,c){var u=t.util.stylesFromArray(r.styles,r.text),s=Object.assign({},r,{styles:u});if(delete s.path,o(s),s.styles)for(var l in s.styles)for(var n in s.styles[l])o(s.styles[l][n]);t.Object._fromObject("IText",s,function(h){r.path?t.Object._fromObject("Path",r.path,function(g){h.set("path",g),c(h)},"path"):c(h)},"text")}}(),function(){var o=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var c=r.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,r._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var c=r.canvas;c&&(c._iTextInstances=c._iTextInstances||[],t.util.removeFromArray(c._iTextInstances,r),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,r._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(c){c.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,c,u,s){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",c,{duration:u,onComplete:function(){l.isAborted||r[s]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var c=this,u=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},u)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var c=0,u=r-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u--;for(;/\S/.test(this._text[u])&&u>-1;)c++,u--;return r-c},findWordBoundaryRight:function(r){var c=0,u=r;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)c++,u++;return r+c},findLineBoundaryLeft:function(r){for(var c=0,u=r-1;!/\n/.test(this._text[u])&&u>-1;)c++,u--;return r-c},findLineBoundaryRight:function(r){for(var c=0,u=r;!/\n/.test(this._text[u])&&u<this._text.length;)c++,u++;return r+c},searchWordBoundary:function(r,c){for(var u=this._text,s=this._reSpace.test(u[r])?r-1:r,l=u[s],n=t.reNonWord;!n.test(l)&&s>0&&s<u.length;)s+=c,l=u[s];return n.test(l)&&(s+=c===1?0:1),s},selectWord:function(r){r=r||this.selectionStart;var c=this.searchWordBoundary(r,-1),u=this.searchWordBoundary(r,1);this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var c=this.findLineBoundaryLeft(r),u=this.findLineBoundaryRight(r);return this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(r.e),u=this.selectionStart,s=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||u===s)&&(u===c||s===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==s)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,c,u){var s=u.slice(0,r),l=t.util.string.graphemeSplit(s).length;if(r===c)return{selectionStart:l,selectionEnd:l};var n=u.slice(r,c),h=t.util.string.graphemeSplit(n).length;return{selectionStart:l,selectionEnd:l+h}},fromGraphemeToStringSelection:function(r,c,u){var s=u.slice(0,r),l=s.join("").length;if(r===c)return{selectionStart:l,selectionEnd:l};var n=u.slice(r,c),h=n.join("").length;return{selectionStart:l,selectionEnd:l+h}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(r),u=this.get2DCursorLocation(r),s=u.lineIndex,l=u.charIndex,n=this.getValueOfPropertyAt(s,l,"fontSize")*this.lineHeight,h=c.leftOffset,g=this.calcTransformMatrix(),f={x:c.left+h,y:c.top+c.topOffset+n},m=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,x=y.width/m,_=y.height/m,A=x-n,M=_-n,T=y.clientWidth/x,O=y.clientHeight/_;return f=t.util.transformPoint(f,g),f=t.util.transformPoint(f,this.canvas.viewportTransform),f.x*=T,f.y*=O,f.x<0&&(f.x=0),f.x>A&&(f.x=A),f.y<0&&(f.y=0),f.y>M&&(f.y=M),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:f.x+"px",top:f.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,c){var u=this.get2DCursorLocation(r,!0),s=this.get2DCursorLocation(c,!0),l=u.lineIndex,n=u.charIndex,h=s.lineIndex,g=s.charIndex,f,m;if(l!==h){if(this.styles[l])for(f=n;f<this._unwrappedTextLines[l].length;f++)delete this.styles[l][f];if(this.styles[h])for(f=g;f<this._unwrappedTextLines[h].length;f++)m=this.styles[h][f],m&&(this.styles[l]||(this.styles[l]={}),this.styles[l][n+f-g]=m);for(f=l+1;f<=h;f++)delete this.styles[f];this.shiftLineStyles(h,l-h)}else if(this.styles[l]){m=this.styles[l];var y=g-n,x,_;for(f=n;f<g;f++)delete m[f];for(_ in this.styles[l])x=parseInt(_,10),x>=g&&(m[x-y]=m[_],delete m[_])}},shiftLineStyles:function(r,c){var u=o(this.styles);for(var s in this.styles){var l=parseInt(s,10);l>r&&(this.styles[l+c]=u[l],u[l-c]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,c,u,s){var l,n={},h=!1,g=this._unwrappedTextLines[r].length,f=g===c;u||(u=1),this.shiftLineStyles(r,u),this.styles[r]&&(l=this.styles[r][c===0?c:c-1]);for(var m in this.styles[r]){var y=parseInt(m,10);y>=c&&(h=!0,n[y-c]=this.styles[r][m],f&&c===0||delete this.styles[r][m])}var x=!1;for(h&&!f&&(this.styles[r+u]=n,x=!0),(x||g>c)&&u--;u>0;)s&&s[u-1]?this.styles[r+u]={0:o(s[u-1])}:l?this.styles[r+u]={0:o(l)}:delete this.styles[r+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(r,c,u,s){this.styles||(this.styles={});var l=this.styles[r],n=l?o(l):{};u||(u=1);for(var h in n){var g=parseInt(h,10);g>=c&&(l[g+u]=n[g],n[g-u]||delete l[g])}if(this._forceClearCache=!0,s){for(;u--;)Object.keys(s[u]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][c+u]=o(s[u]));return}if(l)for(var f=l[c?c-1:1];f&&u--;)this.styles[r][c+u]=o(f)},insertNewStyleBlock:function(r,c,u){for(var s=this.get2DCursorLocation(c,!0),l=[0],n=0,h=0;h<r.length;h++)r[h]===`
`?(n++,l[n]=0):l[n]++;l[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,l[0],u),u=u&&u.slice(l[0]+1)),n&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+l[0],n);for(var h=1;h<n;h++)l[h]>0?this.insertCharStyleObject(s.lineIndex+h,0,l[h],u):u&&this.styles[s.lineIndex+h]&&u[0]&&(this.styles[s.lineIndex+h][0]=u[0]),u=u&&u.slice(l[h]+1);l[h]>0&&this.insertCharStyleObject(s.lineIndex+h,0,l[h],u)},setSelectionStartEndWithShift:function(r,c,u){u<=r?(c===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=u):u>r&&u<c?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(c===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=u)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(o){if(this.canvas){this.__newClickTime=+new Date;var r=o.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",o),this._stopEvent(o.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(o){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===o.x&&this.__lastPointer.y===o.y},_stopEvent:function(o){o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(o){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(o.e))},tripleClickHandler:function(o){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(o.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(o){!this.canvas||!this.editable||o.e.button&&o.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(o.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(o){!this.canvas||!this.editable||o.e.button&&o.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(o){if(this.__isMousedown=!1,!(!this.editable||this.group||o.transform&&o.transform.actionPerformed||o.e.button&&o.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(o.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(o){var r=this.getSelectionStartFromPointer(o),c=this.selectionStart,u=this.selectionEnd;o.shiftKey?this.setSelectionStartEndWithShift(c,u,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(o){for(var r=this.getLocalPointer(o),c=0,u=0,s=0,l=0,n=0,h,g,f=0,m=this._textLines.length;f<m&&s<=r.y;f++)s+=this.getHeightOfLine(f)*this.scaleY,n=f,f>0&&(l+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));h=this._getLineLeftOffset(n),u=h*this.scaleX,g=this._textLines[n],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+u);for(var y=0,x=g.length;y<x&&(c=u,u+=this.__charBounds[n][y].kernedWidth*this.scaleX,u<=r.x);y++)l++;return this._getNewSelectionStartFromOffset(r,c,u,l,x)},_getNewSelectionStartFromOffset:function(o,r,c,u,s){var l=o.x-r,n=c-o.x,h=n>l||n<0?0:1,g=u+h;return this.flipX&&(g=s-g),g>this._text.length&&(g=this._text.length),g}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var o=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+o.top+"; left: "+o.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+o.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(o){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(o.keyCode in r)this[r[o.keyCode]](o);else if(o.keyCode in this.ctrlKeysMapDown&&(o.ctrlKey||o.metaKey))this[this.ctrlKeysMapDown[o.keyCode]](o);else return;o.stopImmediatePropagation(),o.preventDefault(),o.keyCode>=33&&o.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(o){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(o.keyCode in this.ctrlKeysMapUp&&(o.ctrlKey||o.metaKey))this[this.ctrlKeysMapUp[o.keyCode]](o);else return;o.stopImmediatePropagation(),o.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(o){var r=this.fromPaste;if(this.fromPaste=!1,o&&o.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,s=c.length,l,n,h=s-u,g=this.selectionStart,f=this.selectionEnd,m=g!==f,y,x,_;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var A=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),M=g>A.selectionStart;m?(l=this._text.slice(g,f),h+=f-g):s<u&&(M?l=this._text.slice(f+h,f):l=this._text.slice(g,g-h)),n=c.slice(A.selectionEnd-h,A.selectionEnd),l&&l.length&&(n.length&&(y=this.getSelectionStyles(g,g+1,!1),y=n.map(function(){return y[0]})),m?(x=g,_=f):M?(x=f-l.length,_=f):(x=f,_=f+l.length),this.removeStyleFromTo(x,_)),n.length&&(r&&n.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(y=t.copiedTextStyle),this.insertNewStyleBlock(n,g,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(o){this.compositionStart=o.target.selectionStart,this.compositionEnd=o.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(o){return o&&o.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(o,r){var c=this._getLineLeftOffset(o),u;return r>0&&(u=this.__charBounds[o][r-1],c+=u.left+u.width),c},getDownCursorOffset:function(o,r){var c=this._getSelectionForOffset(o,r),u=this.get2DCursorLocation(c),s=u.lineIndex;if(s===this._textLines.length-1||o.metaKey||o.keyCode===34)return this._text.length-c;var l=u.charIndex,n=this._getWidthBeforeCursor(s,l),h=this._getIndexOnLine(s+1,n),g=this._textLines[s].slice(l);return g.length+h+1+this.missingNewlineOffset(s)},_getSelectionForOffset:function(o,r){return o.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(o,r){var c=this._getSelectionForOffset(o,r),u=this.get2DCursorLocation(c),s=u.lineIndex;if(s===0||o.metaKey||o.keyCode===33)return-c;var l=u.charIndex,n=this._getWidthBeforeCursor(s,l),h=this._getIndexOnLine(s-1,n),g=this._textLines[s].slice(0,l),f=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+h-g.length+(1-f)},_getIndexOnLine:function(o,r){for(var c=this._textLines[o],u=this._getLineLeftOffset(o),s=u,l=0,n,h,g=0,f=c.length;g<f;g++)if(n=this.__charBounds[o][g].width,s+=n,s>r){h=!0;var m=s-n,y=s,x=Math.abs(m-r),_=Math.abs(y-r);l=_<x?g:g-1;break}return h||(l=c.length-1),l},moveCursorDown:function(o){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",o)},moveCursorUp:function(o){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",o)},_moveCursorUpOrDown:function(o,r){var c="get"+o+"CursorOffset",u=this[c](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(o){var r=this._selectionDirection==="left"?this.selectionStart+o:this.selectionEnd+o;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),o!==0},moveCursorWithoutShift:function(o){return o<0?(this.selectionStart+=o,this.selectionEnd=this.selectionStart):(this.selectionEnd+=o,this.selectionStart=this.selectionEnd),o!==0},moveCursorLeft:function(o){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",o)},_move:function(o,r,c){var u;if(o.altKey)u=this["findWordBoundary"+c](this[r]);else if(o.metaKey||o.keyCode===35||o.keyCode===36)u=this["findLineBoundary"+c](this[r]);else return this[r]+=c==="Left"?-1:1,!0;if(typeof u<"u"&&this[r]!==u)return this[r]=u,!0},_moveLeft:function(o,r){return this._move(o,r,"Left")},_moveRight:function(o,r){return this._move(o,r,"Right")},moveCursorLeftWithoutShift:function(o){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(o,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(o){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(o,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(o,"selectionStart")},moveCursorRight:function(o){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",o)},_moveCursorLeftOrRight:function(o,r){var c="moveCursor"+o+"With";this._currentCursorOpacity=1,r.shiftKey?c+="Shift":c+="outShift",this[c](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(o){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(o,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(o,"selectionEnd")},moveCursorRightWithoutShift:function(o){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(o,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(o,r){typeof r>"u"&&(r=o+1),this.removeStyleFromTo(o,r),this._text.splice(o,r-o),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(o,r,c,u){typeof u>"u"&&(u=c),u>c&&this.removeStyleFromTo(c,u);var s=t.util.string.graphemeSplit(o);this.insertNewStyleBlock(s,c,r),this._text=[].concat(this._text.slice(0,c),s,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var o=t.util.toFixed,r=t.util.radiansToDegrees,c=t.util.calcRotateMatrix,u=t.util.transformPoint,s=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),n=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(n)},toSVG:function(l){var n=this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0}),h=this.path;return h?n+h._createBaseSVGMarkup(h._toSVG(),{reviver:l,withShadow:!0}):n},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var n=!0,h=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",h?'text-decoration="'+h+'" ':"",'style="',this.getSvgStyles(n),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,n){var h=[],g=[],f=l,m;this._setSVGBg(g);for(var y=0,x=this._textLines.length;y<x;y++)m=this._getLineLeftOffset(y),(this.textBackgroundColor||this.styleHas("textBackgroundColor",y))&&this._setSVGTextLineBg(g,y,n+m,f),this._setSVGTextLineText(h,y,n+m,f),f+=this.getHeightOfLine(y);return{textSpans:h,textBgRects:g}},_createTextCharSpan:function(l,n,h,g,f){var m=l!==l.trim()||l.match(s),y=this.getSvgSpanStyles(n,m),x=y?'style="'+y+'"':"",_=n.deltaY,A="",M=t.Object.NUM_FRACTION_DIGITS,T="";if(_&&(A=' dy="'+o(_,M)+'" '),f.renderLeft!==void 0){var O=f.angle;T=' rotate="'+o(r(O),t.Object.NUM_FRACTION_DIGITS)+'" ';var B=f.width/2,X=c({angle:r(O)});X[4]=f.renderLeft,X[5]=f.renderTop;var F=u({x:-B,y:0},X);h=F.x,g=F.y}return['<tspan x="',o(h,M),'" y="',o(g,M),'" ',A,x,T,">",t.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,n,h,g){var f=this.getHeightOfLine(n),m=this.textAlign.indexOf("justify")!==-1,y,x,_="",A,M,T=0,O=this._textLines[n],B;g+=f*(1-this._fontSizeFraction)/this.lineHeight;for(var X=0,F=O.length-1;X<=F;X++)B=X===F||this.charSpacing||this.path,_+=O[X],A=this.__charBounds[n][X],T===0?(h+=A.kernedWidth-A.width,T+=A.width):T+=A.kernedWidth,m&&!B&&this._reSpaceAndTab.test(O[X])&&(B=!0),B||(y=y||this.getCompleteStyleDeclaration(n,X),x=this.getCompleteStyleDeclaration(n,X+1),B=t.util.hasStyleChanged(y,x,!0)),B&&(M=this._getStyleDeclaration(n,X)||{},l.push(this._createTextCharSpan(_,M,h,g,A)),_="",y=x,h+=T,T=0)},_pushTextBgRect:function(l,n,h,g,f,m){var y=t.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(n),' x="',o(h,y),'" y="',o(g,y),'" width="',o(f,y),'" height="',o(m,y),`"></rect>
`)},_setSVGTextLineBg:function(l,n,h,g){for(var f=this._textLines[n],m=this.getHeightOfLine(n)/this.lineHeight,y=0,x=0,_,A,M=this.getValueOfPropertyAt(n,0,"textBackgroundColor"),T=0,O=f.length;T<O;T++)_=this.__charBounds[n][T],A=this.getValueOfPropertyAt(n,T,"textBackgroundColor"),A!==M?(M&&this._pushTextBgRect(l,M,h+x,g,y,m),x=_.left,y=_.width,M=A):y+=_.kernedWidth;A&&this._pushTextBgRect(l,A,h+x,g,y,m)},_getFillAttributes:function(l){var n=l&&typeof l=="string"?new t.Color(l):"";return!n||!n.getSource()||n.getAlpha()===1?'fill="'+l+'"':'opacity="'+n.getAlpha()+'" fill="'+n.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var n=0,h=0,g=0;g<l;g++)n+=this.getHeightOfLine(g);return h=this.getHeightOfLine(g),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*h/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var n=t.Object.prototype.getSvgStyles.call(this,l);return n+" white-space: pre;"}})}(),function(o){var r=o.fabric||(o.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var u=0,s=0,l=0,n={},h=0;h<c.graphemeLines.length;h++)c.graphemeText[l]===`
`&&h>0?(s=0,l++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[l])&&h>0&&(s++,l++),n[h]={line:u,offset:s},l+=c.graphemeLines[h].length,s+=c.graphemeLines[h].length;return n},styleHas:function(c,u){if(this._styleMap&&!this.isWrapping){var s=this._styleMap[u];s&&(u=s.line)}return r.Text.prototype.styleHas.call(this,c,u)},isEmptyStyles:function(c){if(!this.styles)return!0;var u=0,s=c+1,l,n,h=!1,g=this._styleMap[c],f=this._styleMap[c+1];g&&(c=g.line,u=g.offset),f&&(s=f.line,h=s===c,l=f.offset),n=typeof c>"u"?this.styles:{line:this.styles[c]};for(var m in n)for(var y in n[m])if(y>=u&&(!h||y<l))for(var x in n[m][y])return!1;return!0},_getStyleDeclaration:function(c,u){if(this._styleMap&&!this.isWrapping){var s=this._styleMap[c];if(!s)return null;c=s.line,u=s.offset+u}return this.callSuper("_getStyleDeclaration",c,u)},_setStyleDeclaration:function(c,u,s){var l=this._styleMap[c];c=l.line,u=l.offset+u,this.styles[c][u]=s},_deleteStyleDeclaration:function(c,u){var s=this._styleMap[c];c=s.line,u=s.offset+u,delete this.styles[c][u]},_getLineStyle:function(c){var u=this._styleMap[c];return!!this.styles[u.line]},_setLineStyle:function(c){var u=this._styleMap[c];this.styles[u.line]={}},_wrapText:function(c,u){var s=[],l;for(this.isWrapping=!0,l=0;l<c.length;l++)s=s.concat(this._wrapLine(c[l],l,u));return this.isWrapping=!1,s},_measureWord:function(c,u,s){var l=0,n,h=!0;s=s||0;for(var g=0,f=c.length;g<f;g++){var m=this._getGraphemeBox(c[g],u,g+s,n,h);l+=m.kernedWidth,n=c[g]}return l},_wrapLine:function(c,u,s,X){var n=0,h=this.splitByGrapheme,g=[],f=[],m=h?r.util.string.graphemeSplit(c):c.split(this._wordJoiners),y="",x=0,_=h?"":" ",A=0,M=0,T=0,O=!0,B=this._getWidthOfCharSpacing(),X=X||0;m.length===0&&m.push([]),s-=X;for(var F=0;F<m.length;F++)y=h?m[F]:r.util.string.graphemeSplit(m[F]),A=this._measureWord(y,u,x),x+=y.length,n+=M+A-B,n>s&&!O?(g.push(f),f=[],n=A,O=!0):n+=B,!O&&!h&&f.push(_),f=f.concat(y),M=h?0:this._measureWord([_],u,x),x++,O=!1,A>T&&(T=A);return F&&g.push(f),T+X>this.dynamicMinWidth&&(this.dynamicMinWidth=T-B+X),g},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c,u){return this.splitByGrapheme&&!u?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var u=r.Text.prototype._splitTextIntoLines.call(this,c),s=this._wrapText(u.lines,this.width),l=new Array(s.length),n=0;n<s.length;n++)l[n]=s[n].join("");return u.lines=l,u.graphemeLines=s,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var u in this._styleMap)this._textLines[u]&&(c[this._styleMap[u].line]=1);for(var u in this.styles)c[u]||delete this.styles[u]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),r.Textbox.fromObject=function(c,u){var s=r.util.stylesFromArray(c.styles,c.text),l=Object.assign({},c,{styles:s});return delete l.path,r.Object._fromObject("Textbox",l,function(n){c.path?r.Object._fromObject("Path",c.path,function(h){n.set("path",h),u(n)},"path"):u(n)},"text")}}(e),function(){var o=t.controlsUtils,r=o.scaleSkewCursorStyleHandler,c=o.scaleCursorStyleHandler,u=o.scalingEqually,s=o.scalingYOrSkewingX,l=o.scalingXOrSkewingY,n=o.scaleOrSkewActionName,h=t.Object.prototype.controls;if(h.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:n}),h.mr=new t.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:n}),h.mb=new t.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:s,getActionName:n}),h.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:s,getActionName:n}),h.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:u}),h.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:u}),h.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:u}),h.br=new t.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:u}),h.mtr=new t.Control({x:0,y:-.5,actionHandler:o.rotationWithSnapping,cursorStyleHandler:o.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var g=t.Textbox.prototype.controls={};g.mtr=h.mtr,g.tr=h.tr,g.br=h.br,g.tl=h.tl,g.bl=h.bl,g.mt=h.mt,g.mb=h.mb,g.mr=new t.Control({x:.5,y:0,actionHandler:o.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),g.ml=new t.Control({x:-.5,y:0,actionHandler:o.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()})(Ti);const pi=[];for(let e=0;e<256;++e)pi.push((e+256).toString(16).slice(1));function $0(e,t=0){return(pi[e[t+0]]+pi[e[t+1]]+pi[e[t+2]]+pi[e[t+3]]+"-"+pi[e[t+4]]+pi[e[t+5]]+"-"+pi[e[t+6]]+pi[e[t+7]]+"-"+pi[e[t+8]]+pi[e[t+9]]+"-"+pi[e[t+10]]+pi[e[t+11]]+pi[e[t+12]]+pi[e[t+13]]+pi[e[t+14]]+pi[e[t+15]]).toLowerCase()}let dc;const K0=new Uint8Array(16);function J0(){if(!dc){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");dc=crypto.getRandomValues.bind(crypto)}return dc(K0)}const Z0=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),eu={randomUUID:Z0};function Pn(e,t,i){var d;if(eu.randomUUID&&!e)return eu.randomUUID();e=e||{};const a=e.random??((d=e.rng)==null?void 0:d.call(e))??J0();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,$0(a)}const{min:Q0,max:tp}=Math,Jn=(e,t=0,i=1)=>Q0(tp(t,e),i),oh=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=Jn(e[t],0,255)):t===3&&(e[t]=Jn(e[t],0,1));return e},of={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])of[`[object ${e}]`]=e.toLowerCase();function ue(e){return of[Object.prototype.toString.call(e)]||"object"}const ce=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):ue(e[0])=="object"&&t?t.split("").filter(i=>e[0][i]!==void 0).map(i=>e[0][i]):e[0].slice(0),ta=e=>{if(e.length<2)return null;const t=e.length-1;return ue(e[t])=="string"?e[t].toLowerCase():null},{PI:ml,min:lf,max:cf}=Math,Qi=e=>Math.round(e*100)/100,Wc=e=>Math.round(e*100)/100,Zr=ml*2,pc=ml/3,ep=ml/180,ip=180/ml;function hf(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const oe={format:{},autodetect:[]};class It{constructor(...t){const i=this;if(ue(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let a=ta(t),d=!1;if(!a){d=!0,oe.sorted||(oe.autodetect=oe.autodetect.sort((p,v)=>v.p-p.p),oe.sorted=!0);for(let p of oe.autodetect)if(a=p.test(...t),a)break}if(oe.format[a]){const p=oe.format[a].apply(null,d?t:t.slice(0,-1));i._rgb=oh(p)}else throw new Error("unknown format: "+t);i._rgb.length===3&&i._rgb.push(1)}toString(){return ue(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const rp="3.1.2",fe=(...e)=>new It(...e);fe.version=rp;const Ks={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},np=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,sp=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,uf=e=>{if(e.match(np)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),i=t>>16,a=t>>8&255,d=t&255;return[i,a,d,1]}if(e.match(sp)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),i=t>>24&255,a=t>>16&255,d=t>>8&255,p=Math.round((t&255)/255*100)/100;return[i,a,d,p]}throw new Error(`unknown hex color: ${e}`)},{round:Uo}=Math,ff=(...e)=>{let[t,i,a,d]=ce(e,"rgba"),p=ta(e)||"auto";d===void 0&&(d=1),p==="auto"&&(p=d<1?"rgba":"rgb"),t=Uo(t),i=Uo(i),a=Uo(a);let o="000000"+(t<<16|i<<8|a).toString(16);o=o.substr(o.length-6);let r="0"+Uo(d*255).toString(16);switch(r=r.substr(r.length-2),p.toLowerCase()){case"rgba":return`#${o}${r}`;case"argb":return`#${r}${o}`;default:return`#${o}`}};It.prototype.name=function(){const e=ff(this._rgb,"rgb");for(let t of Object.keys(Ks))if(Ks[t]===e)return t.toLowerCase();return e};oe.format.named=e=>{if(e=e.toLowerCase(),Ks[e])return uf(Ks[e]);throw new Error("unknown color name: "+e)};oe.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&ue(e)==="string"&&Ks[e.toLowerCase()])return"named"}});It.prototype.alpha=function(e,t=!1){return e!==void 0&&ue(e)==="number"?t?(this._rgb[3]=e,this):new It([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};It.prototype.clipped=function(){return this._rgb._clipped||!1};const jr={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},ap=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function tn(e){const t=ap.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);jr.labWhitePoint=e,jr.Xn=t[0],jr.Zn=t[1]}function Wa(){return jr.labWhitePoint}const lh=(...e)=>{e=ce(e,"lab");const[t,i,a]=e,[d,p,v]=op(t,i,a),[o,r,c]=df(d,p,v);return[o,r,c,e.length>3?e[3]:1]},op=(e,t,i)=>{const{kE:a,kK:d,kKE:p,Xn:v,Yn:o,Zn:r}=jr,c=(e+16)/116,u=.002*t+c,s=c-.005*i,l=u*u*u,n=s*s*s,h=l>a?l:(116*u-16)/d,g=e>p?Math.pow((e+16)/116,3):e/d,f=n>a?n:(116*s-16)/d,m=h*v,y=g*o,x=f*r;return[m,y,x]},gc=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},df=(e,t,i)=>{const{MtxAdaptMa:a,MtxAdaptMaI:d,MtxXYZ2RGB:p,RefWhiteRGB:v,Xn:o,Yn:r,Zn:c}=jr,u=o*a.m00+r*a.m10+c*a.m20,s=o*a.m01+r*a.m11+c*a.m21,l=o*a.m02+r*a.m12+c*a.m22,n=v.X*a.m00+v.Y*a.m10+v.Z*a.m20,h=v.X*a.m01+v.Y*a.m11+v.Z*a.m21,g=v.X*a.m02+v.Y*a.m12+v.Z*a.m22,f=(e*a.m00+t*a.m10+i*a.m20)*(n/u),m=(e*a.m01+t*a.m11+i*a.m21)*(h/s),y=(e*a.m02+t*a.m12+i*a.m22)*(g/l),x=f*d.m00+m*d.m10+y*d.m20,_=f*d.m01+m*d.m11+y*d.m21,A=f*d.m02+m*d.m12+y*d.m22,M=gc(x*p.m00+_*p.m10+A*p.m20),T=gc(x*p.m01+_*p.m11+A*p.m21),O=gc(x*p.m02+_*p.m12+A*p.m22);return[M*255,T*255,O*255]},ch=(...e)=>{const[t,i,a,...d]=ce(e,"rgb"),[p,v,o]=pf(t,i,a),[r,c,u]=lp(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]};function lp(e,t,i){const{Xn:a,Yn:d,Zn:p,kE:v,kK:o}=jr,r=e/a,c=t/d,u=i/p,s=r>v?Math.pow(r,1/3):(o*r+16)/116,l=c>v?Math.pow(c,1/3):(o*c+16)/116,n=u>v?Math.pow(u,1/3):(o*u+16)/116;return[116*l-16,500*(s-l),200*(l-n)]}function mc(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const pf=(e,t,i)=>{e=mc(e/255),t=mc(t/255),i=mc(i/255);const{MtxRGB2XYZ:a,MtxAdaptMa:d,MtxAdaptMaI:p,Xn:v,Yn:o,Zn:r,As:c,Bs:u,Cs:s}=jr;let l=e*a.m00+t*a.m10+i*a.m20,n=e*a.m01+t*a.m11+i*a.m21,h=e*a.m02+t*a.m12+i*a.m22;const g=v*d.m00+o*d.m10+r*d.m20,f=v*d.m01+o*d.m11+r*d.m21,m=v*d.m02+o*d.m12+r*d.m22;let y=l*d.m00+n*d.m10+h*d.m20,x=l*d.m01+n*d.m11+h*d.m21,_=l*d.m02+n*d.m12+h*d.m22;return y*=g/c,x*=f/u,_*=m/s,l=y*p.m00+x*p.m10+_*p.m20,n=y*p.m01+x*p.m11+_*p.m21,h=y*p.m02+x*p.m12+_*p.m22,[l,n,h]};It.prototype.lab=function(){return ch(this._rgb)};const cp=(...e)=>new It(...e,"lab");Object.assign(fe,{lab:cp,getLabWhitePoint:Wa,setLabWhitePoint:tn});oe.format.lab=lh;oe.autodetect.push({p:2,test:(...e)=>{if(e=ce(e,"lab"),ue(e)==="array"&&e.length===3)return"lab"}});It.prototype.darken=function(e=1){const t=this,i=t.lab();return i[0]-=jr.Kn*e,new It(i,"lab").alpha(t.alpha(),!0)};It.prototype.brighten=function(e=1){return this.darken(-e)};It.prototype.darker=It.prototype.darken;It.prototype.brighter=It.prototype.brighten;It.prototype.get=function(e){const[t,i]=e.split("."),a=this[t]();if(i){const d=t.indexOf(i)-(t.substr(0,2)==="ok"?2:0);if(d>-1)return a[d];throw new Error(`unknown channel ${i} in mode ${t}`)}else return a};const{pow:hp}=Math,up=1e-7,fp=20;It.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&ue(e)==="number"){if(e===0)return new It([0,0,0,this._rgb[3]],"rgb");if(e===1)return new It([255,255,255,this._rgb[3]],"rgb");let i=this.luminance(),a=fp;const d=(v,o)=>{const r=v.interpolate(o,.5,t),c=r.luminance();return Math.abs(e-c)<up||!a--?r:c>e?d(v,r):d(r,o)},p=(i>e?d(new It([0,0,0]),this):d(this,new It([255,255,255]))).rgb();return new It([...p,this._rgb[3]])}return dp(...this._rgb.slice(0,3))};const dp=(e,t,i)=>(e=vc(e),t=vc(t),i=vc(i),.2126*e+.7152*t+.0722*i),vc=e=>(e/=255,e<=.03928?e/12.92:hp((e+.055)/1.055,2.4)),Si={},Js=(e,t,i=.5,...a)=>{let d=a[0]||"lrgb";if(!Si[d]&&!a.length&&(d=Object.keys(Si)[0]),!Si[d])throw new Error(`interpolation mode ${d} is not defined`);return ue(e)!=="object"&&(e=new It(e)),ue(t)!=="object"&&(t=new It(t)),Si[d](e,t,i).alpha(e.alpha()+i*(t.alpha()-e.alpha()))};It.prototype.mix=It.prototype.interpolate=function(e,t=.5,...i){return Js(this,e,t,...i)};It.prototype.premultiply=function(e=!1){const t=this._rgb,i=t[3];return e?(this._rgb=[t[0]*i,t[1]*i,t[2]*i,i],this):new It([t[0]*i,t[1]*i,t[2]*i,i],"rgb")};const{sin:pp,cos:gp}=Math,gf=(...e)=>{let[t,i,a]=ce(e,"lch");return isNaN(a)&&(a=0),a=a*ep,[t,gp(a)*i,pp(a)*i]},hh=(...e)=>{e=ce(e,"lch");const[t,i,a]=e,[d,p,v]=gf(t,i,a),[o,r,c]=lh(d,p,v);return[o,r,c,e.length>3?e[3]:1]},mp=(...e)=>{const t=hf(ce(e,"hcl"));return hh(...t)},{sqrt:vp,atan2:bp,round:yp}=Math,mf=(...e)=>{const[t,i,a]=ce(e,"lab"),d=vp(i*i+a*a);let p=(bp(a,i)*ip+360)%360;return yp(d*1e4)===0&&(p=Number.NaN),[t,d,p]},uh=(...e)=>{const[t,i,a,...d]=ce(e,"rgb"),[p,v,o]=ch(t,i,a),[r,c,u]=mf(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]};It.prototype.lch=function(){return uh(this._rgb)};It.prototype.hcl=function(){return hf(uh(this._rgb))};const wp=(...e)=>new It(...e,"lch"),xp=(...e)=>new It(...e,"hcl");Object.assign(fe,{lch:wp,hcl:xp});oe.format.lch=hh;oe.format.hcl=mp;["lch","hcl"].forEach(e=>oe.autodetect.push({p:2,test:(...t)=>{if(t=ce(t,e),ue(t)==="array"&&t.length===3)return e}}));It.prototype.saturate=function(e=1){const t=this,i=t.lch();return i[1]+=jr.Kn*e,i[1]<0&&(i[1]=0),new It(i,"lch").alpha(t.alpha(),!0)};It.prototype.desaturate=function(e=1){return this.saturate(-e)};It.prototype.set=function(e,t,i=!1){const[a,d]=e.split("."),p=this[a]();if(d){const v=a.indexOf(d)-(a.substr(0,2)==="ok"?2:0);if(v>-1){if(ue(t)=="string")switch(t.charAt(0)){case"+":p[v]+=+t;break;case"-":p[v]+=+t;break;case"*":p[v]*=+t.substr(1);break;case"/":p[v]/=+t.substr(1);break;default:p[v]=+t}else if(ue(t)==="number")p[v]=t;else throw new Error("unsupported value for Color.set");const o=new It(p,a);return i?(this._rgb=o._rgb,this):o}throw new Error(`unknown channel ${d} in mode ${a}`)}else return p};It.prototype.tint=function(e=.5,...t){return Js(this,"white",e,...t)};It.prototype.shade=function(e=.5,...t){return Js(this,"black",e,...t)};const _p=(e,t,i)=>{const a=e._rgb,d=t._rgb;return new It(a[0]+i*(d[0]-a[0]),a[1]+i*(d[1]-a[1]),a[2]+i*(d[2]-a[2]),"rgb")};Si.rgb=_p;const{sqrt:bc,pow:Ns}=Math,Sp=(e,t,i)=>{const[a,d,p]=e._rgb,[v,o,r]=t._rgb;return new It(bc(Ns(a,2)*(1-i)+Ns(v,2)*i),bc(Ns(d,2)*(1-i)+Ns(o,2)*i),bc(Ns(p,2)*(1-i)+Ns(r,2)*i),"rgb")};Si.lrgb=Sp;const Cp=(e,t,i)=>{const a=e.lab(),d=t.lab();return new It(a[0]+i*(d[0]-a[0]),a[1]+i*(d[1]-a[1]),a[2]+i*(d[2]-a[2]),"lab")};Si.lab=Cp;const ea=(e,t,i,a)=>{let d,p;a==="hsl"?(d=e.hsl(),p=t.hsl()):a==="hsv"?(d=e.hsv(),p=t.hsv()):a==="hcg"?(d=e.hcg(),p=t.hcg()):a==="hsi"?(d=e.hsi(),p=t.hsi()):a==="lch"||a==="hcl"?(a="hcl",d=e.hcl(),p=t.hcl()):a==="oklch"&&(d=e.oklch().reverse(),p=t.oklch().reverse());let v,o,r,c,u,s;(a.substr(0,1)==="h"||a==="oklch")&&([v,r,u]=d,[o,c,s]=p);let l,n,h,g;return!isNaN(v)&&!isNaN(o)?(o>v&&o-v>180?g=o-(v+360):o<v&&v-o>180?g=o+360-v:g=o-v,n=v+i*g):isNaN(v)?isNaN(o)?n=Number.NaN:(n=o,(u==1||u==0)&&a!="hsv"&&(l=c)):(n=v,(s==1||s==0)&&a!="hsv"&&(l=r)),l===void 0&&(l=r+i*(c-r)),h=u+i*(s-u),a==="oklch"?new It([h,l,n],a):new It([n,l,h],a)},vf=(e,t,i)=>ea(e,t,i,"lch");Si.lch=vf;Si.hcl=vf;const Ap=e=>{if(ue(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,i=e>>8&255,a=e&255;return[t,i,a,1]}throw new Error("unknown num color: "+e)},kp=(...e)=>{const[t,i,a]=ce(e,"rgb");return(t<<16)+(i<<8)+a};It.prototype.num=function(){return kp(this._rgb)};const Lp=(...e)=>new It(...e,"num");Object.assign(fe,{num:Lp});oe.format.num=Ap;oe.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&ue(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const Tp=(e,t,i)=>{const a=e.num(),d=t.num();return new It(a+i*(d-a),"num")};Si.num=Tp;const{floor:Pp}=Math,Op=(...e)=>{e=ce(e,"hcg");let[t,i,a]=e,d,p,v;a=a*255;const o=i*255;if(i===0)d=p=v=a;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const r=Pp(t),c=t-r,u=a*(1-i),s=u+o*(1-c),l=u+o*c,n=u+o;switch(r){case 0:[d,p,v]=[n,l,u];break;case 1:[d,p,v]=[s,n,u];break;case 2:[d,p,v]=[u,n,l];break;case 3:[d,p,v]=[u,s,n];break;case 4:[d,p,v]=[l,u,n];break;case 5:[d,p,v]=[n,u,s];break}}return[d,p,v,e.length>3?e[3]:1]},Mp=(...e)=>{const[t,i,a]=ce(e,"rgb"),d=lf(t,i,a),p=cf(t,i,a),v=p-d,o=v*100/255,r=d/(255-v)*100;let c;return v===0?c=Number.NaN:(t===p&&(c=(i-a)/v),i===p&&(c=2+(a-t)/v),a===p&&(c=4+(t-i)/v),c*=60,c<0&&(c+=360)),[c,o,r]};It.prototype.hcg=function(){return Mp(this._rgb)};const Np=(...e)=>new It(...e,"hcg");fe.hcg=Np;oe.format.hcg=Op;oe.autodetect.push({p:1,test:(...e)=>{if(e=ce(e,"hcg"),ue(e)==="array"&&e.length===3)return"hcg"}});const Fp=(e,t,i)=>ea(e,t,i,"hcg");Si.hcg=Fp;const{cos:Fs}=Math,Ep=(...e)=>{e=ce(e,"hsi");let[t,i,a]=e,d,p,v;return isNaN(t)&&(t=0),isNaN(i)&&(i=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(v=(1-i)/3,d=(1+i*Fs(Zr*t)/Fs(pc-Zr*t))/3,p=1-(v+d)):t<2/3?(t-=1/3,d=(1-i)/3,p=(1+i*Fs(Zr*t)/Fs(pc-Zr*t))/3,v=1-(d+p)):(t-=2/3,p=(1-i)/3,v=(1+i*Fs(Zr*t)/Fs(pc-Zr*t))/3,d=1-(p+v)),d=Jn(a*d*3),p=Jn(a*p*3),v=Jn(a*v*3),[d*255,p*255,v*255,e.length>3?e[3]:1]},{min:Ip,sqrt:jp,acos:Dp}=Math,Bp=(...e)=>{let[t,i,a]=ce(e,"rgb");t/=255,i/=255,a/=255;let d;const p=Ip(t,i,a),v=(t+i+a)/3,o=v>0?1-p/v:0;return o===0?d=NaN:(d=(t-i+(t-a))/2,d/=jp((t-i)*(t-i)+(t-a)*(i-a)),d=Dp(d),a>i&&(d=Zr-d),d/=Zr),[d*360,o,v]};It.prototype.hsi=function(){return Bp(this._rgb)};const Rp=(...e)=>new It(...e,"hsi");fe.hsi=Rp;oe.format.hsi=Ep;oe.autodetect.push({p:2,test:(...e)=>{if(e=ce(e,"hsi"),ue(e)==="array"&&e.length===3)return"hsi"}});const zp=(e,t,i)=>ea(e,t,i,"hsi");Si.hsi=zp;const Hc=(...e)=>{e=ce(e,"hsl");const[t,i,a]=e;let d,p,v;if(i===0)d=p=v=a*255;else{const o=[0,0,0],r=[0,0,0],c=a<.5?a*(1+i):a+i-a*i,u=2*a-c,s=t/360;o[0]=s+1/3,o[1]=s,o[2]=s-1/3;for(let l=0;l<3;l++)o[l]<0&&(o[l]+=1),o[l]>1&&(o[l]-=1),6*o[l]<1?r[l]=u+(c-u)*6*o[l]:2*o[l]<1?r[l]=c:3*o[l]<2?r[l]=u+(c-u)*(2/3-o[l])*6:r[l]=u;[d,p,v]=[r[0]*255,r[1]*255,r[2]*255]}return e.length>3?[d,p,v,e[3]]:[d,p,v,1]},bf=(...e)=>{e=ce(e,"rgba");let[t,i,a]=e;t/=255,i/=255,a/=255;const d=lf(t,i,a),p=cf(t,i,a),v=(p+d)/2;let o,r;return p===d?(o=0,r=Number.NaN):o=v<.5?(p-d)/(p+d):(p-d)/(2-p-d),t==p?r=(i-a)/(p-d):i==p?r=2+(a-t)/(p-d):a==p&&(r=4+(t-i)/(p-d)),r*=60,r<0&&(r+=360),e.length>3&&e[3]!==void 0?[r,o,v,e[3]]:[r,o,v]};It.prototype.hsl=function(){return bf(this._rgb)};const qp=(...e)=>new It(...e,"hsl");fe.hsl=qp;oe.format.hsl=Hc;oe.autodetect.push({p:2,test:(...e)=>{if(e=ce(e,"hsl"),ue(e)==="array"&&e.length===3)return"hsl"}});const Up=(e,t,i)=>ea(e,t,i,"hsl");Si.hsl=Up;const{floor:Wp}=Math,Hp=(...e)=>{e=ce(e,"hsv");let[t,i,a]=e,d,p,v;if(a*=255,i===0)d=p=v=a;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const o=Wp(t),r=t-o,c=a*(1-i),u=a*(1-i*r),s=a*(1-i*(1-r));switch(o){case 0:[d,p,v]=[a,s,c];break;case 1:[d,p,v]=[u,a,c];break;case 2:[d,p,v]=[c,a,s];break;case 3:[d,p,v]=[c,u,a];break;case 4:[d,p,v]=[s,c,a];break;case 5:[d,p,v]=[a,c,u];break}}return[d,p,v,e.length>3?e[3]:1]},{min:Yp,max:Vp}=Math,Xp=(...e)=>{e=ce(e,"rgb");let[t,i,a]=e;const d=Yp(t,i,a),p=Vp(t,i,a),v=p-d;let o,r,c;return c=p/255,p===0?(o=Number.NaN,r=0):(r=v/p,t===p&&(o=(i-a)/v),i===p&&(o=2+(a-t)/v),a===p&&(o=4+(t-i)/v),o*=60,o<0&&(o+=360)),[o,r,c]};It.prototype.hsv=function(){return Xp(this._rgb)};const Gp=(...e)=>new It(...e,"hsv");fe.hsv=Gp;oe.format.hsv=Hp;oe.autodetect.push({p:2,test:(...e)=>{if(e=ce(e,"hsv"),ue(e)==="array"&&e.length===3)return"hsv"}});const $p=(e,t,i)=>ea(e,t,i,"hsv");Si.hsv=$p;function ul(e,t){let i=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(v=>[v]));let a=t[0].length,d=t[0].map((v,o)=>t.map(r=>r[o])),p=e.map(v=>d.map(o=>Array.isArray(v)?v.reduce((r,c,u)=>r+c*(o[u]||0),0):o.reduce((r,c)=>r+c*v,0)));return i===1&&(p=p[0]),a===1?p.map(v=>v[0]):p}const fh=(...e)=>{e=ce(e,"lab");const[t,i,a,...d]=e,[p,v,o]=Kp([t,i,a]),[r,c,u]=df(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]};function Kp(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],i=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],a=ul(i,e);return ul(t,a.map(d=>d**3))}const dh=(...e)=>{const[t,i,a,...d]=ce(e,"rgb"),p=pf(t,i,a);return[...Jp(p),...d.length>0&&d[0]<1?[d[0]]:[]]};function Jp(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],i=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],a=ul(t,e);return ul(i,a.map(d=>Math.cbrt(d)))}It.prototype.oklab=function(){return dh(this._rgb)};const Zp=(...e)=>new It(...e,"oklab");Object.assign(fe,{oklab:Zp});oe.format.oklab=fh;oe.autodetect.push({p:2,test:(...e)=>{if(e=ce(e,"oklab"),ue(e)==="array"&&e.length===3)return"oklab"}});const Qp=(e,t,i)=>{const a=e.oklab(),d=t.oklab();return new It(a[0]+i*(d[0]-a[0]),a[1]+i*(d[1]-a[1]),a[2]+i*(d[2]-a[2]),"oklab")};Si.oklab=Qp;const t1=(e,t,i)=>ea(e,t,i,"oklch");Si.oklch=t1;const{pow:yc,sqrt:wc,PI:xc,cos:iu,sin:ru,atan2:e1}=Math,i1=(e,t="lrgb",i=null)=>{const a=e.length;i||(i=Array.from(new Array(a)).map(()=>1));const d=a/i.reduce(function(s,l){return s+l});if(i.forEach((s,l)=>{i[l]*=d}),e=e.map(s=>new It(s)),t==="lrgb")return r1(e,i);const p=e.shift(),v=p.get(t),o=[];let r=0,c=0;for(let s=0;s<v.length;s++)if(v[s]=(v[s]||0)*i[0],o.push(isNaN(v[s])?0:i[0]),t.charAt(s)==="h"&&!isNaN(v[s])){const l=v[s]/180*xc;r+=iu(l)*i[0],c+=ru(l)*i[0]}let u=p.alpha()*i[0];e.forEach((s,l)=>{const n=s.get(t);u+=s.alpha()*i[l+1];for(let h=0;h<v.length;h++)if(!isNaN(n[h]))if(o[h]+=i[l+1],t.charAt(h)==="h"){const g=n[h]/180*xc;r+=iu(g)*i[l+1],c+=ru(g)*i[l+1]}else v[h]+=n[h]*i[l+1]});for(let s=0;s<v.length;s++)if(t.charAt(s)==="h"){let l=e1(c/o[s],r/o[s])/xc*180;for(;l<0;)l+=360;for(;l>=360;)l-=360;v[s]=l}else v[s]=v[s]/o[s];return u/=a,new It(v,t).alpha(u>.99999?1:u,!0)},r1=(e,t)=>{const i=e.length,a=[0,0,0,0];for(let d=0;d<e.length;d++){const p=e[d],v=t[d]/i,o=p._rgb;a[0]+=yc(o[0],2)*v,a[1]+=yc(o[1],2)*v,a[2]+=yc(o[2],2)*v,a[3]+=o[3]*v}return a[0]=wc(a[0]),a[1]=wc(a[1]),a[2]=wc(a[2]),a[3]>.9999999&&(a[3]=1),new It(oh(a))},{pow:n1}=Math;function fl(e){let t="rgb",i=fe("#ccc"),a=0,d=[0,1],p=[],v=[0,0],o=!1,r=[],c=!1,u=0,s=1,l=!1,n={},h=!0,g=1;const f=function(T){if(T=T||["#fff","#000"],T&&ue(T)==="string"&&fe.brewer&&fe.brewer[T.toLowerCase()]&&(T=fe.brewer[T.toLowerCase()]),ue(T)==="array"){T.length===1&&(T=[T[0],T[0]]),T=T.slice(0);for(let O=0;O<T.length;O++)T[O]=fe(T[O]);p.length=0;for(let O=0;O<T.length;O++)p.push(O/(T.length-1))}return A(),r=T},m=function(T){if(o!=null){const O=o.length-1;let B=0;for(;B<O&&T>=o[B];)B++;return B-1}return 0};let y=T=>T,x=T=>T;const _=function(T,O){let B,X;if(O==null&&(O=!1),isNaN(T)||T===null)return i;O?X=T:o&&o.length>2?X=m(T)/(o.length-2):s!==u?X=(T-u)/(s-u):X=1,X=x(X),O||(X=y(X)),g!==1&&(X=n1(X,g)),X=v[0]+X*(1-v[0]-v[1]),X=Jn(X,0,1);const F=Math.floor(X*1e4);if(h&&n[F])B=n[F];else{if(ue(r)==="array")for(let I=0;I<p.length;I++){const K=p[I];if(X<=K){B=r[I];break}if(X>=K&&I===p.length-1){B=r[I];break}if(X>K&&X<p[I+1]){X=(X-K)/(p[I+1]-K),B=fe.interpolate(r[I],r[I+1],X,t);break}}else ue(r)==="function"&&(B=r(X));h&&(n[F]=B)}return B};var A=()=>n={};f(e);const M=function(T){const O=fe(_(T));return c&&O[c]?O[c]():O};return M.classes=function(T){if(T!=null){if(ue(T)==="array")o=T,d=[T[0],T[T.length-1]];else{const O=fe.analyze(d);T===0?o=[O.min,O.max]:o=fe.limits(O,"e",T)}return M}return o},M.domain=function(T){if(!arguments.length)return d;u=T[0],s=T[T.length-1],p=[];const O=r.length;if(T.length===O&&u!==s)for(let B of Array.from(T))p.push((B-u)/(s-u));else{for(let B=0;B<O;B++)p.push(B/(O-1));if(T.length>2){const B=T.map((F,I)=>I/(T.length-1)),X=T.map(F=>(F-u)/(s-u));X.every((F,I)=>B[I]===F)||(x=F=>{if(F<=0||F>=1)return F;let I=0;for(;F>=X[I+1];)I++;const K=(F-X[I])/(X[I+1]-X[I]);return B[I]+K*(B[I+1]-B[I])})}}return d=[u,s],M},M.mode=function(T){return arguments.length?(t=T,A(),M):t},M.range=function(T,O){return f(T),M},M.out=function(T){return c=T,M},M.spread=function(T){return arguments.length?(a=T,M):a},M.correctLightness=function(T){return T==null&&(T=!0),l=T,A(),l?y=function(O){const B=_(0,!0).lab()[0],X=_(1,!0).lab()[0],F=B>X;let I=_(O,!0).lab()[0];const K=B+(X-B)*O;let G=I-K,rt=0,at=1,gt=20;for(;Math.abs(G)>.01&&gt-- >0;)(function(){return F&&(G*=-1),G<0?(rt=O,O+=(at-O)*.5):(at=O,O+=(rt-O)*.5),I=_(O,!0).lab()[0],G=I-K})();return O}:y=O=>O,M},M.padding=function(T){return T!=null?(ue(T)==="number"&&(T=[T,T]),v=T,M):v},M.colors=function(T,O){arguments.length<2&&(O="hex");let B=[];if(arguments.length===0)B=r.slice(0);else if(T===1)B=[M(.5)];else if(T>1){const X=d[0],F=d[1]-X;B=s1(0,T).map(I=>M(X+I/(T-1)*F))}else{e=[];let X=[];if(o&&o.length>2)for(let F=1,I=o.length,K=1<=I;K?F<I:F>I;K?F++:F--)X.push((o[F-1]+o[F])*.5);else X=d;B=X.map(F=>M(F))}return fe[O]&&(B=B.map(X=>X[O]())),B},M.cache=function(T){return T!=null?(h=T,M):h},M.gamma=function(T){return T!=null?(g=T,M):g},M.nodata=function(T){return T!=null?(i=fe(T),M):i},M}function s1(e,t,i){let a=[],d=e<t,p=t;for(let v=e;d?v<p:v>p;d?v++:v--)a.push(v);return a}const a1=function(e){let t=[1,1];for(let i=1;i<e;i++){let a=[1];for(let d=1;d<=t.length;d++)a[d]=(t[d]||0)+t[d-1];t=a}return t},o1=function(e){let t,i,a,d;if(e=e.map(p=>new It(p)),e.length===2)[i,a]=e.map(p=>p.lab()),t=function(p){const v=[0,1,2].map(o=>i[o]+p*(a[o]-i[o]));return new It(v,"lab")};else if(e.length===3)[i,a,d]=e.map(p=>p.lab()),t=function(p){const v=[0,1,2].map(o=>(1-p)*(1-p)*i[o]+2*(1-p)*p*a[o]+p*p*d[o]);return new It(v,"lab")};else if(e.length===4){let p;[i,a,d,p]=e.map(v=>v.lab()),t=function(v){const o=[0,1,2].map(r=>(1-v)*(1-v)*(1-v)*i[r]+3*(1-v)*(1-v)*v*a[r]+3*(1-v)*v*v*d[r]+v*v*v*p[r]);return new It(o,"lab")}}else if(e.length>=5){let p,v,o;p=e.map(r=>r.lab()),o=e.length-1,v=a1(o),t=function(r){const c=1-r,u=[0,1,2].map(s=>p.reduce((l,n,h)=>l+v[h]*c**(o-h)*r**h*n[s],0));return new It(u,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},l1=e=>{const t=o1(e);return t.scale=()=>fl(t),t},{round:yf}=Math;It.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(yf)};It.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,i)=>i<3?e===!1?t:yf(t):t)};const c1=(...e)=>new It(...e,"rgb");Object.assign(fe,{rgb:c1});oe.format.rgb=(...e)=>{const t=ce(e,"rgba");return t[3]===void 0&&(t[3]=1),t};oe.autodetect.push({p:3,test:(...e)=>{if(e=ce(e,"rgba"),ue(e)==="array"&&(e.length===3||e.length===4&&ue(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const br=(e,t,i)=>{if(!br[i])throw new Error("unknown blend mode "+i);return br[i](e,t)},On=e=>(t,i)=>{const a=fe(i).rgb(),d=fe(t).rgb();return fe.rgb(e(a,d))},Mn=e=>(t,i)=>{const a=[];return a[0]=e(t[0],i[0]),a[1]=e(t[1],i[1]),a[2]=e(t[2],i[2]),a},h1=e=>e,u1=(e,t)=>e*t/255,f1=(e,t)=>e>t?t:e,d1=(e,t)=>e>t?e:t,p1=(e,t)=>255*(1-(1-e/255)*(1-t/255)),g1=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),m1=(e,t)=>255*(1-(1-t/255)/(e/255)),v1=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);br.normal=On(Mn(h1));br.multiply=On(Mn(u1));br.screen=On(Mn(p1));br.overlay=On(Mn(g1));br.darken=On(Mn(f1));br.lighten=On(Mn(d1));br.dodge=On(Mn(v1));br.burn=On(Mn(m1));const{pow:b1,sin:y1,cos:w1}=Math;function x1(e=300,t=-1.5,i=1,a=1,d=[0,1]){let p=0,v;ue(d)==="array"?v=d[1]-d[0]:(v=0,d=[d,d]);const o=function(r){const c=Zr*((e+120)/360+t*r),u=b1(d[0]+v*r,a),l=(p!==0?i[0]+r*p:i)*u*(1-u)/2,n=w1(c),h=y1(c),g=u+l*(-.14861*n+1.78277*h),f=u+l*(-.29227*n-.90649*h),m=u+l*(1.97294*n);return fe(oh([g*255,f*255,m*255,1]))};return o.start=function(r){return r==null?e:(e=r,o)},o.rotations=function(r){return r==null?t:(t=r,o)},o.gamma=function(r){return r==null?a:(a=r,o)},o.hue=function(r){return r==null?i:(i=r,ue(i)==="array"?(p=i[1]-i[0],p===0&&(i=i[1])):p=0,o)},o.lightness=function(r){return r==null?d:(ue(r)==="array"?(d=r,v=r[1]-r[0]):(d=[r,r],v=0),o)},o.scale=()=>fe.scale(o),o.hue(i),o}const _1="0123456789abcdef",{floor:S1,random:C1}=Math,A1=()=>{let e="#";for(let t=0;t<6;t++)e+=_1.charAt(S1(C1()*16));return new It(e,"hex")},{log:nu,pow:k1,floor:L1,abs:T1}=Math;function wf(e,t=null){const i={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return ue(e)==="object"&&(e=Object.values(e)),e.forEach(a=>{t&&ue(a)==="object"&&(a=a[t]),a!=null&&!isNaN(a)&&(i.values.push(a),i.sum+=a,a<i.min&&(i.min=a),a>i.max&&(i.max=a),i.count+=1)}),i.domain=[i.min,i.max],i.limits=(a,d)=>xf(i,a,d),i}function xf(e,t="equal",i=7){ue(e)=="array"&&(e=wf(e));const{min:a,max:d}=e,p=e.values.sort((o,r)=>o-r);if(i===1)return[a,d];const v=[];if(t.substr(0,1)==="c"&&(v.push(a),v.push(d)),t.substr(0,1)==="e"){v.push(a);for(let o=1;o<i;o++)v.push(a+o/i*(d-a));v.push(d)}else if(t.substr(0,1)==="l"){if(a<=0)throw new Error("Logarithmic scales are only possible for values > 0");const o=Math.LOG10E*nu(a),r=Math.LOG10E*nu(d);v.push(a);for(let c=1;c<i;c++)v.push(k1(10,o+c/i*(r-o)));v.push(d)}else if(t.substr(0,1)==="q"){v.push(a);for(let o=1;o<i;o++){const r=(p.length-1)*o/i,c=L1(r);if(c===r)v.push(p[c]);else{const u=r-c;v.push(p[c]*(1-u)+p[c+1]*u)}}v.push(d)}else if(t.substr(0,1)==="k"){let o;const r=p.length,c=new Array(r),u=new Array(i);let s=!0,l=0,n=null;n=[],n.push(a);for(let f=1;f<i;f++)n.push(a+f/i*(d-a));for(n.push(d);s;){for(let m=0;m<i;m++)u[m]=0;for(let m=0;m<r;m++){const y=p[m];let x=Number.MAX_VALUE,_;for(let A=0;A<i;A++){const M=T1(n[A]-y);M<x&&(x=M,_=A),u[_]++,c[m]=_}}const f=new Array(i);for(let m=0;m<i;m++)f[m]=null;for(let m=0;m<r;m++)o=c[m],f[o]===null?f[o]=p[m]:f[o]+=p[m];for(let m=0;m<i;m++)f[m]*=1/u[m];s=!1;for(let m=0;m<i;m++)if(f[m]!==n[m]){s=!0;break}n=f,l++,l>200&&(s=!1)}const h={};for(let f=0;f<i;f++)h[f]=[];for(let f=0;f<r;f++)o=c[f],h[o].push(p[f]);let g=[];for(let f=0;f<i;f++)g.push(h[f][0]),g.push(h[f][h[f].length-1]);g=g.sort((f,m)=>f-m),v.push(g[0]);for(let f=1;f<g.length;f+=2){const m=g[f];!isNaN(m)&&v.indexOf(m)===-1&&v.push(m)}}return v}const P1=(e,t)=>{e=new It(e),t=new It(t);const i=e.luminance(),a=t.luminance();return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const su=.027,O1=5e-4,M1=.1,au=1.14,Wo=.022,ou=1.414,N1=(e,t)=>{e=new It(e),t=new It(t),e.alpha()<1&&(e=Js(t,e,e.alpha(),"rgb"));const i=lu(...e.rgb()),a=lu(...t.rgb()),d=i>=Wo?i:i+Math.pow(Wo-i,ou),p=a>=Wo?a:a+Math.pow(Wo-a,ou),v=Math.pow(p,.56)-Math.pow(d,.57),o=Math.pow(p,.65)-Math.pow(d,.62),r=Math.abs(p-d)<O1?0:d<p?v*au:o*au;return(Math.abs(r)<M1?0:r>0?r-su:r+su)*100};function lu(e,t,i){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(i/255,2.4)}const{sqrt:Kr,pow:ii,min:F1,max:E1,atan2:cu,abs:hu,cos:Ho,sin:uu,exp:I1,PI:fu}=Math;function j1(e,t,i=1,a=1,d=1){var p=function(R){return 360*R/(2*fu)},v=function(R){return 2*fu*R/360};e=new It(e),t=new It(t);const[o,r,c]=Array.from(e.lab()),[u,s,l]=Array.from(t.lab()),n=(o+u)/2,h=Kr(ii(r,2)+ii(c,2)),g=Kr(ii(s,2)+ii(l,2)),f=(h+g)/2,m=.5*(1-Kr(ii(f,7)/(ii(f,7)+ii(25,7)))),y=r*(1+m),x=s*(1+m),_=Kr(ii(y,2)+ii(c,2)),A=Kr(ii(x,2)+ii(l,2)),M=(_+A)/2,T=p(cu(c,y)),O=p(cu(l,x)),B=T>=0?T:T+360,X=O>=0?O:O+360,F=hu(B-X)>180?(B+X+360)/2:(B+X)/2,I=1-.17*Ho(v(F-30))+.24*Ho(v(2*F))+.32*Ho(v(3*F+6))-.2*Ho(v(4*F-63));let K=X-B;K=hu(K)<=180?K:X<=B?K+360:K-360,K=2*Kr(_*A)*uu(v(K)/2);const G=u-o,rt=A-_,at=1+.015*ii(n-50,2)/Kr(20+ii(n-50,2)),gt=1+.045*M,nt=1+.015*M*I,E=30*I1(-ii((F-275)/25,2)),J=-(2*Kr(ii(M,7)/(ii(M,7)+ii(25,7))))*uu(2*v(E)),k=Kr(ii(G/(i*at),2)+ii(rt/(a*gt),2)+ii(K/(d*nt),2)+J*(rt/(a*gt))*(K/(d*nt)));return E1(0,F1(100,k))}function D1(e,t,i="lab"){e=new It(e),t=new It(t);const a=e.get(i),d=t.get(i);let p=0;for(let v in a){const o=(a[v]||0)-(d[v]||0);p+=o*o}return Math.sqrt(p)}const B1=(...e)=>{try{return new It(...e),!0}catch{return!1}},R1={cool(){return fl([fe.hsl(180,1,.9),fe.hsl(250,.7,.4)])},hot(){return fl(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Yc={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},_f=Object.keys(Yc),du=new Map(_f.map(e=>[e.toLowerCase(),e])),z1=typeof Proxy=="function"?new Proxy(Yc,{get(e,t){const i=t.toLowerCase();if(du.has(i))return e[du.get(i)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(_f)}}):Yc,q1=(...e)=>{e=ce(e,"cmyk");const[t,i,a,d]=e,p=e.length>4?e[4]:1;return d===1?[0,0,0,p]:[t>=1?0:255*(1-t)*(1-d),i>=1?0:255*(1-i)*(1-d),a>=1?0:255*(1-a)*(1-d),p]},{max:pu}=Math,U1=(...e)=>{let[t,i,a]=ce(e,"rgb");t=t/255,i=i/255,a=a/255;const d=1-pu(t,pu(i,a)),p=d<1?1/(1-d):0,v=(1-t-d)*p,o=(1-i-d)*p,r=(1-a-d)*p;return[v,o,r,d]};It.prototype.cmyk=function(){return U1(this._rgb)};const W1=(...e)=>new It(...e,"cmyk");Object.assign(fe,{cmyk:W1});oe.format.cmyk=q1;oe.autodetect.push({p:2,test:(...e)=>{if(e=ce(e,"cmyk"),ue(e)==="array"&&e.length===4)return"cmyk"}});const H1=(...e)=>{const t=ce(e,"hsla");let i=ta(e)||"lsa";return t[0]=Qi(t[0]||0)+"deg",t[1]=Qi(t[1]*100)+"%",t[2]=Qi(t[2]*100)+"%",i==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),i="hsla"):t.length=3,`${i.substr(0,3)}(${t.join(" ")})`},Y1=(...e)=>{const t=ce(e,"lab");let i=ta(e)||"lab";return t[0]=Qi(t[0])+"%",t[1]=Qi(t[1]),t[2]=Qi(t[2]),i==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},V1=(...e)=>{const t=ce(e,"lch");let i=ta(e)||"lab";return t[0]=Qi(t[0])+"%",t[1]=Qi(t[1]),t[2]=isNaN(t[2])?"none":Qi(t[2])+"deg",i==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},X1=(...e)=>{const t=ce(e,"lab");return t[0]=Qi(t[0]*100)+"%",t[1]=Wc(t[1]),t[2]=Wc(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},Sf=(...e)=>{const[t,i,a,...d]=ce(e,"rgb"),[p,v,o]=dh(t,i,a),[r,c,u]=mf(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]},G1=(...e)=>{const t=ce(e,"lch");return t[0]=Qi(t[0]*100)+"%",t[1]=Wc(t[1]),t[2]=isNaN(t[2])?"none":Qi(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:_c}=Math,$1=(...e)=>{const t=ce(e,"rgba");let i=ta(e)||"rgb";if(i.substr(0,3)==="hsl")return H1(bf(t),i);if(i.substr(0,3)==="lab"){const a=Wa();tn("d50");const d=Y1(ch(t),i);return tn(a),d}if(i.substr(0,3)==="lch"){const a=Wa();tn("d50");const d=V1(uh(t),i);return tn(a),d}return i.substr(0,5)==="oklab"?X1(dh(t)):i.substr(0,5)==="oklch"?G1(Sf(t)):(t[0]=_c(t[0]),t[1]=_c(t[1]),t[2]=_c(t[2]),(i==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),i="rgba"),`${i.substr(0,3)}(${t.slice(0,i==="rgb"?3:4).join(" ")})`)},Cf=(...e)=>{e=ce(e,"lch");const[t,i,a,...d]=e,[p,v,o]=gf(t,i,a),[r,c,u]=fh(p,v,o);return[r,c,u,...d.length>0&&d[0]<1?[d[0]]:[]]},rn=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,vr=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,dl=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,tr=/\s*/.source,ia=/\s+/.source,ph=/\s*,\s*/.source,vl=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,ra=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Af=new RegExp("^rgba?\\("+tr+[rn,rn,rn].join(ia)+ra+"\\)$"),kf=new RegExp("^rgb\\("+tr+[rn,rn,rn].join(ph)+tr+"\\)$"),Lf=new RegExp("^rgba\\("+tr+[rn,rn,rn,vr].join(ph)+tr+"\\)$"),Tf=new RegExp("^hsla?\\("+tr+[vl,dl,dl].join(ia)+ra+"\\)$"),Pf=new RegExp("^hsl?\\("+tr+[vl,dl,dl].join(ph)+tr+"\\)$"),Of=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Mf=new RegExp("^lab\\("+tr+[vr,vr,vr].join(ia)+ra+"\\)$"),Nf=new RegExp("^lch\\("+tr+[vr,vr,vl].join(ia)+ra+"\\)$"),Ff=new RegExp("^oklab\\("+tr+[vr,vr,vr].join(ia)+ra+"\\)$"),Ef=new RegExp("^oklch\\("+tr+[vr,vr,vl].join(ia)+ra+"\\)$"),{round:If}=Math,Es=e=>e.map((t,i)=>i<=2?Jn(If(t),0,255):t),ri=(e,t=0,i=100,a=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,a?e=t+(e+1)*.5*(i-t):e=t+e*(i-t)),+e),Li=(e,t)=>e==="none"?t:e,gh=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(oe.format.named)try{return oe.format.named(e)}catch{}if((t=e.match(Af))||(t=e.match(kf))){let i=t.slice(1,4);for(let d=0;d<3;d++)i[d]=+ri(Li(i[d],0),0,255);i=Es(i);const a=t[4]!==void 0?+ri(t[4],0,1):1;return i[3]=a,i}if(t=e.match(Lf)){const i=t.slice(1,5);for(let a=0;a<4;a++)i[a]=+ri(i[a],0,255);return i}if((t=e.match(Tf))||(t=e.match(Pf))){const i=t.slice(1,4);i[0]=+Li(i[0].replace("deg",""),0),i[1]=+ri(Li(i[1],0),0,100)*.01,i[2]=+ri(Li(i[2],0),0,100)*.01;const a=Es(Hc(i)),d=t[4]!==void 0?+ri(t[4],0,1):1;return a[3]=d,a}if(t=e.match(Of)){const i=t.slice(1,4);i[1]*=.01,i[2]*=.01;const a=Hc(i);for(let d=0;d<3;d++)a[d]=If(a[d]);return a[3]=+t[4],a}if(t=e.match(Mf)){const i=t.slice(1,4);i[0]=ri(Li(i[0],0),0,100),i[1]=ri(Li(i[1],0),-125,125,!0),i[2]=ri(Li(i[2],0),-125,125,!0);const a=Wa();tn("d50");const d=Es(lh(i));tn(a);const p=t[4]!==void 0?+ri(t[4],0,1):1;return d[3]=p,d}if(t=e.match(Nf)){const i=t.slice(1,4);i[0]=ri(i[0],0,100),i[1]=ri(Li(i[1],0),0,150,!1),i[2]=+Li(i[2].replace("deg",""),0);const a=Wa();tn("d50");const d=Es(hh(i));tn(a);const p=t[4]!==void 0?+ri(t[4],0,1):1;return d[3]=p,d}if(t=e.match(Ff)){const i=t.slice(1,4);i[0]=ri(Li(i[0],0),0,1),i[1]=ri(Li(i[1],0),-.4,.4,!0),i[2]=ri(Li(i[2],0),-.4,.4,!0);const a=Es(fh(i)),d=t[4]!==void 0?+ri(t[4],0,1):1;return a[3]=d,a}if(t=e.match(Ef)){const i=t.slice(1,4);i[0]=ri(Li(i[0],0),0,1),i[1]=ri(Li(i[1],0),0,.4,!1),i[2]=+Li(i[2].replace("deg",""),0);const a=Es(Cf(i)),d=t[4]!==void 0?+ri(t[4],0,1):1;return a[3]=d,a}};gh.test=e=>Af.test(e)||Tf.test(e)||Mf.test(e)||Nf.test(e)||Ff.test(e)||Ef.test(e)||kf.test(e)||Lf.test(e)||Pf.test(e)||Of.test(e)||e==="transparent";It.prototype.css=function(e){return $1(this._rgb,e)};const K1=(...e)=>new It(...e,"css");fe.css=K1;oe.format.css=gh;oe.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&ue(e)==="string"&&gh.test(e))return"css"}});oe.format.gl=(...e)=>{const t=ce(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const J1=(...e)=>new It(...e,"gl");fe.gl=J1;It.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};It.prototype.hex=function(e){return ff(this._rgb,e)};const Z1=(...e)=>new It(...e,"hex");fe.hex=Z1;oe.format.hex=uf;oe.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&ue(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:Yo}=Math,jf=e=>{const t=e/100;let i,a,d;return t<66?(i=255,a=t<6?0:-155.25485562709179-.44596950469579133*(a=t-2)+104.49216199393888*Yo(a),d=t<20?0:-254.76935184120902+.8274096064007395*(d=t-10)+115.67994401066147*Yo(d)):(i=351.97690566805693+.114206453784165*(i=t-55)-40.25366309332127*Yo(i),a=325.4494125711974+.07943456536662342*(a=t-50)-28.0852963507957*Yo(a),d=255),[i,a,d,1]},{round:Q1}=Math,tg=(...e)=>{const t=ce(e,"rgb"),i=t[0],a=t[2];let d=1e3,p=4e4;const v=.4;let o;for(;p-d>v;){o=(p+d)*.5;const r=jf(o);r[2]/r[0]>=a/i?p=o:d=o}return Q1(o)};It.prototype.temp=It.prototype.kelvin=It.prototype.temperature=function(){return tg(this._rgb)};const Sc=(...e)=>new It(...e,"temp");Object.assign(fe,{temp:Sc,kelvin:Sc,temperature:Sc});oe.format.temp=oe.format.kelvin=oe.format.temperature=jf;It.prototype.oklch=function(){return Sf(this._rgb)};const eg=(...e)=>new It(...e,"oklch");Object.assign(fe,{oklch:eg});oe.format.oklch=Cf;oe.autodetect.push({p:2,test:(...e)=>{if(e=ce(e,"oklch"),ue(e)==="array"&&e.length===3)return"oklch"}});Object.assign(fe,{analyze:wf,average:i1,bezier:l1,blend:br,brewer:z1,Color:It,colors:Ks,contrast:P1,contrastAPCA:N1,cubehelix:x1,deltaE:j1,distance:D1,input:oe,interpolate:Js,limits:xf,mix:Js,random:A1,scale:fl,scales:R1,valid:B1});function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}var _i=Uint8Array,Wi=Uint16Array,mh=Int32Array,bl=new _i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yl=new _i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Vc=new _i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Df=function(e,t){for(var i=new Wi(31),a=0;a<31;++a)i[a]=t+=1<<e[a-1];for(var d=new mh(i[30]),a=1;a<30;++a)for(var p=i[a];p<i[a+1];++p)d[p]=p-i[a]<<5|a;return{b:i,r:d}},Bf=Df(bl,2),Rf=Bf.b,Xc=Bf.r;Rf[28]=258,Xc[258]=28;var zf=Df(yl,0),ig=zf.b,gu=zf.r,Gc=new Wi(32768);for(var De=0;De<32768;++De){var wn=(De&43690)>>1|(De&21845)<<1;wn=(wn&52428)>>2|(wn&13107)<<2,wn=(wn&61680)>>4|(wn&3855)<<4,Gc[De]=((wn&65280)>>8|(wn&255)<<8)>>1}var Dr=function(e,t,i){for(var a=e.length,d=0,p=new Wi(t);d<a;++d)e[d]&&++p[e[d]-1];var v=new Wi(t);for(d=1;d<t;++d)v[d]=v[d-1]+p[d-1]<<1;var o;if(i){o=new Wi(1<<t);var r=15-t;for(d=0;d<a;++d)if(e[d])for(var c=d<<4|e[d],u=t-e[d],s=v[e[d]-1]++<<u,l=s|(1<<u)-1;s<=l;++s)o[Gc[s]>>r]=c}else for(o=new Wi(a),d=0;d<a;++d)e[d]&&(o[d]=Gc[v[e[d]-1]++]>>15-e[d]);return o},kn=new _i(288);for(var De=0;De<144;++De)kn[De]=8;for(var De=144;De<256;++De)kn[De]=9;for(var De=256;De<280;++De)kn[De]=7;for(var De=280;De<288;++De)kn[De]=8;var Ha=new _i(32);for(var De=0;De<32;++De)Ha[De]=5;var rg=Dr(kn,9,0),ng=Dr(kn,9,1),sg=Dr(Ha,5,0),ag=Dr(Ha,5,1),Cc=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},dr=function(e,t,i){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&i},Ac=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},vh=function(e){return(e+7)/8|0},qf=function(e,t,i){return(i==null||i>e.length)&&(i=e.length),new _i(e.subarray(t,i))},og=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gr=function(e,t,i){var a=new Error(t||og[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,gr),!i)throw a;return a},lg=function(e,t,i,a){var d=e.length,p=0;if(!d||t.f&&!t.l)return i||new _i(0);var v=!i,o=v||t.i!=2,r=t.i;v&&(i=new _i(d*3));var c=function(dt){var St=i.length;if(dt>St){var ot=new _i(Math.max(St*2,dt));ot.set(i),i=ot}},u=t.f||0,s=t.p||0,l=t.b||0,n=t.l,h=t.d,g=t.m,f=t.n,m=d*8;do{if(!n){u=dr(e,s,1);var y=dr(e,s+1,3);if(s+=3,y)if(y==1)n=ng,h=ag,g=9,f=5;else if(y==2){var M=dr(e,s,31)+257,T=dr(e,s+10,15)+4,O=M+dr(e,s+5,31)+1;s+=14;for(var B=new _i(O),X=new _i(19),F=0;F<T;++F)X[Vc[F]]=dr(e,s+F*3,7);s+=T*3;for(var I=Cc(X),K=(1<<I)-1,G=Dr(X,I,1),F=0;F<O;){var rt=G[dr(e,s,K)];s+=rt&15;var x=rt>>4;if(x<16)B[F++]=x;else{var at=0,gt=0;for(x==16?(gt=3+dr(e,s,3),s+=2,at=B[F-1]):x==17?(gt=3+dr(e,s,7),s+=3):x==18&&(gt=11+dr(e,s,127),s+=7);gt--;)B[F++]=at}}var nt=B.subarray(0,M),E=B.subarray(M);g=Cc(nt),f=Cc(E),n=Dr(nt,g,1),h=Dr(E,f,1)}else gr(1);else{var x=vh(s)+4,_=e[x-4]|e[x-3]<<8,A=x+_;if(A>d){r&&gr(0);break}o&&c(l+_),i.set(e.subarray(x,A),l),t.b=l+=_,t.p=s=A*8,t.f=u;continue}if(s>m){r&&gr(0);break}}o&&c(l+131072);for(var Y=(1<<g)-1,J=(1<<f)-1,k=s;;k=s){var at=n[Ac(e,s)&Y],R=at>>4;if(s+=at&15,s>m){r&&gr(0);break}if(at||gr(2),R<256)i[l++]=R;else if(R==256){k=s,n=null;break}else{var N=R-254;if(R>264){var F=R-257,P=bl[F];N=dr(e,s,(1<<P)-1)+Rf[F],s+=P}var U=h[Ac(e,s)&J],$=U>>4;U||gr(3),s+=U&15;var E=ig[$];if($>3){var P=yl[$];E+=Ac(e,s)&(1<<P)-1,s+=P}if(s>m){r&&gr(0);break}o&&c(l+131072);var tt=l+N;if(l<E){var Q=p-E,ut=Math.min(E,tt);for(Q+l<0&&gr(3);l<ut;++l)i[l]=a[Q+l]}for(;l<tt;++l)i[l]=i[l-E]}}t.l=n,t.p=k,t.b=l,t.f=u,n&&(u=1,t.m=g,t.d=h,t.n=f)}while(!u);return l!=i.length&&v?qf(i,0,l):i.subarray(0,l)},Jr=function(e,t,i){i<<=t&7;var a=t/8|0;e[a]|=i,e[a+1]|=i>>8},Ea=function(e,t,i){i<<=t&7;var a=t/8|0;e[a]|=i,e[a+1]|=i>>8,e[a+2]|=i>>16},kc=function(e,t){for(var i=[],a=0;a<e.length;++a)e[a]&&i.push({s:a,f:e[a]});var d=i.length,p=i.slice();if(!d)return{t:Wf,l:0};if(d==1){var v=new _i(i[0].s+1);return v[i[0].s]=1,{t:v,l:1}}i.sort(function(A,M){return A.f-M.f}),i.push({s:-1,f:25001});var o=i[0],r=i[1],c=0,u=1,s=2;for(i[0]={s:-1,f:o.f+r.f,l:o,r};u!=d-1;)o=i[i[c].f<i[s].f?c++:s++],r=i[c!=u&&i[c].f<i[s].f?c++:s++],i[u++]={s:-1,f:o.f+r.f,l:o,r};for(var l=p[0].s,a=1;a<d;++a)p[a].s>l&&(l=p[a].s);var n=new Wi(l+1),h=$c(i[u-1],n,0);if(h>t){var a=0,g=0,f=h-t,m=1<<f;for(p.sort(function(M,T){return n[T.s]-n[M.s]||M.f-T.f});a<d;++a){var y=p[a].s;if(n[y]>t)g+=m-(1<<h-n[y]),n[y]=t;else break}for(g>>=f;g>0;){var x=p[a].s;n[x]<t?g-=1<<t-n[x]++-1:++a}for(;a>=0&&g;--a){var _=p[a].s;n[_]==t&&(--n[_],++g)}h=t}return{t:new _i(n),l:h}},$c=function(e,t,i){return e.s==-1?Math.max($c(e.l,t,i+1),$c(e.r,t,i+1)):t[e.s]=i},mu=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new Wi(++t),a=0,d=e[0],p=1,v=function(r){i[a++]=r},o=1;o<=t;++o)if(e[o]==d&&o!=t)++p;else{if(!d&&p>2){for(;p>138;p-=138)v(32754);p>2&&(v(p>10?p-11<<5|28690:p-3<<5|12305),p=0)}else if(p>3){for(v(d),--p;p>6;p-=6)v(8304);p>2&&(v(p-3<<5|8208),p=0)}for(;p--;)v(d);p=1,d=e[o]}return{c:i.subarray(0,a),n:t}},Ia=function(e,t){for(var i=0,a=0;a<t.length;++a)i+=e[a]*t[a];return i},Uf=function(e,t,i){var a=i.length,d=vh(t+2);e[d]=a&255,e[d+1]=a>>8,e[d+2]=e[d]^255,e[d+3]=e[d+1]^255;for(var p=0;p<a;++p)e[d+p+4]=i[p];return(d+4+a)*8},vu=function(e,t,i,a,d,p,v,o,r,c,u){Jr(t,u++,i),++d[256];for(var s=kc(d,15),l=s.t,n=s.l,h=kc(p,15),g=h.t,f=h.l,m=mu(l),y=m.c,x=m.n,_=mu(g),A=_.c,M=_.n,T=new Wi(19),O=0;O<y.length;++O)++T[y[O]&31];for(var O=0;O<A.length;++O)++T[A[O]&31];for(var B=kc(T,7),X=B.t,F=B.l,I=19;I>4&&!X[Vc[I-1]];--I);var K=c+5<<3,G=Ia(d,kn)+Ia(p,Ha)+v,rt=Ia(d,l)+Ia(p,g)+v+14+3*I+Ia(T,X)+2*T[16]+3*T[17]+7*T[18];if(r>=0&&K<=G&&K<=rt)return Uf(t,u,e.subarray(r,r+c));var at,gt,nt,E;if(Jr(t,u,1+(rt<G)),u+=2,rt<G){at=Dr(l,n,0),gt=l,nt=Dr(g,f,0),E=g;var Y=Dr(X,F,0);Jr(t,u,x-257),Jr(t,u+5,M-1),Jr(t,u+10,I-4),u+=14;for(var O=0;O<I;++O)Jr(t,u+3*O,X[Vc[O]]);u+=3*I;for(var J=[y,A],k=0;k<2;++k)for(var R=J[k],O=0;O<R.length;++O){var N=R[O]&31;Jr(t,u,Y[N]),u+=X[N],N>15&&(Jr(t,u,R[O]>>5&127),u+=R[O]>>12)}}else at=rg,gt=kn,nt=sg,E=Ha;for(var O=0;O<o;++O){var P=a[O];if(P>255){var N=P>>18&31;Ea(t,u,at[N+257]),u+=gt[N+257],N>7&&(Jr(t,u,P>>23&31),u+=bl[N]);var U=P&31;Ea(t,u,nt[U]),u+=E[U],U>3&&(Ea(t,u,P>>5&8191),u+=yl[U])}else Ea(t,u,at[P]),u+=gt[P]}return Ea(t,u,at[256]),u+gt[256]},cg=new mh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wf=new _i(0),hg=function(e,t,i,a,d,p){var v=p.z||e.length,o=new _i(a+v+5*(1+Math.ceil(v/7e3))+d),r=o.subarray(a,o.length-d),c=p.l,u=(p.r||0)&7;if(t){u&&(r[0]=p.r>>3);for(var s=cg[t-1],l=s>>13,n=s&8191,h=(1<<i)-1,g=p.p||new Wi(32768),f=p.h||new Wi(h+1),m=Math.ceil(i/3),y=2*m,x=function(st){return(e[st]^e[st+1]<<m^e[st+2]<<y)&h},_=new mh(25e3),A=new Wi(288),M=new Wi(32),T=0,O=0,B=p.i||0,X=0,F=p.w||0,I=0;B+2<v;++B){var K=x(B),G=B&32767,rt=f[K];if(g[G]=rt,f[K]=G,F<=B){var at=v-B;if((T>7e3||X>24576)&&(at>423||!c)){u=vu(e,r,0,_,A,M,O,X,I,B-I,u),X=T=O=0,I=B;for(var gt=0;gt<286;++gt)A[gt]=0;for(var gt=0;gt<30;++gt)M[gt]=0}var nt=2,E=0,Y=n,J=G-rt&32767;if(at>2&&K==x(B-J))for(var k=Math.min(l,at)-1,R=Math.min(32767,B),N=Math.min(258,at);J<=R&&--Y&&G!=rt;){if(e[B+nt]==e[B+nt-J]){for(var P=0;P<N&&e[B+P]==e[B+P-J];++P);if(P>nt){if(nt=P,E=J,P>k)break;for(var U=Math.min(J,P-2),$=0,gt=0;gt<U;++gt){var tt=B-J+gt&32767,Q=g[tt],ut=tt-Q&32767;ut>$&&($=ut,rt=tt)}}}G=rt,rt=g[G],J+=G-rt&32767}if(E){_[X++]=268435456|Xc[nt]<<18|gu[E];var dt=Xc[nt]&31,St=gu[E]&31;O+=bl[dt]+yl[St],++A[257+dt],++M[St],F=B+nt,++T}else _[X++]=e[B],++A[e[B]]}}for(B=Math.max(B,F);B<v;++B)_[X++]=e[B],++A[e[B]];u=vu(e,r,c,_,A,M,O,X,I,B-I,u),c||(p.r=u&7|r[u/8|0]<<3,u-=7,p.h=f,p.p=g,p.i=B,p.w=F)}else{for(var B=p.w||0;B<v+c;B+=65535){var ot=B+65535;ot>=v&&(r[u/8|0]=c,ot=v),u=Uf(r,u+1,e.subarray(B,ot))}p.i=v}return qf(o,0,a+vh(u)+d)},Hf=function(){var e=1,t=0;return{p:function(i){for(var a=e,d=t,p=i.length|0,v=0;v!=p;){for(var o=Math.min(v+2655,p);v<o;++v)d+=a+=i[v];a=(a&65535)+15*(a>>16),d=(d&65535)+15*(d>>16)}e=a,t=d},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},ug=function(e,t,i,a,d){if(!d&&(d={l:1},t.dictionary)){var p=t.dictionary.subarray(-32768),v=new _i(p.length+e.length);v.set(p),v.set(e,p.length),e=v,d.w=p.length}return hg(e,t.level==null?6:t.level,t.mem==null?d.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,i,a,d)},Yf=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},fg=function(e,t){var i=t.level,a=i==0?0:i<6?1:i==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var d=Hf();d.p(t.dictionary),Yf(e,2,d.d())}},dg=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&gr(6,"invalid zlib data"),(e[1]>>5&1)==1&&gr(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Kc(e,t){t||(t={});var i=Hf();i.p(e);var a=ug(e,t,t.dictionary?6:2,4);return fg(a,t),Yf(a,a.length-4,i.d()),a}function pg(e,t){return lg(e.subarray(dg(e),-4),{i:2},t,t)}var gg=typeof TextDecoder<"u"&&new TextDecoder,mg=0;try{gg.decode(Wf,{stream:!0}),mg=1}catch{}var Qt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Lc(){Qt.console&&typeof Qt.console.log=="function"&&Qt.console.log.apply(Qt.console,arguments)}var Me={log:Lc,warn:function(e){Qt.console&&(typeof Qt.console.warn=="function"?Qt.console.warn.apply(Qt.console,arguments):Lc.call(null,arguments))},error:function(e){Qt.console&&(typeof Qt.console.error=="function"?Qt.console.error.apply(Qt.console,arguments):Lc(e))}};function Tc(e,t,i){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){Gn(a.response,t,i)},a.onerror=function(){Me.error("could not download file")},a.send()}function bu(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Vo(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ra,Jc,Gn=Qt.saveAs||((typeof window>"u"?"undefined":Ae(window))!=="object"||window!==Qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,i){var a=Qt.URL||Qt.webkitURL,d=document.createElement("a");t=t||e.name||"download",d.download=t,d.rel="noopener",typeof e=="string"?(d.href=e,d.origin!==location.origin?bu(d.href)?Tc(e,t,i):Vo(d,d.target="_blank"):Vo(d)):(d.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(d.href)},4e4),setTimeout(function(){Vo(d)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,i){if(t=t||e.name||"download",typeof e=="string")if(bu(e))Tc(e,t,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){Vo(a)})}else navigator.msSaveOrOpenBlob(function(d,p){return p===void 0?p={autoBom:!1}:Ae(p)!=="object"&&(Me.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}(e,i),t)}:function(e,t,i,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return Tc(e,t,i);var d=e.type==="application/octet-stream",p=/constructor/i.test(Qt.HTMLElement)||Qt.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||d&&p)&&(typeof FileReader>"u"?"undefined":Ae(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=v?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},o.readAsDataURL(e)}else{var r=Qt.URL||Qt.webkitURL,c=r.createObjectURL(e);a?a.location=c:location.href=c,a=null,setTimeout(function(){r.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Vf(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],a=0;a<i.length;a++){var d=i[a].re,p=i[a].process,v=d.exec(e);v&&(t=p(v),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),r=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),r.length==1&&(r="0"+r),c.length==1&&(c="0"+c),"#"+o+r+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Pc(e,t){var i=e[0],a=e[1],d=e[2],p=e[3];i=bi(i,a,d,p,t[0],7,-680876936),p=bi(p,i,a,d,t[1],12,-389564586),d=bi(d,p,i,a,t[2],17,606105819),a=bi(a,d,p,i,t[3],22,-1044525330),i=bi(i,a,d,p,t[4],7,-176418897),p=bi(p,i,a,d,t[5],12,1200080426),d=bi(d,p,i,a,t[6],17,-1473231341),a=bi(a,d,p,i,t[7],22,-45705983),i=bi(i,a,d,p,t[8],7,1770035416),p=bi(p,i,a,d,t[9],12,-1958414417),d=bi(d,p,i,a,t[10],17,-42063),a=bi(a,d,p,i,t[11],22,-1990404162),i=bi(i,a,d,p,t[12],7,1804603682),p=bi(p,i,a,d,t[13],12,-40341101),d=bi(d,p,i,a,t[14],17,-1502002290),i=yi(i,a=bi(a,d,p,i,t[15],22,1236535329),d,p,t[1],5,-165796510),p=yi(p,i,a,d,t[6],9,-1069501632),d=yi(d,p,i,a,t[11],14,643717713),a=yi(a,d,p,i,t[0],20,-373897302),i=yi(i,a,d,p,t[5],5,-701558691),p=yi(p,i,a,d,t[10],9,38016083),d=yi(d,p,i,a,t[15],14,-660478335),a=yi(a,d,p,i,t[4],20,-405537848),i=yi(i,a,d,p,t[9],5,568446438),p=yi(p,i,a,d,t[14],9,-1019803690),d=yi(d,p,i,a,t[3],14,-187363961),a=yi(a,d,p,i,t[8],20,1163531501),i=yi(i,a,d,p,t[13],5,-1444681467),p=yi(p,i,a,d,t[2],9,-51403784),d=yi(d,p,i,a,t[7],14,1735328473),i=wi(i,a=yi(a,d,p,i,t[12],20,-1926607734),d,p,t[5],4,-378558),p=wi(p,i,a,d,t[8],11,-2022574463),d=wi(d,p,i,a,t[11],16,1839030562),a=wi(a,d,p,i,t[14],23,-35309556),i=wi(i,a,d,p,t[1],4,-1530992060),p=wi(p,i,a,d,t[4],11,1272893353),d=wi(d,p,i,a,t[7],16,-155497632),a=wi(a,d,p,i,t[10],23,-1094730640),i=wi(i,a,d,p,t[13],4,681279174),p=wi(p,i,a,d,t[0],11,-358537222),d=wi(d,p,i,a,t[3],16,-722521979),a=wi(a,d,p,i,t[6],23,76029189),i=wi(i,a,d,p,t[9],4,-640364487),p=wi(p,i,a,d,t[12],11,-421815835),d=wi(d,p,i,a,t[15],16,530742520),i=xi(i,a=wi(a,d,p,i,t[2],23,-995338651),d,p,t[0],6,-198630844),p=xi(p,i,a,d,t[7],10,1126891415),d=xi(d,p,i,a,t[14],15,-1416354905),a=xi(a,d,p,i,t[5],21,-57434055),i=xi(i,a,d,p,t[12],6,1700485571),p=xi(p,i,a,d,t[3],10,-1894986606),d=xi(d,p,i,a,t[10],15,-1051523),a=xi(a,d,p,i,t[1],21,-2054922799),i=xi(i,a,d,p,t[8],6,1873313359),p=xi(p,i,a,d,t[15],10,-30611744),d=xi(d,p,i,a,t[6],15,-1560198380),a=xi(a,d,p,i,t[13],21,1309151649),i=xi(i,a,d,p,t[4],6,-145523070),p=xi(p,i,a,d,t[11],10,-1120210379),d=xi(d,p,i,a,t[2],15,718787259),a=xi(a,d,p,i,t[9],21,-343485551),e[0]=An(i,e[0]),e[1]=An(a,e[1]),e[2]=An(d,e[2]),e[3]=An(p,e[3])}function wl(e,t,i,a,d,p){return t=An(An(t,e),An(a,p)),An(t<<d|t>>>32-d,i)}function bi(e,t,i,a,d,p,v){return wl(t&i|~t&a,e,t,d,p,v)}function yi(e,t,i,a,d,p,v){return wl(t&a|i&~a,e,t,d,p,v)}function wi(e,t,i,a,d,p,v){return wl(t^i^a,e,t,d,p,v)}function xi(e,t,i,a,d,p,v){return wl(i^(t|~a),e,t,d,p,v)}function Xf(e){var t,i=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Pc(a,vg(e.substring(t-64,t)));e=e.substring(t-64);var d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)d[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(d[t>>2]|=128<<(t%4<<3),t>55)for(Pc(a,d),t=0;t<16;t++)d[t]=0;return d[14]=8*i,Pc(a,d),a}function vg(e){var t,i=[];for(t=0;t<64;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}Ra=Qt.atob.bind(Qt),Jc=Qt.btoa.bind(Qt);var yu="0123456789abcdef".split("");function bg(e){for(var t="",i=0;i<4;i++)t+=yu[e>>8*i+4&15]+yu[e>>8*i&15];return t}function yg(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Zc(e){return Xf(e).map(yg).join("")}var wg=function(e){for(var t=0;t<e.length;t++)e[t]=bg(e[t]);return e.join("")}(Xf("hello"))!="5d41402abc4b2a76b9719d911017c592";function An(e,t){if(wg){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Qc(e,t){var i,a,d,p;if(e!==i){for(var v=(d=e,p=1+(256/e.length>>0),new Array(p+1).join(d)),o=[],r=0;r<256;r++)o[r]=r;var c=0;for(r=0;r<256;r++){var u=o[r];c=(c+u+v.charCodeAt(r))%256,o[r]=o[c],o[c]=u}i=e,a=o}else o=a;var s=t.length,l=0,n=0,h="";for(r=0;r<s;r++)n=(n+(u=o[l=(l+1)%256]))%256,o[l]=o[n],o[n]=u,v=o[(o[l]+o[n])%256],h+=String.fromCharCode(t.charCodeAt(r)^v);return h}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var wu={print:4,modify:8,copy:16,"annot-forms":32};function Rs(e,t,i,a){this.v=1,this.r=2;var d=192;e.forEach(function(o){if(wu.perm!==void 0)throw new Error("Invalid permission: "+o);d+=wu[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var p=(t+this.padding).substr(0,32),v=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(p,v),this.P=-(1+(255^d)),this.encryptionKey=Zc(p+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Qc(this.encryptionKey,this.padding)}function zs(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",i=e.length,a=0;a<i;a++){var d=e.charCodeAt(a);d<33||d===35||d===37||d===40||d===41||d===47||d===60||d===62||d===91||d===93||d===123||d===125||d>126?t+="#"+("0"+d.toString(16)).slice(-2):t+=e[a]}return t}function xu(e){if(Ae(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(i,a,d){if(d=d||!1,typeof i!="string"||typeof a!="function"||typeof d!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(i)||(t[i]={});var p=Math.random().toString(35);return t[i][p]=[a,!!d],p},this.unsubscribe=function(i){for(var a in t)if(t[a][i])return delete t[a][i],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(i){if(t.hasOwnProperty(i)){var a=Array.prototype.slice.call(arguments,1),d=[];for(var p in t[i]){var v=t[i][p];try{v[0].apply(e,a)}catch(o){Qt.console&&Me.error("jsPDF PubSub Error",o.message,o)}v[1]&&d.push(p)}d.length&&d.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function ts(e){if(!(this instanceof ts))return new ts(e);var t="opacity,stroke-opacity".split(",");for(var i in e)e.hasOwnProperty(i)&&t.indexOf(i)>=0&&(this[i]=e[i]);this.id="",this.objectNumber=-1}function Gf(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Sn(e,t,i,a,d){if(!(this instanceof Sn))return new Sn(e,t,i,a,d);this.type=e==="axial"?2:3,this.coords=t,this.colors=i,Gf.call(this,a,d)}function Kn(e,t,i,a,d){if(!(this instanceof Kn))return new Kn(e,t,i,a,d);this.boundingBox=e,this.xStep=t,this.yStep=i,this.stream="",this.cloneIndex=0,Gf.call(this,a,d)}function Kt(e){var t,i=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],d=arguments[2],p=arguments[3],v=[],o=1,r=16,c="S",u=null;Ae(e=e||{})==="object"&&(i=e.orientation,a=e.unit||a,d=e.format||d,p=e.compress||e.compressPdf||p,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(r=e.floatPrecision),c=e.defaultPathOperation||"S"),v=e.filters||(p===!0?["FlateEncode"]:v),a=a||"mm",i=(""+(i||"P")).toLowerCase();var s=e.putOnlyUsedFonts||!1,l={},n={internal:{},__private__:{}};n.__private__.PubSub=xu;var h="1.3",g=n.__private__.getPdfVersion=function(){return h};n.__private__.setPdfVersion=function(S){h=S};var f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};n.__private__.getPageFormats=function(){return f};var m=n.__private__.getPageFormat=function(S){return f[S]};d=d||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},x=y.COMPAT;function _(){this.saveGraphicsState(),W(new Zt(Bt,0,0,-Bt,0,ln()*Bt).toString()+" cm"),this.setFontSize(this.getFontSize()/Bt),c="n",x=y.ADVANCED}function A(){this.restoreGraphicsState(),c="S",x=y.COMPAT}var M=n.__private__.combineFontStyleAndFontWeight=function(S,D){if(S=="bold"&&D=="normal"||S=="bold"&&D==400||S=="normal"&&D=="italic"||S=="bold"&&D=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return D&&(S=D==400||D==="normal"?S==="italic"?"italic":"normal":D!=700&&D!=="bold"||S!=="normal"?(D==700?"bold":D)+""+S:"bold"),S};n.advancedAPI=function(S){var D=x===y.COMPAT;return D&&_.call(this),typeof S!="function"||(S(this),D&&A.call(this)),this},n.compatAPI=function(S){var D=x===y.ADVANCED;return D&&A.call(this),typeof S!="function"||(S(this),D&&_.call(this)),this},n.isAdvancedAPI=function(){return x===y.ADVANCED};var T,O=function(S){if(x!==y.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=n.roundToPrecision=n.__private__.roundToPrecision=function(S,D){var et=t||D;if(isNaN(S)||isNaN(et))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(et).replace(/0+$/,"")};T=n.hpf=n.__private__.hpf=typeof r=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return B(S,r)}:r==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return B(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return B(S,16)};var X=n.f2=n.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return B(S,2)},F=n.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return B(S,3)},I=n.scale=n.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return x===y.COMPAT?S*Bt:x===y.ADVANCED?S:void 0},K=function(S){return x===y.COMPAT?ln()-S:x===y.ADVANCED?S:void 0},G=function(S){return I(K(S))};n.__private__.setPrecision=n.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(t=parseInt(S,10))};var rt,at="00000000000000000000000000000000",gt=n.__private__.getFileId=function(){return at},nt=n.__private__.setFileId=function(S){return at=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():at.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(mi=new Rs(u.userPermissions,u.userPassword,u.ownerPassword,at)),at};n.setFileId=function(S){return nt(S),this},n.getFileId=function(){return gt()};var E=n.__private__.convertDateToPDFDate=function(S){var D=S.getTimezoneOffset(),et=D<0?"+":"-",lt=Math.floor(Math.abs(D/60)),wt=Math.abs(D%60),kt=[et,N(lt),"'",N(wt),"'"].join("");return["D:",S.getFullYear(),N(S.getMonth()+1),N(S.getDate()),N(S.getHours()),N(S.getMinutes()),N(S.getSeconds()),kt].join("")},Y=n.__private__.convertPDFDateToDate=function(S){var D=parseInt(S.substr(2,4),10),et=parseInt(S.substr(6,2),10)-1,lt=parseInt(S.substr(8,2),10),wt=parseInt(S.substr(10,2),10),kt=parseInt(S.substr(12,2),10),Ft=parseInt(S.substr(14,2),10);return new Date(D,et,lt,wt,kt,Ft,0)},J=n.__private__.setCreationDate=function(S){var D;if(S===void 0&&(S=new Date),S instanceof Date)D=E(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");D=S}return rt=D},k=n.__private__.getCreationDate=function(S){var D=rt;return S==="jsDate"&&(D=Y(rt)),D};n.setCreationDate=function(S){return J(S),this},n.getCreationDate=function(S){return k(S)};var R,N=n.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},P=n.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},U=0,$=[],tt=[],Q=0,ut=[],dt=[],St=!1,ot=tt,st=function(){U=0,Q=0,tt=[],$=[],ut=[],zr=Ze(),sr=Ze()};n.__private__.setCustomOutputDestination=function(S){St=!0,ot=S};var it=function(S){St||(ot=S)};n.__private__.resetCustomOutputDestination=function(){St=!1,ot=tt};var W=n.__private__.out=function(S){return S=S.toString(),Q+=S.length+1,ot.push(S),ot},vt=n.__private__.write=function(S){return W(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},yt=n.__private__.getArrayBuffer=function(S){for(var D=S.length,et=new ArrayBuffer(D),lt=new Uint8Array(et);D--;)lt[D]=S.charCodeAt(D);return et},bt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];n.__private__.getStandardFonts=function(){return bt};var Lt=e.fontSize||16;n.__private__.setFontSize=n.setFontSize=function(S){return Lt=x===y.ADVANCED?S/Bt:S,this};var At,ft=n.__private__.getFontSize=n.getFontSize=function(){return x===y.COMPAT?Lt:Lt*Bt},Mt=e.R2L||!1;n.__private__.setR2L=n.setR2L=function(S){return Mt=S,this},n.__private__.getR2L=n.getR2L=function(){return Mt};var jt,Rt=n.__private__.setZoomMode=function(S){var D=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))At=S;else if(isNaN(S)){if(D.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');At=S}else At=parseInt(S,10)};n.__private__.getZoomMode=function(){return At};var Yt,Vt=n.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');jt=S};n.__private__.getPageMode=function(){return jt};var ie=n.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Yt=S};n.__private__.getLayoutMode=function(){return Yt},n.__private__.setDisplayMode=n.setDisplayMode=function(S,D,et){return Rt(S),ie(D),Vt(et),this};var Wt={title:"",subject:"",author:"",keywords:"",creator:""};n.__private__.getDocumentProperty=function(S){if(Object.keys(Wt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Wt[S]},n.__private__.getDocumentProperties=function(){return Wt},n.__private__.setDocumentProperties=n.setProperties=n.setDocumentProperties=function(S){for(var D in Wt)Wt.hasOwnProperty(D)&&S[D]&&(Wt[D]=S[D]);return this},n.__private__.setDocumentProperty=function(S,D){if(Object.keys(Wt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Wt[S]=D};var te,Bt,Te,pe,Pi,_e={},Ee={},_r=[],we={},In={},ze={},rr={},Rr=null,qe=0,re=[],xe=new xu(n),jn=e.hotfixes||[],ui={},Sr={},Cr=[],Zt=function S(D,et,lt,wt,kt,Ft){if(!(this instanceof S))return new S(D,et,lt,wt,kt,Ft);isNaN(D)&&(D=1),isNaN(et)&&(et=0),isNaN(lt)&&(lt=0),isNaN(wt)&&(wt=1),isNaN(kt)&&(kt=0),isNaN(Ft)&&(Ft=0),this._matrix=[D,et,lt,wt,kt,Ft]};Object.defineProperty(Zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Zt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(S)},Zt.prototype.multiply=function(S){var D=S.sx*this.sx+S.shy*this.shx,et=S.sx*this.shy+S.shy*this.sy,lt=S.shx*this.sx+S.sy*this.shx,wt=S.shx*this.shy+S.sy*this.sy,kt=S.tx*this.sx+S.ty*this.shx+this.tx,Ft=S.tx*this.shy+S.ty*this.sy+this.ty;return new Zt(D,et,lt,wt,kt,Ft)},Zt.prototype.decompose=function(){var S=this.sx,D=this.shy,et=this.shx,lt=this.sy,wt=this.tx,kt=this.ty,Ft=Math.sqrt(S*S+D*D),qt=(S/=Ft)*et+(D/=Ft)*lt;et-=S*qt,lt-=D*qt;var Gt=Math.sqrt(et*et+lt*lt);return qt/=Gt,S*(lt/=Gt)<D*(et/=Gt)&&(S=-S,D=-D,qt=-qt,Ft=-Ft),{scale:new Zt(Ft,0,0,Gt,0,0),translate:new Zt(1,0,0,1,wt,kt),rotate:new Zt(S,D,-D,S,0,0),skew:new Zt(1,0,qt,1,0,0)}},Zt.prototype.toString=function(S){return this.join(" ")},Zt.prototype.inversed=function(){var S=this.sx,D=this.shy,et=this.shx,lt=this.sy,wt=this.tx,kt=this.ty,Ft=1/(S*lt-D*et),qt=lt*Ft,Gt=-D*Ft,ae=-et*Ft,ne=S*Ft;return new Zt(qt,Gt,ae,ne,-qt*wt-ae*kt,-Gt*wt-ne*kt)},Zt.prototype.applyToPoint=function(S){var D=S.x*this.sx+S.y*this.shx+this.tx,et=S.x*this.shy+S.y*this.sy+this.ty;return new gs(D,et)},Zt.prototype.applyToRectangle=function(S){var D=this.applyToPoint(S),et=this.applyToPoint(new gs(S.x+S.w,S.y+S.h));return new pa(D.x,D.y,et.x-D.x,et.y-D.y)},Zt.prototype.clone=function(){var S=this.sx,D=this.shy,et=this.shx,lt=this.sy,wt=this.tx,kt=this.ty;return new Zt(S,D,et,lt,wt,kt)},n.Matrix=Zt;var nr=n.matrixMult=function(S,D){return D.multiply(S)},Ar=new Zt(1,0,0,1,0,0);n.unitMatrix=n.identityMatrix=Ar;var Oi=function(S,D){if(!In[S]){var et=(D instanceof Sn?"Sh":"P")+(Object.keys(we).length+1).toString(10);D.id=et,In[S]=et,we[et]=D,xe.publish("addPattern",D)}};n.ShadingPattern=Sn,n.TilingPattern=Kn,n.addShadingPattern=function(S,D){return O("addShadingPattern()"),Oi(S,D),this},n.beginTilingPattern=function(S){O("beginTilingPattern()"),go(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},n.endTilingPattern=function(S,D){O("endTilingPattern()"),D.stream=dt[R].join(`
`),Oi(S,D),xe.publish("endTilingPattern",D),Cr.pop().restore()};var ni=n.__private__.newObject=function(){var S=Ze();return Di(S,!0),S},Ze=n.__private__.newObjectDeferred=function(){return U++,$[U]=function(){return Q},U},Di=function(S,D){return D=typeof D=="boolean"&&D,$[S]=Q,D&&W(S+" 0 obj"),S},is=n.__private__.newAdditionalObject=function(){var S={objId:Ze(),content:""};return ut.push(S),S},zr=Ze(),sr=Ze(),ar=n.__private__.decodeColorString=function(S){var D=S.split(" ");if(D.length!==2||D[1]!=="g"&&D[1]!=="G")D.length===5&&(D[4]==="k"||D[4]==="K")&&(D=[(1-D[0])*(1-D[3]),(1-D[1])*(1-D[3]),(1-D[2])*(1-D[3]),"r"]);else{var et=parseFloat(D[0]);D=[et,et,et,"r"]}for(var lt="#",wt=0;wt<3;wt++)lt+=("0"+Math.floor(255*parseFloat(D[wt])).toString(16)).slice(-2);return lt},or=n.__private__.encodeColorString=function(S){var D;typeof S=="string"&&(S={ch1:S});var et=S.ch1,lt=S.ch2,wt=S.ch3,kt=S.ch4,Ft=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof et=="string"&&et.charAt(0)!=="#"){var qt=new Vf(et);if(qt.ok)et=qt.toHex();else if(!/^\d*\.?\d*$/.test(et))throw new Error('Invalid color "'+et+'" passed to jsPDF.encodeColorString.')}if(typeof et=="string"&&/^#[0-9A-Fa-f]{3}$/.test(et)&&(et="#"+et[1]+et[1]+et[2]+et[2]+et[3]+et[3]),typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et)){var Gt=parseInt(et.substr(1),16);et=Gt>>16&255,lt=Gt>>8&255,wt=255&Gt}if(lt===void 0||kt===void 0&&et===lt&&lt===wt)if(typeof et=="string")D=et+" "+Ft[0];else switch(S.precision){case 2:D=X(et/255)+" "+Ft[0];break;case 3:default:D=F(et/255)+" "+Ft[0]}else if(kt===void 0||Ae(kt)==="object"){if(kt&&!isNaN(kt.a)&&kt.a===0)return D=["1.","1.","1.",Ft[1]].join(" ");if(typeof et=="string")D=[et,lt,wt,Ft[1]].join(" ");else switch(S.precision){case 2:D=[X(et/255),X(lt/255),X(wt/255),Ft[1]].join(" ");break;default:case 3:D=[F(et/255),F(lt/255),F(wt/255),Ft[1]].join(" ")}}else if(typeof et=="string")D=[et,lt,wt,kt,Ft[2]].join(" ");else switch(S.precision){case 2:D=[X(et),X(lt),X(wt),X(kt),Ft[2]].join(" ");break;case 3:default:D=[F(et),F(lt),F(wt),F(kt),Ft[2]].join(" ")}return D},kr=n.__private__.getFilters=function(){return v},Hi=n.__private__.putStream=function(S){var D=(S=S||{}).data||"",et=S.filters||kr(),lt=S.alreadyAppliedFilters||[],wt=S.addLength1||!1,kt=D.length,Ft=S.objectId,qt=function(vi){return vi};if(u!==null&&Ft===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(qt=mi.encryptor(Ft,0));var Gt={};et===!0&&(et=["FlateEncode"]);var ae=S.additionalKeyValues||[],ne=(Gt=Kt.API.processDataByFilters!==void 0?Kt.API.processDataByFilters(D,et):{data:D,reverseChain:[]}).reverseChain+(Array.isArray(lt)?lt.join(" "):lt.toString());if(Gt.data.length!==0&&(ae.push({key:"Length",value:Gt.data.length}),wt===!0&&ae.push({key:"Length1",value:kt})),ne.length!=0)if(ne.split("/").length-1==1)ae.push({key:"Filter",value:ne});else{ae.push({key:"Filter",value:"["+ne+"]"});for(var ge=0;ge<ae.length;ge+=1)if(ae[ge].key==="DecodeParms"){for(var Be=[],Ue=0;Ue<Gt.reverseChain.split("/").length-1;Ue+=1)Be.push("null");Be.push(ae[ge].value),ae[ge].value="["+Be.join(" ")+"]"}}W("<<");for(var Qe=0;Qe<ae.length;Qe++)W("/"+ae[Qe].key+" "+ae[Qe].value);W(">>"),Gt.data.length!==0&&(W("stream"),W(qt(Gt.data)),W("endstream"))},Lr=n.__private__.putPage=function(S){var D=S.number,et=S.data,lt=S.objId,wt=S.contentsObjId;Di(lt,!0),W("<</Type /Page"),W("/Parent "+S.rootDictionaryObjId+" 0 R"),W("/Resources "+S.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(T(S.mediaBox.bottomLeftX))+" "+parseFloat(T(S.mediaBox.bottomLeftY))+" "+T(S.mediaBox.topRightX)+" "+T(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&W("/CropBox ["+T(S.cropBox.bottomLeftX)+" "+T(S.cropBox.bottomLeftY)+" "+T(S.cropBox.topRightX)+" "+T(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&W("/BleedBox ["+T(S.bleedBox.bottomLeftX)+" "+T(S.bleedBox.bottomLeftY)+" "+T(S.bleedBox.topRightX)+" "+T(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&W("/TrimBox ["+T(S.trimBox.bottomLeftX)+" "+T(S.trimBox.bottomLeftY)+" "+T(S.trimBox.topRightX)+" "+T(S.trimBox.topRightY)+"]"),S.artBox!==null&&W("/ArtBox ["+T(S.artBox.bottomLeftX)+" "+T(S.artBox.bottomLeftY)+" "+T(S.artBox.topRightX)+" "+T(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&W("/UserUnit "+S.userUnit),xe.publish("putPage",{objId:lt,pageContext:re[D],pageNumber:D,page:et}),W("/Contents "+wt+" 0 R"),W(">>"),W("endobj");var kt=et.join(`
`);return x===y.ADVANCED&&(kt+=`
Q`),Di(wt,!0),Hi({data:kt,filters:kr(),objectId:wt}),W("endobj"),lt},Dn=n.__private__.putPages=function(){var S,D,et=[];for(S=1;S<=qe;S++)re[S].objId=Ze(),re[S].contentsObjId=Ze();for(S=1;S<=qe;S++)et.push(Lr({number:S,data:dt[S],objId:re[S].objId,contentsObjId:re[S].contentsObjId,mediaBox:re[S].mediaBox,cropBox:re[S].cropBox,bleedBox:re[S].bleedBox,trimBox:re[S].trimBox,artBox:re[S].artBox,userUnit:re[S].userUnit,rootDictionaryObjId:zr,resourceDictionaryObjId:sr}));Di(zr,!0),W("<</Type /Pages");var lt="/Kids [";for(D=0;D<qe;D++)lt+=et[D]+" 0 R ";W(lt+"]"),W("/Count "+qe),W(">>"),W("endobj"),xe.publish("postPutPages")},rs=function(S){xe.publish("putFont",{font:S,out:W,newObject:ni,putStream:Hi}),S.isAlreadyPutted!==!0&&(S.objectNumber=ni(),W("<<"),W("/Type /Font"),W("/BaseFont /"+zs(S.postScriptName)),W("/Subtype /Type1"),typeof S.encoding=="string"&&W("/Encoding /"+S.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},ns=function(){for(var S in _e)_e.hasOwnProperty(S)&&(s===!1||s===!0&&l.hasOwnProperty(S))&&rs(_e[S])},ss=function(S){S.objectNumber=ni();var D=[];D.push({key:"Type",value:"/XObject"}),D.push({key:"Subtype",value:"/Form"}),D.push({key:"BBox",value:"["+[T(S.x),T(S.y),T(S.x+S.width),T(S.y+S.height)].join(" ")+"]"}),D.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var et=S.pages[1].join(`
`);Hi({data:et,additionalKeyValues:D,objectId:S.objectNumber}),W("endobj")},as=function(){for(var S in ui)ui.hasOwnProperty(S)&&ss(ui[S])},Ka=function(S,D){var et,lt=[],wt=1/(D-1);for(et=0;et<1;et+=wt)lt.push(et);if(lt.push(1),S[0].offset!=0){var kt={offset:0,color:S[0].color};S.unshift(kt)}if(S[S.length-1].offset!=1){var Ft={offset:1,color:S[S.length-1].color};S.push(Ft)}for(var qt="",Gt=0,ae=0;ae<lt.length;ae++){for(et=lt[ae];et>S[Gt+1].offset;)Gt++;var ne=S[Gt].offset,ge=(et-ne)/(S[Gt+1].offset-ne),Be=S[Gt].color,Ue=S[Gt+1].color;qt+=P(Math.round((1-ge)*Be[0]+ge*Ue[0]).toString(16))+P(Math.round((1-ge)*Be[1]+ge*Ue[1]).toString(16))+P(Math.round((1-ge)*Be[2]+ge*Ue[2]).toString(16))}return qt.trim()},Cl=function(S,D){D||(D=21);var et=ni(),lt=Ka(S.colors,D),wt=[];wt.push({key:"FunctionType",value:"0"}),wt.push({key:"Domain",value:"[0.0 1.0]"}),wt.push({key:"Size",value:"["+D+"]"}),wt.push({key:"BitsPerSample",value:"8"}),wt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Hi({data:lt,additionalKeyValues:wt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:et}),W("endobj"),S.objectNumber=ni(),W("<< /ShadingType "+S.type),W("/ColorSpace /DeviceRGB");var kt="/Coords ["+T(parseFloat(S.coords[0]))+" "+T(parseFloat(S.coords[1]))+" ";S.type===2?kt+=T(parseFloat(S.coords[2]))+" "+T(parseFloat(S.coords[3])):kt+=T(parseFloat(S.coords[2]))+" "+T(parseFloat(S.coords[3]))+" "+T(parseFloat(S.coords[4]))+" "+T(parseFloat(S.coords[5])),W(kt+="]"),S.matrix&&W("/Matrix ["+S.matrix.toString()+"]"),W("/Function "+et+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},Al=function(S,D){var et=Ze(),lt=ni();D.push({resourcesOid:et,objectOid:lt}),S.objectNumber=lt;var wt=[];wt.push({key:"Type",value:"/Pattern"}),wt.push({key:"PatternType",value:"1"}),wt.push({key:"PaintType",value:"1"}),wt.push({key:"TilingType",value:"1"}),wt.push({key:"BBox",value:"["+S.boundingBox.map(T).join(" ")+"]"}),wt.push({key:"XStep",value:T(S.xStep)}),wt.push({key:"YStep",value:T(S.yStep)}),wt.push({key:"Resources",value:et+" 0 R"}),S.matrix&&wt.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Hi({data:S.stream,additionalKeyValues:wt,objectId:S.objectNumber}),W("endobj")},os=function(S){var D;for(D in we)we.hasOwnProperty(D)&&(we[D]instanceof Sn?Cl(we[D]):we[D]instanceof Kn&&Al(we[D],S))},Ja=function(S){for(var D in S.objectNumber=ni(),W("<<"),S)switch(D){case"opacity":W("/ca "+X(S[D]));break;case"stroke-opacity":W("/CA "+X(S[D]))}W(">>"),W("endobj")},kl=function(){var S;for(S in ze)ze.hasOwnProperty(S)&&Ja(ze[S])},na=function(){for(var S in W("/XObject <<"),ui)ui.hasOwnProperty(S)&&ui[S].objectNumber>=0&&W("/"+S+" "+ui[S].objectNumber+" 0 R");xe.publish("putXobjectDict"),W(">>")},Ll=function(){mi.oid=ni(),W("<<"),W("/Filter /Standard"),W("/V "+mi.v),W("/R "+mi.r),W("/U <"+mi.toHexString(mi.U)+">"),W("/O <"+mi.toHexString(mi.O)+">"),W("/P "+mi.P),W(">>"),W("endobj")},Za=function(){for(var S in W("/Font <<"),_e)_e.hasOwnProperty(S)&&(s===!1||s===!0&&l.hasOwnProperty(S))&&W("/"+S+" "+_e[S].objectNumber+" 0 R");W(">>")},Tl=function(){if(Object.keys(we).length>0){for(var S in W("/Shading <<"),we)we.hasOwnProperty(S)&&we[S]instanceof Sn&&we[S].objectNumber>=0&&W("/"+S+" "+we[S].objectNumber+" 0 R");xe.publish("putShadingPatternDict"),W(">>")}},ls=function(S){if(Object.keys(we).length>0){for(var D in W("/Pattern <<"),we)we.hasOwnProperty(D)&&we[D]instanceof n.TilingPattern&&we[D].objectNumber>=0&&we[D].objectNumber<S&&W("/"+D+" "+we[D].objectNumber+" 0 R");xe.publish("putTilingPatternDict"),W(">>")}},Pl=function(){if(Object.keys(ze).length>0){var S;for(S in W("/ExtGState <<"),ze)ze.hasOwnProperty(S)&&ze[S].objectNumber>=0&&W("/"+S+" "+ze[S].objectNumber+" 0 R");xe.publish("putGStateDict"),W(">>")}},Ve=function(S){Di(S.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Za(),Tl(),ls(S.objectOid),Pl(),na(),W(">>"),W("endobj")},Qa=function(){var S=[];ns(),kl(),as(),os(S),xe.publish("putResources"),S.forEach(Ve),Ve({resourcesOid:sr,objectOid:Number.MAX_SAFE_INTEGER}),xe.publish("postPutResources")},to=function(){xe.publish("putAdditionalObjects");for(var S=0;S<ut.length;S++){var D=ut[S];Di(D.objId,!0),W(D.content),W("endobj")}xe.publish("postPutAdditionalObjects")},eo=function(S){Ee[S.fontName]=Ee[S.fontName]||{},Ee[S.fontName][S.fontStyle]=S.id},sa=function(S,D,et,lt,wt){var kt={id:"F"+(Object.keys(_e).length+1).toString(10),postScriptName:S,fontName:D,fontStyle:et,encoding:lt,isStandardFont:wt||!1,metadata:{}};return xe.publish("addFont",{font:kt,instance:this}),_e[kt.id]=kt,eo(kt),kt.id},Ol=function(S){for(var D=0,et=bt.length;D<et;D++){var lt=sa.call(this,S[D][0],S[D][1],S[D][2],bt[D][3],!0);s===!1&&(l[lt]=!0);var wt=S[D][0].split("-");eo({id:lt,fontName:wt[0],fontStyle:wt[1]||""})}xe.publish("addFonts",{fonts:_e,dictionary:Ee})},lr=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(lt){var D=lt.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var et="Error in function "+D.split(`
`)[0].split("<")[0]+": "+lt.message;if(!Qt.console)throw new Error(et);Qt.console.error(et,lt),Qt.alert&&alert(et)}},S.foo.bar=S,S.foo},cs=function(S,D){var et,lt,wt,kt,Ft,qt,Gt,ae,ne;if(wt=(D=D||{}).sourceEncoding||"Unicode",Ft=D.outputEncoding,(D.autoencode||Ft)&&_e[te].metadata&&_e[te].metadata[wt]&&_e[te].metadata[wt].encoding&&(kt=_e[te].metadata[wt].encoding,!Ft&&_e[te].encoding&&(Ft=_e[te].encoding),!Ft&&kt.codePages&&(Ft=kt.codePages[0]),typeof Ft=="string"&&(Ft=kt[Ft]),Ft)){for(Gt=!1,qt=[],et=0,lt=S.length;et<lt;et++)(ae=Ft[S.charCodeAt(et)])?qt.push(String.fromCharCode(ae)):qt.push(S[et]),qt[et].charCodeAt(0)>>8&&(Gt=!0);S=qt.join("")}for(et=S.length;Gt===void 0&&et!==0;)S.charCodeAt(et-1)>>8&&(Gt=!0),et--;if(!Gt)return S;for(qt=D.noBOM?[]:[254,255],et=0,lt=S.length;et<lt;et++){if((ne=(ae=S.charCodeAt(et))>>8)>>8)throw new Error("Character at position "+et+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(ne),qt.push(ae-(ne<<8))}return String.fromCharCode.apply(void 0,qt)},Mi=n.__private__.pdfEscape=n.pdfEscape=function(S,D){return cs(S,D).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},aa=n.__private__.beginPage=function(S){dt[++qe]=[],re[qe]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},ro(qe),it(dt[R])},io=function(S,D){var et,lt,wt;switch(i=D||i,typeof S=="string"&&(et=m(S.toLowerCase()),Array.isArray(et)&&(lt=et[0],wt=et[1])),Array.isArray(S)&&(lt=S[0]*Bt,wt=S[1]*Bt),isNaN(lt)&&(lt=d[0],wt=d[1]),(lt>14400||wt>14400)&&(Me.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),lt=Math.min(14400,lt),wt=Math.min(14400,wt)),d=[lt,wt],i.substr(0,1)){case"l":wt>lt&&(d=[wt,lt]);break;case"p":lt>wt&&(d=[wt,lt])}aa(d),co(ha),W(cr),fa!==0&&W(fa+" J"),da!==0&&W(da+" j"),xe.publish("addPage",{pageNumber:qe})},Ml=function(S){S>0&&S<=qe&&(dt.splice(S,1),re.splice(S,1),qe--,R>qe&&(R=qe),this.setPage(R))},ro=function(S){S>0&&S<=qe&&(R=S)},Nl=n.__private__.getNumberOfPages=n.getNumberOfPages=function(){return dt.length-1},no=function(S,D,et){var lt,wt=void 0;return et=et||{},S=S!==void 0?S:_e[te].fontName,D=D!==void 0?D:_e[te].fontStyle,lt=S.toLowerCase(),Ee[lt]!==void 0&&Ee[lt][D]!==void 0?wt=Ee[lt][D]:Ee[S]!==void 0&&Ee[S][D]!==void 0?wt=Ee[S][D]:et.disableWarning===!1&&Me.warn("Unable to look up font label for font '"+S+"', '"+D+"'. Refer to getFontList() for available fonts."),wt||et.noFallback||(wt=Ee.times[D])==null&&(wt=Ee.times.normal),wt},Fl=n.__private__.putInfo=function(){var S=ni(),D=function(lt){return lt};for(var et in u!==null&&(D=mi.encryptor(S,0)),W("<<"),W("/Producer ("+Mi(D("jsPDF "+Kt.version))+")"),Wt)Wt.hasOwnProperty(et)&&Wt[et]&&W("/"+et.substr(0,1).toUpperCase()+et.substr(1)+" ("+Mi(D(Wt[et]))+")");W("/CreationDate ("+Mi(D(rt))+")"),W(">>"),W("endobj")},oa=n.__private__.putCatalog=function(S){var D=(S=S||{}).rootDictionaryObjId||zr;switch(ni(),W("<<"),W("/Type /Catalog"),W("/Pages "+D+" 0 R"),At||(At="fullwidth"),At){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var et=""+At;et.substr(et.length-1)==="%"&&(At=parseInt(At)/100),typeof At=="number"&&W("/OpenAction [3 0 R /XYZ null null "+X(At)+"]")}switch(Yt||(Yt="continuous"),Yt){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}jt&&W("/PageMode /"+jt),xe.publish("putCatalog"),W(">>"),W("endobj")},El=n.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(U+1)),W("/Root "+U+" 0 R"),W("/Info "+(U-1)+" 0 R"),u!==null&&W("/Encrypt "+mi.oid+" 0 R"),W("/ID [ <"+at+"> <"+at+"> ]"),W(">>")},Il=n.__private__.putHeader=function(){W("%PDF-"+h),W("%ºß¬à")},jl=n.__private__.putXRef=function(){var S="0000000000";W("xref"),W("0 "+(U+1)),W("0000000000 65535 f ");for(var D=1;D<=U;D++)typeof $[D]=="function"?W((S+$[D]()).slice(-10)+" 00000 n "):$[D]!==void 0?W((S+$[D]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},qr=n.__private__.buildDocument=function(){st(),it(tt),xe.publish("buildDocument"),Il(),Dn(),to(),Qa(),u!==null&&Ll(),Fl(),oa();var S=Q;return jl(),El(),W("startxref"),W(""+S),W("%%EOF"),it(dt[R]),tt.join(`
`)},hs=n.__private__.getBlob=function(S){return new Blob([yt(S)],{type:"application/pdf"})},us=n.output=n.__private__.output=lr(function(S,D){switch(typeof(D=D||{})=="string"?D={filename:D}:D.filename=D.filename||"generated.pdf",S){case void 0:return qr();case"save":n.save(D.filename);break;case"arraybuffer":return yt(qr());case"blob":return hs(qr());case"bloburi":case"bloburl":if(Qt.URL!==void 0&&typeof Qt.URL.createObjectURL=="function")return Qt.URL&&Qt.URL.createObjectURL(hs(qr()))||void 0;Me.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var et="",lt=qr();try{et=Jc(lt)}catch{et=Jc(unescape(encodeURIComponent(lt)))}return"data:application/pdf;filename="+D.filename+";base64,"+et;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var wt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';D.pdfObjectUrl&&(wt=D.pdfObjectUrl,kt="");var Ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+wt+'"'+kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(D)+");<\/script></body></html>",qt=Qt.open();return qt!==null&&qt.document.write(Ft),qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(D.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+D.filename+'" width="500px" height="400px" /></body></html>',ae=Qt.open();if(ae!==null){ae.document.write(Gt);var ne=this;ae.document.documentElement.querySelector("#pdfViewer").onload=function(){ae.document.title=D.filename,ae.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ne.output("bloburl"))}}return ae}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",D)+'"></iframe></body></html>',Be=Qt.open();if(Be!==null&&(Be.document.write(ge),Be.document.title=D.filename),Be||typeof safari>"u")return Be;break;case"datauri":case"dataurl":return Qt.document.location.href=this.output("datauristring",D);default:return null}}),so=function(S){return Array.isArray(jn)===!0&&jn.indexOf(S)>-1};switch(a){case"pt":Bt=1;break;case"mm":Bt=72/25.4;break;case"cm":Bt=72/2.54;break;case"in":Bt=72;break;case"px":Bt=so("px_scaling")==1?.75:96/72;break;case"pc":case"em":Bt=12;break;case"ex":Bt=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Bt=a}var mi=null;J(),nt();var Dl=function(S){return u!==null?mi.encryptor(S,0):function(D){return D}},ao=n.__private__.getPageInfo=n.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:re[S].objId,pageNumber:S,pageContext:re[S]}},ee=n.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var D in re)if(re[D].objId===S)break;return ao(D)},Bl=n.__private__.getCurrentPageInfo=n.getCurrentPageInfo=function(){return{objId:re[R].objId,pageNumber:R,pageContext:re[R]}};n.addPage=function(){return io.apply(this,arguments),this},n.setPage=function(){return ro.apply(this,arguments),it.call(this,dt[R]),this},n.insertPage=function(S){return this.addPage(),this.movePage(R,S),this},n.movePage=function(S,D){var et,lt;if(S>D){et=dt[S],lt=re[S];for(var wt=S;wt>D;wt--)dt[wt]=dt[wt-1],re[wt]=re[wt-1];dt[D]=et,re[D]=lt,this.setPage(D)}else if(S<D){et=dt[S],lt=re[S];for(var kt=S;kt<D;kt++)dt[kt]=dt[kt+1],re[kt]=re[kt+1];dt[D]=et,re[D]=lt,this.setPage(D)}return this},n.deletePage=function(){return Ml.apply(this,arguments),this},n.__private__.text=n.text=function(S,D,et,lt,wt){var kt,Ft,qt,Gt,ae,ne,ge,Be,Ue,Qe=(lt=lt||{}).scope||this;if(typeof S=="number"&&typeof D=="number"&&(typeof et=="string"||Array.isArray(et))){var vi=et;et=D,D=S,S=vi}if(arguments[3]instanceof Zt?(O("The transform parameter of text() with a Matrix value"),Ue=wt):(qt=arguments[4],Gt=arguments[5],Ae(ge=arguments[3])==="object"&&ge!==null||(typeof qt=="string"&&(Gt=qt,qt=null),typeof ge=="string"&&(Gt=ge,ge=null),typeof ge=="number"&&(qt=ge,ge=null),lt={flags:ge,angle:qt,align:Gt})),isNaN(D)||isNaN(et)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return Qe;var ai="",hr=!1,Bi=typeof lt.lineHeightFactor=="number"?lt.lineHeightFactor:Rn,Or=Qe.internal.scaleFactor;function mo(Ie){return Ie=Ie.split("	").join(Array(lt.TabLen||9).join(" ")),Mi(Ie,ge)}function ba(Ie){for(var je,Ge=Ie.concat(),si=[],Vr=Ge.length;Vr--;)typeof(je=Ge.shift())=="string"?si.push(je):Array.isArray(Ie)&&(je.length===1||je[1]===void 0&&je[2]===void 0)?si.push(je[0]):si.push([je[0],je[1],je[2]]);return si}function ya(Ie,je){var Ge;if(typeof Ie=="string")Ge=je(Ie)[0];else if(Array.isArray(Ie)){for(var si,Vr,La=Ie.concat(),ks=[],xo=La.length;xo--;)typeof(si=La.shift())=="string"?ks.push(je(si)[0]):Array.isArray(si)&&typeof si[0]=="string"&&(Vr=je(si[0],si[1],si[2]),ks.push([Vr[0],Vr[1],Vr[2]]));Ge=ks}return Ge}var vs=!1,wa=!0;if(typeof S=="string")vs=!0;else if(Array.isArray(S)){var xa=S.concat();Ft=[];for(var bs,fi=xa.length;fi--;)(typeof(bs=xa.shift())!="string"||Array.isArray(bs)&&typeof bs[0]!="string")&&(wa=!1);vs=wa}if(vs===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var ys=Lt/Qe.internal.scaleFactor,ws=ys*(Bi-1);switch(lt.baseline){case"bottom":et-=ws;break;case"top":et+=ys-ws;break;case"hanging":et+=ys-2*ws;break;case"middle":et+=ys/2-ws}if((ne=lt.maxWidth||0)>0&&(typeof S=="string"?S=Qe.splitTextToSize(S,ne):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Ie,je){return Ie.concat(Qe.splitTextToSize(je,ne))},[]))),kt={text:S,x:D,y:et,options:lt,mutex:{pdfEscape:Mi,activeFontKey:te,fonts:_e,activeFontSize:Lt}},xe.publish("preProcessText",kt),S=kt.text,qt=(lt=kt.options).angle,!(Ue instanceof Zt)&&qt&&typeof qt=="number"){qt*=Math.PI/180,lt.rotationDirection===0&&(qt=-qt),x===y.ADVANCED&&(qt=-qt);var xs=Math.cos(qt),_a=Math.sin(qt);Ue=new Zt(xs,_a,-_a,xs,0,0)}else qt&&qt instanceof Zt&&(Ue=qt);x!==y.ADVANCED||Ue||(Ue=Ar),(ae=lt.charSpace||ps)!==void 0&&(ai+=T(I(ae))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Be=lt.horizontalScale)!==void 0&&(ai+=T(100*Be)+` Tz
`),lt.lang;var Ni=-1,Gl=lt.renderingMode!==void 0?lt.renderingMode:lt.stroke,Sa=Qe.internal.getCurrentPageInfo().pageContext;switch(Gl){case 0:case!1:case"fill":Ni=0;break;case 1:case!0:case"stroke":Ni=1;break;case 2:case"fillThenStroke":Ni=2;break;case 3:case"invisible":Ni=3;break;case 4:case"fillAndAddForClipping":Ni=4;break;case 5:case"strokeAndAddPathForClipping":Ni=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ni=6;break;case 7:case"addToPathForClipping":Ni=7}var vo=Sa.usedRenderingMode!==void 0?Sa.usedRenderingMode:-1;Ni!==-1?ai+=Ni+` Tr
`:vo!==-1&&(ai+=`0 Tr
`),Ni!==-1&&(Sa.usedRenderingMode=Ni),Gt=lt.align||"left";var Yi,_s=Lt*Bi,bo=Qe.internal.pageSize.getWidth(),yo=_e[te];ae=lt.charSpace||ps,ne=lt.maxWidth||0,ge=Object.assign({autoencode:!0,noBOM:!0},lt.flags);var cn=[],Un=function(Ie){return Qe.getStringUnitWidth(Ie,{font:yo,charSpace:ae,fontSize:Lt,doKerning:!1})*Lt/Or};if(Object.prototype.toString.call(S)==="[object Array]"){var Fi;Ft=ba(S),Gt!=="left"&&(Yi=Ft.map(Un));var Ci,hn=0;if(Gt==="right"){D-=Yi[0],S=[],fi=Ft.length;for(var Wr=0;Wr<fi;Wr++)Wr===0?(Ci=Pr(D),Fi=Ur(et)):(Ci=I(hn-Yi[Wr]),Fi=-_s),S.push([Ft[Wr],Ci,Fi]),hn=Yi[Wr]}else if(Gt==="center"){D-=Yi[0]/2,S=[],fi=Ft.length;for(var Hr=0;Hr<fi;Hr++)Hr===0?(Ci=Pr(D),Fi=Ur(et)):(Ci=I((hn-Yi[Hr])/2),Fi=-_s),S.push([Ft[Hr],Ci,Fi]),hn=Yi[Hr]}else if(Gt==="left"){S=[],fi=Ft.length;for(var Ss=0;Ss<fi;Ss++)S.push(Ft[Ss])}else if(Gt==="justify"&&yo.encoding==="Identity-H"){S=[],fi=Ft.length,ne=ne!==0?ne:bo;for(var Yr=0,Xe=0;Xe<fi;Xe++)if(Fi=Xe===0?Ur(et):-_s,Ci=Xe===0?Pr(D):Yr,Xe<fi-1){var Ca=I((ne-Yi[Xe])/(Ft[Xe].split(" ").length-1)),Ai=Ft[Xe].split(" ");S.push([Ai[0]+" ",Ci,Fi]),Yr=0;for(var Vi=1;Vi<Ai.length;Vi++){var Cs=(Un(Ai[Vi-1]+" "+Ai[Vi])-Un(Ai[Vi]))*Or+Ca;Vi==Ai.length-1?S.push([Ai[Vi],Cs,0]):S.push([Ai[Vi]+" ",Cs,0]),Yr-=Cs}}else S.push([Ft[Xe],Ci,Fi]);S.push(["",Yr,0])}else{if(Gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],fi=Ft.length,ne=ne!==0?ne:bo,Xe=0;Xe<fi;Xe++)Fi=Xe===0?Ur(et):-_s,Ci=Xe===0?Pr(D):0,Xe<fi-1?cn.push(T(I((ne-Yi[Xe])/(Ft[Xe].split(" ").length-1)))):cn.push(0),S.push([Ft[Xe],Ci,Fi])}}var wo=typeof lt.R2L=="boolean"?lt.R2L:Mt;wo===!0&&(S=ya(S,function(Ie,je,Ge){return[Ie.split("").reverse().join(""),je,Ge]})),kt={text:S,x:D,y:et,options:lt,mutex:{pdfEscape:Mi,activeFontKey:te,fonts:_e,activeFontSize:Lt}},xe.publish("postProcessText",kt),S=kt.text,hr=kt.mutex.isHex||!1;var Aa=_e[te].encoding;Aa!=="WinAnsiEncoding"&&Aa!=="StandardEncoding"||(S=ya(S,function(Ie,je,Ge){return[mo(Ie),je,Ge]})),Ft=ba(S),S=[];for(var Wn,Hn,un,Yn=0,As=1,Vn=Array.isArray(Ft[0])?As:Yn,fn="",ka=function(Ie,je,Ge){var si="";return Ge instanceof Zt?(Ge=typeof lt.angle=="number"?nr(Ge,new Zt(1,0,0,1,Ie,je)):nr(new Zt(1,0,0,1,Ie,je),Ge),x===y.ADVANCED&&(Ge=nr(new Zt(1,0,0,-1,0,0),Ge)),si=Ge.join(" ")+` Tm
`):si=T(Ie)+" "+T(je)+` Td
`,si},Xi=0;Xi<Ft.length;Xi++){switch(fn="",Vn){case As:un=(hr?"<":"(")+Ft[Xi][0]+(hr?">":")"),Wn=parseFloat(Ft[Xi][1]),Hn=parseFloat(Ft[Xi][2]);break;case Yn:un=(hr?"<":"(")+Ft[Xi]+(hr?">":")"),Wn=Pr(D),Hn=Ur(et)}cn!==void 0&&cn[Xi]!==void 0&&(fn=cn[Xi]+` Tw
`),Xi===0?S.push(fn+ka(Wn,Hn,Ue)+un):Vn===Yn?S.push(fn+un):Vn===As&&S.push(fn+ka(Wn,Hn,Ue)+un)}S=Vn===Yn?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Gi=`BT
/`;return Gi+=te+" "+Lt+` Tf
`,Gi+=T(Lt*Bi)+` TL
`,Gi+=zn+`
`,Gi+=ai,Gi+=S,W(Gi+="ET"),l[te]=!0,Qe};var Rl=n.__private__.clip=n.clip=function(S){return W(S==="evenodd"?"W*":"W"),this};n.clipEvenOdd=function(){return Rl("evenodd")},n.__private__.discardPath=n.discardPath=function(){return W("n"),this};var Tr=n.__private__.isValidStyle=function(S){var D=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(D=!0),D};n.__private__.setDefaultPathOperation=n.setDefaultPathOperation=function(S){return Tr(S)&&(c=S),this};var oo=n.__private__.getStyle=n.getStyle=function(S){var D=c;switch(S){case"D":case"S":D="S";break;case"F":D="f";break;case"FD":case"DF":D="B";break;case"f":case"f*":case"B":case"B*":D=S}return D},lo=n.close=function(){return W("h"),this};n.stroke=function(){return W("S"),this},n.fill=function(S){return fs("f",S),this},n.fillEvenOdd=function(S){return fs("f*",S),this},n.fillStroke=function(S){return fs("B",S),this},n.fillStrokeEvenOdd=function(S){return fs("B*",S),this};var fs=function(S,D){Ae(D)==="object"?ql(D,S):W(S)},la=function(S){S===null||x===y.ADVANCED&&S===void 0||(S=oo(S),W(S))};function zl(S,D,et,lt,wt){var kt=new Kn(D||this.boundingBox,et||this.xStep,lt||this.yStep,this.gState,wt||this.matrix);kt.stream=this.stream;var Ft=S+"$$"+this.cloneIndex+++"$$";return Oi(Ft,kt),kt}var ql=function(S,D){var et=In[S.key],lt=we[et];if(lt instanceof Sn)W("q"),W(Ul(D)),lt.gState&&n.setGState(lt.gState),W(S.matrix.toString()+" cm"),W("/"+et+" sh"),W("Q");else if(lt instanceof Kn){var wt=new Zt(1,0,0,-1,0,ln());S.matrix&&(wt=wt.multiply(S.matrix||Ar),et=zl.call(lt,S.key,S.boundingBox,S.xStep,S.yStep,wt).id),W("q"),W("/Pattern cs"),W("/"+et+" scn"),lt.gState&&n.setGState(lt.gState),W(D),W("Q")}},Ul=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ca=n.moveTo=function(S,D){return W(T(I(S))+" "+T(G(D))+" m"),this},Bn=n.lineTo=function(S,D){return W(T(I(S))+" "+T(G(D))+" l"),this},an=n.curveTo=function(S,D,et,lt,wt,kt){return W([T(I(S)),T(G(D)),T(I(et)),T(G(lt)),T(I(wt)),T(G(kt)),"c"].join(" ")),this};n.__private__.line=n.line=function(S,D,et,lt,wt){if(isNaN(S)||isNaN(D)||isNaN(et)||isNaN(lt)||!Tr(wt))throw new Error("Invalid arguments passed to jsPDF.line");return x===y.COMPAT?this.lines([[et-S,lt-D]],S,D,[1,1],wt||"S"):this.lines([[et-S,lt-D]],S,D,[1,1]).stroke()},n.__private__.lines=n.lines=function(S,D,et,lt,wt,kt){var Ft,qt,Gt,ae,ne,ge,Be,Ue,Qe,vi,ai,hr;if(typeof S=="number"&&(hr=et,et=D,D=S,S=hr),lt=lt||[1,1],kt=kt||!1,isNaN(D)||isNaN(et)||!Array.isArray(S)||!Array.isArray(lt)||!Tr(wt)||typeof kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ca(D,et),Ft=lt[0],qt=lt[1],ae=S.length,vi=D,ai=et,Gt=0;Gt<ae;Gt++)(ne=S[Gt]).length===2?(vi=ne[0]*Ft+vi,ai=ne[1]*qt+ai,Bn(vi,ai)):(ge=ne[0]*Ft+vi,Be=ne[1]*qt+ai,Ue=ne[2]*Ft+vi,Qe=ne[3]*qt+ai,vi=ne[4]*Ft+vi,ai=ne[5]*qt+ai,an(ge,Be,Ue,Qe,vi,ai));return kt&&lo(),la(wt),this},n.path=function(S){for(var D=0;D<S.length;D++){var et=S[D],lt=et.c;switch(et.op){case"m":ca(lt[0],lt[1]);break;case"l":Bn(lt[0],lt[1]);break;case"c":an.apply(this,lt);break;case"h":lo()}}return this},n.__private__.rect=n.rect=function(S,D,et,lt,wt){if(isNaN(S)||isNaN(D)||isNaN(et)||isNaN(lt)||!Tr(wt))throw new Error("Invalid arguments passed to jsPDF.rect");return x===y.COMPAT&&(lt=-lt),W([T(I(S)),T(G(D)),T(I(et)),T(I(lt)),"re"].join(" ")),la(wt),this},n.__private__.triangle=n.triangle=function(S,D,et,lt,wt,kt,Ft){if(isNaN(S)||isNaN(D)||isNaN(et)||isNaN(lt)||isNaN(wt)||isNaN(kt)||!Tr(Ft))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[et-S,lt-D],[wt-et,kt-lt],[S-wt,D-kt]],S,D,[1,1],Ft,!0),this},n.__private__.roundedRect=n.roundedRect=function(S,D,et,lt,wt,kt,Ft){if(isNaN(S)||isNaN(D)||isNaN(et)||isNaN(lt)||isNaN(wt)||isNaN(kt)||!Tr(Ft))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qt=4/3*(Math.SQRT2-1);return wt=Math.min(wt,.5*et),kt=Math.min(kt,.5*lt),this.lines([[et-2*wt,0],[wt*qt,0,wt,kt-kt*qt,wt,kt],[0,lt-2*kt],[0,kt*qt,-wt*qt,kt,-wt,kt],[2*wt-et,0],[-wt*qt,0,-wt,-kt*qt,-wt,-kt],[0,2*kt-lt],[0,-kt*qt,wt*qt,-kt,wt,-kt]],S+wt,D,[1,1],Ft,!0),this},n.__private__.ellipse=n.ellipse=function(S,D,et,lt,wt){if(isNaN(S)||isNaN(D)||isNaN(et)||isNaN(lt)||!Tr(wt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var kt=4/3*(Math.SQRT2-1)*et,Ft=4/3*(Math.SQRT2-1)*lt;return ca(S+et,D),an(S+et,D-Ft,S+kt,D-lt,S,D-lt),an(S-kt,D-lt,S-et,D-Ft,S-et,D),an(S-et,D+Ft,S-kt,D+lt,S,D+lt),an(S+kt,D+lt,S+et,D+Ft,S+et,D),la(wt),this},n.__private__.circle=n.circle=function(S,D,et,lt){if(isNaN(S)||isNaN(D)||isNaN(et)||!Tr(lt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,D,et,et,lt)},n.setFont=function(S,D,et){return et&&(D=M(D,et)),te=no(S,D,{disableWarning:!1}),this};var Wl=n.__private__.getFont=n.getFont=function(){return _e[no.apply(n,arguments)]};n.__private__.getFontList=n.getFontList=function(){var S,D,et={};for(S in Ee)if(Ee.hasOwnProperty(S))for(D in et[S]=[],Ee[S])Ee[S].hasOwnProperty(D)&&et[S].push(D);return et},n.addFont=function(S,D,et,lt,wt){var kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&kt.indexOf(arguments[3])!==-1?wt=arguments[3]:arguments[3]&&kt.indexOf(arguments[3])==-1&&(et=M(et,lt)),wt=wt||"Identity-H",sa.call(this,S,D,et,wt)};var Rn,ha=e.lineWidth||.200025,ds=n.__private__.getLineWidth=n.getLineWidth=function(){return ha},co=n.__private__.setLineWidth=n.setLineWidth=function(S){return ha=S,W(T(I(S))+" w"),this};n.__private__.setLineDash=Kt.API.setLineDash=Kt.API.setLineDashPattern=function(S,D){if(S=S||[],D=D||0,isNaN(D)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(et){return T(I(et))}).join(" "),D=T(I(D)),W("["+S+"] "+D+" d"),this};var ho=n.__private__.getLineHeight=n.getLineHeight=function(){return Lt*Rn};n.__private__.getLineHeight=n.getLineHeight=function(){return Lt*Rn};var uo=n.__private__.setLineHeightFactor=n.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Rn=S),this},fo=n.__private__.getLineHeightFactor=n.getLineHeightFactor=function(){return Rn};uo(e.lineHeight);var Pr=n.__private__.getHorizontalCoordinate=function(S){return I(S)},Ur=n.__private__.getVerticalCoordinate=function(S){return x===y.ADVANCED?S:re[R].mediaBox.topRightY-re[R].mediaBox.bottomLeftY-I(S)},Hl=n.__private__.getHorizontalCoordinateString=n.getHorizontalCoordinateString=function(S){return T(Pr(S))},on=n.__private__.getVerticalCoordinateString=n.getVerticalCoordinateString=function(S){return T(Ur(S))},cr=e.strokeColor||"0 G";n.__private__.getStrokeColor=n.getDrawColor=function(){return ar(cr)},n.__private__.setStrokeColor=n.setDrawColor=function(S,D,et,lt){return cr=or({ch1:S,ch2:D,ch3:et,ch4:lt,pdfColorType:"draw",precision:2}),W(cr),this};var ua=e.fillColor||"0 g";n.__private__.getFillColor=n.getFillColor=function(){return ar(ua)},n.__private__.setFillColor=n.setFillColor=function(S,D,et,lt){return ua=or({ch1:S,ch2:D,ch3:et,ch4:lt,pdfColorType:"fill",precision:2}),W(ua),this};var zn=e.textColor||"0 g",Yl=n.__private__.getTextColor=n.getTextColor=function(){return ar(zn)};n.__private__.setTextColor=n.setTextColor=function(S,D,et,lt){return zn=or({ch1:S,ch2:D,ch3:et,ch4:lt,pdfColorType:"text",precision:3}),this};var ps=e.charSpace,Vl=n.__private__.getCharSpace=n.getCharSpace=function(){return parseFloat(ps||0)};n.__private__.setCharSpace=n.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ps=S,this};var fa=0;n.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},n.__private__.setLineCap=n.setLineCap=function(S){var D=n.CapJoinStyles[S];if(D===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fa=D,W(D+" J"),this};var da=0;n.__private__.setLineJoin=n.setLineJoin=function(S){var D=n.CapJoinStyles[S];if(D===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return da=D,W(D+" j"),this},n.__private__.setLineMiterLimit=n.__private__.setMiterLimit=n.setLineMiterLimit=n.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(T(I(S))+" M"),this},n.GState=ts,n.setGState=function(S){(S=typeof S=="string"?ze[rr[S]]:po(null,S)).equals(Rr)||(W("/"+S.id+" gs"),Rr=S)};var po=function(S,D){if(!S||!rr[S]){var et=!1;for(var lt in ze)if(ze.hasOwnProperty(lt)&&ze[lt].equals(D)){et=!0;break}if(et)D=ze[lt];else{var wt="GS"+(Object.keys(ze).length+1).toString(10);ze[wt]=D,D.id=wt}return S&&(rr[S]=D.id),xe.publish("addGState",D),D}};n.addGState=function(S,D){return po(S,D),this},n.saveGraphicsState=function(){return W("q"),_r.push({key:te,size:Lt,color:zn}),this},n.restoreGraphicsState=function(){W("Q");var S=_r.pop();return te=S.key,Lt=S.size,zn=S.color,Rr=null,this},n.setCurrentTransformationMatrix=function(S){return W(S.toString()+" cm"),this},n.comment=function(S){return W("#"+S),this};var gs=function(S,D){var et=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return et},set:function(kt){isNaN(kt)||(et=parseFloat(kt))}});var lt=D||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return lt},set:function(kt){isNaN(kt)||(lt=parseFloat(kt))}});var wt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return wt},set:function(kt){wt=kt.toString()}}),this},pa=function(S,D,et,lt){gs.call(this,S,D),this.type="rect";var wt=et||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return wt},set:function(Ft){isNaN(Ft)||(wt=parseFloat(Ft))}});var kt=lt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return kt},set:function(Ft){isNaN(Ft)||(kt=parseFloat(Ft))}}),this},ga=function(){this.page=qe,this.currentPage=R,this.pages=dt.slice(0),this.pagesContext=re.slice(0),this.x=Te,this.y=pe,this.matrix=Pi,this.width=qn(R),this.height=ln(R),this.outputDestination=ot,this.id="",this.objectNumber=-1};ga.prototype.restore=function(){qe=this.page,R=this.currentPage,re=this.pagesContext,dt=this.pages,Te=this.x,pe=this.y,Pi=this.matrix,ma(R,this.width),va(R,this.height),ot=this.outputDestination};var go=function(S,D,et,lt,wt){Cr.push(new ga),qe=R=0,dt=[],Te=S,pe=D,Pi=wt,aa([et,lt])},Xl=function(S){if(Sr[S])Cr.pop().restore();else{var D=new ga,et="Xo"+(Object.keys(ui).length+1).toString(10);D.id=et,Sr[S]=et,ui[et]=D,xe.publish("addFormObject",D),Cr.pop().restore()}};for(var ms in n.beginFormObject=function(S,D,et,lt,wt){return go(S,D,et,lt,wt),this},n.endFormObject=function(S){return Xl(S),this},n.doFormObject=function(S,D){var et=ui[Sr[S]];return W("q"),W(D.toString()+" cm"),W("/"+et.id+" Do"),W("Q"),this},n.getFormObject=function(S){var D=ui[Sr[S]];return{x:D.x,y:D.y,width:D.width,height:D.height,matrix:D.matrix}},n.save=function(S,D){return S=S||"generated.pdf",(D=D||{}).returnPromise=D.returnPromise||!1,D.returnPromise===!1?(Gn(hs(qr()),S),typeof Gn.unload=="function"&&Qt.setTimeout&&setTimeout(Gn.unload,911),this):new Promise(function(et,lt){try{var wt=Gn(hs(qr()),S);typeof Gn.unload=="function"&&Qt.setTimeout&&setTimeout(Gn.unload,911),et(wt)}catch(kt){lt(kt.message)}})},Kt.API)Kt.API.hasOwnProperty(ms)&&(ms==="events"&&Kt.API.events.length?function(S,D){var et,lt,wt;for(wt=D.length-1;wt!==-1;wt--)et=D[wt][0],lt=D[wt][1],S.subscribe.apply(S,[et].concat(typeof lt=="function"?[lt]:lt))}(xe,Kt.API.events):n[ms]=Kt.API[ms]);var qn=n.getPageWidth=function(S){return(re[S=S||R].mediaBox.topRightX-re[S].mediaBox.bottomLeftX)/Bt},ma=n.setPageWidth=function(S,D){re[S].mediaBox.topRightX=D*Bt+re[S].mediaBox.bottomLeftX},ln=n.getPageHeight=function(S){return(re[S=S||R].mediaBox.topRightY-re[S].mediaBox.bottomLeftY)/Bt},va=n.setPageHeight=function(S,D){re[S].mediaBox.topRightY=D*Bt+re[S].mediaBox.bottomLeftY};return n.internal={pdfEscape:Mi,getStyle:oo,getFont:Wl,getFontSize:ft,getCharSpace:Vl,getTextColor:Yl,getLineHeight:ho,getLineHeightFactor:fo,getLineWidth:ds,write:vt,getHorizontalCoordinate:Pr,getVerticalCoordinate:Ur,getCoordinateString:Hl,getVerticalCoordinateString:on,collections:{},newObject:ni,newAdditionalObject:is,newObjectDeferred:Ze,newObjectDeferredBegin:Di,getFilters:kr,putStream:Hi,events:xe,scaleFactor:Bt,pageSize:{getWidth:function(){return qn(R)},setWidth:function(S){ma(R,S)},getHeight:function(){return ln(R)},setHeight:function(S){va(R,S)}},encryptionOptions:u,encryption:mi,getEncryptor:Dl,output:us,getNumberOfPages:Nl,pages:dt,out:W,f2:X,f3:F,getPageInfo:ao,getPageInfoByObjId:ee,getCurrentPageInfo:Bl,getPDFVersion:g,Point:gs,Rectangle:pa,Matrix:Zt,hasHotfix:so},Object.defineProperty(n.internal.pageSize,"width",{get:function(){return qn(R)},set:function(S){ma(R,S)},enumerable:!0,configurable:!0}),Object.defineProperty(n.internal.pageSize,"height",{get:function(){return ln(R)},set:function(S){va(R,S)},enumerable:!0,configurable:!0}),Ol.call(n,bt),te="F1",io(d,i),xe.publish("initialized"),n}Rs.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Rs.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Rs.prototype.hexToBytes=function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(String.fromCharCode(parseInt(e.substr(i,2),16)));return t.join("")},Rs.prototype.processOwnerPassword=function(e,t){return Qc(Zc(t).substr(0,5),e)},Rs.prototype.encryptor=function(e,t){var i=Zc(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return Qc(i,a)}},ts.prototype.equals=function(e){var t,i="id,objectNumber,equals";if(!e||Ae(e)!==Ae(this))return!1;var a=0;for(t in this)if(!(i.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&i.indexOf(t)<0&&a--;return a===0},Kt.API={events:[]},Kt.version="3.0.0";var He=Kt.API,bh=1,es=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Is=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},se=function(e){return e.toFixed(2)},xn=function(e){return e.toFixed(5)};He.__acroform__={};var ji=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},_u=function(e){return e*bh},Nr=function(e){var t=new Kf,i=Ht.internal.getHeight(e)||0,a=Ht.internal.getWidth(e)||0;return t.BBox=[0,0,Number(se(a)),Number(se(i))],t},xg=He.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},_g=He.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Sg=He.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},$e=He.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Sg(e,t-1)},Ke=He.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return xg(e,t-1)},Je=He.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _g(e,t-1)},Cg=He.__acroform__.calculateCoordinates=function(e,t){var i=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,d=e[0],p=e[1],v=e[2],o=e[3],r={};return r.lowerLeft_X=i(d)||0,r.lowerLeft_Y=a(p+o)||0,r.upperRight_X=i(d+v)||0,r.upperRight_Y=a(p)||0,[Number(se(r.lowerLeft_X)),Number(se(r.lowerLeft_Y)),Number(se(r.upperRight_X)),Number(se(r.upperRight_Y))]},Ag=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],i=e._V||e.DV,a=th(e,i),d=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+d+" "+se(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var p=Nr(e);return p.scope=e.scope,p.stream=t.join(`
`),p}},th=function(e,t){var i=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},d=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");d=e.multiline?d.map(function(F){return F.split(`
`)}):d.map(function(F){return[F]});var p=i,v=Ht.internal.getHeight(e)||0;v=v<0?-v:v;var o=Ht.internal.getWidth(e)||0;o=o<0?-o:o;var r=function(F,I,K){if(F+1<d.length){var G=I+" "+d[F+1][0];return Xo(G,e,K).width<=o-4}return!1};p++;t:for(;p>0;){t="",p--;var c,u,s=Xo("3",e,p).height,l=e.multiline?v-p:(v-s)/2,n=l+=2,h=0,g=0,f=0;if(p<=0){t=`(...) Tj
`,t+="% Width of Text: "+Xo(t,e,p=12).width+", FieldWidth:"+o+`
`;break}for(var m="",y=0,x=0;x<d.length;x++)if(d.hasOwnProperty(x)){var _=!1;if(d[x].length!==1&&f!==d[x].length-1){if((s+2)*(y+2)+2>v)continue t;m+=d[x][f],_=!0,g=x,x--}else{m=(m+=d[x][f]+" ").substr(m.length-1)==" "?m.substr(0,m.length-1):m;var A=parseInt(x),M=r(A,m,p),T=x>=d.length-1;if(M&&!T){m+=" ",f=0;continue}if(M||T){if(T)g=A;else if(e.multiline&&(s+2)*(y+2)+2>v)continue t}else{if(!e.multiline||(s+2)*(y+2)+2>v)continue t;g=A}}for(var O="",B=h;B<=g;B++){var X=d[B];if(e.multiline){if(B===g){O+=X[f]+" ",f=(f+1)%X.length;continue}if(B===h){O+=X[X.length-1]+" ";continue}}O+=X[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,u=Xo(O,e,p).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}t+=se(c)+" "+se(n)+` Td
`,t+="("+es(O)+`) Tj
`,t+=-se(c)+` 0 Td
`,n=-(p+2),u=0,h=_?g:g+1,y++,m=""}break}return a.text=t,a.fontSize=p,a},Xo=function(e,t,i){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),d=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:d}},kg={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Lg=function(e,t){var i={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===i.type&&a.object===i.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(i)},Tg=function(e,t){for(var i in e)if(e.hasOwnProperty(i)){var a=i,d=e[i];t.internal.newObjectDeferredBegin(d.objId,!0),Ae(d)==="object"&&typeof d.putStream=="function"&&d.putStream(),delete e[a]}},Pg=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(wr.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(kg)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");bh=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Jf,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var d in a)if(a.hasOwnProperty(d)){var p=a[d];p.objId=void 0,p.hasAnnotation&&Lg(p,i)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(i){(function(a,d){var p=!a;for(var v in a||(d.internal.newObjectDeferredBegin(d.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),d.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||d.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(v)){var o=a[v],r=[],c=o.Rect;if(o.Rect&&(o.Rect=Cg(o.Rect,d)),d.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ht.createDefaultAppearanceStream(o),Ae(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(r=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=Ag(o);r.push({key:"AP",value:"<</N "+u+">>"}),d.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var s="";for(var l in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(l)){var n=o.appearanceStreamContent[l];if(s+="/"+l+" ",s+="<<",Object.keys(n).length>=1||Array.isArray(n)){for(var v in n)if(n.hasOwnProperty(v)){var h=n[v];typeof h=="function"&&(h=h.call(d,o)),s+="/"+v+" "+h+" ",d.internal.acroformPlugin.xForms.indexOf(h)>=0||d.internal.acroformPlugin.xForms.push(h)}}else typeof(h=n)=="function"&&(h=h.call(d,o)),s+="/"+v+" "+h,d.internal.acroformPlugin.xForms.indexOf(h)>=0||d.internal.acroformPlugin.xForms.push(h);s+=">>"}r.push({key:"AP",value:`<<
`+s+">>"})}d.internal.putStream({additionalKeyValues:r,objectId:o.objId}),d.internal.out("endobj")}p&&Tg(d.internal.acroformPlugin.xForms,d)})(i,e)}),e.internal.acroformPlugin.isInitialized=!0}},$f=He.__acroform__.arrayToPdfArray=function(e,t,i){var a=function(v){return v};if(Array.isArray(e)){for(var d="[",p=0;p<e.length;p++)switch(p!==0&&(d+=" "),Ae(e[p])){case"boolean":case"number":case"object":d+=e[p].toString();break;case"string":e[p].substr(0,1)!=="/"?(t!==void 0&&i&&(a=i.internal.getEncryptor(t)),d+="("+es(a(e[p].toString()))+")"):d+=e[p].toString()}return d+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Oc=function(e,t,i){var a=function(d){return d};return t!==void 0&&i&&(a=i.internal.getEncryptor(t)),(e=e||"").toString(),e="("+es(a(e))+")"},Ir=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ir.prototype.toString=function(){return this.objId+" 0 R"},Ir.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ir.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(p){return p!="content"&&p!="appearanceStreamContent"&&p!="scope"&&p!="objId"&&p.substring(0,1)!="_"});for(var i in t)if(Object.getOwnPropertyDescriptor(this,t[i]).configurable===!1){var a=t[i],d=this[a];d&&(Array.isArray(d)?e.push({key:a,value:$f(d,this.objId,this.scope)}):d instanceof Ir?(d.scope=this.scope,e.push({key:a,value:d.objId+" 0 R"})):typeof d!="function"&&e.push({key:a,value:d}))}return e};var Kf=function(){Ir.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){e=i.trim()},get:function(){return e||null}})};ji(Kf,Ir);var Jf=function(){Ir.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var i=function(a){return a};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+es(i(e))+")"}},set:function(i){e=i}})};ji(Jf,Ir);var wr=function e(){Ir.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute F supplied.');t=m}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$e(t,3)},set:function(m){m?this.F=Ke(t,3):this.F=Je(t,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute Ff supplied.');i=m}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(m){a=m!==void 0?m:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(m){a[0]=m}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(m){a[1]=m}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(m){a[2]=m}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(m){a[3]=m}});var d="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return d},set:function(m){switch(m){case"/Btn":case"/Tx":case"/Ch":case"/Sig":d=m;break;default:throw new Error('Invalid value "'+m+'" for attribute FT supplied.')}}});var p=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!p||p.length<1){if(this instanceof pl)return;p="FieldObject"+e.FieldNum++}var m=function(y){return y};return this.scope&&(m=this.scope.internal.getEncryptor(this.objId)),"("+es(m(p))+")"},set:function(m){p=m.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return p},set:function(m){p=m}});var v="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return v},set:function(m){v=m}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(m){o=m}});var r=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return r},set:function(m){r=m}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/bh:c},set:function(m){c=m}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(m){u=m}});var s="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!s||this instanceof pl||this instanceof Zn))return Oc(s,this.objId,this.scope)},set:function(m){m=m.toString(),s=m}});var l=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(l)return this instanceof hi?l:Oc(l,this.objId,this.scope)},set:function(m){m=m.toString(),l=this instanceof hi?m:m.substr(0,1)==="("?Is(m.substr(1,m.length-2)):Is(m)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof hi?Is(l.substr(1,l.length-1)):l},set:function(m){m=m.toString(),l=this instanceof hi?"/"+m:m}});var n=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(n)return n},set:function(m){this.V=m}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(n)return this instanceof hi?n:Oc(n,this.objId,this.scope)},set:function(m){m=m.toString(),n=this instanceof hi?m:m.substr(0,1)==="("?Is(m.substr(1,m.length-2)):Is(m)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof hi?Is(n.substr(1,n.length-1)):n},set:function(m){m=m.toString(),n=this instanceof hi?"/"+m:m}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var h,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(m){m=!!m,g=m}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(h)return h},set:function(m){h=m}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,1)},set:function(m){m?this.Ff=Ke(this.Ff,1):this.Ff=Je(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,2)},set:function(m){m?this.Ff=Ke(this.Ff,2):this.Ff=Je(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,3)},set:function(m){m?this.Ff=Ke(this.Ff,3):this.Ff=Je(this.Ff,3)}});var f=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(f!==null)return f},set:function(m){if([0,1,2].indexOf(m)===-1)throw new Error('Invalid value "'+m+'" for attribute Q supplied.');f=m}}),Object.defineProperty(this,"textAlign",{get:function(){var m;switch(f){case 0:default:m="left";break;case 1:m="center";break;case 2:m="right"}return m},configurable:!0,enumerable:!0,set:function(m){switch(m){case"right":case 2:f=2;break;case"center":case 1:f=1;break;case"left":case 0:default:f=0}}})};ji(wr,Ir);var Us=function(){wr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(i){e=i}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $f(t,this.objId,this.scope)},set:function(i){var a,d;d=[],typeof(a=i)=="string"&&(d=function(p,v,o){o||(o=1);for(var r,c=[];r=v.exec(p);)c.push(r[o]);return c}(a,/\((.*?)\)/g)),t=d}}),this.getOptions=function(){return t},this.setOptions=function(i){t=i,this.sort&&t.sort()},this.addOption=function(i){i=(i=i||"").toString(),t.push(i),this.sort&&t.sort()},this.removeOption=function(i,a){for(a=a||!1,i=(i=i||"").toString();t.indexOf(i)!==-1&&(t.splice(t.indexOf(i),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,18)},set:function(i){i?this.Ff=Ke(this.Ff,18):this.Ff=Je(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=Ke(this.Ff,19):this.Ff=Je(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,20)},set:function(i){i?(this.Ff=Ke(this.Ff,20),t.sort()):this.Ff=Je(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,22)},set:function(i){i?this.Ff=Ke(this.Ff,22):this.Ff=Je(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,23)},set:function(i){i?this.Ff=Ke(this.Ff,23):this.Ff=Je(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,27)},set:function(i){i?this.Ff=Ke(this.Ff,27):this.Ff=Je(this.Ff,27)}}),this.hasAppearanceStream=!1};ji(Us,wr);var Ws=function(){Us.call(this),this.fontName="helvetica",this.combo=!1};ji(Ws,Us);var Hs=function(){Ws.call(this),this.combo=!0};ji(Hs,Ws);var tl=function(){Hs.call(this),this.edit=!0};ji(tl,Hs);var hi=function(){wr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,15)},set:function(i){i?this.Ff=Ke(this.Ff,15):this.Ff=Je(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,16)},set:function(i){i?this.Ff=Ke(this.Ff,16):this.Ff=Je(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,17)},set:function(i){i?this.Ff=Ke(this.Ff,17):this.Ff=Je(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,26)},set:function(i){i?this.Ff=Ke(this.Ff,26):this.Ff=Je(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(p){return p};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,d=[];for(a in d.push("<<"),t)d.push("/"+a+" ("+es(i(t[a]))+")");return d.push(">>"),d.join(`
`)}},set:function(i){Ae(i)==="object"&&(t=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(i){typeof i=="string"&&(t.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}})};ji(hi,wr);var el=function(){hi.call(this),this.pushButton=!0};ji(el,hi);var Ys=function(){hi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ji(Ys,hi);var pl=function(){var e,t;wr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(d){e=d}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(d){t=d}});var i,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var d=function(o){return o};this.scope&&(d=this.scope.internal.getEncryptor(this.objId));var p,v=[];for(p in v.push("<<"),a)v.push("/"+p+" ("+es(d(a[p]))+")");return v.push(">>"),v.join(`
`)},set:function(d){Ae(d)==="object"&&(a=d)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(d){typeof d=="string"&&(a.CA=d)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(d){i=d}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(d){i="/"+d}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ht.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ji(pl,wr),Ys.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var i=this.Kids[t];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},Ys.prototype.createOption=function(e){var t=new pl;return t.Parent=this,t.optionName=e,this.Kids.push(t),Og.call(this.scope,t),t};var il=function(){hi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ht.CheckBox.createAppearanceStream()};ji(il,hi);var Zn=function(){wr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,13)},set:function(t){t?this.Ff=Ke(this.Ff,13):this.Ff=Je(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,21)},set:function(t){t?this.Ff=Ke(this.Ff,21):this.Ff=Je(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,23)},set:function(t){t?this.Ff=Ke(this.Ff,23):this.Ff=Je(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,24)},set:function(t){t?this.Ff=Ke(this.Ff,24):this.Ff=Je(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,25)},set:function(t){t?this.Ff=Ke(this.Ff,25):this.Ff=Je(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,26)},set:function(t){t?this.Ff=Ke(this.Ff,26):this.Ff=Je(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ji(Zn,wr);var rl=function(){Zn.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$e(this.Ff,14)},set:function(e){e?this.Ff=Ke(this.Ff,14):this.Ff=Je(this.Ff,14)}}),this.password=!0};ji(rl,Zn);var Ht={CheckBox:{createAppearanceStream:function(){return{N:{On:Ht.CheckBox.YesNormal},D:{On:Ht.CheckBox.YesPushDown,Off:Ht.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Nr(e);t.scope=e.scope;var i=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,d=e.scope.__private__.encodeColorString(e.color),p=th(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+se(Ht.internal.getWidth(e))+" "+se(Ht.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+a+" "+se(p.fontSize)+" Tf "+d),i.push("BT"),i.push(p.text),i.push("ET"),i.push("Q"),i.push("EMC"),t.stream=i.join(`
`),t},YesNormal:function(e){var t=Nr(e);t.scope=e.scope;var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),d=[],p=Ht.internal.getHeight(e),v=Ht.internal.getWidth(e),o=th(e,e.caption);return d.push("1 g"),d.push("0 0 "+se(v)+" "+se(p)+" re"),d.push("f"),d.push("q"),d.push("0 0 1 rg"),d.push("0 0 "+se(v-1)+" "+se(p-1)+" re"),d.push("W"),d.push("n"),d.push("0 g"),d.push("BT"),d.push("/"+i+" "+se(o.fontSize)+" Tf "+a),d.push(o.text),d.push("ET"),d.push("Q"),t.stream=d.join(`
`),t},OffPushDown:function(e){var t=Nr(e);t.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+se(Ht.internal.getWidth(e))+" "+se(Ht.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ht.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ht.RadioButton.Circle.YesNormal,t.D[e]=Ht.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Nr(e);t.scope=e.scope;var i=[],a=Ht.internal.getWidth(e)<=Ht.internal.getHeight(e)?Ht.internal.getWidth(e)/4:Ht.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var d=Ht.internal.Bezier_C,p=Number((a*d).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+xn(Ht.internal.getWidth(e)/2)+" "+xn(Ht.internal.getHeight(e)/2)+" cm"),i.push(a+" 0 m"),i.push(a+" "+p+" "+p+" "+a+" 0 "+a+" c"),i.push("-"+p+" "+a+" -"+a+" "+p+" -"+a+" 0 c"),i.push("-"+a+" -"+p+" -"+p+" -"+a+" 0 -"+a+" c"),i.push(p+" -"+a+" "+a+" -"+p+" "+a+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(e){var t=Nr(e);t.scope=e.scope;var i=[],a=Ht.internal.getWidth(e)<=Ht.internal.getHeight(e)?Ht.internal.getWidth(e)/4:Ht.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var d=Number((2*a).toFixed(5)),p=Number((d*Ht.internal.Bezier_C).toFixed(5)),v=Number((a*Ht.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+xn(Ht.internal.getWidth(e)/2)+" "+xn(Ht.internal.getHeight(e)/2)+" cm"),i.push(d+" 0 m"),i.push(d+" "+p+" "+p+" "+d+" 0 "+d+" c"),i.push("-"+p+" "+d+" -"+d+" "+p+" -"+d+" 0 c"),i.push("-"+d+" -"+p+" -"+p+" -"+d+" 0 -"+d+" c"),i.push(p+" -"+d+" "+d+" -"+p+" "+d+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+xn(Ht.internal.getWidth(e)/2)+" "+xn(Ht.internal.getHeight(e)/2)+" cm"),i.push(a+" 0 m"),i.push(a+" "+v+" "+v+" "+a+" 0 "+a+" c"),i.push("-"+v+" "+a+" -"+a+" "+v+" -"+a+" 0 c"),i.push("-"+a+" -"+v+" -"+v+" -"+a+" 0 -"+a+" c"),i.push(v+" -"+a+" "+a+" -"+v+" "+a+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Nr(e);t.scope=e.scope;var i=[],a=Ht.internal.getWidth(e)<=Ht.internal.getHeight(e)?Ht.internal.getWidth(e)/4:Ht.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var d=Number((2*a).toFixed(5)),p=Number((d*Ht.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+xn(Ht.internal.getWidth(e)/2)+" "+xn(Ht.internal.getHeight(e)/2)+" cm"),i.push(d+" 0 m"),i.push(d+" "+p+" "+p+" "+d+" 0 "+d+" c"),i.push("-"+p+" "+d+" -"+d+" "+p+" -"+d+" 0 c"),i.push("-"+d+" -"+p+" -"+p+" -"+d+" 0 -"+d+" c"),i.push(p+" -"+d+" "+d+" -"+p+" "+d+" 0 c"),i.push("f"),i.push("Q"),t.stream=i.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ht.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ht.RadioButton.Cross.YesNormal,t.D[e]=Ht.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Nr(e);t.scope=e.scope;var i=[],a=Ht.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+se(Ht.internal.getWidth(e)-2)+" "+se(Ht.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(se(a.x1.x)+" "+se(a.x1.y)+" m"),i.push(se(a.x2.x)+" "+se(a.x2.y)+" l"),i.push(se(a.x4.x)+" "+se(a.x4.y)+" m"),i.push(se(a.x3.x)+" "+se(a.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},YesPushDown:function(e){var t=Nr(e);t.scope=e.scope;var i=Ht.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+se(Ht.internal.getWidth(e))+" "+se(Ht.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+se(Ht.internal.getWidth(e)-2)+" "+se(Ht.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(se(i.x1.x)+" "+se(i.x1.y)+" m"),a.push(se(i.x2.x)+" "+se(i.x2.y)+" l"),a.push(se(i.x4.x)+" "+se(i.x4.y)+" m"),a.push(se(i.x3.x)+" "+se(i.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Nr(e);t.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+se(Ht.internal.getWidth(e))+" "+se(Ht.internal.getHeight(e))+" re"),i.push("f"),t.stream=i.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+i}};Ht.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ht.internal.getWidth(e),i=Ht.internal.getHeight(e),a=Math.min(t,i);return{x1:{x:(t-a)/2,y:(i-a)/2+a},x2:{x:(t-a)/2+a,y:(i-a)/2},x3:{x:(t-a)/2,y:(i-a)/2},x4:{x:(t-a)/2+a,y:(i-a)/2+a}}}},Ht.internal.getWidth=function(e){var t=0;return Ae(e)==="object"&&(t=_u(e.Rect[2])),t},Ht.internal.getHeight=function(e){var t=0;return Ae(e)==="object"&&(t=_u(e.Rect[3])),t};var Og=He.addField=function(e){if(Pg(this,e),!(e instanceof wr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};He.AcroFormChoiceField=Us,He.AcroFormListBox=Ws,He.AcroFormComboBox=Hs,He.AcroFormEditBox=tl,He.AcroFormButton=hi,He.AcroFormPushButton=el,He.AcroFormRadioButton=Ys,He.AcroFormCheckBox=il,He.AcroFormTextField=Zn,He.AcroFormPasswordField=rl,He.AcroFormAppearance=Ht,He.AcroForm={ChoiceField:Us,ListBox:Ws,ComboBox:Hs,EditBox:tl,Button:hi,PushButton:el,RadioButton:Ys,CheckBox:il,TextField:Zn,PasswordField:rl,Appearance:Ht},Kt.AcroForm={ChoiceField:Us,ListBox:Ws,ComboBox:Hs,EditBox:tl,Button:hi,PushButton:el,RadioButton:Ys,CheckBox:il,TextField:Zn,PasswordField:rl,Appearance:Ht};Kt.AcroForm;function Zf(e){return e.reduce(function(t,i,a){return t[i]=a,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(F,I){var K,G,rt,at,gt,nt=t;if((I=I||t)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(M(F))for(gt in i)for(rt=i[gt],K=0;K<rt.length;K+=1){for(at=!0,G=0;G<rt[K].length;G+=1)if(rt[K][G]!==void 0&&rt[K][G]!==F[G]){at=!1;break}if(at===!0){nt=gt;break}}else for(gt in i)for(rt=i[gt],K=0;K<rt.length;K+=1){for(at=!0,G=0;G<rt[K].length;G+=1)if(rt[K][G]!==void 0&&rt[K][G]!==F.charCodeAt(G)){at=!1;break}if(at===!0){nt=gt;break}}return nt===t&&I!==t&&(nt=I),nt},d=function F(I){for(var K=this.internal.write,G=this.internal.putStream,rt=(0,this.internal.getFilters)();rt.indexOf("FlateEncode")!==-1;)rt.splice(rt.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var at=[];if(at.push({key:"Type",value:"/XObject"}),at.push({key:"Subtype",value:"/Image"}),at.push({key:"Width",value:I.width}),at.push({key:"Height",value:I.height}),I.colorSpace===f.INDEXED?at.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(at.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===f.DEVICE_CMYK&&at.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),at.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&at.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var gt="",nt=0,E=I.transparency.length;nt<E;nt++)gt+=I.transparency[nt]+" "+I.transparency[nt]+" ";at.push({key:"Mask",value:"["+gt+"]"})}I.sMask!==void 0&&at.push({key:"SMask",value:I.objectId+1+" 0 R"});var Y=I.filter!==void 0?["/"+I.filter]:void 0;if(G({data:I.data,additionalKeyValues:at,alreadyAppliedFilters:Y,objectId:I.objectId}),K("endobj"),"sMask"in I&&I.sMask!==void 0){var J="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,k={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:J,data:I.sMask};"filter"in I&&(k.filter=I.filter),F.call(this,k)}if(I.colorSpace===f.INDEXED){var R=this.internal.newObject();G({data:O(new Uint8Array(I.palette)),objectId:R}),K("endobj")}},p=function(){var F=this.internal.collections.addImage_images;for(var I in F)d.call(this,F[I])},v=function(){var F,I=this.internal.collections.addImage_images,K=this.internal.write;for(var G in I)K("/I"+(F=I[G]).index,F.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",p),this.internal.events.subscribe("putXobjectDict",v))},r=function(){var F=this.internal.collections.addImage_images;return o.call(this),F},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(F){return typeof e["process"+F.toUpperCase()]=="function"},s=function(F){return Ae(F)==="object"&&F.nodeType===1},l=function(F,I){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var K=""+F.getAttribute("src");if(K.indexOf("data:image/")===0)return Ra(unescape(K).split("base64,").pop());var G=e.loadFile(K,!0);if(G!==void 0)return G}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var rt;switch(I){case"PNG":rt="image/png";break;case"WEBP":rt="image/webp";break;case"JPEG":case"JPG":default:rt="image/jpeg"}return Ra(F.toDataURL(rt,1).split("base64,").pop())}},n=function(F){var I=this.internal.collections.addImage_images;if(I){for(var K in I)if(F===I[K].alias)return I[K]}},h=function(F,I,K){return F||I||(F=-96,I=-96),F<0&&(F=-1*K.width*72/F/this.internal.scaleFactor),I<0&&(I=-1*K.height*72/I/this.internal.scaleFactor),F===0&&(F=I*K.width/K.height),I===0&&(I=F*K.height/K.width),[F,I]},g=function(F,I,K,G,rt,at){var gt=h.call(this,K,G,rt),nt=this.internal.getCoordinateString,E=this.internal.getVerticalCoordinateString,Y=r.call(this);if(K=gt[0],G=gt[1],Y[rt.index]=rt,at){at*=Math.PI/180;var J=Math.cos(at),k=Math.sin(at),R=function(P){return P.toFixed(4)},N=[R(J),R(k),R(-1*k),R(J),0,0,"cm"]}this.internal.write("q"),at?(this.internal.write([1,"0","0",1,nt(F),E(I+G),"cm"].join(" ")),this.internal.write(N.join(" ")),this.internal.write([nt(K),"0","0",nt(G),"0","0","cm"].join(" "))):this.internal.write([nt(K),"0","0",nt(G),nt(F),E(I+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+rt.index+" Do"),this.internal.write("Q")},f=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(F){var I,K,G=0;if(typeof F=="string")for(K=F.length,I=0;I<K;I++)G=(G<<5)-G+F.charCodeAt(I),G|=0;else if(M(F))for(K=F.byteLength/2,I=0;I<K;I++)G=(G<<5)-G+F[I],G|=0;return G},x=e.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var I=!0;return F.length===0&&(I=!1),F.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(I=!1),I},_=e.__addimage__.extractImageFromDataUrl=function(F){var I=(F=F||"").split("base64,"),K=null;if(I.length===2){var G=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(G)&&(K={mimeType:G[1],charset:G[2],data:I[1]})}return K},A=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(F){return A()&&F instanceof ArrayBuffer};var M=e.__addimage__.isArrayBufferView=function(F){return A()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},T=e.__addimage__.binaryStringToUint8Array=function(F){for(var I=F.length,K=new Uint8Array(I),G=0;G<I;G++)K[G]=F.charCodeAt(G);return K},O=e.__addimage__.arrayBufferToBinaryString=function(F){for(var I="",K=M(F)?F:new Uint8Array(F),G=0;G<K.length;G+=8192)I+=String.fromCharCode.apply(null,K.subarray(G,G+8192));return I};e.addImage=function(){var F,I,K,G,rt,at,gt,nt,E;if(typeof arguments[1]=="number"?(I=t,K=arguments[1],G=arguments[2],rt=arguments[3],at=arguments[4],gt=arguments[5],nt=arguments[6],E=arguments[7]):(I=arguments[1],K=arguments[2],G=arguments[3],rt=arguments[4],at=arguments[5],gt=arguments[6],nt=arguments[7],E=arguments[8]),Ae(F=arguments[0])==="object"&&!s(F)&&"imageData"in F){var Y=F;F=Y.imageData,I=Y.format||I||t,K=Y.x||K||0,G=Y.y||G||0,rt=Y.w||Y.width||rt,at=Y.h||Y.height||at,gt=Y.alias||gt,nt=Y.compression||nt,E=Y.rotation||Y.angle||E}var J=this.internal.getFilters();if(nt===void 0&&J.indexOf("FlateEncode")!==-1&&(nt="SLOW"),isNaN(K)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var k=B.call(this,F,I,gt,nt);return g.call(this,K,G,rt,at,k,E),this};var B=function(F,I,K,G){var rt,at,gt;if(typeof F=="string"&&a(F)===t){F=unescape(F);var nt=X(F,!1);(nt!==""||(nt=e.loadFile(F,!0))!==void 0)&&(F=nt)}if(s(F)&&(F=l(F,I)),I=a(F,I),!u(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((gt=K)==null||gt.length===0)&&(K=function(E){return typeof E=="string"||M(E)?y(E):M(E.data)?y(E.data):null}(F)),(rt=n.call(this,K))||(A()&&(F instanceof Uint8Array||I==="RGBA"||(at=F,F=T(F))),rt=this["process"+I.toUpperCase()](F,c.call(this),K,function(E){return E&&typeof E=="string"&&(E=E.toUpperCase()),E in e.image_compression?E:m.NONE}(G),at)),!rt)throw new Error("An unknown error occurred whilst processing the image.");return rt},X=e.__addimage__.convertBase64ToBinaryString=function(F,I){var K;I=typeof I!="boolean"||I;var G,rt="";if(typeof F=="string"){G=(K=_(F))!==null?K.data:F;try{rt=Ra(G)}catch(at){if(I)throw x(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+at.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return rt};e.getImageProperties=function(F){var I,K,G="";if(s(F)&&(F=l(F)),typeof F=="string"&&a(F)===t&&((G=X(F,!1))===""&&(G=e.loadFile(F)||""),F=G),K=a(F),!u(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(!A()||F instanceof Uint8Array||(F=T(F)),!(I=this["process"+K.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=K,I}})(Kt.API),function(e){var t=function(i){if(i!==void 0&&i!="")return!0};Kt.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(i){for(var a,d,p,v=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,r=this.internal.getPageInfoByObjId(i.objId),c=i.pageContext.annotations,u=!1,s=0;s<c.length&&!u;s++)switch((a=c[s]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var l=0;l<c.length;l++){a=c[l];var n=this.internal.pdfEscape,h=this.internal.getEncryptor(i.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(g.objId),y=a.title||"Note";p="<</Type /Annot /Subtype /Text "+(d="/Rect ["+v(a.bounds.x)+" "+o(a.bounds.y+a.bounds.h)+" "+v(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y)+"] ")+"/Contents ("+n(m(a.contents))+")",p+=" /Popup "+f.objId+" 0 R",p+=" /P "+r.objId+" 0 R",p+=" /T ("+n(m(y))+") >>",g.content=p;var x=g.objId+" 0 R";p="<</Type /Annot /Subtype /Popup "+(d="/Rect ["+v(a.bounds.x+30)+" "+o(a.bounds.y+a.bounds.h)+" "+v(a.bounds.x+a.bounds.w+30)+" "+o(a.bounds.y)+"] ")+" /Parent "+x,a.open&&(p+=" /Open true"),p+=" >>",f.content=p,this.internal.write(g.objId,"0 R",f.objId,"0 R");break;case"freetext":d="/Rect ["+v(a.bounds.x)+" "+o(a.bounds.y)+" "+v(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y+a.bounds.h)+"] ";var _=a.color||"#000000";p="<</Type /Annot /Subtype /FreeText "+d+"/Contents ("+n(h(a.contents))+")",p+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",p+=" /Border [0 0 0]",p+=" >>",this.internal.write(p);break;case"link":if(a.options.name){var A=this.annotations._nameMap[a.options.name];a.options.pageNumber=A.page,a.options.top=A.y}else a.options.top||(a.options.top=0);if(d="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",p="",a.options.url)p="<</Type /Annot /Subtype /Link "+d+"/Border [0 0 0] /A <</S /URI /URI ("+n(h(a.options.url))+") >>";else if(a.options.pageNumber)switch(p="<</Type /Annot /Subtype /Link "+d+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":p+=" /Fit]";break;case"FitH":p+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,p+=" /FitV "+a.options.left+"]";break;case"XYZ":default:var M=o(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),p+=" /XYZ "+a.options.left+" "+M+" "+a.options.zoom+"]"}p!=""&&(p+=" >>",this.internal.write(p))}}this.internal.write("]")}}]),e.createAnnotation=function(i){var a=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":a.pageContext.annotations.push(i)}},e.link=function(i,a,d,p,v){var o=this.internal.getCurrentPageInfo(),r=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:r(i),y:c(a),w:r(i+d),h:c(a+p)},options:v,type:"link"})},e.textWithLink=function(i,a,d,p){var v,o,r=this.getTextWidth(i),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(p.maxWidth!==void 0){o=p.maxWidth;var u=this.splitTextToSize(i,o).length;v=Math.ceil(c*u)}else o=r,v=c;return this.text(i,a,d,p),d+=.2*c,p.align==="center"&&(a-=r/2),p.align==="right"&&(a-=r),this.link(a,d-c,o,v,p),r},e.getTextWidth=function(i){var a=this.internal.getFontSize();return this.getStringUnitWidth(i)*a/this.internal.scaleFactor}}(Kt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},d=[1570,1571,1573,1575];e.__arabicParser__={};var p=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},v=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=e.__arabicParser__.isArabicEndLetter=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length<=2},r=e.__arabicParser__.isArabicAlfLetter=function(g){return v(g)&&d.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return v(g)&&p(g)&&t[g.charCodeAt(0)].length==4},s=e.__arabicParser__.resolveLigatures=function(g){var f=0,m=i,y="",x=0;for(f=0;f<g.length;f+=1)m[g.charCodeAt(f)]!==void 0?(x++,typeof(m=m[g.charCodeAt(f)])=="number"&&(y+=String.fromCharCode(m),m=i,x=0),f===g.length-1&&(m=i,y+=g.charAt(f-(x-1)),f-=x-1,x=0)):(m=i,y+=g.charAt(f-x),f-=x,x=0);return y};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&a[g.charCodeAt(0)]!==void 0};var l=e.__arabicParser__.getCorrectForm=function(g,f,m){return v(g)?p(g)===!1?-1:!c(g)||!v(f)&&!v(m)||!v(m)&&o(f)||o(g)&&!v(f)||o(g)&&r(f)||o(g)&&o(f)?0:u(g)&&v(f)&&!o(f)&&v(m)&&c(m)?3:o(g)||!v(m)?1:2:-1},n=function(g){var f=0,m=0,y=0,x="",_="",A="",M=(g=g||"").split("\\s+"),T=[];for(f=0;f<M.length;f+=1){for(T.push(""),m=0;m<M[f].length;m+=1)x=M[f][m],_=M[f][m-1],A=M[f][m+1],v(x)?(y=l(x,_,A),T[f]+=y!==-1?String.fromCharCode(t[x.charCodeAt(0)][y]):x):T[f]+=x;T[f]=s(T[f])}return T.join(" ")},h=e.__arabicParser__.processArabic=e.processArabic=function(){var g,f=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,m=[];if(Array.isArray(f)){var y=0;for(m=[],y=0;y<f.length;y+=1)Array.isArray(f[y])?m.push([n(f[y][0]),f[y][1],f[y][2]]):m.push([n(f[y])]);g=m}else g=n(f);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",h])}(Kt.API),Kt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(o){i=o}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var d=300;Object.defineProperty(this,"height",{get:function(){return d},set:function(o){d=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=d+1)}});var p=[];Object.defineProperty(this,"childNodes",{get:function(){return p},set:function(o){p=o}});var v={};Object.defineProperty(this,"style",{get:function(){return v},set:function(o){v=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(i,a){var d;if((i=i||"2d")!=="2d")return null;for(d in a)this.pdf.context2d.hasOwnProperty(d)&&(this.pdf.context2d[d]=a[d]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Kt.API),function(e){var t={left:0,top:0,bottom:0,right:0},i=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),d.call(this))},d=function(){this.internal.__cell__.lastCell=new p,this.internal.__cell__.pages=1},p=function(){var r=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return r},set:function(g){r=g}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var s=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return s},set:function(g){s=g}});var l=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var n=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return n},set:function(g){n=g}});var h=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return h},set:function(g){h=g}}),this};p.prototype.clone=function(){return new p(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},p.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(r){return a.call(this),this.internal.__cell__.headerFunction=typeof r=="function"?r:void 0,this},e.getTextDimensions=function(r,c){a.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),s=c.font||this.getFont(),l=c.scaleFactor||this.internal.scaleFactor,n=0,h=0,g=0,f=this;if(!Array.isArray(r)&&typeof r!="string"){if(typeof r!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");r=String(r)}var m=c.maxWidth;m>0?typeof r=="string"?r=this.splitTextToSize(r,m):Object.prototype.toString.call(r)==="[object Array]"&&(r=r.reduce(function(x,_){return x.concat(f.splitTextToSize(_,m))},[])):r=Array.isArray(r)?r:[r];for(var y=0;y<r.length;y++)n<(g=this.getStringUnitWidth(r[y],{font:s})*u)&&(n=g);return n!==0&&(h=r.length),{w:n/=l,h:Math.max((h*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/l,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var r=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new p(r.left,r.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var v=e.cell=function(){var r;r=arguments[0]instanceof p?arguments[0]:new p(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,n=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===r.lineNumber?(r.x=(c.x||0)+(c.width||0),r.y=c.y||0):c.y+c.height+r.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),r.y=s.top,n&&l&&(this.printHeaderRow(r.lineNumber,!0),r.y+=l[0].height)):r.y=c.y+c.height||r.y),r.text[0]!==void 0&&(this.rect(r.x,r.y,r.width,r.height,i===!0?"FD":void 0),r.align==="right"?this.text(r.text,r.x+r.width-u,r.y+u,{align:"right",baseline:"top"}):r.align==="center"?this.text(r.text,r.x+r.width/2,r.y+u,{align:"center",baseline:"top",maxWidth:r.width-u-u}):this.text(r.text,r.x+u,r.y+u,{align:"left",baseline:"top",maxWidth:r.width-u-u})),this.internal.__cell__.lastCell=r,this};e.table=function(r,c,u,s,l){if(a.call(this),!u)throw new Error("No data for PDF table.");var n,h,g,f,m=[],y=[],x=[],_={},A={},M=[],T=[],O=(l=l||{}).autoSize||!1,B=l.printHeaders!==!1,X=l.css&&l.css["font-size"]!==void 0?16*l.css["font-size"]:l.fontSize||12,F=l.margins||Object.assign({width:this.getPageWidth()},t),I=typeof l.padding=="number"?l.padding:3,K=l.headerBackgroundColor||"#c8c8c8",G=l.headerTextColor||"#000";if(d.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=X,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=G,this.setFontSize(X),s==null)y=m=Object.keys(u[0]),x=m.map(function(){return"left"});else if(Array.isArray(s)&&Ae(s[0])==="object")for(m=s.map(function(Y){return Y.name}),y=s.map(function(Y){return Y.prompt||Y.name||""}),x=s.map(function(Y){return Y.align||"left"}),n=0;n<s.length;n+=1)A[s[n].name]=s[n].width*(19.049976/25.4);else Array.isArray(s)&&typeof s[0]=="string"&&(y=m=s,x=m.map(function(){return"left"}));if(O||Array.isArray(s)&&typeof s[0]=="string")for(n=0;n<m.length;n+=1){for(_[f=m[n]]=u.map(function(Y){return Y[f]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(y[n],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=_[f],this.setFont(void 0,"normal"),g=0;g<h.length;g+=1)M.push(this.getTextDimensions(h[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[f]=Math.max.apply(null,M)+I+I,M=[]}if(B){var rt={};for(n=0;n<m.length;n+=1)rt[m[n]]={},rt[m[n]].text=y[n],rt[m[n]].align=x[n];var at=o.call(this,rt,A);T=m.map(function(Y){return new p(r,c,A[Y],at,rt[Y].text,void 0,rt[Y].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var gt=s.reduce(function(Y,J){return Y[J.name]=J.align,Y},{});for(n=0;n<u.length;n+=1){"rowStart"in l&&l.rowStart instanceof Function&&l.rowStart({row:n,data:u[n]},this);var nt=o.call(this,u[n],A);for(g=0;g<m.length;g+=1){var E=u[n][m[g]];"cellStart"in l&&l.cellStart instanceof Function&&l.cellStart({row:n,col:g,data:E},this),v.call(this,new p(r,c,A[m[g]],nt,E,n+2,gt[m[g]]))}}return this.internal.__cell__.table_x=r,this.internal.__cell__.table_y=c,this};var o=function(r,c){var u=this.internal.__cell__.padding,s=this.internal.__cell__.table_font_size,l=this.internal.scaleFactor;return Object.keys(r).map(function(n){var h=r[n];return this.splitTextToSize(h.hasOwnProperty("text")?h.text:h,c[n]-u-u)},this).map(function(n){return this.getLineHeightFactor()*n.length*s/l+u+u},this).reduce(function(n,h){return Math.max(n,h)},0)};e.setTableHeaderRow=function(r){a.call(this),this.internal.__cell__.tableHeaderRow=r},e.printHeaderRow=function(r,c){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new p(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],n=0;n<this.internal.__cell__.tableHeaderRow.length;n+=1){u=this.internal.__cell__.tableHeaderRow[n].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,l.push(u)),u.lineNumber=r;var h=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),v.call(this,u),this.setTextColor(h)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),i=!1}}(Kt.API);var Qf={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},td=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],eh=Zf(td),ed=[100,200,300,400,500,600,700,800,900],Mg=Zf(ed);function ih(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),i=function(p){return Qf[p=p||"normal"]?p:"normal"}(e.style),a=function(p){if(!p)return 400;if(typeof p=="number")return p>=100&&p<=900&&p%100==0?p:400;if(/^\d00$/.test(p))return parseInt(p);switch(p){case"bold":return 700;case"normal":default:return 400}}(e.weight),d=function(p){return typeof eh[p=p||"normal"]=="number"?p:"normal"}(e.stretch);return{family:t,style:i,weight:a,stretch:d,src:e.src||[],ref:e.ref||{name:t,style:[d,i,a].join(" ")}}}function Su(e,t,i,a){var d;for(d=i;d>=0&&d<t.length;d+=a)if(e[t[d]])return e[t[d]];for(d=i;d>=0&&d<t.length;d-=a)if(e[t[d]])return e[t[d]]}var Ng={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Cu={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Au(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Fg(e,t,i){for(var a=(i=i||{}).defaultFontFamily||"times",d=Object.assign({},Ng,i.genericFontFamilies||{}),p=null,v=null,o=0;o<t.length;++o)if(d[(p=ih(t[o])).family]&&(p.family=d[p.family]),e.hasOwnProperty(p.family)){v=e[p.family];break}if(!(v=v||e[a]))throw new Error("Could not find a font-family for the rule '"+Au(p)+"' and default family '"+a+"'.");if(v=function(r,c){if(c[r])return c[r];var u=eh[r],s=u<=eh.normal?-1:1,l=Su(c,td,u,s);if(!l)throw new Error("Could not find a matching font-stretch value for "+r);return l}(p.stretch,v),v=function(r,c){if(c[r])return c[r];for(var u=Qf[r],s=0;s<u.length;++s)if(c[u[s]])return c[u[s]];throw new Error("Could not find a matching font-style for "+r)}(p.style,v),!(v=function(r,c){if(c[r])return c[r];if(r===400&&c[500])return c[500];if(r===500&&c[400])return c[400];var u=Mg[r],s=Su(c,ed,u,r<400?-1:1);if(!s)throw new Error("Could not find a matching font-weight for value "+r);return s}(p.weight,v)))throw new Error("Failed to resolve a font for the rule '"+Au(p)+"'.");return v}function ku(e){return e.trimLeft()}function Eg(e,t){for(var i=0;i<e.length;){if(e.charAt(i)===t)return[e.substring(0,i),e.substring(i+1)];i+=1}return null}function Ig(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Go,Lu,Tu,Mc=["times"];(function(e){var t,i,a,d,p,v,o,r,c,u=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new r,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new v,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new v,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new s(this),t=this.internal.f2,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,d=this.internal.getHorizontalCoordinate,p=this.internal.getVerticalCoordinate,v=this.internal.Point,o=this.internal.Rectangle,r=this.internal.Matrix,c=new u}]);var s=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var R=k;Object.defineProperty(this,"pdf",{get:function(){return R}});var N=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return N},set:function(it){N=!!it}});var P=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return P},set:function(it){P=!!it}});var U=0;Object.defineProperty(this,"posX",{get:function(){return U},set:function(it){isNaN(it)||(U=it)}});var $=0;Object.defineProperty(this,"posY",{get:function(){return $},set:function(it){isNaN(it)||($=it)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(it){var W;typeof it=="number"?W=[it,it,it,it]:((W=new Array(4))[0]=it[0],W[1]=it.length>=2?it[1]:W[0],W[2]=it.length>=3?it[2]:W[0],W[3]=it.length>=4?it[3]:W[1]),c.margin=W}});var tt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return tt},set:function(it){tt=it}});var Q=0;Object.defineProperty(this,"lastBreak",{get:function(){return Q},set:function(it){Q=it}});var ut=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ut},set:function(it){ut=it}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(it){it instanceof u&&(c=it)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(it){c.path=it}});var dt=[];Object.defineProperty(this,"ctxStack",{get:function(){return dt},set:function(it){dt=it}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(it){var W;W=l(it),this.ctx.fillStyle=W.style,this.ctx.isFillTransparent=W.a===0,this.ctx.fillOpacity=W.a,this.pdf.setFillColor(W.r,W.g,W.b,{a:W.a}),this.pdf.setTextColor(W.r,W.g,W.b,{a:W.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(it){var W=l(it);this.ctx.strokeStyle=W.style,this.ctx.isStrokeTransparent=W.a===0,this.ctx.strokeOpacity=W.a,W.a===0?this.pdf.setDrawColor(255,255,255):(W.a,this.pdf.setDrawColor(W.r,W.g,W.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(it){["butt","round","square"].indexOf(it)!==-1&&(this.ctx.lineCap=it,this.pdf.setLineCap(it))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(it){isNaN(it)||(this.ctx.lineWidth=it,this.pdf.setLineWidth(it))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(it){["bevel","round","miter"].indexOf(it)!==-1&&(this.ctx.lineJoin=it,this.pdf.setLineJoin(it))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(it){isNaN(it)||(this.ctx.miterLimit=it,this.pdf.setMiterLimit(it))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(it){this.ctx.textBaseline=it}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(it){["right","end","center","left","start"].indexOf(it)!==-1&&(this.ctx.textAlign=it)}});var St=null;function ot(it,W){if(St===null){var vt=function(yt){var bt=[];return Object.keys(yt).forEach(function(Lt){yt[Lt].forEach(function(At){var ft=null;switch(At){case"bold":ft={family:Lt,weight:"bold"};break;case"italic":ft={family:Lt,style:"italic"};break;case"bolditalic":ft={family:Lt,weight:"bold",style:"italic"};break;case"":case"normal":ft={family:Lt}}ft!==null&&(ft.ref={name:Lt,style:At},bt.push(ft))})}),bt}(it.getFontList());St=function(yt){for(var bt={},Lt=0;Lt<yt.length;++Lt){var At=ih(yt[Lt]),ft=At.family,Mt=At.stretch,jt=At.style,Rt=At.weight;bt[ft]=bt[ft]||{},bt[ft][Mt]=bt[ft][Mt]||{},bt[ft][Mt][jt]=bt[ft][Mt][jt]||{},bt[ft][Mt][jt][Rt]=At}return bt}(vt.concat(W))}return St}var st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(it){St=null,st=it}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(it){var W;if(this.ctx.font=it,(W=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(it))!==null){var vt=W[1],yt=(W[2],W[3]),bt=W[4],Lt=(W[5],W[6]),At=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(bt)[2];bt=Math.floor(At==="px"?parseFloat(bt)*this.pdf.internal.scaleFactor:At==="em"?parseFloat(bt)*this.pdf.getFontSize():parseFloat(bt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(bt);var ft=function(Wt){var te,Bt,Te=[],pe=Wt.trim();if(pe==="")return Mc;if(pe in Cu)return[Cu[pe]];for(;pe!=="";){switch(Bt=null,te=(pe=ku(pe)).charAt(0)){case'"':case"'":Bt=Eg(pe.substring(1),te);break;default:Bt=Ig(pe)}if(Bt===null||(Te.push(Bt[0]),(pe=ku(Bt[1]))!==""&&pe.charAt(0)!==","))return Mc;pe=pe.replace(/^,/,"")}return Te}(Lt);if(this.fontFaces){var Mt=Fg(ot(this.pdf,this.fontFaces),ft.map(function(Wt){return{family:Wt,stretch:"normal",weight:yt,style:vt}}));this.pdf.setFont(Mt.ref.name,Mt.ref.style)}else{var jt="";(yt==="bold"||parseInt(yt,10)>=700||vt==="bold")&&(jt="bold"),vt==="italic"&&(jt+="italic"),jt.length===0&&(jt="normal");for(var Rt="",Yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Vt=0;Vt<ft.length;Vt++){if(this.pdf.internal.getFont(ft[Vt],jt,{noFallback:!0,disableWarning:!0})!==void 0){Rt=ft[Vt];break}if(jt==="bolditalic"&&this.pdf.internal.getFont(ft[Vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=ft[Vt],jt="bold";else if(this.pdf.internal.getFont(ft[Vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=ft[Vt],jt="normal";break}}if(Rt===""){for(var ie=0;ie<ft.length;ie++)if(Yt[ft[ie]]){Rt=Yt[ft[ie]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,jt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(it){this.ctx.globalCompositeOperation=it}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(it){this.ctx.globalAlpha=it}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(it){this.ctx.lineDashOffset=it,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(it){this.ctx.lineDash=it,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(it){this.ctx.ignoreClearRect=!!it}})};s.prototype.setLineDash=function(k){this.lineDash=k},s.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},s.prototype.fill=function(){_.call(this,"fill",!1)},s.prototype.stroke=function(){_.call(this,"stroke",!1)},s.prototype.beginPath=function(){this.path=[{type:"begin"}]},s.prototype.moveTo=function(k,R){if(isNaN(k)||isNaN(R))throw Me.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var N=this.ctx.transform.applyToPoint(new v(k,R));this.path.push({type:"mt",x:N.x,y:N.y}),this.ctx.lastPoint=new v(k,R)},s.prototype.closePath=function(){var k=new v(0,0),R=0;for(R=this.path.length-1;R!==-1;R--)if(this.path[R].type==="begin"&&Ae(this.path[R+1])==="object"&&typeof this.path[R+1].x=="number"){k=new v(this.path[R+1].x,this.path[R+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new v(k.x,k.y)},s.prototype.lineTo=function(k,R){if(isNaN(k)||isNaN(R))throw Me.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var N=this.ctx.transform.applyToPoint(new v(k,R));this.path.push({type:"lt",x:N.x,y:N.y}),this.ctx.lastPoint=new v(N.x,N.y)},s.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},s.prototype.quadraticCurveTo=function(k,R,N,P){if(isNaN(N)||isNaN(P)||isNaN(k)||isNaN(R))throw Me.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var U=this.ctx.transform.applyToPoint(new v(N,P)),$=this.ctx.transform.applyToPoint(new v(k,R));this.path.push({type:"qct",x1:$.x,y1:$.y,x:U.x,y:U.y}),this.ctx.lastPoint=new v(U.x,U.y)},s.prototype.bezierCurveTo=function(k,R,N,P,U,$){if(isNaN(U)||isNaN($)||isNaN(k)||isNaN(R)||isNaN(N)||isNaN(P))throw Me.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var tt=this.ctx.transform.applyToPoint(new v(U,$)),Q=this.ctx.transform.applyToPoint(new v(k,R)),ut=this.ctx.transform.applyToPoint(new v(N,P));this.path.push({type:"bct",x1:Q.x,y1:Q.y,x2:ut.x,y2:ut.y,x:tt.x,y:tt.y}),this.ctx.lastPoint=new v(tt.x,tt.y)},s.prototype.arc=function(k,R,N,P,U,$){if(isNaN(k)||isNaN(R)||isNaN(N)||isNaN(P)||isNaN(U))throw Me.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if($=!!$,!this.ctx.transform.isIdentity){var tt=this.ctx.transform.applyToPoint(new v(k,R));k=tt.x,R=tt.y;var Q=this.ctx.transform.applyToPoint(new v(0,N)),ut=this.ctx.transform.applyToPoint(new v(0,0));N=Math.sqrt(Math.pow(Q.x-ut.x,2)+Math.pow(Q.y-ut.y,2))}Math.abs(U-P)>=2*Math.PI&&(P=0,U=2*Math.PI),this.path.push({type:"arc",x:k,y:R,radius:N,startAngle:P,endAngle:U,counterclockwise:$})},s.prototype.arcTo=function(k,R,N,P,U){throw new Error("arcTo not implemented.")},s.prototype.rect=function(k,R,N,P){if(isNaN(k)||isNaN(R)||isNaN(N)||isNaN(P))throw Me.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,R),this.lineTo(k+N,R),this.lineTo(k+N,R+P),this.lineTo(k,R+P),this.lineTo(k,R),this.lineTo(k+N,R),this.lineTo(k,R)},s.prototype.fillRect=function(k,R,N,P){if(isNaN(k)||isNaN(R)||isNaN(N)||isNaN(P))throw Me.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!n.call(this)){var U={};this.lineCap!=="butt"&&(U.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(U.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,R,N,P),this.fill(),U.hasOwnProperty("lineCap")&&(this.lineCap=U.lineCap),U.hasOwnProperty("lineJoin")&&(this.lineJoin=U.lineJoin)}},s.prototype.strokeRect=function(k,R,N,P){if(isNaN(k)||isNaN(R)||isNaN(N)||isNaN(P))throw Me.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");h.call(this)||(this.beginPath(),this.rect(k,R,N,P),this.stroke())},s.prototype.clearRect=function(k,R,N,P){if(isNaN(k)||isNaN(R)||isNaN(N)||isNaN(P))throw Me.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,R,N,P))},s.prototype.save=function(k){k=typeof k!="boolean"||k;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,N=0;N<this.pdf.internal.getNumberOfPages();N++)this.pdf.setPage(N+1),this.pdf.internal.out("q");if(this.pdf.setPage(R),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var P=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=P}},s.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,N=0;N<this.pdf.internal.getNumberOfPages();N++)this.pdf.setPage(N+1),this.pdf.internal.out("Q");this.pdf.setPage(R),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},s.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var l=function(k){var R,N,P,U;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))R=0,N=0,P=0,U=0;else{var $=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if($!==null)R=parseInt($[1]),N=parseInt($[2]),P=parseInt($[3]),U=1;else if(($=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)R=parseInt($[1]),N=parseInt($[2]),P=parseInt($[3]),U=parseFloat($[4]);else{if(U=1,typeof k=="string"&&k.charAt(0)!=="#"){var tt=new Vf(k);k=tt.ok?tt.toHex():"#000000"}k.length===4?(R=k.substring(1,2),R+=R,N=k.substring(2,3),N+=N,P=k.substring(3,4),P+=P):(R=k.substring(1,3),N=k.substring(3,5),P=k.substring(5,7)),R=parseInt(R,16),N=parseInt(N,16),P=parseInt(P,16)}}return{r:R,g:N,b:P,a:U,style:k}},n=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},h=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};s.prototype.fillText=function(k,R,N,P){if(isNaN(R)||isNaN(N)||typeof k!="string")throw Me.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(P=isNaN(P)?void 0:P,!n.call(this)){var U=nt(this.ctx.transform.rotation),$=this.ctx.transform.scaleX;I.call(this,{text:k,x:R,y:N,scale:$,angle:U,align:this.textAlign,maxWidth:P})}},s.prototype.strokeText=function(k,R,N,P){if(isNaN(R)||isNaN(N)||typeof k!="string")throw Me.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!h.call(this)){P=isNaN(P)?void 0:P;var U=nt(this.ctx.transform.rotation),$=this.ctx.transform.scaleX;I.call(this,{text:k,x:R,y:N,scale:$,renderingMode:"stroke",angle:U,align:this.textAlign,maxWidth:P})}},s.prototype.measureText=function(k){if(typeof k!="string")throw Me.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var R=this.pdf,N=this.pdf.internal.scaleFactor,P=R.internal.getFontSize(),U=R.getStringUnitWidth(k)*P/R.internal.scaleFactor,$=function(tt){var Q=(tt=tt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Q}}),this};return new $({width:U*=Math.round(96*N/72*1e4)/1e4})},s.prototype.scale=function(k,R){if(isNaN(k)||isNaN(R))throw Me.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var N=new r(k,0,0,R,0,0);this.ctx.transform=this.ctx.transform.multiply(N)},s.prototype.rotate=function(k){if(isNaN(k))throw Me.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var R=new r(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(R)},s.prototype.translate=function(k,R){if(isNaN(k)||isNaN(R))throw Me.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var N=new r(1,0,0,1,k,R);this.ctx.transform=this.ctx.transform.multiply(N)},s.prototype.transform=function(k,R,N,P,U,$){if(isNaN(k)||isNaN(R)||isNaN(N)||isNaN(P)||isNaN(U)||isNaN($))throw Me.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var tt=new r(k,R,N,P,U,$);this.ctx.transform=this.ctx.transform.multiply(tt)},s.prototype.setTransform=function(k,R,N,P,U,$){k=isNaN(k)?1:k,R=isNaN(R)?0:R,N=isNaN(N)?0:N,P=isNaN(P)?1:P,U=isNaN(U)?0:U,$=isNaN($)?0:$,this.ctx.transform=new r(k,R,N,P,U,$)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};s.prototype.drawImage=function(k,R,N,P,U,$,tt,Q,ut){var dt=this.pdf.getImageProperties(k),St=1,ot=1,st=1,it=1;P!==void 0&&Q!==void 0&&(st=Q/P,it=ut/U,St=dt.width/P*Q/P,ot=dt.height/U*ut/U),$===void 0&&($=R,tt=N,R=0,N=0),P!==void 0&&Q===void 0&&(Q=P,ut=U),P===void 0&&Q===void 0&&(Q=dt.width,ut=dt.height);for(var W,vt=this.ctx.transform.decompose(),yt=nt(vt.rotate.shx),bt=new r,Lt=(bt=(bt=(bt=bt.multiply(vt.translate)).multiply(vt.skew)).multiply(vt.scale)).applyToRectangle(new o($-R*st,tt-N*it,P*St,U*ot)),At=f.call(this,Lt),ft=[],Mt=0;Mt<At.length;Mt+=1)ft.indexOf(At[Mt])===-1&&ft.push(At[Mt]);if(x(ft),this.autoPaging)for(var jt=ft[0],Rt=ft[ft.length-1],Yt=jt;Yt<Rt+1;Yt++){this.pdf.setPage(Yt);var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ie=Yt===1?this.posY+this.margin[0]:this.margin[0],Wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],te=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Bt=Yt===1?0:Wt+(Yt-2)*te;if(this.ctx.clip_path.length!==0){var Te=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(W,this.posX+this.margin[3],-Bt+ie+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=Te}var pe=JSON.parse(JSON.stringify(Lt));pe=y([pe],this.posX+this.margin[3],-Bt+ie+this.ctx.prevPageLastElemOffset)[0];var Pi=(Yt>jt||Yt<Rt)&&g.call(this);Pi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,te,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",pe.x,pe.y,pe.w,pe.h,null,null,yt),Pi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",Lt.x,Lt.y,Lt.w,Lt.h,null,null,yt)};var f=function(k,R,N){var P=[];R=R||this.pdf.internal.pageSize.width,N=N||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var U=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":P.push(Math.floor((k.y+U)/N)+1);break;case"arc":P.push(Math.floor((k.y+U-k.radius)/N)+1),P.push(Math.floor((k.y+U+k.radius)/N)+1);break;case"qct":var $=E(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);P.push(Math.floor(($.y+U)/N)+1),P.push(Math.floor(($.y+$.h+U)/N)+1);break;case"bct":var tt=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);P.push(Math.floor((tt.y+U)/N)+1),P.push(Math.floor((tt.y+tt.h+U)/N)+1);break;case"rect":P.push(Math.floor((k.y+U)/N)+1),P.push(Math.floor((k.y+k.h+U)/N)+1)}for(var Q=0;Q<P.length;Q+=1)for(;this.pdf.internal.getNumberOfPages()<P[Q];)m.call(this);return P},m=function(){var k=this.fillStyle,R=this.strokeStyle,N=this.font,P=this.lineCap,U=this.lineWidth,$=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=R,this.font=N,this.lineCap=P,this.lineWidth=U,this.lineJoin=$},y=function(k,R,N){for(var P=0;P<k.length;P++)switch(k[P].type){case"bct":k[P].x2+=R,k[P].y2+=N;case"qct":k[P].x1+=R,k[P].y1+=N;case"mt":case"lt":case"arc":default:k[P].x+=R,k[P].y+=N}return k},x=function(k){return k.sort(function(R,N){return R-N})},_=function(k,R){for(var N,P,U=this.fillStyle,$=this.strokeStyle,tt=this.lineCap,Q=this.lineWidth,ut=Math.abs(Q*this.ctx.transform.scaleX),dt=this.lineJoin,St=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),st=[],it=0;it<ot.length;it++)if(ot[it].x!==void 0)for(var W=f.call(this,ot[it]),vt=0;vt<W.length;vt+=1)st.indexOf(W[vt])===-1&&st.push(W[vt]);for(var yt=0;yt<st.length;yt++)for(;this.pdf.internal.getNumberOfPages()<st[yt];)m.call(this);if(x(st),this.autoPaging)for(var bt=st[0],Lt=st[st.length-1],At=bt;At<Lt+1;At++){this.pdf.setPage(At),this.fillStyle=U,this.strokeStyle=$,this.lineCap=tt,this.lineWidth=ut,this.lineJoin=dt;var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=At===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yt=At===1?0:jt+(At-2)*Rt;if(this.ctx.clip_path.length!==0){var Vt=this.path;N=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(N,this.posX+this.margin[3],-Yt+Mt+this.ctx.prevPageLastElemOffset),A.call(this,k,!0),this.path=Vt}if(P=JSON.parse(JSON.stringify(St)),this.path=y(P,this.posX+this.margin[3],-Yt+Mt+this.ctx.prevPageLastElemOffset),R===!1||At===0){var ie=(At>bt||At<Lt)&&g.call(this);ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,Rt,null).clip().discardPath()),A.call(this,k,R),ie&&this.pdf.restoreGraphicsState()}this.lineWidth=Q}else this.lineWidth=ut,A.call(this,k,R),this.lineWidth=Q;this.path=St},A=function(k,R){if((k!=="stroke"||R||!h.call(this))&&(k==="stroke"||R||!n.call(this))){for(var N,P,U=[],$=this.path,tt=0;tt<$.length;tt++){var Q=$[tt];switch(Q.type){case"begin":U.push({begin:!0});break;case"close":U.push({close:!0});break;case"mt":U.push({start:Q,deltas:[],abs:[]});break;case"lt":var ut=U.length;if($[tt-1]&&!isNaN($[tt-1].x)&&(N=[Q.x-$[tt-1].x,Q.y-$[tt-1].y],ut>0)){for(;ut>=0;ut--)if(U[ut-1].close!==!0&&U[ut-1].begin!==!0){U[ut-1].deltas.push(N),U[ut-1].abs.push(Q);break}}break;case"bct":N=[Q.x1-$[tt-1].x,Q.y1-$[tt-1].y,Q.x2-$[tt-1].x,Q.y2-$[tt-1].y,Q.x-$[tt-1].x,Q.y-$[tt-1].y],U[U.length-1].deltas.push(N);break;case"qct":var dt=$[tt-1].x+2/3*(Q.x1-$[tt-1].x),St=$[tt-1].y+2/3*(Q.y1-$[tt-1].y),ot=Q.x+2/3*(Q.x1-Q.x),st=Q.y+2/3*(Q.y1-Q.y),it=Q.x,W=Q.y;N=[dt-$[tt-1].x,St-$[tt-1].y,ot-$[tt-1].x,st-$[tt-1].y,it-$[tt-1].x,W-$[tt-1].y],U[U.length-1].deltas.push(N);break;case"arc":U.push({deltas:[],abs:[],arc:!0}),Array.isArray(U[U.length-1].abs)&&U[U.length-1].abs.push(Q)}}P=R?null:k==="stroke"?"stroke":"fill";for(var vt=!1,yt=0;yt<U.length;yt++)if(U[yt].arc)for(var bt=U[yt].abs,Lt=0;Lt<bt.length;Lt++){var At=bt[Lt];At.type==="arc"?O.call(this,At.x,At.y,At.radius,At.startAngle,At.endAngle,At.counterclockwise,void 0,R,!vt):K.call(this,At.x,At.y),vt=!0}else if(U[yt].close===!0)this.pdf.internal.out("h"),vt=!1;else if(U[yt].begin!==!0){var ft=U[yt].start.x,Mt=U[yt].start.y;G.call(this,U[yt].deltas,ft,Mt),vt=!0}P&&B.call(this,P),R&&X.call(this)}},M=function(k){var R=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,N=R*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-N;case"top":return k+R-N;case"hanging":return k+R-2*N;case"middle":return k+R/2-N;case"ideographic":return k;case"alphabetic":default:return k}},T=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};s.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(R,N){this.colorStops.push([R,N])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},s.prototype.createPattern=function(){return this.createLinearGradient()},s.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(k,R,N,P,U,$,tt,Q,ut){for(var dt=at.call(this,N,P,U,$),St=0;St<dt.length;St++){var ot=dt[St];St===0&&(ut?F.call(this,ot.x1+k,ot.y1+R):K.call(this,ot.x1+k,ot.y1+R)),rt.call(this,k,R,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}Q?X.call(this):B.call(this,tt)},B=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},X=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(k,R){this.pdf.internal.out(i(k)+" "+a(R)+" m")},I=function(k){var R;switch(k.align){case"right":case"end":R="right";break;case"center":R="center";break;case"left":case"start":default:R="left"}var N=this.pdf.getTextDimensions(k.text),P=M.call(this,k.y),U=T.call(this,P)-N.h,$=this.ctx.transform.applyToPoint(new v(k.x,P)),tt=this.ctx.transform.decompose(),Q=new r;Q=(Q=(Q=Q.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale);for(var ut,dt,St,ot=this.ctx.transform.applyToRectangle(new o(k.x,P,N.w,N.h)),st=Q.applyToRectangle(new o(k.x,U,N.w,N.h)),it=f.call(this,st),W=[],vt=0;vt<it.length;vt+=1)W.indexOf(it[vt])===-1&&W.push(it[vt]);if(x(W),this.autoPaging)for(var yt=W[0],bt=W[W.length-1],Lt=yt;Lt<bt+1;Lt++){this.pdf.setPage(Lt);var At=Lt===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[2],jt=Mt-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],Yt=Rt-this.margin[3],Vt=Lt===1?0:ft+(Lt-2)*jt;if(this.ctx.clip_path.length!==0){var ie=this.path;ut=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ut,this.posX+this.margin[3],-1*Vt+At),A.call(this,"fill",!0),this.path=ie}var Wt=y([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-Vt+At+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(dt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(dt*k.scale),St=this.lineWidth,this.lineWidth=St*k.scale);var te=this.autoPaging!=="text";if(te||Wt.y+Wt.h<=Mt){if(te||Wt.y>=At&&Wt.x<=Rt){var Bt=te?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||Rt-Wt.x)[0],Te=y([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Vt+At+this.ctx.prevPageLastElemOffset)[0],pe=te&&(Lt>yt||Lt<bt)&&g.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,jt,null).clip().discardPath()),this.pdf.text(Bt,Te.x,Te.y,{angle:k.angle,align:R,renderingMode:k.renderingMode}),pe&&this.pdf.restoreGraphicsState()}}else Wt.y<Mt&&(this.ctx.prevPageLastElemOffset+=Mt-Wt.y);k.scale>=.01&&(this.pdf.setFontSize(dt),this.lineWidth=St)}else k.scale>=.01&&(dt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(dt*k.scale),St=this.lineWidth,this.lineWidth=St*k.scale),this.pdf.text(k.text,$.x+this.posX,$.y+this.posY,{angle:k.angle,align:R,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(dt),this.lineWidth=St)},K=function(k,R,N,P){N=N||0,P=P||0,this.pdf.internal.out(i(k+N)+" "+a(R+P)+" l")},G=function(k,R,N){return this.pdf.lines(k,R,N,null,null)},rt=function(k,R,N,P,U,$,tt,Q){this.pdf.internal.out([t(d(N+k)),t(p(P+R)),t(d(U+k)),t(p($+R)),t(d(tt+k)),t(p(Q+R)),"c"].join(" "))},at=function(k,R,N,P){for(var U=2*Math.PI,$=Math.PI/2;R>N;)R-=U;var tt=Math.abs(N-R);tt<U&&P&&(tt=U-tt);for(var Q=[],ut=P?-1:1,dt=R;tt>1e-5;){var St=dt+ut*Math.min(tt,$);Q.push(gt.call(this,k,dt,St)),tt-=Math.abs(St-dt),dt=St}return Q},gt=function(k,R,N){var P=(N-R)/2,U=k*Math.cos(P),$=k*Math.sin(P),tt=U,Q=-$,ut=tt*tt+Q*Q,dt=ut+tt*U+Q*$,St=4/3*(Math.sqrt(2*ut*dt)-dt)/(tt*$-Q*U),ot=tt-St*Q,st=Q+St*tt,it=ot,W=-st,vt=P+R,yt=Math.cos(vt),bt=Math.sin(vt);return{x1:k*Math.cos(R),y1:k*Math.sin(R),x2:ot*yt-st*bt,y2:ot*bt+st*yt,x3:it*yt-W*bt,y3:it*bt+W*yt,x4:k*Math.cos(N),y4:k*Math.sin(N)}},nt=function(k){return 180*k/Math.PI},E=function(k,R,N,P,U,$){var tt=k+.5*(N-k),Q=R+.5*(P-R),ut=U+.5*(N-U),dt=$+.5*(P-$),St=Math.min(k,U,tt,ut),ot=Math.max(k,U,tt,ut),st=Math.min(R,$,Q,dt),it=Math.max(R,$,Q,dt);return new o(St,st,ot-St,it-st)},Y=function(k,R,N,P,U,$,tt,Q){var ut,dt,St,ot,st,it,W,vt,yt,bt,Lt,At,ft,Mt,jt=N-k,Rt=P-R,Yt=U-N,Vt=$-P,ie=tt-U,Wt=Q-$;for(dt=0;dt<41;dt++)yt=(W=(St=k+(ut=dt/40)*jt)+ut*((st=N+ut*Yt)-St))+ut*(st+ut*(U+ut*ie-st)-W),bt=(vt=(ot=R+ut*Rt)+ut*((it=P+ut*Vt)-ot))+ut*(it+ut*($+ut*Wt-it)-vt),dt==0?(Lt=yt,At=bt,ft=yt,Mt=bt):(Lt=Math.min(Lt,yt),At=Math.min(At,bt),ft=Math.max(ft,yt),Mt=Math.max(Mt,bt));return new o(Math.round(Lt),Math.round(At),Math.round(ft-Lt),Math.round(Mt-At))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,R,N=(k=this.ctx.lineDash,R=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:R}));this.prevLineDash!==N&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=N)}}})(Kt.API),function(e){var t=function(p){var v,o,r,c,u,s,l,n,h,g;for(o=[],r=0,c=(p+=v="\0\0\0\0".slice(p.length%4||4)).length;c>r;r+=4)(u=(p.charCodeAt(r)<<24)+(p.charCodeAt(r+1)<<16)+(p.charCodeAt(r+2)<<8)+p.charCodeAt(r+3))!==0?(s=(u=((u=((u=((u=(u-(g=u%85))/85)-(h=u%85))/85)-(n=u%85))/85)-(l=u%85))/85)%85,o.push(s+33,l+33,n+33,h+33,g+33)):o.push(122);return function(f,m){for(var y=m;y>0;y--)f.pop()}(o,v.length),String.fromCharCode.apply(String,o)+"~>"},i=function(p){var v,o,r,c,u,s=String,l="length",n=255,h="charCodeAt",g="slice",f="replace";for(p[g](-2),p=p[g](0,-2)[f](/\s/g,"")[f]("z","!!!!!"),r=[],c=0,u=(p+=v="uuuuu"[g](p[l]%5||5))[l];u>c;c+=5)o=52200625*(p[h](c)-33)+614125*(p[h](c+1)-33)+7225*(p[h](c+2)-33)+85*(p[h](c+3)-33)+(p[h](c+4)-33),r.push(n&o>>24,n&o>>16,n&o>>8,n&o);return function(m,y){for(var x=y;x>0;x--)m.pop()}(r,v[l]),s.fromCharCode.apply(s,r)},a=function(p){var v=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((p=p.replace(/\s/g,"")).indexOf(">")!==-1&&(p=p.substr(0,p.indexOf(">"))),p.length%2&&(p+="0"),v.test(p)===!1)return"";for(var o="",r=0;r<p.length;r+=2)o+=String.fromCharCode("0x"+(p[r]+p[r+1]));return o},d=function(p){for(var v=new Uint8Array(p.length),o=p.length;o--;)v[o]=p.charCodeAt(o);return p=(v=Kc(v)).reduce(function(r,c){return r+String.fromCharCode(c)},"")};e.processDataByFilters=function(p,v){var o=0,r=p||"",c=[];for(typeof(v=v||[])=="string"&&(v=[v]),o=0;o<v.length;o+=1)switch(v[o]){case"ASCII85Decode":case"/ASCII85Decode":r=i(r),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":r=t(r),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":r=a(r),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":r=r.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":r=d(r),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+v[o]+'" is not implemented')}return{data:r,reverseChain:c.reverse().join(" ")}}}(Kt.API),function(e){e.loadFile=function(t,i,a){return function(d,p,v){p=p!==!1,v=typeof v=="function"?v:function(){};var o=void 0;try{o=function(r,c,u){var s=new XMLHttpRequest,l=0,n=function(h){var g=h.length,f=[],m=String.fromCharCode;for(l=0;l<g;l+=1)f.push(m(255&h.charCodeAt(l)));return f.join("")};if(s.open("GET",r,!c),s.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(s.onload=function(){s.status===200?u(n(this.responseText)):u(void 0)}),s.send(null),c&&s.status===200)return n(s.responseText)}(d,p,v)}catch{}return o}(t,i,a)},e.loadImageFile=e.loadFile}(Kt.API),function(e){function t(){return(Qt.html2canvas?Promise.resolve(Qt.html2canvas):Uc(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load html2canvas: "+v))}).then(function(v){return v.default?v.default:v})}function i(){return(Qt.DOMPurify?Promise.resolve(Qt.DOMPurify):Uc(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load dompurify: "+v))}).then(function(v){return v.default?v.default:v})}var a=function(v){var o=Ae(v);return o==="undefined"?"undefined":o==="string"||v instanceof String?"string":o==="number"||v instanceof Number?"number":o==="function"||v instanceof Function?"function":v&&v.constructor===Array?"array":v&&v.nodeType===1?"element":o==="object"?"object":"unknown"},d=function(v,o){var r=document.createElement(v);for(var c in o.className&&(r.className=o.className),o.innerHTML&&o.dompurify&&(r.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)r.style[c]=o.style[c];return r},p=function v(o){var r=Object.assign(v.convert(Promise.resolve()),JSON.parse(JSON.stringify(v.template))),c=v.convert(Promise.resolve(),r);return c=(c=c.setProgress(1,v,1,[v])).set(o)};(p.prototype=Object.create(Promise.prototype)).constructor=p,p.convert=function(v,o){return v.__proto__=o||p.prototype,v},p.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},p.prototype.from=function(v,o){return this.then(function(){switch(o=o||function(r){switch(a(r)){case"string":return"string";case"element":return r.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(v)){case"string":return this.then(i).then(function(r){return this.set({src:d("div",{innerHTML:v,dompurify:r})})});case"element":return this.set({src:v});case"canvas":return this.set({canvas:v});case"img":return this.set({img:v});default:return this.error("Unknown source type.")}})},p.prototype.to=function(v){switch(v){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},p.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var v={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function r(c,u){for(var s=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),l=c.firstChild;l;l=l.nextSibling)u!==!0&&l.nodeType===1&&l.nodeName==="SCRIPT"||s.appendChild(r(l,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(s.width=c.width,s.height=c.height,s.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(s.value=c.value),s.addEventListener("load",function(){s.scrollTop=c.scrollTop,s.scrollLeft=c.scrollLeft},!0)),s}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(v.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=d("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=d("div",{className:"html2pdf__container",style:v}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(d("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},p.prototype.toCanvas=function(){var v=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(v).then(t).then(function(o){var r=Object.assign({},this.opt.html2canvas);return delete r.onrendered,o(this.prop.container,r)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},p.prototype.toContext2d=function(){var v=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(v).then(t).then(function(o){var r=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,s=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete s.onrendered,r.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,r.context2d.posX=this.opt.x,r.context2d.posY=this.opt.y,r.context2d.margin=this.opt.margin,r.context2d.fontFaces=c,c)for(var l=0;l<c.length;++l){var n=c[l],h=n.src.find(function(g){return g.format==="truetype"});h&&r.addFont(h.url,n.ref.name,n.ref.style)}return s.windowHeight=s.windowHeight||0,s.windowHeight=s.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):s.windowHeight,r.context2d.save(!0),o(this.prop.container,s)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},p.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var v=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=v})},p.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},p.prototype.output=function(v,o,r){return(r=r||"pdf").toLowerCase()==="img"||r.toLowerCase()==="image"?this.outputImg(v,o):this.outputPdf(v,o)},p.prototype.outputPdf=function(v,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(v,o)})},p.prototype.outputImg=function(v){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(v){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+v+'" is not supported.'}})},p.prototype.save=function(v){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(v?{filename:v}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},p.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},p.prototype.set=function(v){if(a(v)!=="object")return this;var o=Object.keys(v||{}).map(function(r){if(r in p.template.prop)return function(){this.prop[r]=v[r]};switch(r){case"margin":return this.setMargin.bind(this,v.margin);case"jsPDF":return function(){return this.opt.jsPDF=v.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,v.pageSize);default:return function(){this.opt[r]=v[r]}}},this);return this.then(function(){return this.thenList(o)})},p.prototype.get=function(v,o){return this.then(function(){var r=v in p.template.prop?this.prop[v]:this.opt[v];return o?o(r):r})},p.prototype.setMargin=function(v){return this.then(function(){switch(a(v)){case"number":v=[v,v,v,v];case"array":if(v.length===2&&(v=[v[0],v[1],v[0],v[1]]),v.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=v}).then(this.setPageSize)},p.prototype.setPageSize=function(v){function o(r,c){return Math.floor(r*c/72*96)}return this.then(function(){(v=v||Kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(v.inner={width:v.width-this.opt.margin[1]-this.opt.margin[3],height:v.height-this.opt.margin[0]-this.opt.margin[2]},v.inner.px={width:o(v.inner.width,v.k),height:o(v.inner.height,v.k)},v.inner.ratio=v.inner.height/v.inner.width),this.prop.pageSize=v})},p.prototype.setProgress=function(v,o,r,c){return v!=null&&(this.progress.val=v),o!=null&&(this.progress.state=o),r!=null&&(this.progress.n=r),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},p.prototype.updateProgress=function(v,o,r,c){return this.setProgress(v?this.progress.val+v:null,o||null,r?this.progress.n+r:null,c?this.progress.stack.concat(c):null)},p.prototype.then=function(v,o){var r=this;return this.thenCore(v,o,function(c,u){return r.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(s){return r.updateProgress(null,c),s}).then(c,u).then(function(s){return r.updateProgress(1),s})})},p.prototype.thenCore=function(v,o,r){r=r||Promise.prototype.then,v&&(v=v.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:p.convert(Object.assign({},this),Promise.prototype),u=r.call(c,v,o);return p.convert(u,this.__proto__)},p.prototype.thenExternal=function(v,o){return Promise.prototype.then.call(this,v,o)},p.prototype.thenList=function(v){var o=this;return v.forEach(function(r){o=o.thenCore(r)}),o},p.prototype.catch=function(v){v&&(v=v.bind(this));var o=Promise.prototype.catch.call(this,v);return p.convert(o,this)},p.prototype.catchExternal=function(v){return Promise.prototype.catch.call(this,v)},p.prototype.error=function(v){return this.then(function(){throw new Error(v)})},p.prototype.using=p.prototype.set,p.prototype.saveAs=p.prototype.save,p.prototype.export=p.prototype.output,p.prototype.run=p.prototype.then,Kt.getPageSize=function(v,o,r){if(Ae(v)==="object"){var c=v;v=c.orientation,o=c.unit||o,r=c.format||r}o=o||"mm",r=r||"a4",v=(""+(v||"P")).toLowerCase();var u,s=(""+r).toLowerCase(),l={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var n,h=0,g=0;if(l.hasOwnProperty(s))h=l[s][1]/u,g=l[s][0]/u;else try{h=r[1],g=r[0]}catch{throw new Error("Invalid format: "+r)}if(v==="p"||v==="portrait")v="p",g>h&&(n=g,g=h,h=n);else{if(v!=="l"&&v!=="landscape")throw"Invalid orientation: "+v;v="l",h>g&&(n=g,g=h,h=n)}return{width:g,height:h,unit:o,k:u,orientation:v}},e.html=function(v,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(ih):null;var r=new p(o);return o.worker?r:r.from(v).doCallback()}}(Kt.API),Kt.API.addJS=function(e){return Tu=e,this.internal.events.subscribe("postPutResources",function(){Go=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Go+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Lu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Tu+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Go!==void 0&&Lu!==void 0&&this.internal.out("/Names <</JavaScript "+Go+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var i=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var d=i.outline.render().split(/\r\n/),p=0;p<d.length;p++){var v=d[p],o=a.exec(v);if(o!=null){var r=o[1];i.internal.newObjectDeferredBegin(r,!1)}i.internal.write(v)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(p=0;p<c;p++){var s=i.internal.newObject();u.push(s);var l=i.internal.getPageInfo(p+1);i.internal.write("<< /D["+l.objId+" 0 R /XYZ null null null]>> endobj")}var n=i.internal.newObject();for(i.internal.write("<< /Names [ "),p=0;p<u.length;p++)i.internal.write("(page_"+(p+1)+")"+u[p]+" 0 R");i.internal.write(" ] >>","endobj"),t=i.internal.newObject(),i.internal.write("<< /Dests "+n+" 0 R"),i.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(a,d,p){var v={title:d,options:p,children:[]};return a==null&&(a=this.root),a.children.push(v),v},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(a){a.id=i.internal.newObjectDeferred();for(var d=0;d<a.children.length;d++)this.genIds_r(a.children[d])},i.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},i.outline.renderItems=function(a){for(var d=this.ctx.pdf.internal.getVerticalCoordinateString,p=0;p<a.children.length;p++){var v=a.children[p];this.objStart(v),this.line("/Title "+this.makeString(v.title)),this.line("/Parent "+this.makeRef(a)),p>0&&this.line("/Prev "+this.makeRef(a.children[p-1])),p<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[p+1])),v.children.length>0&&(this.line("/First "+this.makeRef(v.children[0])),this.line("/Last "+this.makeRef(v.children[v.children.length-1])));var o=this.count=this.count_r({count:0},v);if(o>0&&this.line("/Count "+o),v.options&&v.options.pageNumber){var r=i.internal.getPageInfo(v.options.pageNumber);this.line("/Dest ["+r.objId+" 0 R /XYZ 0 "+d(0)+" 0]")}this.objEnd()}for(var c=0;c<a.children.length;c++)this.renderItems(a.children[c])},i.outline.line=function(a){this.ctx.val+=a+`\r
`},i.outline.makeRef=function(a){return a.id+" 0 R"},i.outline.makeString=function(a){return"("+i.internal.pdfEscape(a)+")"},i.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(a,d){for(var p=0;p<d.children.length;p++)a.count++,this.count_r(a,d.children[p]);return a.count}}])}(Kt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(i,a,d,p,v,o){var r,c=this.decode.DCT_DECODE,u=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=v||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(r=function(s){for(var l,n=256*s.charCodeAt(4)+s.charCodeAt(5),h=s.length,g={width:0,height:0,numcomponents:1},f=4;f<h;f+=2){if(f+=n,t.indexOf(s.charCodeAt(f+1))!==-1){l=256*s.charCodeAt(f+5)+s.charCodeAt(f+6),g={width:256*s.charCodeAt(f+7)+s.charCodeAt(f+8),height:l,numcomponents:s.charCodeAt(f+9)};break}n=256*s.charCodeAt(f+2)+s.charCodeAt(f+3)}return g}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:i,width:r.width,height:r.height,colorSpace:o,bitsPerComponent:8,filter:c,index:a,alias:d}}return u}}(Kt.API);var js,$o,Pu,Ou,Mu,jg=function(){var e,t,i;function a(p){var v,o,r,c,u,s,l,n,h,g,f,m,y,x;for(this.data=p,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(v=this.readUInt32(),h=(function(){var _,A;for(A=[],_=0;_<4;++_)A.push(String.fromCharCode(this.data[this.pos++]));return A}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(v);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,s.delay=1e3*u/c,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for(h==="fdAT"&&(this.pos+=4,v-=4),p=(s!=null?s.data:void 0)||this.imgData,m=0;0<=v?m<v:m>v;0<=v?++m:--m)p.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(v),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((g=r-this.transparency.indexed.length)>0)for(y=0;0<=g?y<g:y>g;0<=g?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(v)[0];break;case 2:this.transparency.rgb=this.read(v)}break;case"tEXt":l=(f=this.read(v)).indexOf(0),n=String.fromCharCode.apply(String,f.slice(0,l)),this.text[n]=String.fromCharCode.apply(String,f.slice(l+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=v}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(p){var v,o;for(o=[],v=0;0<=p?v<p:v>p;0<=p?++v:--v)o.push(this.data[this.pos++]);return o},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(p){var v=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*v),r=0,c=this;if(p==null&&(p=this.imgData),p.length===0)return new Uint8Array(0);function u(s,l,n,h){var g,f,m,y,x,_,A,M,T,O,B,X,F,I,K,G,rt,at,gt,nt,E,Y=Math.ceil((c.width-s)/n),J=Math.ceil((c.height-l)/h),k=c.width==Y&&c.height==J;for(I=v*Y,X=k?o:new Uint8Array(I*J),_=p.length,F=0,f=0;F<J&&r<_;){switch(p[r++]){case 0:for(y=rt=0;rt<I;y=rt+=1)X[f++]=p[r++];break;case 1:for(y=at=0;at<I;y=at+=1)g=p[r++],x=y<v?0:X[f-v],X[f++]=(g+x)%256;break;case 2:for(y=gt=0;gt<I;y=gt+=1)g=p[r++],m=(y-y%v)/v,K=F&&X[(F-1)*I+m*v+y%v],X[f++]=(K+g)%256;break;case 3:for(y=nt=0;nt<I;y=nt+=1)g=p[r++],m=(y-y%v)/v,x=y<v?0:X[f-v],K=F&&X[(F-1)*I+m*v+y%v],X[f++]=(g+Math.floor((x+K)/2))%256;break;case 4:for(y=E=0;E<I;y=E+=1)g=p[r++],m=(y-y%v)/v,x=y<v?0:X[f-v],F===0?K=G=0:(K=X[(F-1)*I+m*v+y%v],G=m&&X[(F-1)*I+(m-1)*v+y%v]),A=x+K-G,M=Math.abs(A-x),O=Math.abs(A-K),B=Math.abs(A-G),T=M<=O&&M<=B?x:O<=B?K:G,X[f++]=(g+T)%256;break;default:throw new Error("Invalid filter algorithm: "+p[r-1])}if(!k){var R=((l+F*h)*c.width+s)*v,N=F*I;for(y=0;y<Y;y+=1){for(var P=0;P<v;P+=1)o[R++]=X[N++];R+=(n-1)*v}}F++}}return p=pg(p),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},a.prototype.decodePalette=function(){var p,v,o,r,c,u,s,l,n;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),r=0,p=0,v=s=0,l=o.length;s<l;v=s+=3)c[r++]=o[v],c[r++]=o[v+1],c[r++]=o[v+2],c[r++]=(n=u[p++])!=null?n:255;return c},a.prototype.copyToImageData=function(p,v){var o,r,c,u,s,l,n,h,g,f,m;if(r=this.colors,g=null,o=this.hasAlphaChannel,this.palette.length&&(g=(m=this._decodedPalette)!=null?m:this._decodedPalette=this.decodePalette(),r=4,o=!0),h=(c=p.data||p).length,s=g||v,u=l=0,r===1)for(;u<h;)n=g?4*v[u/4]:l,f=s[n++],c[u++]=f,c[u++]=f,c[u++]=f,c[u++]=o?s[n++]:255,l=n;else for(;u<h;)n=g?4*v[u/4]:l,c[u++]=s[n++],c[u++]=s[n++],c[u++]=s[n++],c[u++]=o?s[n++]:255,l=n},a.prototype.decode=function(){var p;return p=new Uint8Array(this.width*this.height*4),this.copyToImageData(p,this.decodePixels()),p};var d=function(){if(Object.prototype.toString.call(Qt)==="[object Window]"){try{t=Qt.document.createElement("canvas"),i=t.getContext("2d")}catch{return!1}return!0}return!1};return d(),e=function(p){var v;if(d()===!0)return i.width=p.width,i.height=p.height,i.clearRect(0,0,p.width,p.height),i.putImageData(p,0,0),(v=new Image).src=t.toDataURL(),v;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(p){var v,o,r,c,u,s,l,n;if(this.animation){for(n=[],o=u=0,s=(l=this.animation.frames).length;u<s;o=++u)v=l[o],r=p.createImageData(v.width,v.height),c=this.decodePixels(new Uint8Array(v.data)),this.copyToImageData(r,c),v.imageData=r,n.push(v.image=e(r));return n}},a.prototype.renderFrame=function(p,v){var o,r,c;return o=(r=this.animation.frames)[v],c=r[v-1],v===0&&p.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?p.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&p.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&p.clearRect(o.xOffset,o.yOffset,o.width,o.height),p.drawImage(o.image,o.xOffset,o.yOffset)},a.prototype.animate=function(p){var v,o,r,c,u,s,l=this;return o=0,s=this.animation,c=s.numFrames,r=s.frames,u=s.numPlays,(v=function(){var n,h;if(n=o++%c,h=r[n],l.renderFrame(p,n),c>1&&o/c<u)return l.animation._timeout=setTimeout(v,h.delay)})()},a.prototype.stopAnimation=function(){var p;return clearTimeout((p=this.animation)!=null?p._timeout:void 0)},a.prototype.render=function(p){var v,o;return p._png&&p._png.stopAnimation(),p._png=this,p.width=this.width,p.height=this.height,v=p.getContext("2d"),this.animation?(this.decodeFrames(v),this.animate(v)):(o=v.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),v.putImageData(o,0,0))},a}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Dg(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,d=e[t++],p=d>>7,v=1<<(7&d)+1;e[t++],e[t++];var o=null,r=null;p&&(o=t,r=v,t+=3*v);var c=!0,u=[],s=0,l=null,n=0,h=null;for(this.width=i,this.height=a;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,h=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];s=e[t++]|e[t++]<<8,l=e[t++],!(1&g)&&(l=null),n=g>>2&7,t++;break;case 254:for(;;){if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var f=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,_=e[t++],A=_>>6&1,M=1<<(7&_)+1,T=o,O=r,B=!1;_>>7&&(B=!0,T=t,O=M,t+=3*M);var X=t;for(t++;;){var F;if(!((F=e[t++])>=0))throw Error("Invalid block size");if(F===0)break;t+=F}u.push({x:f,y:m,width:y,height:x,has_local_palette:B,palette_offset:T,palette_size:O,data_offset:X,data_length:t-X,transparent_index:l,interlaced:!!A,delay:s,disposal:n});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return h},this.frameInfo=function(I){if(I<0||I>=u.length)throw new Error("Frame index out of range.");return u[I]},this.decodeAndBlitFrameBGRA=function(I,K){var G=this.frameInfo(I),rt=G.width*G.height,at=new Uint8Array(rt);Nu(e,G.data_offset,at,rt);var gt=G.palette_offset,nt=G.transparent_index;nt===null&&(nt=256);var E=G.width,Y=i-E,J=E,k=4*(G.y*i+G.x),R=4*((G.y+G.height)*i+G.x),N=k,P=4*Y;G.interlaced===!0&&(P+=4*i*7);for(var U=8,$=0,tt=at.length;$<tt;++$){var Q=at[$];if(J===0&&(J=E,(N+=P)>=R&&(P=4*Y+4*i*(U-1),N=k+(E+Y)*(U<<1),U>>=1)),Q===nt)N+=4;else{var ut=e[gt+3*Q],dt=e[gt+3*Q+1],St=e[gt+3*Q+2];K[N++]=St,K[N++]=dt,K[N++]=ut,K[N++]=255}--J}},this.decodeAndBlitFrameRGBA=function(I,K){var G=this.frameInfo(I),rt=G.width*G.height,at=new Uint8Array(rt);Nu(e,G.data_offset,at,rt);var gt=G.palette_offset,nt=G.transparent_index;nt===null&&(nt=256);var E=G.width,Y=i-E,J=E,k=4*(G.y*i+G.x),R=4*((G.y+G.height)*i+G.x),N=k,P=4*Y;G.interlaced===!0&&(P+=4*i*7);for(var U=8,$=0,tt=at.length;$<tt;++$){var Q=at[$];if(J===0&&(J=E,(N+=P)>=R&&(P=4*Y+4*i*(U-1),N=k+(E+Y)*(U<<1),U>>=1)),Q===nt)N+=4;else{var ut=e[gt+3*Q],dt=e[gt+3*Q+1],St=e[gt+3*Q+2];K[N++]=ut,K[N++]=dt,K[N++]=St,K[N++]=255}--J}}}function Nu(e,t,i,a){for(var d=e[t++],p=1<<d,v=p+1,o=v+1,r=d+1,c=(1<<r)-1,u=0,s=0,l=0,n=e[t++],h=new Int32Array(4096),g=null;;){for(;u<16&&n!==0;)s|=e[t++]<<u,u+=8,n===1?n=e[t++]:--n;if(u<r)break;var f=s&c;if(s>>=r,u-=r,f!==p){if(f===v)break;for(var m=f<o?f:g,y=0,x=m;x>p;)x=h[x]>>8,++y;var _=x;if(l+y+(m!==f?1:0)>a)return void Me.log("Warning, gif stream longer than expected.");i[l++]=_;var A=l+=y;for(m!==f&&(i[l++]=_),x=m;y--;)x=h[x],i[--A]=255&x,x>>=8;g!==null&&o<4096&&(h[o++]=g<<8|_,o>=c+1&&r<12&&(++r,c=c<<1|1)),g=f}else o=v+1,c=(1<<(r=d+1))-1,g=null}return l!==a&&Me.log("Warning, gif stream shorter than expected."),i}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Nc(e){var t,i,a,d,p,v=Math.floor,o=new Array(64),r=new Array(64),c=new Array(64),u=new Array(64),s=new Array(65535),l=new Array(65535),n=new Array(64),h=new Array(64),g=[],f=0,m=7,y=new Array(64),x=new Array(64),_=new Array(64),A=new Array(256),M=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],rt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function at(k,R){for(var N=0,P=0,U=new Array,$=1;$<=16;$++){for(var tt=1;tt<=k[$];tt++)U[R[P]]=[],U[R[P]][0]=N,U[R[P]][1]=$,P++,N++;N*=2}return U}function gt(k){for(var R=k[0],N=k[1]-1;N>=0;)R&1<<N&&(f|=1<<m),N--,--m<0&&(f==255?(nt(255),nt(0)):nt(f),m=7,f=0)}function nt(k){g.push(k)}function E(k){nt(k>>8&255),nt(255&k)}function Y(k,R,N,P,U){for(var $,tt=U[0],Q=U[240],ut=function(bt,Lt){var At,ft,Mt,jt,Rt,Yt,Vt,ie,Wt,te,Bt=0;for(Wt=0;Wt<8;++Wt){At=bt[Bt],ft=bt[Bt+1],Mt=bt[Bt+2],jt=bt[Bt+3],Rt=bt[Bt+4],Yt=bt[Bt+5],Vt=bt[Bt+6];var Te=At+(ie=bt[Bt+7]),pe=At-ie,Pi=ft+Vt,_e=ft-Vt,Ee=Mt+Yt,_r=Mt-Yt,we=jt+Rt,In=jt-Rt,ze=Te+we,rr=Te-we,Rr=Pi+Ee,qe=Pi-Ee;bt[Bt]=ze+Rr,bt[Bt+4]=ze-Rr;var re=.707106781*(qe+rr);bt[Bt+2]=rr+re,bt[Bt+6]=rr-re;var xe=.382683433*((ze=In+_r)-(qe=_e+pe)),jn=.5411961*ze+xe,ui=1.306562965*qe+xe,Sr=.707106781*(Rr=_r+_e),Cr=pe+Sr,Zt=pe-Sr;bt[Bt+5]=Zt+jn,bt[Bt+3]=Zt-jn,bt[Bt+1]=Cr+ui,bt[Bt+7]=Cr-ui,Bt+=8}for(Bt=0,Wt=0;Wt<8;++Wt){At=bt[Bt],ft=bt[Bt+8],Mt=bt[Bt+16],jt=bt[Bt+24],Rt=bt[Bt+32],Yt=bt[Bt+40],Vt=bt[Bt+48];var nr=At+(ie=bt[Bt+56]),Ar=At-ie,Oi=ft+Vt,ni=ft-Vt,Ze=Mt+Yt,Di=Mt-Yt,is=jt+Rt,zr=jt-Rt,sr=nr+is,ar=nr-is,or=Oi+Ze,kr=Oi-Ze;bt[Bt]=sr+or,bt[Bt+32]=sr-or;var Hi=.707106781*(kr+ar);bt[Bt+16]=ar+Hi,bt[Bt+48]=ar-Hi;var Lr=.382683433*((sr=zr+Di)-(kr=ni+Ar)),Dn=.5411961*sr+Lr,rs=1.306562965*kr+Lr,ns=.707106781*(or=Di+ni),ss=Ar+ns,as=Ar-ns;bt[Bt+40]=as+Dn,bt[Bt+24]=as-Dn,bt[Bt+8]=ss+rs,bt[Bt+56]=ss-rs,Bt++}for(Wt=0;Wt<64;++Wt)te=bt[Wt]*Lt[Wt],n[Wt]=te>0?te+.5|0:te-.5|0;return n}(k,R),dt=0;dt<64;++dt)h[T[dt]]=ut[dt];var St=h[0]-N;N=h[0],St==0?gt(P[0]):(gt(P[l[$=32767+St]]),gt(s[$]));for(var ot=63;ot>0&&h[ot]==0;)ot--;if(ot==0)return gt(tt),N;for(var st,it=1;it<=ot;){for(var W=it;h[it]==0&&it<=ot;)++it;var vt=it-W;if(vt>=16){st=vt>>4;for(var yt=1;yt<=st;++yt)gt(Q);vt&=15}$=32767+h[it],gt(U[(vt<<4)+l[$]]),gt(s[$]),it++}return ot!=63&&gt(tt),N}function J(k){k=Math.min(Math.max(k,1),100),p!=k&&(function(R){for(var N=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],P=0;P<64;P++){var U=v((N[P]*R+50)/100);U=Math.min(Math.max(U,1),255),o[T[P]]=U}for(var $=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],tt=0;tt<64;tt++){var Q=v(($[tt]*R+50)/100);Q=Math.min(Math.max(Q,1),255),r[T[tt]]=Q}for(var ut=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],dt=0,St=0;St<8;St++)for(var ot=0;ot<8;ot++)c[dt]=1/(o[T[dt]]*ut[St]*ut[ot]*8),u[dt]=1/(r[T[dt]]*ut[St]*ut[ot]*8),dt++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),p=k)}this.encode=function(k,R){R&&J(R),g=new Array,f=0,m=7,E(65496),E(65504),E(16),nt(74),nt(70),nt(73),nt(70),nt(0),nt(1),nt(1),nt(0),E(1),E(1),nt(0),nt(0),function(){E(65499),E(132),nt(0);for(var ft=0;ft<64;ft++)nt(o[ft]);nt(1);for(var Mt=0;Mt<64;Mt++)nt(r[Mt])}(),function(ft,Mt){E(65472),E(17),nt(8),E(Mt),E(ft),nt(3),nt(1),nt(17),nt(0),nt(2),nt(17),nt(1),nt(3),nt(17),nt(1)}(k.width,k.height),function(){E(65476),E(418),nt(0);for(var ft=0;ft<16;ft++)nt(O[ft+1]);for(var Mt=0;Mt<=11;Mt++)nt(B[Mt]);nt(16);for(var jt=0;jt<16;jt++)nt(X[jt+1]);for(var Rt=0;Rt<=161;Rt++)nt(F[Rt]);nt(1);for(var Yt=0;Yt<16;Yt++)nt(I[Yt+1]);for(var Vt=0;Vt<=11;Vt++)nt(K[Vt]);nt(17);for(var ie=0;ie<16;ie++)nt(G[ie+1]);for(var Wt=0;Wt<=161;Wt++)nt(rt[Wt])}(),E(65498),E(12),nt(3),nt(1),nt(0),nt(2),nt(17),nt(3),nt(17),nt(0),nt(63),nt(0);var N=0,P=0,U=0;f=0,m=7,this.encode.displayName="_encode_";for(var $,tt,Q,ut,dt,St,ot,st,it,W=k.data,vt=k.width,yt=k.height,bt=4*vt,Lt=0;Lt<yt;){for($=0;$<bt;){for(dt=bt*Lt+$,ot=-1,st=0,it=0;it<64;it++)St=dt+(st=it>>3)*bt+(ot=4*(7&it)),Lt+st>=yt&&(St-=bt*(Lt+1+st-yt)),$+ot>=bt&&(St-=$+ot-bt+4),tt=W[St++],Q=W[St++],ut=W[St++],y[it]=(M[tt]+M[Q+256>>0]+M[ut+512>>0]>>16)-128,x[it]=(M[tt+768>>0]+M[Q+1024>>0]+M[ut+1280>>0]>>16)-128,_[it]=(M[tt+1280>>0]+M[Q+1536>>0]+M[ut+1792>>0]>>16)-128;N=Y(y,c,N,t,a),P=Y(x,u,P,i,d),U=Y(_,u,U,i,d),$+=32}Lt+=8}if(m>=0){var At=[];At[1]=m+1,At[0]=(1<<m+1)-1,gt(At)}return E(65497),new Uint8Array(g)},e=e||50,function(){for(var k=String.fromCharCode,R=0;R<256;R++)A[R]=k(R)}(),t=at(O,B),i=at(I,K),a=at(X,F),d=at(G,rt),function(){for(var k=1,R=2,N=1;N<=15;N++){for(var P=k;P<R;P++)l[32767+P]=N,s[32767+P]=[],s[32767+P][1]=N,s[32767+P][0]=P;for(var U=-(R-1);U<=-k;U++)l[32767+U]=N,s[32767+U]=[],s[32767+U][1]=N,s[32767+U][0]=R-1+U;k<<=1,R<<=1}}(),function(){for(var k=0;k<256;k++)M[k]=19595*k,M[k+256>>0]=38470*k,M[k+512>>0]=7471*k+32768,M[k+768>>0]=-11059*k,M[k+1024>>0]=-21709*k,M[k+1280>>0]=32768*k+8421375,M[k+1536>>0]=-27439*k,M[k+1792>>0]=-5329*k}(),J(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function pr(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Fu(e){function t(O){if(!O)throw Error("assert :P")}function i(O,B,X){for(var F=0;4>F;F++)if(O[B+F]!=X.charCodeAt(F))return!0;return!1}function a(O,B,X,F,I){for(var K=0;K<I;K++)O[B+K]=X[F+K]}function d(O,B,X,F){for(var I=0;I<F;I++)O[B+I]=X}function p(O){return new Int32Array(O)}function v(O,B){for(var X=[],F=0;F<O;F++)X.push(new B);return X}function o(O,B){var X=[];return function F(I,K,G){for(var rt=G[K],at=0;at<rt&&(I.push(G.length>K+1?[]:new B),!(G.length<K+1));at++)F(I[at],K+1,G)}(X,0,O),X}var r=function(){var O=this;function B(b,w){for(var C=1<<w-1>>>0;b&C;)C>>>=1;return C?(b&C-1)+C:b}function X(b,w,C,L,j){t(!(L%C));do b[w+(L-=C)]=j;while(0<L)}function F(b,w,C,L,j){if(t(2328>=j),512>=j)var z=p(512);else if((z=p(j))==null)return 0;return function(q,H,V,Z,ct,xt){var _t,mt,Ot=H,Ct=1<<V,ht=p(16),pt=p(16);for(t(ct!=0),t(Z!=null),t(q!=null),t(0<V),mt=0;mt<ct;++mt){if(15<Z[mt])return 0;++ht[Z[mt]]}if(ht[0]==ct)return 0;for(pt[1]=0,_t=1;15>_t;++_t){if(ht[_t]>1<<_t)return 0;pt[_t+1]=pt[_t]+ht[_t]}for(mt=0;mt<ct;++mt)_t=Z[mt],0<Z[mt]&&(xt[pt[_t]++]=mt);if(pt[15]==1)return(Z=new I).g=0,Z.value=xt[0],X(q,Ot,1,Ct,Z),Ct;var Tt,Nt=-1,Pt=Ct-1,Ut=0,Dt=1,$t=1,zt=1<<V;for(mt=0,_t=1,ct=2;_t<=V;++_t,ct<<=1){if(Dt+=$t<<=1,0>($t-=ht[_t]))return 0;for(;0<ht[_t];--ht[_t])(Z=new I).g=_t,Z.value=xt[mt++],X(q,Ot+Ut,ct,zt,Z),Ut=B(Ut,_t)}for(_t=V+1,ct=2;15>=_t;++_t,ct<<=1){if(Dt+=$t<<=1,0>($t-=ht[_t]))return 0;for(;0<ht[_t];--ht[_t]){if(Z=new I,(Ut&Pt)!=Nt){for(Ot+=zt,Tt=1<<(Nt=_t)-V;15>Nt&&!(0>=(Tt-=ht[Nt]));)++Nt,Tt<<=1;Ct+=zt=1<<(Tt=Nt-V),q[H+(Nt=Ut&Pt)].g=Tt+V,q[H+Nt].value=Ot-H-Nt}Z.g=_t-V,Z.value=xt[mt++],X(q,Ot+(Ut>>V),ct,zt,Z),Ut=B(Ut,_t)}}return Dt!=2*pt[15]-1?0:Ct}(b,w,C,L,j,z)}function I(){this.value=this.g=0}function K(){this.value=this.g=0}function G(){this.G=v(5,I),this.H=p(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=v(fi,K)}function rt(b,w,C,L){t(b!=null),t(w!=null),t(2147483648>L),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=w,b.pa=C,b.Jd=w,b.Yc=C+L,b.Zc=4<=L?C+L-4+1:C,$(b)}function at(b,w){for(var C=0;0<w--;)C|=Q(b,128)<<w;return C}function gt(b,w){var C=at(b,w);return tt(b)?-C:C}function nt(b,w,C,L){var j,z=0;for(t(b!=null),t(w!=null),t(4294967288>L),b.Sb=L,b.Ra=0,b.u=0,b.h=0,4<L&&(L=4),j=0;j<L;++j)z+=w[C+j]<<8*j;b.Ra=z,b.bb=L,b.oa=w,b.pa=C}function E(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<xs-8>>>0,++b.bb,b.u-=8;N(b)&&(b.h=1,b.u=0)}function Y(b,w){if(t(0<=w),!b.h&&w<=ws){var C=R(b)&ys[w];return b.u+=w,E(b),C}return b.h=1,b.u=0}function J(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function k(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(b){return b.Ra>>>(b.u&xs-1)>>>0}function N(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>xs}function P(b,w){b.u=w,b.h=N(b)}function U(b){b.u>=_a&&(t(b.u>=_a),E(b))}function $(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function tt(b){return at(b,1)}function Q(b,w){var C=b.Ca;0>b.b&&$(b);var L=b.b,j=C*w>>>8,z=(b.I>>>L>j)+0;for(z?(C-=j,b.I-=j+1<<L>>>0):C=j+1,L=C,j=0;256<=L;)j+=8,L>>=8;return L=7^j+Ni[L],b.b-=L,b.Ca=(C<<L)-1,z}function ut(b,w,C){b[w+0]=C>>24&255,b[w+1]=C>>16&255,b[w+2]=C>>8&255,b[w+3]=C>>0&255}function dt(b,w){return b[w+0]<<0|b[w+1]<<8}function St(b,w){return dt(b,w)|b[w+2]<<16}function ot(b,w){return dt(b,w)|dt(b,w+2)<<16}function st(b,w){var C=1<<w;return t(b!=null),t(0<w),b.X=p(C),b.X==null?0:(b.Mb=32-w,b.Xa=w,1)}function it(b,w){t(b!=null),t(w!=null),t(b.Xa==w.Xa),a(w.X,0,b.X,0,1<<w.Xa)}function W(){this.X=[],this.Xa=this.Mb=0}function vt(b,w,C,L){t(C!=null),t(L!=null);var j=C[0],z=L[0];return j==0&&(j=(b*z+w/2)/w),z==0&&(z=(w*j+b/2)/b),0>=j||0>=z?0:(C[0]=j,L[0]=z,1)}function yt(b,w){return b+(1<<w)-1>>>w}function bt(b,w){return((4278255360&b)+(4278255360&w)>>>0&4278255360)+((16711935&b)+(16711935&w)>>>0&16711935)>>>0}function Lt(b,w){O[w]=function(C,L,j,z,q,H,V){var Z;for(Z=0;Z<q;++Z){var ct=O[b](H[V+Z-1],j,z+Z);H[V+Z]=bt(C[L+Z],ct)}}}function At(){this.ud=this.hd=this.jd=0}function ft(b,w){return((4278124286&(b^w))>>>1)+(b&w)>>>0}function Mt(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function jt(b,w){return Mt(b+(b-w+.5>>1))}function Rt(b,w,C){return Math.abs(w-C)-Math.abs(b-C)}function Yt(b,w,C,L,j,z,q){for(L=z[q-1],C=0;C<j;++C)z[q+C]=L=bt(b[w+C],L)}function Vt(b,w,C,L,j){var z;for(z=0;z<C;++z){var q=b[w+z],H=q>>8&255,V=16711935&(V=(V=16711935&q)+((H<<16)+H));L[j+z]=(4278255360&q)+V>>>0}}function ie(b,w){w.jd=b>>0&255,w.hd=b>>8&255,w.ud=b>>16&255}function Wt(b,w,C,L,j,z){var q;for(q=0;q<L;++q){var H=w[C+q],V=H>>>8,Z=H,ct=255&(ct=(ct=H>>>16)+((b.jd<<24>>24)*(V<<24>>24)>>>5));Z=255&(Z=(Z=Z+((b.hd<<24>>24)*(V<<24>>24)>>>5))+((b.ud<<24>>24)*(ct<<24>>24)>>>5)),j[z+q]=(4278255360&H)+(ct<<16)+Z}}function te(b,w,C,L,j){O[w]=function(z,q,H,V,Z,ct,xt,_t,mt){for(V=xt;V<_t;++V)for(xt=0;xt<mt;++xt)Z[ct++]=j(H[L(z[q++])])},O[b]=function(z,q,H,V,Z,ct,xt){var _t=8>>z.b,mt=z.Ea,Ot=z.K[0],Ct=z.w;if(8>_t)for(z=(1<<z.b)-1,Ct=(1<<_t)-1;q<H;++q){var ht,pt=0;for(ht=0;ht<mt;++ht)ht&z||(pt=L(V[Z++])),ct[xt++]=j(Ot[pt&Ct]),pt>>=_t}else O["VP8LMapColor"+C](V,Z,Ot,Ct,ct,xt,q,H,mt)}}function Bt(b,w,C,L,j){for(C=w+C;w<C;){var z=b[w++];L[j++]=z>>16&255,L[j++]=z>>8&255,L[j++]=z>>0&255}}function Te(b,w,C,L,j){for(C=w+C;w<C;){var z=b[w++];L[j++]=z>>16&255,L[j++]=z>>8&255,L[j++]=z>>0&255,L[j++]=z>>24&255}}function pe(b,w,C,L,j){for(C=w+C;w<C;){var z=(q=b[w++])>>16&240|q>>12&15,q=q>>0&240|q>>28&15;L[j++]=z,L[j++]=q}}function Pi(b,w,C,L,j){for(C=w+C;w<C;){var z=(q=b[w++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;L[j++]=z,L[j++]=q}}function _e(b,w,C,L,j){for(C=w+C;w<C;){var z=b[w++];L[j++]=z>>0&255,L[j++]=z>>8&255,L[j++]=z>>16&255}}function Ee(b,w,C,L,j,z){if(z==0)for(C=w+C;w<C;)ut(L,((z=b[w++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),j+=32;else a(L,j,b,w,C)}function _r(b,w){O[w][0]=O[b+"0"],O[w][1]=O[b+"1"],O[w][2]=O[b+"2"],O[w][3]=O[b+"3"],O[w][4]=O[b+"4"],O[w][5]=O[b+"5"],O[w][6]=O[b+"6"],O[w][7]=O[b+"7"],O[w][8]=O[b+"8"],O[w][9]=O[b+"9"],O[w][10]=O[b+"10"],O[w][11]=O[b+"11"],O[w][12]=O[b+"12"],O[w][13]=O[b+"13"],O[w][14]=O[b+"0"],O[w][15]=O[b+"0"]}function we(b){return b==Jl||b==Zl||b==Lo||b==Ql}function In(){this.eb=[],this.size=this.A=this.fb=0}function ze(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function rr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new In,this.f.kb=new ze,this.sd=null}function Rr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function re(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function xe(b,w){var C=b.T,L=w.ba.f.RGBA,j=L.eb,z=L.fb+b.ka*L.A,q=Ki[w.ba.S],H=b.y,V=b.O,Z=b.f,ct=b.N,xt=b.ea,_t=b.W,mt=w.cc,Ot=w.dc,Ct=w.Mc,ht=w.Nc,pt=b.ka,Tt=b.ka+b.T,Nt=b.U,Pt=Nt+1>>1;for(pt==0?q(H,V,null,null,Z,ct,xt,_t,Z,ct,xt,_t,j,z,null,null,Nt):(q(w.ec,w.fc,H,V,mt,Ot,Ct,ht,Z,ct,xt,_t,j,z-L.A,j,z,Nt),++C);pt+2<Tt;pt+=2)mt=Z,Ot=ct,Ct=xt,ht=_t,ct+=b.Rc,_t+=b.Rc,z+=2*L.A,q(H,(V+=2*b.fa)-b.fa,H,V,mt,Ot,Ct,ht,Z,ct,xt,_t,j,z-L.A,j,z,Nt);return V+=b.fa,b.j+Tt<b.o?(a(w.ec,w.fc,H,V,Nt),a(w.cc,w.dc,Z,ct,Pt),a(w.Mc,w.Nc,xt,_t,Pt),C--):1&Tt||q(H,V,null,null,Z,ct,xt,_t,Z,ct,xt,_t,j,z+L.A,null,null,Nt),C}function jn(b,w,C){var L=b.F,j=[b.J];if(L!=null){var z=b.U,q=w.ba.S,H=q==ko||q==Lo;w=w.ba.f.RGBA;var V=[0],Z=b.ka;V[0]=b.T,b.Kb&&(Z==0?--V[0]:(--Z,j[0]-=b.width),b.j+b.ka+b.T==b.o&&(V[0]=b.o-b.j-Z));var ct=w.eb;Z=w.fb+Z*w.A,b=je(L,j[0],b.width,z,V,ct,Z+(H?0:3),w.A),t(C==V),b&&we(q)&&Gi(ct,Z,H,z,V,w.A)}return 0}function ui(b){var w=b.ma,C=w.ba.S,L=11>C,j=C==Co||C==Ao||C==ko||C==Kl||C==12||we(C);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!wa(w.Oa,b,j?11:12))return 0;if(j&&we(C)&&Ft(),b.da)alert("todo:use_scaling");else{if(L){if(w.Ib=re,b.Kb){if(C=b.U+1>>1,w.memory=p(b.U+2*C),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+b.U,w.Mc=w.cc,w.Nc=w.dc+C,w.Ib=xe,Ft()}}else alert("todo:EmitYUV");j&&(w.Jb=jn,L&&wt())}if(L&&!Dh){for(b=0;256>b;++b)Ud[b]=89858*(b-128)+Po>>To,Yd[b]=-22014*(b-128)+Po,Hd[b]=-45773*(b-128),Wd[b]=113618*(b-128)+Po>>To;for(b=Pa;b<ic;++b)w=76283*(b-16)+Po>>To,Vd[b-Pa]=Bi(w,255),Xd[b-Pa]=Bi(w+8>>4,15);Dh=1}return 1}function Sr(b){var w=b.ma,C=b.U,L=b.T;return t(!(1&b.ka)),0>=C||0>=L?0:(C=w.Ib(b,w),w.Jb!=null&&w.Jb(b,w,C),w.Dc+=C,1)}function Cr(b){b.ma.memory=null}function Zt(b,w,C,L){return Y(b,8)!=47?0:(w[0]=Y(b,14)+1,C[0]=Y(b,14)+1,L[0]=Y(b,1),Y(b,3)!=0?0:!b.h)}function nr(b,w){if(4>b)return b+1;var C=b-2>>1;return(2+(1&b)<<C)+Y(w,C)+1}function Ar(b,w){return 120<w?w-120:1<=(C=((C=Td[w-1])>>4)*b+(8-(15&C)))?C:1;var C}function Oi(b,w,C){var L=R(C),j=b[w+=255&L].g-8;return 0<j&&(P(C,C.u+8),L=R(C),w+=b[w].value,w+=L&(1<<j)-1),P(C,C.u+b[w].g),b[w].value}function ni(b,w,C){return C.g+=b.g,C.value+=b.value<<w>>>0,t(8>=C.g),b.g}function Ze(b,w,C){var L=b.xc;return t((w=L==0?0:b.vc[b.md*(C>>L)+(w>>L)])<b.Wb),b.Ya[w]}function Di(b,w,C,L){var j=b.ab,z=b.c*w,q=b.C;w=q+w;var H=C,V=L;for(L=b.Ta,C=b.Ua;0<j--;){var Z=b.gc[j],ct=q,xt=w,_t=H,mt=V,Ot=(V=L,H=C,Z.Ea);switch(t(ct<xt),t(xt<=Z.nc),Z.hc){case 2:vo(_t,mt,(xt-ct)*Ot,V,H);break;case 0:var Ct=ct,ht=xt,pt=V,Tt=H,Nt=(zt=Z).Ea;Ct==0&&(Gl(_t,mt,null,null,1,pt,Tt),Yt(_t,mt+1,0,0,Nt-1,pt,Tt+1),mt+=Nt,Tt+=Nt,++Ct);for(var Pt=1<<zt.b,Ut=Pt-1,Dt=yt(Nt,zt.b),$t=zt.K,zt=zt.w+(Ct>>zt.b)*Dt;Ct<ht;){var ye=$t,Se=zt,be=1;for(Sa(_t,mt,pt,Tt-Nt,1,pt,Tt);be<Nt;){var de=(be&~Ut)+Pt;de>Nt&&(de=Nt),(0,cn[ye[Se++]>>8&15])(_t,mt+ +be,pt,Tt+be-Nt,de-be,pt,Tt+be),be=de}mt+=Nt,Tt+=Nt,++Ct&Ut||(zt+=Dt)}xt!=Z.nc&&a(V,H-Ot,V,H+(xt-ct-1)*Ot,Ot);break;case 1:for(Ot=_t,ht=mt,Nt=(_t=Z.Ea)-(Tt=_t&~(pt=(mt=1<<Z.b)-1)),Ct=yt(_t,Z.b),Pt=Z.K,Z=Z.w+(ct>>Z.b)*Ct;ct<xt;){for(Ut=Pt,Dt=Z,$t=new At,zt=ht+Tt,ye=ht+_t;ht<zt;)ie(Ut[Dt++],$t),Un($t,Ot,ht,mt,V,H),ht+=mt,H+=mt;ht<ye&&(ie(Ut[Dt++],$t),Un($t,Ot,ht,Nt,V,H),ht+=Nt,H+=Nt),++ct&pt||(Z+=Ct)}break;case 3:if(_t==V&&mt==H&&0<Z.b){for(ht=V,_t=Ot=H+(xt-ct)*Ot-(Tt=(xt-ct)*yt(Z.Ea,Z.b)),mt=V,pt=H,Ct=[],Tt=(Nt=Tt)-1;0<=Tt;--Tt)Ct[Tt]=mt[pt+Tt];for(Tt=Nt-1;0<=Tt;--Tt)ht[_t+Tt]=Ct[Tt];Yi(Z,ct,xt,V,Ot,V,H)}else Yi(Z,ct,xt,_t,mt,V,H)}H=L,V=C}V!=C&&a(L,C,H,V,z)}function is(b,w){var C=b.V,L=b.Ba+b.c*b.C,j=w-b.C;if(t(w<=b.l.o),t(16>=j),0<j){var z=b.l,q=b.Ta,H=b.Ua,V=z.width;if(Di(b,j,C,L),j=H=[H],t((C=b.C)<(L=w)),t(z.v<z.va),L>z.o&&(L=z.o),C<z.j){var Z=z.j-C;C=z.j,j[0]+=Z*V}if(C>=L?C=0:(j[0]+=4*z.v,z.ka=C-z.j,z.U=z.va-z.v,z.T=L-C,C=1),C){if(H=H[0],11>(C=b.ca).S){var ct=C.f.RGBA,xt=(L=C.S,j=z.U,z=z.T,Z=ct.eb,ct.A),_t=z;for(ct=ct.fb+b.Ma*ct.A;0<_t--;){var mt=q,Ot=H,Ct=j,ht=Z,pt=ct;switch(L){case So:Fi(mt,Ot,Ct,ht,pt);break;case Co:Ci(mt,Ot,Ct,ht,pt);break;case Jl:Ci(mt,Ot,Ct,ht,pt),Gi(ht,pt,0,Ct,1,0);break;case Th:Hr(mt,Ot,Ct,ht,pt);break;case Ao:Ee(mt,Ot,Ct,ht,pt,1);break;case Zl:Ee(mt,Ot,Ct,ht,pt,1),Gi(ht,pt,0,Ct,1,0);break;case ko:Ee(mt,Ot,Ct,ht,pt,0);break;case Lo:Ee(mt,Ot,Ct,ht,pt,0),Gi(ht,pt,1,Ct,1,0);break;case Kl:hn(mt,Ot,Ct,ht,pt);break;case Ql:hn(mt,Ot,Ct,ht,pt),Ie(ht,pt,Ct,1,0);break;case Ph:Wr(mt,Ot,Ct,ht,pt);break;default:t(0)}H+=V,ct+=xt}b.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=C.height)}}b.C=w,t(b.C<=b.i)}function zr(b){var w;if(0<b.ua)return 0;for(w=0;w<b.Wb;++w){var C=b.Ya[w].G,L=b.Ya[w].H;if(0<C[1][L[1]+0].g||0<C[2][L[2]+0].g||0<C[3][L[3]+0].g)return 0}return 1}function sr(b,w,C,L,j,z){if(b.Z!=0){var q=b.qd,H=b.rd;for(t(pn[b.Z]!=null);w<C;++w)pn[b.Z](q,H,L,j,L,j,z),q=L,H=j,j+=z;b.qd=q,b.rd=H}}function ar(b,w){var C=b.l.ma,L=C.Z==0||C.Z==1?b.l.j:b.C;if(L=b.C<L?L:b.C,t(w<=b.l.o),w>L){var j=b.l.width,z=C.ca,q=C.tb+j*L,H=b.V,V=b.Ba+b.c*L,Z=b.gc;t(b.ab==1),t(Z[0].hc==3),bo(Z[0],L,w,H,V,z,q),sr(C,L,w,z,q,j)}b.C=b.Ma=w}function or(b,w,C,L,j,z,q){var H=b.$/L,V=b.$%L,Z=b.m,ct=b.s,xt=C+b.$,_t=xt;j=C+L*j;var mt=C+L*z,Ot=280+ct.ua,Ct=b.Pb?H:16777216,ht=0<ct.ua?ct.Wa:null,pt=ct.wc,Tt=xt<mt?Ze(ct,V,H):null;t(b.C<z),t(mt<=j);var Nt=!1;t:for(;;){for(;Nt||xt<mt;){var Pt=0;if(H>=Ct){var Ut=xt-C;t((Ct=b).Pb),Ct.wd=Ct.m,Ct.xd=Ut,0<Ct.s.ua&&it(Ct.s.Wa,Ct.s.vb),Ct=H+Od}if(V&pt||(Tt=Ze(ct,V,H)),t(Tt!=null),Tt.Qb&&(w[xt]=Tt.qb,Nt=!0),!Nt)if(U(Z),Tt.jc){Pt=Z,Ut=w;var Dt=xt,$t=Tt.pd[R(Pt)&fi-1];t(Tt.jc),256>$t.g?(P(Pt,Pt.u+$t.g),Ut[Dt]=$t.value,Pt=0):(P(Pt,Pt.u+$t.g-256),t(256<=$t.value),Pt=$t.value),Pt==0&&(Nt=!0)}else Pt=Oi(Tt.G[0],Tt.H[0],Z);if(Z.h)break;if(Nt||256>Pt){if(!Nt)if(Tt.nd)w[xt]=(Tt.qb|Pt<<8)>>>0;else{if(U(Z),Nt=Oi(Tt.G[1],Tt.H[1],Z),U(Z),Ut=Oi(Tt.G[2],Tt.H[2],Z),Dt=Oi(Tt.G[3],Tt.H[3],Z),Z.h)break;w[xt]=(Dt<<24|Nt<<16|Pt<<8|Ut)>>>0}if(Nt=!1,++xt,++V>=L&&(V=0,++H,q!=null&&H<=z&&!(H%16)&&q(b,H),ht!=null))for(;_t<xt;)Pt=w[_t++],ht.X[(506832829*Pt&4294967295)>>>ht.Mb]=Pt}else if(280>Pt){if(Pt=nr(Pt-256,Z),Ut=Oi(Tt.G[4],Tt.H[4],Z),U(Z),Ut=Ar(L,Ut=nr(Ut,Z)),Z.h)break;if(xt-C<Ut||j-xt<Pt)break t;for(Dt=0;Dt<Pt;++Dt)w[xt+Dt]=w[xt+Dt-Ut];for(xt+=Pt,V+=Pt;V>=L;)V-=L,++H,q!=null&&H<=z&&!(H%16)&&q(b,H);if(t(xt<=j),V&pt&&(Tt=Ze(ct,V,H)),ht!=null)for(;_t<xt;)Pt=w[_t++],ht.X[(506832829*Pt&4294967295)>>>ht.Mb]=Pt}else{if(!(Pt<Ot))break t;for(Nt=Pt-280,t(ht!=null);_t<xt;)Pt=w[_t++],ht.X[(506832829*Pt&4294967295)>>>ht.Mb]=Pt;Pt=xt,t(!(Nt>>>(Ut=ht).Xa)),w[Pt]=Ut.X[Nt],Nt=!0}Nt||t(Z.h==N(Z))}if(b.Pb&&Z.h&&xt<j)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&it(b.s.vb,b.s.Wa);else{if(Z.h)break t;q!=null&&q(b,H>z?z:H),b.a=0,b.$=xt-C}return 1}return b.a=3,0}function kr(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var w=b.Wa;w!=null&&(w.X=null),b.vb=null,t(b!=null)}function Hi(){var b=new Xl;return b==null?null:(b.a=0,b.xb=Nh,_r("Predictor","VP8LPredictors"),_r("Predictor","VP8LPredictors_C"),_r("PredictorAdd","VP8LPredictorsAdd"),_r("PredictorAdd","VP8LPredictorsAdd_C"),vo=Vt,Un=Wt,Fi=Bt,Ci=Te,hn=pe,Wr=Pi,Hr=_e,O.VP8LMapColor32b=_s,O.VP8LMapColor8b=yo,b)}function Lr(b,w,C,L,j){var z=1,q=[b],H=[w],V=L.m,Z=L.s,ct=null,xt=0;t:for(;;){if(C)for(;z&&Y(V,1);){var _t=q,mt=H,Ot=L,Ct=1,ht=Ot.m,pt=Ot.gc[Ot.ab],Tt=Y(ht,2);if(Ot.Oc&1<<Tt)z=0;else{switch(Ot.Oc|=1<<Tt,pt.hc=Tt,pt.Ea=_t[0],pt.nc=mt[0],pt.K=[null],++Ot.ab,t(4>=Ot.ab),Tt){case 0:case 1:pt.b=Y(ht,3)+2,Ct=Lr(yt(pt.Ea,pt.b),yt(pt.nc,pt.b),0,Ot,pt.K),pt.K=pt.K[0];break;case 3:var Nt,Pt=Y(ht,8)+1,Ut=16<Pt?0:4<Pt?1:2<Pt?2:3;if(_t[0]=yt(pt.Ea,Ut),pt.b=Ut,Nt=Ct=Lr(Pt,1,0,Ot,pt.K)){var Dt,$t=Pt,zt=pt,ye=1<<(8>>zt.b),Se=p(ye);if(Se==null)Nt=0;else{var be=zt.K[0],de=zt.w;for(Se[0]=zt.K[0][0],Dt=1;Dt<1*$t;++Dt)Se[Dt]=bt(be[de+Dt],Se[Dt-1]);for(;Dt<4*ye;++Dt)Se[Dt]=0;zt.K[0]=null,zt.K[0]=Se,Nt=1}}Ct=Nt;break;case 2:break;default:t(0)}z=Ct}}if(q=q[0],H=H[0],z&&Y(V,1)&&!(z=1<=(xt=Y(V,4))&&11>=xt)){L.a=3;break t}var Pe;if(Pe=z)e:{var ke,le,ti,Ei=L,ei=q,Ii=H,Ce=xt,zi=C,qi=Ei.m,oi=Ei.s,di=[null],ki=1,Ji=0,Mr=Pd[Ce];i:for(;;){if(zi&&Y(qi,1)){var li=Y(qi,3)+2,Gr=yt(ei,li),Xn=yt(Ii,li),Ls=Gr*Xn;if(!Lr(Gr,Xn,0,Ei,di))break i;for(di=di[0],oi.xc=li,ke=0;ke<Ls;++ke){var gn=di[ke]>>8&65535;di[ke]=gn,gn>=ki&&(ki=gn+1)}}if(qi.h)break i;for(le=0;5>le;++le){var We=Oh[le];!le&&0<Ce&&(We+=1<<Ce),Ji<We&&(Ji=We)}var rc=v(ki*Mr,I),zh=ki,qh=v(zh,G);if(qh==null)var Mo=null;else t(65536>=zh),Mo=qh;var Oa=p(Ji);if(Mo==null||Oa==null||rc==null){Ei.a=1;break i}var No=rc;for(ke=ti=0;ke<ki;++ke){var fr=Mo[ke],Ts=fr.G,Ps=fr.H,Uh=0,Fo=1,Wh=0;for(le=0;5>le;++le){We=Oh[le],Ts[le]=No,Ps[le]=ti,!le&&0<Ce&&(We+=1<<Ce);n:{var Eo,nc=We,Io=Ei,Ma=Oa,Kd=No,Jd=ti,sc=0,mn=Io.m,Zd=Y(mn,1);if(d(Ma,0,0,nc),Zd){var Qd=Y(mn,1)+1,t0=Y(mn,1),Hh=Y(mn,t0==0?1:8);Ma[Hh]=1,Qd==2&&(Ma[Hh=Y(mn,8)]=1);var jo=1}else{var Yh=p(19),Vh=Y(mn,4)+4;if(19<Vh){Io.a=3;var Do=0;break n}for(Eo=0;Eo<Vh;++Eo)Yh[Ld[Eo]]=Y(mn,3);var ac=void 0,Na=void 0,Xh=Io,e0=Yh,Bo=nc,Gh=Ma,oc=0,vn=Xh.m,$h=8,Kh=v(128,I);r:for(;F(Kh,0,7,e0,19);){if(Y(vn,1)){var i0=2+2*Y(vn,3);if((ac=2+Y(vn,i0))>Bo)break r}else ac=Bo;for(Na=0;Na<Bo&&ac--;){U(vn);var Jh=Kh[0+(127&R(vn))];P(vn,vn.u+Jh.g);var Os=Jh.value;if(16>Os)Gh[Na++]=Os,Os!=0&&($h=Os);else{var r0=Os==16,Zh=Os-16,n0=Ad[Zh],Qh=Y(vn,Cd[Zh])+n0;if(Na+Qh>Bo)break r;for(var s0=r0?$h:0;0<Qh--;)Gh[Na++]=s0}}oc=1;break r}oc||(Xh.a=3),jo=oc}(jo=jo&&!mn.h)&&(sc=F(Kd,Jd,8,Ma,nc)),jo&&sc!=0?Do=sc:(Io.a=3,Do=0)}if(Do==0)break i;if(Fo&&kd[le]==1&&(Fo=No[ti].g==0),Uh+=No[ti].g,ti+=Do,3>=le){var Fa,lc=Oa[0];for(Fa=1;Fa<We;++Fa)Oa[Fa]>lc&&(lc=Oa[Fa]);Wh+=lc}}if(fr.nd=Fo,fr.Qb=0,Fo&&(fr.qb=(Ts[3][Ps[3]+0].value<<24|Ts[1][Ps[1]+0].value<<16|Ts[2][Ps[2]+0].value)>>>0,Uh==0&&256>Ts[0][Ps[0]+0].value&&(fr.Qb=1,fr.qb+=Ts[0][Ps[0]+0].value<<8)),fr.jc=!fr.Qb&&6>Wh,fr.jc){var Ro,$r=fr;for(Ro=0;Ro<fi;++Ro){var bn=Ro,yn=$r.pd[bn],zo=$r.G[0][$r.H[0]+bn];256<=zo.value?(yn.g=zo.g+256,yn.value=zo.value):(yn.g=0,yn.value=0,bn>>=ni(zo,8,yn),bn>>=ni($r.G[1][$r.H[1]+bn],16,yn),bn>>=ni($r.G[2][$r.H[2]+bn],0,yn),ni($r.G[3][$r.H[3]+bn],24,yn))}}}oi.vc=di,oi.Wb=ki,oi.Ya=Mo,oi.yc=rc,Pe=1;break e}Pe=0}if(!(z=Pe)){L.a=3;break t}if(0<xt){if(Z.ua=1<<xt,!st(Z.Wa,xt)){L.a=1,z=0;break t}}else Z.ua=0;var cc=L,tu=q,a0=H,hc=cc.s,uc=hc.xc;if(cc.c=tu,cc.i=a0,hc.md=yt(tu,uc),hc.wc=uc==0?-1:(1<<uc)-1,C){L.xb=Dd;break t}if((ct=p(q*H))==null){L.a=1,z=0;break t}z=(z=or(L,ct,0,q,H,H,null))&&!V.h;break t}return z?(j!=null?j[0]=ct:(t(ct==null),t(C)),L.$=0,C||kr(Z)):kr(Z),z}function Dn(b,w){var C=b.c*b.i,L=C+w+16*w;return t(b.c<=w),b.V=p(L),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+C+w,1)}function rs(b,w){var C=b.C,L=w-C,j=b.V,z=b.Ba+b.c*C;for(t(w<=b.l.o);0<L;){var q=16<L?16:L,H=b.l.ma,V=b.l.width,Z=V*q,ct=H.ca,xt=H.tb+V*C,_t=b.Ta,mt=b.Ua;Di(b,q,j,z),Ge(_t,mt,ct,xt,Z),sr(H,C,C+q,ct,xt,V),L-=q,j+=q*b.c,C+=q}t(C==w),b.C=b.Ma=w}function ns(){this.ub=this.yd=this.td=this.Rb=0}function ss(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function as(){this.Fb=this.Bb=this.Cb=0,this.Zb=p(4),this.Lb=p(4)}function Ka(){this.Yb=function(){var b=[];return function w(C,L,j){for(var z=j[L],q=0;q<z&&(C.push(j.length>L+1?[]:0),!(j.length<L+1));q++)w(C[q],L+1,j)}(b,0,[3,11]),b}()}function Cl(){this.jb=p(3),this.Wc=o([4,8],Ka),this.Xc=o([4,17],Ka)}function Al(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new p(4),this.od=new p(4)}function os(){this.ld=this.La=this.dd=this.tc=0}function Ja(){this.Na=this.la=0}function kl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function na(){this.ad=p(384),this.Za=0,this.Ob=p(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ll(){this.uc=this.M=this.Nb=0,this.wa=Array(new os),this.Y=0,this.ya=Array(new na),this.aa=0,this.l=new ls}function Za(){this.y=p(16),this.f=p(8),this.ea=p(8)}function Tl(){this.cb=this.a=0,this.sc="",this.m=new J,this.Od=new ns,this.Kc=new ss,this.ed=new Al,this.Qa=new as,this.Ic=this.$c=this.Aa=0,this.D=new Ll,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=v(8,J),this.ia=0,this.pb=v(4,kl),this.Pa=new Cl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Za),this.Hd=0,this.rb=Array(new Ja),this.sb=0,this.wa=Array(new os),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new na),this.L=this.aa=0,this.gd=o([4,2],os),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ls(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Pl(){var b=new Tl;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,Ta||(Ta=eo)),b}function Ve(b,w,C){return b.a==0&&(b.a=w,b.sc=C,b.cb=0),0}function Qa(b,w,C){return 3<=C&&b[w+0]==157&&b[w+1]==1&&b[w+2]==42}function to(b,w){if(b==null)return 0;if(b.a=0,b.sc="OK",w==null)return Ve(b,2,"null VP8Io passed to VP8GetHeaders()");var C=w.data,L=w.w,j=w.ha;if(4>j)return Ve(b,7,"Truncated header.");var z=C[L+0]|C[L+1]<<8|C[L+2]<<16,q=b.Od;if(q.Rb=!(1&z),q.td=z>>1&7,q.yd=z>>4&1,q.ub=z>>5,3<q.td)return Ve(b,3,"Incorrect keyframe parameters.");if(!q.yd)return Ve(b,4,"Frame not displayable.");L+=3,j-=3;var H=b.Kc;if(q.Rb){if(7>j)return Ve(b,7,"cannot parse picture header");if(!Qa(C,L,j))return Ve(b,3,"Bad code word");H.c=16383&(C[L+4]<<8|C[L+3]),H.Td=C[L+4]>>6,H.i=16383&(C[L+6]<<8|C[L+5]),H.Ud=C[L+6]>>6,L+=7,j-=7,b.za=H.c+15>>4,b.Ub=H.i+15>>4,w.width=H.c,w.height=H.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,d((z=b.Pa).jb,0,255,z.jb.length),t((z=b.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,d(z.Zb,0,0,z.Zb.length),d(z.Lb,0,0,z.Lb)}if(q.ub>j)return Ve(b,7,"bad partition length");rt(z=b.m,C,L,q.ub),L+=q.ub,j-=q.ub,q.Rb&&(H.Ld=tt(z),H.Kd=tt(z)),H=b.Qa;var V,Z=b.Pa;if(t(z!=null),t(H!=null),H.Cb=tt(z),H.Cb){if(H.Bb=tt(z),tt(z)){for(H.Fb=tt(z),V=0;4>V;++V)H.Zb[V]=tt(z)?gt(z,7):0;for(V=0;4>V;++V)H.Lb[V]=tt(z)?gt(z,6):0}if(H.Bb)for(V=0;3>V;++V)Z.jb[V]=tt(z)?at(z,8):255}else H.Bb=0;if(z.Ka)return Ve(b,3,"cannot parse segment header");if((H=b.ed).zd=tt(z),H.Tb=at(z,6),H.wb=at(z,3),H.Pc=tt(z),H.Pc&&tt(z)){for(Z=0;4>Z;++Z)tt(z)&&(H.vd[Z]=gt(z,6));for(Z=0;4>Z;++Z)tt(z)&&(H.od[Z]=gt(z,6))}if(b.L=H.Tb==0?0:H.zd?1:2,z.Ka)return Ve(b,3,"cannot parse filter header");var ct=j;if(j=V=L,L=V+ct,H=ct,b.Xb=(1<<at(b.m,2))-1,ct<3*(Z=b.Xb))C=7;else{for(V+=3*Z,H-=3*Z,ct=0;ct<Z;++ct){var xt=C[j+0]|C[j+1]<<8|C[j+2]<<16;xt>H&&(xt=H),rt(b.Jc[+ct],C,V,xt),V+=xt,H-=xt,j+=3}rt(b.Jc[+Z],C,V,H),C=V<L?0:5}if(C!=0)return Ve(b,C,"cannot parse partitions");for(C=at(V=b.m,7),j=tt(V)?gt(V,4):0,L=tt(V)?gt(V,4):0,H=tt(V)?gt(V,4):0,Z=tt(V)?gt(V,4):0,V=tt(V)?gt(V,4):0,ct=b.Qa,xt=0;4>xt;++xt){if(ct.Cb){var _t=ct.Zb[xt];ct.Fb||(_t+=C)}else{if(0<xt){b.pb[xt]=b.pb[0];continue}_t=C}var mt=b.pb[xt];mt.Sc[0]=tc[Bi(_t+j,127)],mt.Sc[1]=ec[Bi(_t+0,127)],mt.Eb[0]=2*tc[Bi(_t+L,127)],mt.Eb[1]=101581*ec[Bi(_t+H,127)]>>16,8>mt.Eb[1]&&(mt.Eb[1]=8),mt.Qc[0]=tc[Bi(_t+Z,117)],mt.Qc[1]=ec[Bi(_t+V,127)],mt.lc=_t+V}if(!q.Rb)return Ve(b,4,"Not a key frame.");for(tt(z),q=b.Pa,C=0;4>C;++C){for(j=0;8>j;++j)for(L=0;3>L;++L)for(H=0;11>H;++H)Z=Q(z,Id[C][j][L][H])?at(z,8):Fd[C][j][L][H],q.Wc[C][j].Yb[L][H]=Z;for(j=0;17>j;++j)q.Xc[C][j]=q.Wc[C][jd[j]]}return b.kc=tt(z),b.kc&&(b.Bd=at(z,8)),b.cb=1}function eo(b,w,C,L,j,z,q){var H=w[j].Yb[C];for(C=0;16>j;++j){if(!Q(b,H[C+0]))return j;for(;!Q(b,H[C+1]);)if(H=w[++j].Yb[0],C=0,j==16)return 16;var V=w[j+1].Yb;if(Q(b,H[C+2])){var Z=b,ct=0;if(Q(Z,(_t=H)[(xt=C)+3]))if(Q(Z,_t[xt+6])){for(H=0,xt=2*(ct=Q(Z,_t[xt+8]))+(_t=Q(Z,_t[xt+9+ct])),ct=0,_t=Md[xt];_t[H];++H)ct+=ct+Q(Z,_t[H]);ct+=3+(8<<xt)}else Q(Z,_t[xt+7])?(ct=7+2*Q(Z,165),ct+=Q(Z,145)):ct=5+Q(Z,159);else ct=Q(Z,_t[xt+4])?3+Q(Z,_t[xt+5]):2;H=V[2]}else ct=1,H=V[1];V=q+Nd[j],0>(Z=b).b&&$(Z);var xt,_t=Z.b,mt=(xt=Z.Ca>>1)-(Z.I>>_t)>>31;--Z.b,Z.Ca+=mt,Z.Ca|=1,Z.I-=(xt+1&mt)<<_t,z[V]=((ct^mt)-mt)*L[(0<j)+0]}return 16}function sa(b){var w=b.rb[b.sb-1];w.la=0,w.Na=0,d(b.zc,0,0,b.zc.length),b.ja=0}function Ol(b,w){if(b==null)return 0;if(w==null)return Ve(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!to(b,w))return 0;if(t(b.cb),w.ac==null||w.ac(w)){w.ob&&(b.L=0);var C=Oo[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=w.v-C>>4,b.zb=w.j-C>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=w.o+15+C>>4,b.Hb=w.va+15+C>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var L=b.ed;for(C=0;4>C;++C){var j;if(b.Qa.Cb){var z=b.Qa.Lb[C];b.Qa.Fb||(z+=L.Tb)}else z=L.Tb;for(j=0;1>=j;++j){var q=b.gd[C][j],H=z;if(L.Pc&&(H+=L.vd[0],j&&(H+=L.od[0])),0<(H=0>H?0:63<H?63:H)){var V=H;0<L.wb&&(V=4<L.wb?V>>2:V>>1)>9-L.wb&&(V=9-L.wb),1>V&&(V=1),q.dd=V,q.tc=2*H+V,q.ld=40<=H?2:15<=H?1:0}else q.tc=0;q.La=j}}}C=0}else Ve(b,6,"Frame setup failed"),C=b.a;if(C=C==0){if(C){b.$c=0,0<b.Aa||(b.Ic=$d);t:{C=b.Ic,L=4*(V=b.za);var Z=32*V,ct=V+1,xt=0<b.L?V*(0<b.Aa?2:1):0,_t=(b.Aa==2?2:1)*V;if((q=L+832+(j=3*(16*C+Oo[b.L])/2*Z)+(z=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=q)C=0;else{if(q>b.Vb){if(b.Vb=0,b.Ec=p(q),b.Fc=0,b.Ec==null){C=Ve(b,1,"no memory during frame initialization.");break t}b.Vb=q}q=b.Ec,H=b.Fc,b.Ac=q,b.Bc=H,H+=L,b.Gd=v(Z,Za),b.Hd=0,b.rb=v(ct+1,Ja),b.sb=1,b.wa=xt?v(xt,os):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=V),t(!0),b.oc=q,b.pc=H,H+=832,b.ya=v(_t,na),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=V),b.R=16*V,b.B=8*V,V=(Z=Oo[b.L])*b.R,Z=Z/2*b.B,b.sa=q,b.ta=H+V,b.qa=b.sa,b.ra=b.ta+16*C*b.R+Z,b.Ha=b.qa,b.Ia=b.ra+8*C*b.B+Z,b.$c=0,H+=j,b.mb=z?q:null,b.nb=z?H:null,t(H+z<=b.Fc+b.Vb),sa(b),d(b.Ac,b.Bc,0,L),C=1}}if(C){if(w.ka=0,w.y=b.sa,w.O=b.ta,w.f=b.qa,w.N=b.ra,w.ea=b.Ha,w.Vd=b.Ia,w.fa=b.R,w.Rc=b.B,w.F=null,w.J=0,!xo){for(C=-255;255>=C;++C)si[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)Vr[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)La[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)ks[255+C]=0>C?0:255<C?255:C;xo=1}Ss=Fl,Yr=Ml,Ca=ro,Ai=Nl,Vi=no,Xe=io,Cs=ua,wo=zn,Aa=Vl,Wn=fa,Hn=Yl,un=ps,Yn=da,As=po,Vn=fo,fn=Pr,ka=Ur,Xi=Hl,ur[0]=Tr,ur[1]=El,ur[2]=Bl,ur[3]=Rl,ur[4]=oo,ur[5]=fs,ur[6]=lo,ur[7]=la,ur[8]=ql,ur[9]=zl,dn[0]=so,dn[1]=jl,dn[2]=qr,dn[3]=hs,dn[4]=mi,dn[5]=Dl,dn[6]=ao,Xr[0]=an,Xr[1]=Il,Xr[2]=Ul,Xr[3]=ca,Xr[4]=Rn,Xr[5]=Wl,Xr[6]=ha,C=1}else C=0}C&&(C=function(mt,Ot){for(mt.M=0;mt.M<mt.Va;++mt.M){var Ct,ht=mt.Jc[mt.M&mt.Xb],pt=mt.m,Tt=mt;for(Ct=0;Ct<Tt.za;++Ct){var Nt=pt,Pt=Tt,Ut=Pt.Ac,Dt=Pt.Bc+4*Ct,$t=Pt.zc,zt=Pt.ya[Pt.aa+Ct];if(Pt.Qa.Bb?zt.$b=Q(Nt,Pt.Pa.jb[0])?2+Q(Nt,Pt.Pa.jb[2]):Q(Nt,Pt.Pa.jb[1]):zt.$b=0,Pt.kc&&(zt.Ad=Q(Nt,Pt.Bd)),zt.Za=!Q(Nt,145)+0,zt.Za){var ye=zt.Ob,Se=0;for(Pt=0;4>Pt;++Pt){var be,de=$t[0+Pt];for(be=0;4>be;++be){de=Ed[Ut[Dt+be]][de];for(var Pe=Mh[Q(Nt,de[0])];0<Pe;)Pe=Mh[2*Pe+Q(Nt,de[Pe])];de=-Pe,Ut[Dt+be]=de}a(ye,Se,Ut,Dt,4),Se+=4,$t[0+Pt]=de}}else de=Q(Nt,156)?Q(Nt,128)?1:3:Q(Nt,163)?2:0,zt.Ob[0]=de,d(Ut,Dt,de,4),d($t,0,de,4);zt.Dd=Q(Nt,142)?Q(Nt,114)?Q(Nt,183)?1:3:2:0}if(Tt.m.Ka)return Ve(mt,7,"Premature end-of-partition0 encountered.");for(;mt.ja<mt.za;++mt.ja){if(Tt=ht,Nt=(pt=mt).rb[pt.sb-1],Ut=pt.rb[pt.sb+pt.ja],Ct=pt.ya[pt.aa+pt.ja],Dt=pt.kc?Ct.Ad:0)Nt.la=Ut.la=0,Ct.Za||(Nt.Na=Ut.Na=0),Ct.Hc=0,Ct.Gc=0,Ct.ia=0;else{var ke,le;if(Nt=Ut,Ut=Tt,Dt=pt.Pa.Xc,$t=pt.ya[pt.aa+pt.ja],zt=pt.pb[$t.$b],Pt=$t.ad,ye=0,Se=pt.rb[pt.sb-1],de=be=0,d(Pt,ye,0,384),$t.Za)var ti=0,Ei=Dt[3];else{Pe=p(16);var ei=Nt.Na+Se.Na;if(ei=Ta(Ut,Dt[1],ei,zt.Eb,0,Pe,0),Nt.Na=Se.Na=(0<ei)+0,1<ei)Ss(Pe,0,Pt,ye);else{var Ii=Pe[0]+3>>3;for(Pe=0;256>Pe;Pe+=16)Pt[ye+Pe]=Ii}ti=1,Ei=Dt[0]}var Ce=15&Nt.la,zi=15&Se.la;for(Pe=0;4>Pe;++Pe){var qi=1&zi;for(Ii=le=0;4>Ii;++Ii)Ce=Ce>>1|(qi=(ei=Ta(Ut,Ei,ei=qi+(1&Ce),zt.Sc,ti,Pt,ye))>ti)<<7,le=le<<2|(3<ei?3:1<ei?2:Pt[ye+0]!=0),ye+=16;Ce>>=4,zi=zi>>1|qi<<7,be=(be<<8|le)>>>0}for(Ei=Ce,ti=zi>>4,ke=0;4>ke;ke+=2){for(le=0,Ce=Nt.la>>4+ke,zi=Se.la>>4+ke,Pe=0;2>Pe;++Pe){for(qi=1&zi,Ii=0;2>Ii;++Ii)ei=qi+(1&Ce),Ce=Ce>>1|(qi=0<(ei=Ta(Ut,Dt[2],ei,zt.Qc,0,Pt,ye)))<<3,le=le<<2|(3<ei?3:1<ei?2:Pt[ye+0]!=0),ye+=16;Ce>>=2,zi=zi>>1|qi<<5}de|=le<<4*ke,Ei|=Ce<<4<<ke,ti|=(240&zi)<<ke}Nt.la=Ei,Se.la=ti,$t.Hc=be,$t.Gc=de,$t.ia=43690&de?0:zt.ia,Dt=!(be|de)}if(0<pt.L&&(pt.wa[pt.Y+pt.ja]=pt.gd[Ct.$b][Ct.Za],pt.wa[pt.Y+pt.ja].La|=!Dt),Tt.Ka)return Ve(mt,7,"Premature end-of-file encountered.")}if(sa(mt),pt=Ot,Tt=1,Ct=(ht=mt).D,Nt=0<ht.L&&ht.M>=ht.zb&&ht.M<=ht.Va,ht.Aa==0)t:{if(Ct.M=ht.M,Ct.uc=Nt,ya(ht,Ct),Tt=1,Ct=(le=ht.D).Nb,Nt=(de=Oo[ht.L])*ht.R,Ut=de/2*ht.B,Pe=16*Ct*ht.R,Ii=8*Ct*ht.B,Dt=ht.sa,$t=ht.ta-Nt+Pe,zt=ht.qa,Pt=ht.ra-Ut+Ii,ye=ht.Ha,Se=ht.Ia-Ut+Ii,zi=(Ce=le.M)==0,be=Ce>=ht.Va-1,ht.Aa==2&&ya(ht,le),le.uc)for(qi=(ei=ht).D.M,t(ei.D.uc),le=ei.yb;le<ei.Hb;++le){ti=le,Ei=qi;var oi=(di=(We=ei).D).Nb;ke=We.R;var di=di.wa[di.Y+ti],ki=We.sa,Ji=We.ta+16*oi*ke+16*ti,Mr=di.dd,li=di.tc;if(li!=0)if(t(3<=li),We.L==1)0<ti&&fn(ki,Ji,ke,li+4),di.La&&Xi(ki,Ji,ke,li),0<Ei&&Vn(ki,Ji,ke,li+4),di.La&&ka(ki,Ji,ke,li);else{var Gr=We.B,Xn=We.qa,Ls=We.ra+8*oi*Gr+8*ti,gn=We.Ha,We=We.Ia+8*oi*Gr+8*ti;oi=di.ld,0<ti&&(wo(ki,Ji,ke,li+4,Mr,oi),Wn(Xn,Ls,gn,We,Gr,li+4,Mr,oi)),di.La&&(un(ki,Ji,ke,li,Mr,oi),As(Xn,Ls,gn,We,Gr,li,Mr,oi)),0<Ei&&(Cs(ki,Ji,ke,li+4,Mr,oi),Aa(Xn,Ls,gn,We,Gr,li+4,Mr,oi)),di.La&&(Hn(ki,Ji,ke,li,Mr,oi),Yn(Xn,Ls,gn,We,Gr,li,Mr,oi))}}if(ht.ia&&alert("todo:DitherRow"),pt.put!=null){if(le=16*Ce,Ce=16*(Ce+1),zi?(pt.y=ht.sa,pt.O=ht.ta+Pe,pt.f=ht.qa,pt.N=ht.ra+Ii,pt.ea=ht.Ha,pt.W=ht.Ia+Ii):(le-=de,pt.y=Dt,pt.O=$t,pt.f=zt,pt.N=Pt,pt.ea=ye,pt.W=Se),be||(Ce-=de),Ce>pt.o&&(Ce=pt.o),pt.F=null,pt.J=null,ht.Fa!=null&&0<ht.Fa.length&&le<Ce&&(pt.J=va(ht,pt,le,Ce-le),pt.F=ht.mb,pt.F==null&&pt.F.length==0)){Tt=Ve(ht,3,"Could not decode alpha data.");break t}le<pt.j&&(de=pt.j-le,le=pt.j,t(!(1&de)),pt.O+=ht.R*de,pt.N+=ht.B*(de>>1),pt.W+=ht.B*(de>>1),pt.F!=null&&(pt.J+=pt.width*de)),le<Ce&&(pt.O+=pt.v,pt.N+=pt.v>>1,pt.W+=pt.v>>1,pt.F!=null&&(pt.J+=pt.v),pt.ka=le-pt.j,pt.U=pt.va-pt.v,pt.T=Ce-le,Tt=pt.put(pt))}Ct+1!=ht.Ic||be||(a(ht.sa,ht.ta-Nt,Dt,$t+16*ht.R,Nt),a(ht.qa,ht.ra-Ut,zt,Pt+8*ht.B,Ut),a(ht.Ha,ht.Ia-Ut,ye,Se+8*ht.B,Ut))}if(!Tt)return Ve(mt,6,"Output aborted.")}return 1}(b,w)),w.bc!=null&&w.bc(w),C&=1}return C?(b.cb=0,C):0}function lr(b,w,C,L,j){j=b[w+C+32*L]+(j>>3),b[w+C+32*L]=-256&j?0>j?0:255:j}function cs(b,w,C,L,j,z){lr(b,w,0,C,L+j),lr(b,w,1,C,L+z),lr(b,w,2,C,L-z),lr(b,w,3,C,L-j)}function Mi(b){return(20091*b>>16)+b}function aa(b,w,C,L){var j,z=0,q=p(16);for(j=0;4>j;++j){var H=b[w+0]+b[w+8],V=b[w+0]-b[w+8],Z=(35468*b[w+4]>>16)-Mi(b[w+12]),ct=Mi(b[w+4])+(35468*b[w+12]>>16);q[z+0]=H+ct,q[z+1]=V+Z,q[z+2]=V-Z,q[z+3]=H-ct,z+=4,w++}for(j=z=0;4>j;++j)H=(b=q[z+0]+4)+q[z+8],V=b-q[z+8],Z=(35468*q[z+4]>>16)-Mi(q[z+12]),lr(C,L,0,0,H+(ct=Mi(q[z+4])+(35468*q[z+12]>>16))),lr(C,L,1,0,V+Z),lr(C,L,2,0,V-Z),lr(C,L,3,0,H-ct),z++,L+=32}function io(b,w,C,L){var j=b[w+0]+4,z=35468*b[w+4]>>16,q=Mi(b[w+4]),H=35468*b[w+1]>>16;cs(C,L,0,j+q,b=Mi(b[w+1]),H),cs(C,L,1,j+z,b,H),cs(C,L,2,j-z,b,H),cs(C,L,3,j-q,b,H)}function Ml(b,w,C,L,j){aa(b,w,C,L),j&&aa(b,w+16,C,L+4)}function ro(b,w,C,L){Yr(b,w+0,C,L,1),Yr(b,w+32,C,L+128,1)}function Nl(b,w,C,L){var j;for(b=b[w+0]+4,j=0;4>j;++j)for(w=0;4>w;++w)lr(C,L,w,j,b)}function no(b,w,C,L){b[w+0]&&Ai(b,w+0,C,L),b[w+16]&&Ai(b,w+16,C,L+4),b[w+32]&&Ai(b,w+32,C,L+128),b[w+48]&&Ai(b,w+48,C,L+128+4)}function Fl(b,w,C,L){var j,z=p(16);for(j=0;4>j;++j){var q=b[w+0+j]+b[w+12+j],H=b[w+4+j]+b[w+8+j],V=b[w+4+j]-b[w+8+j],Z=b[w+0+j]-b[w+12+j];z[0+j]=q+H,z[8+j]=q-H,z[4+j]=Z+V,z[12+j]=Z-V}for(j=0;4>j;++j)q=(b=z[0+4*j]+3)+z[3+4*j],H=z[1+4*j]+z[2+4*j],V=z[1+4*j]-z[2+4*j],Z=b-z[3+4*j],C[L+0]=q+H>>3,C[L+16]=Z+V>>3,C[L+32]=q-H>>3,C[L+48]=Z-V>>3,L+=64}function oa(b,w,C){var L,j=w-32,z=Ri,q=255-b[j-1];for(L=0;L<C;++L){var H,V=z,Z=q+b[w-1];for(H=0;H<C;++H)b[w+H]=V[Z+b[j+H]];w+=32}}function El(b,w){oa(b,w,4)}function Il(b,w){oa(b,w,8)}function jl(b,w){oa(b,w,16)}function qr(b,w){var C;for(C=0;16>C;++C)a(b,w+32*C,b,w-32,16)}function hs(b,w){var C;for(C=16;0<C;--C)d(b,w,b[w-1],16),w+=32}function us(b,w,C){var L;for(L=0;16>L;++L)d(w,C+32*L,b,16)}function so(b,w){var C,L=16;for(C=0;16>C;++C)L+=b[w-1+32*C]+b[w+C-32];us(L>>5,b,w)}function mi(b,w){var C,L=8;for(C=0;16>C;++C)L+=b[w-1+32*C];us(L>>4,b,w)}function Dl(b,w){var C,L=8;for(C=0;16>C;++C)L+=b[w+C-32];us(L>>4,b,w)}function ao(b,w){us(128,b,w)}function ee(b,w,C){return b+2*w+C+2>>2}function Bl(b,w){var C,L=w-32;for(L=new Uint8Array([ee(b[L-1],b[L+0],b[L+1]),ee(b[L+0],b[L+1],b[L+2]),ee(b[L+1],b[L+2],b[L+3]),ee(b[L+2],b[L+3],b[L+4])]),C=0;4>C;++C)a(b,w+32*C,L,0,L.length)}function Rl(b,w){var C=b[w-1],L=b[w-1+32],j=b[w-1+64],z=b[w-1+96];ut(b,w+0,16843009*ee(b[w-1-32],C,L)),ut(b,w+32,16843009*ee(C,L,j)),ut(b,w+64,16843009*ee(L,j,z)),ut(b,w+96,16843009*ee(j,z,z))}function Tr(b,w){var C,L=4;for(C=0;4>C;++C)L+=b[w+C-32]+b[w-1+32*C];for(L>>=3,C=0;4>C;++C)d(b,w+32*C,L,4)}function oo(b,w){var C=b[w-1+0],L=b[w-1+32],j=b[w-1+64],z=b[w-1-32],q=b[w+0-32],H=b[w+1-32],V=b[w+2-32],Z=b[w+3-32];b[w+0+96]=ee(L,j,b[w-1+96]),b[w+1+96]=b[w+0+64]=ee(C,L,j),b[w+2+96]=b[w+1+64]=b[w+0+32]=ee(z,C,L),b[w+3+96]=b[w+2+64]=b[w+1+32]=b[w+0+0]=ee(q,z,C),b[w+3+64]=b[w+2+32]=b[w+1+0]=ee(H,q,z),b[w+3+32]=b[w+2+0]=ee(V,H,q),b[w+3+0]=ee(Z,V,H)}function lo(b,w){var C=b[w+1-32],L=b[w+2-32],j=b[w+3-32],z=b[w+4-32],q=b[w+5-32],H=b[w+6-32],V=b[w+7-32];b[w+0+0]=ee(b[w+0-32],C,L),b[w+1+0]=b[w+0+32]=ee(C,L,j),b[w+2+0]=b[w+1+32]=b[w+0+64]=ee(L,j,z),b[w+3+0]=b[w+2+32]=b[w+1+64]=b[w+0+96]=ee(j,z,q),b[w+3+32]=b[w+2+64]=b[w+1+96]=ee(z,q,H),b[w+3+64]=b[w+2+96]=ee(q,H,V),b[w+3+96]=ee(H,V,V)}function fs(b,w){var C=b[w-1+0],L=b[w-1+32],j=b[w-1+64],z=b[w-1-32],q=b[w+0-32],H=b[w+1-32],V=b[w+2-32],Z=b[w+3-32];b[w+0+0]=b[w+1+64]=z+q+1>>1,b[w+1+0]=b[w+2+64]=q+H+1>>1,b[w+2+0]=b[w+3+64]=H+V+1>>1,b[w+3+0]=V+Z+1>>1,b[w+0+96]=ee(j,L,C),b[w+0+64]=ee(L,C,z),b[w+0+32]=b[w+1+96]=ee(C,z,q),b[w+1+32]=b[w+2+96]=ee(z,q,H),b[w+2+32]=b[w+3+96]=ee(q,H,V),b[w+3+32]=ee(H,V,Z)}function la(b,w){var C=b[w+0-32],L=b[w+1-32],j=b[w+2-32],z=b[w+3-32],q=b[w+4-32],H=b[w+5-32],V=b[w+6-32],Z=b[w+7-32];b[w+0+0]=C+L+1>>1,b[w+1+0]=b[w+0+64]=L+j+1>>1,b[w+2+0]=b[w+1+64]=j+z+1>>1,b[w+3+0]=b[w+2+64]=z+q+1>>1,b[w+0+32]=ee(C,L,j),b[w+1+32]=b[w+0+96]=ee(L,j,z),b[w+2+32]=b[w+1+96]=ee(j,z,q),b[w+3+32]=b[w+2+96]=ee(z,q,H),b[w+3+64]=ee(q,H,V),b[w+3+96]=ee(H,V,Z)}function zl(b,w){var C=b[w-1+0],L=b[w-1+32],j=b[w-1+64],z=b[w-1+96];b[w+0+0]=C+L+1>>1,b[w+2+0]=b[w+0+32]=L+j+1>>1,b[w+2+32]=b[w+0+64]=j+z+1>>1,b[w+1+0]=ee(C,L,j),b[w+3+0]=b[w+1+32]=ee(L,j,z),b[w+3+32]=b[w+1+64]=ee(j,z,z),b[w+3+64]=b[w+2+64]=b[w+0+96]=b[w+1+96]=b[w+2+96]=b[w+3+96]=z}function ql(b,w){var C=b[w-1+0],L=b[w-1+32],j=b[w-1+64],z=b[w-1+96],q=b[w-1-32],H=b[w+0-32],V=b[w+1-32],Z=b[w+2-32];b[w+0+0]=b[w+2+32]=C+q+1>>1,b[w+0+32]=b[w+2+64]=L+C+1>>1,b[w+0+64]=b[w+2+96]=j+L+1>>1,b[w+0+96]=z+j+1>>1,b[w+3+0]=ee(H,V,Z),b[w+2+0]=ee(q,H,V),b[w+1+0]=b[w+3+32]=ee(C,q,H),b[w+1+32]=b[w+3+64]=ee(L,C,q),b[w+1+64]=b[w+3+96]=ee(j,L,C),b[w+1+96]=ee(z,j,L)}function Ul(b,w){var C;for(C=0;8>C;++C)a(b,w+32*C,b,w-32,8)}function ca(b,w){var C;for(C=0;8>C;++C)d(b,w,b[w-1],8),w+=32}function Bn(b,w,C){var L;for(L=0;8>L;++L)d(w,C+32*L,b,8)}function an(b,w){var C,L=8;for(C=0;8>C;++C)L+=b[w+C-32]+b[w-1+32*C];Bn(L>>4,b,w)}function Wl(b,w){var C,L=4;for(C=0;8>C;++C)L+=b[w+C-32];Bn(L>>3,b,w)}function Rn(b,w){var C,L=4;for(C=0;8>C;++C)L+=b[w-1+32*C];Bn(L>>3,b,w)}function ha(b,w){Bn(128,b,w)}function ds(b,w,C){var L=b[w-C],j=b[w+0],z=3*(j-L)+$l[1020+b[w-2*C]-b[w+C]],q=_o[112+(z+4>>3)];b[w-C]=Ri[255+L+_o[112+(z+3>>3)]],b[w+0]=Ri[255+j-q]}function co(b,w,C,L){var j=b[w+0],z=b[w+C];return $i[255+b[w-2*C]-b[w-C]]>L||$i[255+z-j]>L}function ho(b,w,C,L){return 4*$i[255+b[w-C]-b[w+0]]+$i[255+b[w-2*C]-b[w+C]]<=L}function uo(b,w,C,L,j){var z=b[w-3*C],q=b[w-2*C],H=b[w-C],V=b[w+0],Z=b[w+C],ct=b[w+2*C],xt=b[w+3*C];return 4*$i[255+H-V]+$i[255+q-Z]>L?0:$i[255+b[w-4*C]-z]<=j&&$i[255+z-q]<=j&&$i[255+q-H]<=j&&$i[255+xt-ct]<=j&&$i[255+ct-Z]<=j&&$i[255+Z-V]<=j}function fo(b,w,C,L){var j=2*L+1;for(L=0;16>L;++L)ho(b,w+L,C,j)&&ds(b,w+L,C)}function Pr(b,w,C,L){var j=2*L+1;for(L=0;16>L;++L)ho(b,w+L*C,1,j)&&ds(b,w+L*C,1)}function Ur(b,w,C,L){var j;for(j=3;0<j;--j)fo(b,w+=4*C,C,L)}function Hl(b,w,C,L){var j;for(j=3;0<j;--j)Pr(b,w+=4,C,L)}function on(b,w,C,L,j,z,q,H){for(z=2*z+1;0<j--;){if(uo(b,w,C,z,q))if(co(b,w,C,H))ds(b,w,C);else{var V=b,Z=w,ct=C,xt=V[Z-2*ct],_t=V[Z-ct],mt=V[Z+0],Ot=V[Z+ct],Ct=V[Z+2*ct],ht=27*(Tt=$l[1020+3*(mt-_t)+$l[1020+xt-Ot]])+63>>7,pt=18*Tt+63>>7,Tt=9*Tt+63>>7;V[Z-3*ct]=Ri[255+V[Z-3*ct]+Tt],V[Z-2*ct]=Ri[255+xt+pt],V[Z-ct]=Ri[255+_t+ht],V[Z+0]=Ri[255+mt-ht],V[Z+ct]=Ri[255+Ot-pt],V[Z+2*ct]=Ri[255+Ct-Tt]}w+=L}}function cr(b,w,C,L,j,z,q,H){for(z=2*z+1;0<j--;){if(uo(b,w,C,z,q))if(co(b,w,C,H))ds(b,w,C);else{var V=b,Z=w,ct=C,xt=V[Z-ct],_t=V[Z+0],mt=V[Z+ct],Ot=_o[112+((Ct=3*(_t-xt))+4>>3)],Ct=_o[112+(Ct+3>>3)],ht=Ot+1>>1;V[Z-2*ct]=Ri[255+V[Z-2*ct]+ht],V[Z-ct]=Ri[255+xt+Ct],V[Z+0]=Ri[255+_t-Ot],V[Z+ct]=Ri[255+mt-ht]}w+=L}}function ua(b,w,C,L,j,z){on(b,w,C,1,16,L,j,z)}function zn(b,w,C,L,j,z){on(b,w,1,C,16,L,j,z)}function Yl(b,w,C,L,j,z){var q;for(q=3;0<q;--q)cr(b,w+=4*C,C,1,16,L,j,z)}function ps(b,w,C,L,j,z){var q;for(q=3;0<q;--q)cr(b,w+=4,1,C,16,L,j,z)}function Vl(b,w,C,L,j,z,q,H){on(b,w,j,1,8,z,q,H),on(C,L,j,1,8,z,q,H)}function fa(b,w,C,L,j,z,q,H){on(b,w,1,j,8,z,q,H),on(C,L,1,j,8,z,q,H)}function da(b,w,C,L,j,z,q,H){cr(b,w+4*j,j,1,8,z,q,H),cr(C,L+4*j,j,1,8,z,q,H)}function po(b,w,C,L,j,z,q,H){cr(b,w+4,1,j,8,z,q,H),cr(C,L+4,1,j,8,z,q,H)}function gs(){this.ba=new rr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ga(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function go(){this.ua=0,this.Wa=new W,this.vb=new W,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new I}function Xl(){this.xb=this.a=0,this.l=new ls,this.ca=new rr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new k,this.Pb=0,this.wd=new k,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new go,this.ab=0,this.gc=v(4,ga),this.Oc=0}function ms(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ls,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qn(b,w,C,L,j,z,q){for(b=b==null?0:b[w+0],w=0;w<q;++w)j[z+w]=b+C[L+w]&255,b=j[z+w]}function ma(b,w,C,L,j,z,q){var H;if(b==null)qn(null,null,C,L,j,z,q);else for(H=0;H<q;++H)j[z+H]=b[w+H]+C[L+H]&255}function ln(b,w,C,L,j,z,q){if(b==null)qn(null,null,C,L,j,z,q);else{var H,V=b[w+0],Z=V,ct=V;for(H=0;H<q;++H)Z=ct+(V=b[w+H])-Z,ct=C[L+H]+(-256&Z?0>Z?0:255:Z)&255,Z=V,j[z+H]=ct}}function va(b,w,C,L){var j=w.width,z=w.o;if(t(b!=null&&w!=null),0>C||0>=L||C+L>z)return null;if(!b.Cc){if(b.ga==null){var q;if(b.ga=new ms,(q=b.ga==null)||(q=w.width*w.o,t(b.Gb.length==0),b.Gb=p(q),b.Uc=0,b.Gb==null?q=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,q=1),q=!q),!q){q=b.ga;var H=b.Fa,V=b.P,Z=b.qc,ct=b.mb,xt=b.nb,_t=V+1,mt=Z-1,Ot=q.l;if(t(H!=null&&ct!=null&&w!=null),pn[0]=null,pn[1]=qn,pn[2]=ma,pn[3]=ln,q.ca=ct,q.tb=xt,q.c=w.width,q.i=w.height,t(0<q.c&&0<q.i),1>=Z)w=0;else if(q.$a=H[V+0]>>0&3,q.Z=H[V+0]>>2&3,q.Lc=H[V+0]>>4&3,V=H[V+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||V)w=0;else if(Ot.put=Sr,Ot.ac=ui,Ot.bc=Cr,Ot.ma=q,Ot.width=w.width,Ot.height=w.height,Ot.Da=w.Da,Ot.v=w.v,Ot.va=w.va,Ot.j=w.j,Ot.o=w.o,q.$a)t:{t(q.$a==1),w=Hi();e:for(;;){if(w==null){w=0;break t}if(t(q!=null),q.mc=w,w.c=q.c,w.i=q.i,w.l=q.l,w.l.ma=q,w.l.width=q.c,w.l.height=q.i,w.a=0,nt(w.m,H,_t,mt),!Lr(q.c,q.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&zr(w.s)?(q.ic=1,H=w.c*w.i,w.Ta=null,w.Ua=0,w.V=p(H),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(q.ic=0,w=Dn(w,q.c)),!w))break e;w=1;break t}q.mc=null,w=0}else w=mt>=q.c*q.i;q=!w}if(q)return null;b.ga.Lc!=1?b.Ga=0:L=z-C}t(b.ga!=null),t(C+L<=z);t:{if(w=(H=b.ga).c,z=H.l.o,H.$a==0){if(_t=b.rc,mt=b.Vc,Ot=b.Fa,V=b.P+1+C*w,Z=b.mb,ct=b.nb+C*w,t(V<=b.P+b.qc),H.Z!=0)for(t(pn[H.Z]!=null),q=0;q<L;++q)pn[H.Z](_t,mt,Ot,V,Z,ct,w),_t=Z,mt=ct,ct+=w,V+=w;else for(q=0;q<L;++q)a(Z,ct,Ot,V,w),_t=Z,mt=ct,ct+=w,V+=w;b.rc=_t,b.Vc=mt}else{if(t(H.mc!=null),w=C+L,t((q=H.mc)!=null),t(w<=q.i),q.C>=w)w=1;else if(H.ic||wt(),H.ic){H=q.V,_t=q.Ba,mt=q.c;var Ct=q.i,ht=(Ot=1,V=q.$/mt,Z=q.$%mt,ct=q.m,xt=q.s,q.$),pt=mt*Ct,Tt=mt*w,Nt=xt.wc,Pt=ht<Tt?Ze(xt,Z,V):null;t(ht<=pt),t(w<=Ct),t(zr(xt));e:for(;;){for(;!ct.h&&ht<Tt;){if(Z&Nt||(Pt=Ze(xt,Z,V)),t(Pt!=null),U(ct),256>(Ct=Oi(Pt.G[0],Pt.H[0],ct)))H[_t+ht]=Ct,++ht,++Z>=mt&&(Z=0,++V<=w&&!(V%16)&&ar(q,V));else{if(!(280>Ct)){Ot=0;break e}Ct=nr(Ct-256,ct);var Ut,Dt=Oi(Pt.G[4],Pt.H[4],ct);if(U(ct),!(ht>=(Dt=Ar(mt,Dt=nr(Dt,ct)))&&pt-ht>=Ct)){Ot=0;break e}for(Ut=0;Ut<Ct;++Ut)H[_t+ht+Ut]=H[_t+ht+Ut-Dt];for(ht+=Ct,Z+=Ct;Z>=mt;)Z-=mt,++V<=w&&!(V%16)&&ar(q,V);ht<Tt&&Z&Nt&&(Pt=Ze(xt,Z,V))}t(ct.h==N(ct))}ar(q,V>w?w:V);break e}!Ot||ct.h&&ht<pt?(Ot=0,q.a=ct.h?5:3):q.$=ht,w=Ot}else w=or(q,q.V,q.Ba,q.c,q.i,w,rs);if(!w){L=0;break t}}C+L>=z&&(b.Cc=1),L=1}if(!L)return null;if(b.Cc&&((L=b.ga)!=null&&(L.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+C*j}function S(b,w,C,L,j,z){for(;0<j--;){var q,H=b,V=w+(C?1:0),Z=b,ct=w+(C?0:3);for(q=0;q<L;++q){var xt=Z[ct+4*q];xt!=255&&(xt*=32897,H[V+4*q+0]=H[V+4*q+0]*xt>>23,H[V+4*q+1]=H[V+4*q+1]*xt>>23,H[V+4*q+2]=H[V+4*q+2]*xt>>23)}w+=z}}function D(b,w,C,L,j){for(;0<L--;){var z;for(z=0;z<C;++z){var q=b[w+2*z+0],H=15&(Z=b[w+2*z+1]),V=4369*H,Z=(240&Z|Z>>4)*V>>16;b[w+2*z+0]=(240&q|q>>4)*V>>16&240|(15&q|q<<4)*V>>16>>4&15,b[w+2*z+1]=240&Z|H}w+=j}}function et(b,w,C,L,j,z,q,H){var V,Z,ct=255;for(Z=0;Z<j;++Z){for(V=0;V<L;++V){var xt=b[w+V];z[q+4*V]=xt,ct&=xt}w+=C,q+=H}return ct!=255}function lt(b,w,C,L,j){var z;for(z=0;z<j;++z)C[L+z]=b[w+z]>>8}function wt(){Gi=S,Ie=D,je=et,Ge=lt}function kt(b,w,C){O[b]=function(L,j,z,q,H,V,Z,ct,xt,_t,mt,Ot,Ct,ht,pt,Tt,Nt){var Pt,Ut=Nt-1>>1,Dt=H[V+0]|Z[ct+0]<<16,$t=xt[_t+0]|mt[Ot+0]<<16;t(L!=null);var zt=3*Dt+$t+131074>>2;for(w(L[j+0],255&zt,zt>>16,Ct,ht),z!=null&&(zt=3*$t+Dt+131074>>2,w(z[q+0],255&zt,zt>>16,pt,Tt)),Pt=1;Pt<=Ut;++Pt){var ye=H[V+Pt]|Z[ct+Pt]<<16,Se=xt[_t+Pt]|mt[Ot+Pt]<<16,be=Dt+ye+$t+Se+524296,de=be+2*(ye+$t)>>3;zt=de+Dt>>1,Dt=(be=be+2*(Dt+Se)>>3)+ye>>1,w(L[j+2*Pt-1],255&zt,zt>>16,Ct,ht+(2*Pt-1)*C),w(L[j+2*Pt-0],255&Dt,Dt>>16,Ct,ht+(2*Pt-0)*C),z!=null&&(zt=be+$t>>1,Dt=de+Se>>1,w(z[q+2*Pt-1],255&zt,zt>>16,pt,Tt+(2*Pt-1)*C),w(z[q+2*Pt+0],255&Dt,Dt>>16,pt,Tt+(2*Pt+0)*C)),Dt=ye,$t=Se}1&Nt||(zt=3*Dt+$t+131074>>2,w(L[j+Nt-1],255&zt,zt>>16,Ct,ht+(Nt-1)*C),z!=null&&(zt=3*$t+Dt+131074>>2,w(z[q+Nt-1],255&zt,zt>>16,pt,Tt+(Nt-1)*C)))}}function Ft(){Ki[So]=Bd,Ki[Co]=Fh,Ki[Th]=Rd,Ki[Ao]=Eh,Ki[ko]=Ih,Ki[Kl]=jh,Ki[Ph]=zd,Ki[Jl]=Fh,Ki[Zl]=Eh,Ki[Lo]=Ih,Ki[Ql]=jh}function qt(b){return b&-16384?0>b?0:255:b>>qd}function Gt(b,w){return qt((19077*b>>8)+(26149*w>>8)-14234)}function ae(b,w,C){return qt((19077*b>>8)-(6419*w>>8)-(13320*C>>8)+8708)}function ne(b,w){return qt((19077*b>>8)+(33050*w>>8)-17685)}function ge(b,w,C,L,j){L[j+0]=Gt(b,C),L[j+1]=ae(b,w,C),L[j+2]=ne(b,w)}function Be(b,w,C,L,j){L[j+0]=ne(b,w),L[j+1]=ae(b,w,C),L[j+2]=Gt(b,C)}function Ue(b,w,C,L,j){var z=ae(b,w,C);w=z<<3&224|ne(b,w)>>3,L[j+0]=248&Gt(b,C)|z>>5,L[j+1]=w}function Qe(b,w,C,L,j){var z=240&ne(b,w)|15;L[j+0]=240&Gt(b,C)|ae(b,w,C)>>4,L[j+1]=z}function vi(b,w,C,L,j){L[j+0]=255,ge(b,w,C,L,j+1)}function ai(b,w,C,L,j){Be(b,w,C,L,j),L[j+3]=255}function hr(b,w,C,L,j){ge(b,w,C,L,j),L[j+3]=255}function Bi(b,w){return 0>b?0:b>w?w:b}function Or(b,w,C){O[b]=function(L,j,z,q,H,V,Z,ct,xt){for(var _t=ct+(-2&xt)*C;ct!=_t;)w(L[j+0],z[q+0],H[V+0],Z,ct),w(L[j+1],z[q+0],H[V+0],Z,ct+C),j+=2,++q,++V,ct+=2*C;1&xt&&w(L[j+0],z[q+0],H[V+0],Z,ct)}}function mo(b,w,C){return C==0?b==0?w==0?6:5:w==0?4:0:C}function ba(b,w,C,L,j){switch(b>>>30){case 3:Yr(w,C,L,j,0);break;case 2:Xe(w,C,L,j);break;case 1:Ai(w,C,L,j)}}function ya(b,w){var C,L,j=w.M,z=w.Nb,q=b.oc,H=b.pc+40,V=b.oc,Z=b.pc+584,ct=b.oc,xt=b.pc+600;for(C=0;16>C;++C)q[H+32*C-1]=129;for(C=0;8>C;++C)V[Z+32*C-1]=129,ct[xt+32*C-1]=129;for(0<j?q[H-1-32]=V[Z-1-32]=ct[xt-1-32]=129:(d(q,H-32-1,127,21),d(V,Z-32-1,127,9),d(ct,xt-32-1,127,9)),L=0;L<b.za;++L){var _t=w.ya[w.aa+L];if(0<L){for(C=-1;16>C;++C)a(q,H+32*C-4,q,H+32*C+12,4);for(C=-1;8>C;++C)a(V,Z+32*C-4,V,Z+32*C+4,4),a(ct,xt+32*C-4,ct,xt+32*C+4,4)}var mt=b.Gd,Ot=b.Hd+L,Ct=_t.ad,ht=_t.Hc;if(0<j&&(a(q,H-32,mt[Ot].y,0,16),a(V,Z-32,mt[Ot].f,0,8),a(ct,xt-32,mt[Ot].ea,0,8)),_t.Za){var pt=q,Tt=H-32+16;for(0<j&&(L>=b.za-1?d(pt,Tt,mt[Ot].y[15],4):a(pt,Tt,mt[Ot+1].y,0,4)),C=0;4>C;C++)pt[Tt+128+C]=pt[Tt+256+C]=pt[Tt+384+C]=pt[Tt+0+C];for(C=0;16>C;++C,ht<<=2)pt=q,Tt=H+Bh[C],ur[_t.Ob[C]](pt,Tt),ba(ht,Ct,16*+C,pt,Tt)}else if(pt=mo(L,j,_t.Ob[0]),dn[pt](q,H),ht!=0)for(C=0;16>C;++C,ht<<=2)ba(ht,Ct,16*+C,q,H+Bh[C]);for(C=_t.Gc,pt=mo(L,j,_t.Dd),Xr[pt](V,Z),Xr[pt](ct,xt),ht=Ct,pt=V,Tt=Z,255&(_t=C>>0)&&(170&_t?Ca(ht,256,pt,Tt):Vi(ht,256,pt,Tt)),_t=ct,ht=xt,255&(C>>=8)&&(170&C?Ca(Ct,320,_t,ht):Vi(Ct,320,_t,ht)),j<b.Ub-1&&(a(mt[Ot].y,0,q,H+480,16),a(mt[Ot].f,0,V,Z+224,8),a(mt[Ot].ea,0,ct,xt+224,8)),C=8*z*b.B,mt=b.sa,Ot=b.ta+16*L+16*z*b.R,Ct=b.qa,_t=b.ra+8*L+C,ht=b.Ha,pt=b.Ia+8*L+C,C=0;16>C;++C)a(mt,Ot+C*b.R,q,H+32*C,16);for(C=0;8>C;++C)a(Ct,_t+C*b.B,V,Z+32*C,8),a(ht,pt+C*b.B,ct,xt+32*C,8)}}function vs(b,w,C,L,j,z,q,H,V){var Z=[0],ct=[0],xt=0,_t=V!=null?V.kd:0,mt=V??new pa;if(b==null||12>C)return 7;mt.data=b,mt.w=w,mt.ha=C,w=[w],C=[C],mt.gb=[mt.gb];t:{var Ot=w,Ct=C,ht=mt.gb;if(t(b!=null),t(Ct!=null),t(ht!=null),ht[0]=0,12<=Ct[0]&&!i(b,Ot[0],"RIFF")){if(i(b,Ot[0]+8,"WEBP")){ht=3;break t}var pt=ot(b,Ot[0]+4);if(12>pt||4294967286<pt){ht=3;break t}if(_t&&pt>Ct[0]-8){ht=7;break t}ht[0]=pt,Ot[0]+=12,Ct[0]-=12}ht=0}if(ht!=0)return ht;for(pt=0<mt.gb[0],C=C[0];;){t:{var Tt=b;Ct=w,ht=C;var Nt=Z,Pt=ct,Ut=Ot=[0];if((zt=xt=[xt])[0]=0,8>ht[0])ht=7;else{if(!i(Tt,Ct[0],"VP8X")){if(ot(Tt,Ct[0]+4)!=10){ht=3;break t}if(18>ht[0]){ht=7;break t}var Dt=ot(Tt,Ct[0]+8),$t=1+St(Tt,Ct[0]+12);if(2147483648<=$t*(Tt=1+St(Tt,Ct[0]+15))){ht=3;break t}Ut!=null&&(Ut[0]=Dt),Nt!=null&&(Nt[0]=$t),Pt!=null&&(Pt[0]=Tt),Ct[0]+=18,ht[0]-=18,zt[0]=1}ht=0}}if(xt=xt[0],Ot=Ot[0],ht!=0)return ht;if(Ct=!!(2&Ot),!pt&&xt)return 3;if(z!=null&&(z[0]=!!(16&Ot)),q!=null&&(q[0]=Ct),H!=null&&(H[0]=0),q=Z[0],Ot=ct[0],xt&&Ct&&V==null){ht=0;break}if(4>C){ht=7;break}if(pt&&xt||!pt&&!xt&&!i(b,w[0],"ALPH")){C=[C],mt.na=[mt.na],mt.P=[mt.P],mt.Sa=[mt.Sa];t:{Dt=b,ht=w,pt=C;var zt=mt.gb;Nt=mt.na,Pt=mt.P,Ut=mt.Sa,$t=22,t(Dt!=null),t(pt!=null),Tt=ht[0];var ye=pt[0];for(t(Nt!=null),t(Ut!=null),Nt[0]=null,Pt[0]=null,Ut[0]=0;;){if(ht[0]=Tt,pt[0]=ye,8>ye){ht=7;break t}var Se=ot(Dt,Tt+4);if(4294967286<Se){ht=3;break t}var be=8+Se+1&-2;if($t+=be,0<zt&&$t>zt){ht=3;break t}if(!i(Dt,Tt,"VP8 ")||!i(Dt,Tt,"VP8L")){ht=0;break t}if(ye[0]<be){ht=7;break t}i(Dt,Tt,"ALPH")||(Nt[0]=Dt,Pt[0]=Tt+8,Ut[0]=Se),Tt+=be,ye-=be}}if(C=C[0],mt.na=mt.na[0],mt.P=mt.P[0],mt.Sa=mt.Sa[0],ht!=0)break}C=[C],mt.Ja=[mt.Ja],mt.xa=[mt.xa];t:if(zt=b,ht=w,pt=C,Nt=mt.gb[0],Pt=mt.Ja,Ut=mt.xa,Dt=ht[0],Tt=!i(zt,Dt,"VP8 "),$t=!i(zt,Dt,"VP8L"),t(zt!=null),t(pt!=null),t(Pt!=null),t(Ut!=null),8>pt[0])ht=7;else{if(Tt||$t){if(zt=ot(zt,Dt+4),12<=Nt&&zt>Nt-12){ht=3;break t}if(_t&&zt>pt[0]-8){ht=7;break t}Pt[0]=zt,ht[0]+=8,pt[0]-=8,Ut[0]=$t}else Ut[0]=5<=pt[0]&&zt[Dt+0]==47&&!(zt[Dt+4]>>5),Pt[0]=pt[0];ht=0}if(C=C[0],mt.Ja=mt.Ja[0],mt.xa=mt.xa[0],w=w[0],ht!=0)break;if(4294967286<mt.Ja)return 3;if(H==null||Ct||(H[0]=mt.xa?2:1),q=[q],Ot=[Ot],mt.xa){if(5>C){ht=7;break}H=q,_t=Ot,Ct=z,b==null||5>C?b=0:5<=C&&b[w+0]==47&&!(b[w+4]>>5)?(pt=[0],zt=[0],Nt=[0],nt(Pt=new k,b,w,C),Zt(Pt,pt,zt,Nt)?(H!=null&&(H[0]=pt[0]),_t!=null&&(_t[0]=zt[0]),Ct!=null&&(Ct[0]=Nt[0]),b=1):b=0):b=0}else{if(10>C){ht=7;break}H=Ot,b==null||10>C||!Qa(b,w+3,C-3)?b=0:(_t=b[w+0]|b[w+1]<<8|b[w+2]<<16,Ct=16383&(b[w+7]<<8|b[w+6]),b=16383&(b[w+9]<<8|b[w+8]),1&_t||3<(_t>>1&7)||!(_t>>4&1)||_t>>5>=mt.Ja||!Ct||!b?b=0:(q&&(q[0]=Ct),H&&(H[0]=b),b=1))}if(!b||(q=q[0],Ot=Ot[0],xt&&(Z[0]!=q||ct[0]!=Ot)))return 3;V!=null&&(V[0]=mt,V.offset=w-V.w,t(4294967286>w-V.w),t(V.offset==V.ha-C));break}return ht==0||ht==7&&xt&&V==null?(z!=null&&(z[0]|=mt.na!=null&&0<mt.na.length),L!=null&&(L[0]=q),j!=null&&(j[0]=Ot),0):ht}function wa(b,w,C){var L=w.width,j=w.height,z=0,q=0,H=L,V=j;if(w.Da=b!=null&&0<b.Da,w.Da&&(H=b.cd,V=b.bd,z=b.v,q=b.j,11>C||(z&=-2,q&=-2),0>z||0>q||0>=H||0>=V||z+H>L||q+V>j))return 0;if(w.v=z,w.j=q,w.va=z+H,w.o=q+V,w.U=H,w.T=V,w.da=b!=null&&0<b.da,w.da){if(!vt(H,V,C=[b.ib],z=[b.hb]))return 0;w.ib=C[0],w.hb=z[0]}return w.ob=b!=null&&b.ob,w.Kb=b==null||!b.Sd,w.da&&(w.ob=w.ib<3*L/4&&w.hb<3*j/4,w.Kb=0),1}function xa(b){if(b==null)return 2;if(11>b.S){var w=b.f.RGBA;w.fb+=(b.height-1)*w.A,w.A=-w.A}else w=b.f.kb,b=b.height,w.O+=(b-1)*w.fa,w.fa=-w.fa,w.N+=(b-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(b-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(b-1)*w.lb,w.lb=-w.lb);return 0}function bs(b,w,C,L){if(L==null||0>=b||0>=w)return 2;if(C!=null){if(C.Da){var j=C.cd,z=C.bd,q=-2&C.v,H=-2&C.j;if(0>q||0>H||0>=j||0>=z||q+j>b||H+z>w)return 2;b=j,w=z}if(C.da){if(!vt(b,w,j=[C.ib],z=[C.hb]))return 2;b=j[0],w=z[0]}}L.width=b,L.height=w;t:{var V=L.width,Z=L.height;if(b=L.S,0>=V||0>=Z||!(b>=So&&13>b))b=2;else{if(0>=L.Rd&&L.sd==null){q=z=j=w=0;var ct=(H=V*Rh[b])*Z;if(11>b||(z=(Z+1)/2*(w=(V+1)/2),b==12&&(q=(j=V)*Z)),(Z=p(ct+2*z+q))==null){b=1;break t}L.sd=Z,11>b?((V=L.f.RGBA).eb=Z,V.fb=0,V.A=H,V.size=ct):((V=L.f.kb).y=Z,V.O=0,V.fa=H,V.Fd=ct,V.f=Z,V.N=0+ct,V.Ab=w,V.Cd=z,V.ea=Z,V.W=0+ct+z,V.Db=w,V.Ed=z,b==12&&(V.F=Z,V.J=0+ct+2*z),V.Tc=q,V.lb=j)}if(w=1,j=L.S,z=L.width,q=L.height,j>=So&&13>j)if(11>j)b=L.f.RGBA,w&=(H=Math.abs(b.A))*(q-1)+z<=b.size,w&=H>=z*Rh[j],w&=b.eb!=null;else{b=L.f.kb,H=(z+1)/2,ct=(q+1)/2,V=Math.abs(b.fa),Z=Math.abs(b.Ab);var xt=Math.abs(b.Db),_t=Math.abs(b.lb),mt=_t*(q-1)+z;w&=V*(q-1)+z<=b.Fd,w&=Z*(ct-1)+H<=b.Cd,w=(w&=xt*(ct-1)+H<=b.Ed)&V>=z&Z>=H&xt>=H,w&=b.y!=null,w&=b.f!=null,w&=b.ea!=null,j==12&&(w&=_t>=z,w&=mt<=b.Tc,w&=b.F!=null)}else w=0;b=w?0:2}}return b!=0||C!=null&&C.fd&&(b=xa(L)),b}var fi=64,ys=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ws=24,xs=32,_a=8,Ni=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Lt("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(b){return b},O.Predictor2=function(b,w,C){return w[C+0]},O.Predictor3=function(b,w,C){return w[C+1]},O.Predictor4=function(b,w,C){return w[C-1]},O.Predictor5=function(b,w,C){return ft(ft(b,w[C+1]),w[C+0])},O.Predictor6=function(b,w,C){return ft(b,w[C-1])},O.Predictor7=function(b,w,C){return ft(b,w[C+0])},O.Predictor8=function(b,w,C){return ft(w[C-1],w[C+0])},O.Predictor9=function(b,w,C){return ft(w[C+0],w[C+1])},O.Predictor10=function(b,w,C){return ft(ft(b,w[C-1]),ft(w[C+0],w[C+1]))},O.Predictor11=function(b,w,C){var L=w[C+0];return 0>=Rt(L>>24&255,b>>24&255,(w=w[C-1])>>24&255)+Rt(L>>16&255,b>>16&255,w>>16&255)+Rt(L>>8&255,b>>8&255,w>>8&255)+Rt(255&L,255&b,255&w)?L:b},O.Predictor12=function(b,w,C){var L=w[C+0];return(Mt((b>>24&255)+(L>>24&255)-((w=w[C-1])>>24&255))<<24|Mt((b>>16&255)+(L>>16&255)-(w>>16&255))<<16|Mt((b>>8&255)+(L>>8&255)-(w>>8&255))<<8|Mt((255&b)+(255&L)-(255&w)))>>>0},O.Predictor13=function(b,w,C){var L=w[C-1];return(jt((b=ft(b,w[C+0]))>>24&255,L>>24&255)<<24|jt(b>>16&255,L>>16&255)<<16|jt(b>>8&255,L>>8&255)<<8|jt(b>>0&255,L>>0&255))>>>0};var Gl=O.PredictorAdd0;O.PredictorAdd1=Yt,Lt("Predictor2","PredictorAdd2"),Lt("Predictor3","PredictorAdd3"),Lt("Predictor4","PredictorAdd4"),Lt("Predictor5","PredictorAdd5"),Lt("Predictor6","PredictorAdd6"),Lt("Predictor7","PredictorAdd7"),Lt("Predictor8","PredictorAdd8"),Lt("Predictor9","PredictorAdd9"),Lt("Predictor10","PredictorAdd10"),Lt("Predictor11","PredictorAdd11"),Lt("Predictor12","PredictorAdd12"),Lt("Predictor13","PredictorAdd13");var Sa=O.PredictorAdd2;te("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),te("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var vo,Yi=O.ColorIndexInverseTransform,_s=O.MapARGB,bo=O.VP8LColorIndexInverseTransformAlpha,yo=O.MapAlpha,cn=O.VP8LPredictorsAdd=[];cn.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Un,Fi,Ci,hn,Wr,Hr,Ss,Yr,Xe,Ca,Ai,Vi,Cs,wo,Aa,Wn,Hn,un,Yn,As,Vn,fn,ka,Xi,Gi,Ie,je,Ge,si=p(511),Vr=p(2041),La=p(225),ks=p(767),xo=0,$l=Vr,_o=La,Ri=ks,$i=si,So=0,Co=1,Th=2,Ao=3,ko=4,Kl=5,Ph=6,Jl=7,Zl=8,Lo=9,Ql=10,Cd=[2,3,7],Ad=[3,3,11],Oh=[280,256,256,256,40],kd=[0,1,1,1,0],Ld=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Td=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pd=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Od=8,tc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ec=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ta=null,Md=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Nd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Mh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Fd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ed=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Id=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],jd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],dn=[],ur=[],Xr=[],Dd=1,Nh=2,pn=[],Ki=[];kt("UpsampleRgbLinePair",ge,3),kt("UpsampleBgrLinePair",Be,3),kt("UpsampleRgbaLinePair",hr,4),kt("UpsampleBgraLinePair",ai,4),kt("UpsampleArgbLinePair",vi,4),kt("UpsampleRgba4444LinePair",Qe,2),kt("UpsampleRgb565LinePair",Ue,2);var Bd=O.UpsampleRgbLinePair,Rd=O.UpsampleBgrLinePair,Fh=O.UpsampleRgbaLinePair,Eh=O.UpsampleBgraLinePair,Ih=O.UpsampleArgbLinePair,jh=O.UpsampleRgba4444LinePair,zd=O.UpsampleRgb565LinePair,To=16,Po=1<<To-1,Pa=-227,ic=482,qd=6,Dh=0,Ud=p(256),Wd=p(256),Hd=p(256),Yd=p(256),Vd=p(ic-Pa),Xd=p(ic-Pa);Or("YuvToRgbRow",ge,3),Or("YuvToBgrRow",Be,3),Or("YuvToRgbaRow",hr,4),Or("YuvToBgraRow",ai,4),Or("YuvToArgbRow",vi,4),Or("YuvToRgba4444Row",Qe,2),Or("YuvToRgb565Row",Ue,2);var Bh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Oo=[0,2,8],Gd=[8,7,6,4,4,2,2,2,1,1,1,1],$d=1;this.WebPDecodeRGBA=function(b,w,C,L,j){var z=Co,q=new gs,H=new rr;q.ba=H,H.S=z,H.width=[H.width],H.height=[H.height];var V=H.width,Z=H.height,ct=new Rr;if(ct==null||b==null)var xt=2;else t(ct!=null),xt=vs(b,w,C,ct.width,ct.height,ct.Pd,ct.Qd,ct.format,null);if(xt!=0?V=0:(V!=null&&(V[0]=ct.width[0]),Z!=null&&(Z[0]=ct.height[0]),V=1),V){H.width=H.width[0],H.height=H.height[0],L!=null&&(L[0]=H.width),j!=null&&(j[0]=H.height);t:{if(L=new ls,(j=new pa).data=b,j.w=w,j.ha=C,j.kd=1,w=[0],t(j!=null),((b=vs(j.data,j.w,j.ha,null,null,null,w,null,j))==0||b==7)&&w[0]&&(b=4),(w=b)==0){if(t(q!=null),L.data=j.data,L.w=j.w+j.offset,L.ha=j.ha-j.offset,L.put=Sr,L.ac=ui,L.bc=Cr,L.ma=q,j.xa){if((b=Hi())==null){q=1;break t}if(function(_t,mt){var Ot=[0],Ct=[0],ht=[0];e:for(;;){if(_t==null)return 0;if(mt==null)return _t.a=2,0;if(_t.l=mt,_t.a=0,nt(_t.m,mt.data,mt.w,mt.ha),!Zt(_t.m,Ot,Ct,ht)){_t.a=3;break e}if(_t.xb=Nh,mt.width=Ot[0],mt.height=Ct[0],!Lr(Ot[0],Ct[0],1,_t,null))break e;return 1}return t(_t.a!=0),0}(b,L)){if(L=(w=bs(L.width,L.height,q.Oa,q.ba))==0){e:{L=b;i:for(;;){if(L==null){L=0;break e}if(t(L.s.yc!=null),t(L.s.Ya!=null),t(0<L.s.Wb),t((C=L.l)!=null),t((j=C.ma)!=null),L.xb!=0){if(L.ca=j.ba,L.tb=j.tb,t(L.ca!=null),!wa(j.Oa,C,Ao)){L.a=2;break i}if(!Dn(L,C.width)||C.da)break i;if((C.da||we(L.ca.S))&&wt(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&wt()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!st(L.s.vb,L.s.Wa.Xa)){L.a=1;break i}L.xb=0}if(!or(L,L.V,L.Ba,L.c,L.i,C.o,is))break i;j.Dc=L.Ma,L=1;break e}t(L.a!=0),L=0}L=!L}L&&(w=b.a)}else w=b.a}else{if((b=new Pl)==null){q=1;break t}if(b.Fa=j.na,b.P=j.P,b.qc=j.Sa,to(b,L)){if((w=bs(L.width,L.height,q.Oa,q.ba))==0){if(b.Aa=0,C=q.Oa,t((j=b)!=null),C!=null){if(0<(V=0>(V=C.Md)?0:100<V?255:255*V/100)){for(Z=ct=0;4>Z;++Z)12>(xt=j.pb[Z]).lc&&(xt.ia=V*Gd[0>xt.lc?0:xt.lc]>>3),ct|=xt.ia;ct&&(alert("todo:VP8InitRandom"),j.ia=1)}j.Ga=C.Id,100<j.Ga?j.Ga=100:0>j.Ga&&(j.Ga=0)}Ol(b,L)||(w=b.a)}}else w=b.a}w==0&&q.Oa!=null&&q.Oa.fd&&(w=xa(q.ba))}q=w}z=q!=0?null:11>z?H.f.RGBA.eb:H.f.kb.y}else z=null;return z};var Rh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,B){for(var X="",F=0;F<4;F++)X+=String.fromCharCode(O[B++]);return X}function u(O,B){return(O[B+0]<<0|O[B+1]<<8|O[B+2]<<16)>>>0}function s(O,B){return(O[B+0]<<0|O[B+1]<<8|O[B+2]<<16|O[B+3]<<24)>>>0}new r;var l=[0],n=[0],h=[],g=new r,f=e,m=function(O,B){var X={},F=0,I=!1,K=0,G=0;if(X.frames=[],!function(R,N,P,U){for(var $=0;$<U;$++)if(R[N+$]!=P.charCodeAt($))return!0;return!1}(O,B,"RIFF",4)){var rt,at;for(s(O,B+=4),B+=8;B<O.length;){var gt=c(O,B),nt=s(O,B+=4);B+=4;var E=nt+(1&nt);switch(gt){case"VP8 ":case"VP8L":X.frames[F]===void 0&&(X.frames[F]={}),(k=X.frames[F]).src_off=I?G:B-8,k.src_size=K+nt+8,F++,I&&(I=!1,K=0,G=0);break;case"VP8X":(k=X.header={}).feature_flags=O[B];var Y=B+4;k.canvas_width=1+u(O,Y),Y+=3,k.canvas_height=1+u(O,Y),Y+=3;break;case"ALPH":I=!0,K=E+8,G=B-8;break;case"ANIM":(k=X.header).bgcolor=s(O,B),Y=B+4,k.loop_count=(rt=O)[(at=Y)+0]<<0|rt[at+1]<<8,Y+=2;break;case"ANMF":var J,k;(k=X.frames[F]={}).offset_x=2*u(O,B),B+=3,k.offset_y=2*u(O,B),B+=3,k.width=1+u(O,B),B+=3,k.height=1+u(O,B),B+=3,k.duration=u(O,B),B+=3,J=O[B++],k.dispose=1&J,k.blend=J>>1&1}gt!="ANMF"&&(B+=E)}return X}}(f,0);m.response=f,m.rgbaoutput=!0,m.dataurl=!1;var y=m.header?m.header:null,x=m.frames?m.frames:null;if(y){y.loop_counter=y.loop_count,l=[y.canvas_height],n=[y.canvas_width];for(var _=0;_<x.length&&x[_].blend!=0;_++);}var A=x[0],M=g.WebPDecodeRGBA(f,A.src_off,A.src_size,n,l);A.rgba=M,A.imgwidth=n[0],A.imgheight=l[0];for(var T=0;T<n[0]*l[0]*4;T++)h[T]=M[T];return this.width=n,this.height=l,this.data=h,this}(function(e){var t=function(){return typeof Kc=="function"},i=function(l,n,h,g){var f=4,m=v;switch(g){case e.image_compression.FAST:f=1,m=p;break;case e.image_compression.MEDIUM:f=6,m=o;break;case e.image_compression.SLOW:f=9,m=r}l=a(l,n,h,m);var y=Kc(l,{level:f});return e.__addimage__.arrayBufferToBinaryString(y)},a=function(l,n,h,g){for(var f,m,y,x=l.length/n,_=new Uint8Array(l.length+x),A=u(),M=0;M<x;M+=1){if(y=M*n,f=l.subarray(y,y+n),g)_.set(g(f,h,m),y+M);else{for(var T,O=A.length,B=[];T<O;T+=1)B[T]=A[T](f,h,m);var X=s(B.concat());_.set(B[X],y+M)}m=f}return _},d=function(l){var n=Array.apply([],l);return n.unshift(0),n},p=function(l,n){var h,g=[],f=l.length;g[0]=1;for(var m=0;m<f;m+=1)h=l[m-n]||0,g[m+1]=l[m]-h+256&255;return g},v=function(l,n,h){var g,f=[],m=l.length;f[0]=2;for(var y=0;y<m;y+=1)g=h&&h[y]||0,f[y+1]=l[y]-g+256&255;return f},o=function(l,n,h){var g,f,m=[],y=l.length;m[0]=3;for(var x=0;x<y;x+=1)g=l[x-n]||0,f=h&&h[x]||0,m[x+1]=l[x]+256-(g+f>>>1)&255;return m},r=function(l,n,h){var g,f,m,y,x=[],_=l.length;x[0]=4;for(var A=0;A<_;A+=1)g=l[A-n]||0,f=h&&h[A]||0,m=h&&h[A-n]||0,y=c(g,f,m),x[A+1]=l[A]-y+256&255;return x},c=function(l,n,h){if(l===n&&n===h)return l;var g=Math.abs(n-h),f=Math.abs(l-h),m=Math.abs(l+n-h-h);return g<=f&&g<=m?l:f<=m?n:h},u=function(){return[d,p,v,o,r]},s=function(l){var n=l.map(function(h){return h.reduce(function(g,f){return g+Math.abs(f)},0)});return n.indexOf(Math.min.apply(null,n))};e.processPNG=function(l,n,h,g){var f,m,y,x,_,A,M,T,O,B,X,F,I,K,G,rt=this.decode.FLATE_DECODE,at="";if(this.__addimage__.isArrayBuffer(l)&&(l=new Uint8Array(l)),this.__addimage__.isArrayBufferView(l)){if(l=(y=new jg(l)).imgData,m=y.bits,f=y.colorSpace,_=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){O=(T=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,X=new Uint8Array(O*y.colors),B=new Uint8Array(O);var gt,nt=y.pixelBitlength-y.bits;for(K=0,G=0;K<O;K++){for(I=T[K],gt=0;gt<nt;)X[G++]=I>>>gt&255,gt+=y.bits;B[K]=I>>>gt&255}}if(y.bits===16){O=(T=new Uint32Array(y.decodePixels().buffer)).length,X=new Uint8Array(O*(32/y.pixelBitlength)*y.colors),B=new Uint8Array(O*(32/y.pixelBitlength)),F=y.colors>1,K=0,G=0;for(var E=0;K<O;)I=T[K++],X[G++]=I>>>0&255,F&&(X[G++]=I>>>16&255,I=T[K++],X[G++]=I>>>0&255),B[E++]=I>>>16&255;m=8}g!==e.image_compression.NONE&&t()?(l=i(X,y.width*y.colors,y.colors,g),M=i(B,y.width,1,g)):(l=X,M=B,rt=void 0)}if(y.colorType===3&&(f=this.color_spaces.INDEXED,A=y.palette,y.transparency.indexed)){var Y=y.transparency.indexed,J=0;for(K=0,O=Y.length;K<O;++K)J+=Y[K];if((J/=255)===O-1&&Y.indexOf(0)!==-1)x=[Y.indexOf(0)];else if(J!==O){for(T=y.decodePixels(),B=new Uint8Array(T.length),K=0,O=T.length;K<O;K++)B[K]=Y[T[K]];M=i(B,y.width,1)}}var k=function(R){var N;switch(R){case e.image_compression.FAST:N=11;break;case e.image_compression.MEDIUM:N=13;break;case e.image_compression.SLOW:N=14;break;default:N=12}return N}(g);return rt===this.decode.FLATE_DECODE&&(at="/Predictor "+k+" "),at+="/Colors "+_+" /BitsPerComponent "+m+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(l)||this.__addimage__.isArrayBufferView(l))&&(l=this.__addimage__.arrayBufferToBinaryString(l)),(M&&this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),{alias:h,data:l,index:n,filter:rt,decodeParameters:at,transparency:x,palette:A,sMask:M,predictor:k,width:y.width,height:y.height,bitsPerComponent:m,colorSpace:f}}}})(Kt.API),function(e){e.processGIF89A=function(t,i,a,d){var p=new Dg(t),v=p.width,o=p.height,r=[];p.decodeAndBlitFrameRGBA(0,r);var c={data:r,width:v,height:o},u=new Nc(100).encode(c,100);return e.processJPEG.call(this,u,i,a,d)},e.processGIF87A=e.processGIF89A}(Kt.API),pr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:d,green:a,blue:i,quad:p}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},pr.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(i){Me.log("bit decode error:"+i)}},pr.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),i=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,d=0;d<t;d++)for(var p=this.datav.getUint8(this.pos++,!0),v=a*this.width*4+8*d*4,o=0;o<8&&8*d+o<this.width;o++){var r=this.palette[p>>7-o&1];this.data[v+4*o]=r.blue,this.data[v+4*o+1]=r.green,this.data[v+4*o+2]=r.red,this.data[v+4*o+3]=255}i!==0&&(this.pos+=4-i)}},pr.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,d=0;d<e;d++){var p=this.datav.getUint8(this.pos++,!0),v=a*this.width*4+2*d*4,o=p>>4,r=15&p,c=this.palette[o];if(this.data[v]=c.blue,this.data[v+1]=c.green,this.data[v+2]=c.red,this.data[v+3]=255,2*d+1>=this.width)break;c=this.palette[r],this.data[v+4]=c.blue,this.data[v+4+1]=c.green,this.data[v+4+2]=c.red,this.data[v+4+3]=255}t!==0&&(this.pos+=4-t)}},pr.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var d=this.datav.getUint8(this.pos++,!0),p=i*this.width*4+4*a;if(d<this.palette.length){var v=this.palette[d];this.data[p]=v.red,this.data[p+1]=v.green,this.data[p+2]=v.blue,this.data[p+3]=255}else this.data[p]=255,this.data[p+1]=255,this.data[p+2]=255,this.data[p+3]=255}e!==0&&(this.pos+=4-e)}},pr.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,d=0;d<this.width;d++){var p=this.datav.getUint16(this.pos,!0);this.pos+=2;var v=(p&t)/t*255|0,o=(p>>5&t)/t*255|0,r=(p>>10&t)/t*255|0,c=p>>15?255:0,u=a*this.width*4+4*d;this.data[u]=r,this.data[u+1]=o,this.data[u+2]=v,this.data[u+3]=c}this.pos+=e}},pr.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),i=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var d=this.bottom_up?a:this.height-1-a,p=0;p<this.width;p++){var v=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(v&t)/t*255|0,r=(v>>5&i)/i*255|0,c=(v>>11)/t*255|0,u=d*this.width*4+4*p;this.data[u]=c,this.data[u+1]=r,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},pr.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),v=t*this.width*4+4*i;this.data[v]=p,this.data[v+1]=d,this.data[v+2]=a,this.data[v+3]=255}this.pos+=this.width%4}},pr.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),p=this.datav.getUint8(this.pos++,!0),v=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*i;this.data[o]=p,this.data[o+1]=d,this.data[o+2]=a,this.data[o+3]=v}},pr.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,i,a,d){var p=new pr(t,!1),v=p.width,o=p.height,r={data:p.getData(),width:v,height:o},c=new Nc(100).encode(r,100);return e.processJPEG.call(this,c,i,a,d)}}(Kt.API),Fu.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,i,a,d){var p=new Fu(t),v=p.width,o=p.height,r={data:p.getData(),width:v,height:o},c=new Nc(100).encode(r,100);return e.processJPEG.call(this,c,i,a,d)}}(Kt.API),Kt.API.processRGBA=function(e,t,i){for(var a=e.data,d=a.length,p=new Uint8Array(d/4*3),v=new Uint8Array(d/4),o=0,r=0,c=0;c<d;c+=4){var u=a[c],s=a[c+1],l=a[c+2],n=a[c+3];p[o++]=u,p[o++]=s,p[o++]=l,v[r++]=n}var h=this.__addimage__.arrayBufferToBinaryString(p);return{alpha:this.__addimage__.arrayBufferToBinaryString(v),data:h,index:t,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Kt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},js=Kt.API,$o=js.getCharWidthsArray=function(e,t){var i,a,d=(t=t||{}).font||this.internal.getFont(),p=t.fontSize||this.internal.getFontSize(),v=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:d.metadata.Unicode.widths,r=o.fof?o.fof:1,c=t.kerning?t.kerning:d.metadata.Unicode.kerning,u=c.fof?c.fof:1,s=t.doKerning!==!1,l=0,n=e.length,h=0,g=o[0]||r,f=[];for(i=0;i<n;i++)a=e.charCodeAt(i),typeof d.metadata.widthOfString=="function"?f.push((d.metadata.widthOfGlyph(d.metadata.characterToGlyph(a))+v*(1e3/p)||0)/1e3):(l=s&&Ae(c[a])==="object"&&!isNaN(parseInt(c[a][h],10))?c[a][h]/u:0,f.push((o[a]||g)/r+l)),h=a;return f},Pu=js.getStringUnitWidth=function(e,t){var i=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),d=t.charSpace||this.internal.getCharSpace();return js.processArabic&&(e=js.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,i,d)/i:$o.apply(this,arguments).reduce(function(p,v){return p+v},0)},Ou=function(e,t,i,a){for(var d=[],p=0,v=e.length,o=0;p!==v&&o+t[p]<i;)o+=t[p],p++;d.push(e.slice(0,p));var r=p;for(o=0;p!==v;)o+t[p]>a&&(d.push(e.slice(r,p)),o=0,r=p),o+=t[p],p++;return r!==p&&d.push(e.slice(r,p)),d},Mu=function(e,t,i){i||(i={});var a,d,p,v,o,r,c,u=[],s=[u],l=i.textIndent||0,n=0,h=0,g=e.split(" "),f=$o.apply(this,[" ",i])[0];if(r=i.lineIndent===-1?g[0].length+2:i.lineIndent||0){var m=Array(r).join(" "),y=[];g.map(function(_){(_=_.split(/\s*\n/)).length>1?y=y.concat(_.map(function(A,M){return(M&&A.length?`
`:"")+A})):y.push(_[0])}),g=y,r=Pu.apply(this,[m,i])}for(p=0,v=g.length;p<v;p++){var x=0;if(a=g[p],r&&a[0]==`
`&&(a=a.substr(1),x=1),l+n+(h=(d=$o.apply(this,[a,i])).reduce(function(_,A){return _+A},0))>t||x){if(h>t){for(o=Ou.apply(this,[a,d,t-(l+n),t]),u.push(o.shift()),u=[o.pop()];o.length;)s.push([o.shift()]);h=d.slice(a.length-(u[0]?u[0].length:0)).reduce(function(_,A){return _+A},0)}else u=[a];s.push(u),l=h+r,n=f}else u.push(a),l+=n+h,n=f}return c=r?function(_,A){return(A?m:"")+_.join(" ")}:function(_){return _.join(" ")},s.map(c)},js.splitTextToSize=function(e,t,i){var a,d=(i=i||{}).fontSize||this.internal.getFontSize(),p=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var s=this.internal.getFont(u.fontName,u.fontStyle);return s.metadata.Unicode?{widths:s.metadata.Unicode.widths||{0:1},kerning:s.metadata.Unicode.kerning||{}}:{font:s.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var v=1*this.internal.scaleFactor*t/d;p.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/d:0,p.lineIndent=i.lineIndent;var o,r,c=[];for(o=0,r=a.length;o<r;o++)c=c.concat(Mu.apply(this,[a[o],v,p]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",i={},a={},d=0;d<t.length;d++)i[t[d]]="0123456789abcdef"[d],a["0123456789abcdef"[d]]=t[d];var p=function(s){return"0x"+parseInt(s,10).toString(16)},v=e.__fontmetrics__.compress=function(s){var l,n,h,g,f=["{"];for(var m in s){if(l=s[m],isNaN(parseInt(m,10))?n="'"+m+"'":(m=parseInt(m,10),n=(n=p(m).slice(2)).slice(0,-1)+a[n.slice(-1)]),typeof l=="number")l<0?(h=p(l).slice(3),g="-"):(h=p(l).slice(2),g=""),h=g+h.slice(0,-1)+a[h.slice(-1)];else{if(Ae(l)!=="object")throw new Error("Don't know what to do with value type "+Ae(l)+".");h=v(l)}f.push(n+h)}return f.push("}"),f.join("")},o=e.__fontmetrics__.uncompress=function(s){if(typeof s!="string")throw new Error("Invalid argument passed to uncompress.");for(var l,n,h,g,f={},m=1,y=f,x=[],_="",A="",M=s.length-1,T=1;T<M;T+=1)(g=s[T])=="'"?l?(h=l.join(""),l=void 0):l=[]:l?l.push(g):g=="{"?(x.push([y,h]),y={},h=void 0):g=="}"?((n=x.pop())[0][n[1]]=y,h=void 0,y=n[0]):g=="-"?m=-1:h===void 0?i.hasOwnProperty(g)?(_+=i[g],h=parseInt(_,16)*m,m=1,_=""):_+=g:i.hasOwnProperty(g)?(A+=i[g],y[h]=parseInt(A,16)*m,m=1,h=void 0,A=""):A+=g;return f},r={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:r,"Courier-Bold":r,"Courier-BoldOblique":r,"Courier-Oblique":r,Helvetica:r,"Helvetica-Bold":r,"Helvetica-BoldOblique":r,"Helvetica-Oblique":r,"Times-Roman":r,"Times-Bold":r,"Times-BoldItalic":r,"Times-Italic":r}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(s){var l=s.font,n=u.Unicode[l.postScriptName];n&&(l.metadata.Unicode={},l.metadata.Unicode.widths=n.widths,l.metadata.Unicode.kerning=n.kerning);var h=c.Unicode[l.postScriptName];h&&(l.metadata.Unicode.encoding=h,l.encoding=h.codePages[0])}])}(Kt.API),function(e){var t=function(i){for(var a=i.length,d=new Uint8Array(a),p=0;p<a;p++)d[p]=i.charCodeAt(p);return d};e.API.events.push(["addFont",function(i){var a=void 0,d=i.font,p=i.instance;if(!d.isStandardFont){if(p===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+d.postScriptName+"').");if(typeof(a=p.existsFileInVFS(d.postScriptName)===!1?p.loadFile(d.postScriptName):p.getFileFromVFS(d.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+d.postScriptName+"').");(function(v,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Ra(o)),v.metadata=e.API.TTFFont.open(o),v.metadata.Unicode=v.metadata.Unicode||{encoding:{},kerning:{},widths:[]},v.metadata.glyIdsUsed=[0]})(d,a)}}])}(Kt),function(e){function t(){return(Qt.canvg?Promise.resolve(Qt.canvg):Uc(()=>import("./index.es-CMw1vGlC.js"),__vite__mapDeps([0,1,2]))).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}Kt.API.addSvgAsImage=function(i,a,d,p,v,o,r,c){if(isNaN(a)||isNaN(d))throw Me.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(p)||isNaN(v))throw Me.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=p,u.height=v;var s=u.getContext("2d");s.fillStyle="#fff",s.fillRect(0,0,u.width,u.height);var l={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},n=this;return t().then(function(h){return h.fromString(s,i,l)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(l)}).then(function(){n.addImage(u.toDataURL("image/jpeg",1),a,d,p,v,r,c)})}}(),Kt.API.putTotalPages=function(e){var t,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),i=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var d=0;d<this.internal.pages[a].length;d++)this.internal.pages[a][d]=this.internal.pages[a][d].replace(t,i);return this},Kt.API.viewerPreferences=function(e,t){var i;e=e||{},t=t||!1;var a,d,p,v={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(v),r=[],c=0,u=0,s=0;function l(h,g){var f,m=!1;for(f=0;f<h.length;f+=1)h[f]===g&&(m=!0);return m}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(v)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var n=o.length;for(s=0;s<n;s+=1)i[o[s]].value=i[o[s]].defaultValue,i[o[s]].explicitSet=!1}if(Ae(e)==="object"){for(d in e)if(p=e[d],l(o,d)&&p!==void 0){if(i[d].type==="boolean"&&typeof p=="boolean")i[d].value=p;else if(i[d].type==="name"&&l(i[d].valueSet,p))i[d].value=p;else if(i[d].type==="integer"&&Number.isInteger(p))i[d].value=p;else if(i[d].type==="array"){for(c=0;c<p.length;c+=1)if(a=!0,p[c].length===1&&typeof p[c][0]=="number")r.push(String(p[c]-1));else if(p[c].length>1){for(u=0;u<p[c].length;u+=1)typeof p[c][u]!="number"&&(a=!1);a===!0&&r.push([p[c][0]-1,p[c][1]-1].join(" "))}i[d].value="["+r.join(" ")+"]"}else i[d].value=i[d].defaultValue;i[d].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var h,g=[];for(h in i)i[h].explicitSet===!0&&(i[h].type==="name"?g.push("/"+h+" /"+i[h].value):g.push("/"+h+" "+i[h].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',d=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),p=unescape(encodeURIComponent(a)),v=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),r=unescape(encodeURIComponent("</x:xmpmeta>")),c=p.length+v.length+o.length+d.length+r.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(d+p+v+o+r),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,d){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:d||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",t)),this}}(Kt.API),function(e){var t=e.API,i=t.pdfEscape16=function(p,v){for(var o,r=v.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],s=0,l=p.length;s<l;++s){if(o=v.metadata.characterToGlyph(p.charCodeAt(s)),v.metadata.glyIdsUsed.push(o),v.metadata.toUnicode[o]=p.charCodeAt(s),r.indexOf(o)==-1&&(r.push(o),r.push([parseInt(v.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},a=function(p){var v,o,r,c,u,s,l;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,r=[],s=0,l=(o=Object.keys(p).sort(function(n,h){return n-h})).length;s<l;s++)v=o[s],r.length>=100&&(u+=`
`+r.length+` beginbfchar
`+r.join(`
`)+`
endbfchar`,r=[]),p[v]!==void 0&&p[v]!==null&&typeof p[v].toString=="function"&&(c=("0000"+p[v].toString(16)).slice(-4),v=("0000"+(+v).toString(16)).slice(-4),r.push("<"+v+"><"+c+">"));return r.length&&(u+=`
`+r.length+` beginbfchar
`+r.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(p){(function(v){var o=v.font,r=v.out,c=v.newObject,u=v.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var s=o.metadata.Unicode.widths,l=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),n="",h=0;h<l.length;h++)n+=String.fromCharCode(l[h]);var g=c();u({data:n,addLength1:!0,objectId:g}),r("endobj");var f=c();u({data:a(o.metadata.toUnicode),addLength1:!0,objectId:f}),r("endobj");var m=c();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+zs(o.fontName)),r("/FontFile2 "+g+" 0 R"),r("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),r("/Flags "+o.metadata.flags),r("/StemV "+o.metadata.stemV),r("/ItalicAngle "+o.metadata.italicAngle),r("/Ascent "+o.metadata.ascender),r("/Descent "+o.metadata.decender),r("/CapHeight "+o.metadata.capHeight),r(">>"),r("endobj");var y=c();r("<<"),r("/Type /Font"),r("/BaseFont /"+zs(o.fontName)),r("/FontDescriptor "+m+" 0 R"),r("/W "+e.API.PDFObject.convert(s)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+o.encoding+")"),r(">>"),r(">>"),r("endobj"),o.objectNumber=c(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+f+" 0 R"),r("/BaseFont /"+zs(o.fontName)),r("/Encoding /"+o.encoding),r("/DescendantFonts ["+y+" 0 R]"),r(">>"),r("endobj"),o.isAlreadyPutted=!0}})(p)}]),t.events.push(["putFont",function(p){(function(v){var o=v.font,r=v.out,c=v.newObject,u=v.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var s=o.metadata.rawData,l="",n=0;n<s.length;n++)l+=String.fromCharCode(s[n]);var h=c();u({data:l,addLength1:!0,objectId:h}),r("endobj");var g=c();u({data:a(o.metadata.toUnicode),addLength1:!0,objectId:g}),r("endobj");var f=c();r("<<"),r("/Descent "+o.metadata.decender),r("/CapHeight "+o.metadata.capHeight),r("/StemV "+o.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+h+" 0 R"),r("/Flags 96"),r("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),r("/FontName /"+zs(o.fontName)),r("/ItalicAngle "+o.metadata.italicAngle),r("/Ascent "+o.metadata.ascender),r(">>"),r("endobj"),o.objectNumber=c();for(var m=0;m<o.metadata.hmtx.widths.length;m++)o.metadata.hmtx.widths[m]=parseInt(o.metadata.hmtx.widths[m]*(1e3/o.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+zs(o.fontName)+"/FontDescriptor "+f+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),r("endobj"),o.isAlreadyPutted=!0}})(p)}]);var d=function(p){var v,o=p.text||"",r=p.x,c=p.y,u=p.options||{},s=p.mutex||{},l=s.pdfEscape,n=s.activeFontKey,h=s.fonts,g=n,f="",m=0,y="",x=h[g].encoding;if(h[g].encoding!=="Identity-H")return{text:o,x:r,y:c,options:u,mutex:s};for(y=o,g=n,Array.isArray(o)&&(y=o[0]),m=0;m<y.length;m+=1)h[g].metadata.hasOwnProperty("cmap")&&(v=h[g].metadata.cmap.unicode.codeMap[y[m].charCodeAt(0)]),v||y[m].charCodeAt(0)<256&&h[g].metadata.hasOwnProperty("Unicode")?f+=y[m]:f+="";var _="";return parseInt(g.slice(1))<14||x==="WinAnsiEncoding"?_=l(f,g).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(_=i(f,h[g])),s.isHex=!0,{text:_,x:r,y:c,options:u,mutex:s}};t.events.push(["postProcessText",function(p){var v=p.text||"",o=[],r={text:v,x:p.x,y:p.y,options:p.options,mutex:p.mutex};if(Array.isArray(v)){var c=0;for(c=0;c<v.length;c+=1)Array.isArray(v[c])&&v[c].length===3?o.push([d(Object.assign({},r,{text:v[c][0]})).text,v[c][1],v[c][2]]):o.push(d(Object.assign({},r,{text:v[c]})).text);p.text=o}else p.text=d(Object.assign({},r,{text:v})).text}])}(Kt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0},e.addFileToVFS=function(i,a){return t.call(this),this.internal.vFS[i]=a,this},e.getFileFromVFS=function(i){return t.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(Kt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var d,p,v,o,r,c,u,s=t,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],n=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,x=0;this.__bidiEngine__={};var _=function(F){var I=F.charCodeAt(),K=I>>8,G=g[K];return G!==void 0?s[256*G+(255&I)]:K===252||K===253?"AL":m.test(K)?"L":K===8?"R":"N"},A=function(F){for(var I,K=0;K<F.length;K++){if((I=_(F.charAt(K)))==="L")return!1;if(I==="R")return!0}return!1},M=function(F,I,K,G){var rt,at,gt,nt,E=I[G];switch(E){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(E="AN");break;case"AL":y=!0,E="R";break;case"WS":E="N";break;case"CS":G<1||G+1>=I.length||(rt=K[G-1])!=="EN"&&rt!=="AN"||(at=I[G+1])!=="EN"&&at!=="AN"?E="N":y&&(at="AN"),E=at===rt?at:"N";break;case"ES":E=(rt=G>0?K[G-1]:"B")==="EN"&&G+1<I.length&&I[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&K[G-1]==="EN"){E="EN";break}if(y){E="N";break}for(gt=G+1,nt=I.length;gt<nt&&I[gt]==="ET";)gt++;E=gt<nt&&I[gt]==="EN"?"EN":"N";break;case"NSM":if(v&&!o){for(nt=I.length,gt=G+1;gt<nt&&I[gt]==="NSM";)gt++;if(gt<nt){var Y=F[G],J=Y>=1425&&Y<=2303||Y===64286;if(rt=I[gt],J&&(rt==="R"||rt==="AL")){E="R";break}}}E=G<1||(rt=I[G-1])==="B"?"N":K[G-1];break;case"B":y=!1,d=!0,E=x;break;case"S":p=!0,E="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":E="N"}return E},T=function(F,I,K){var G=F.split("");return K&&O(G,K,{hiLevel:x}),G.reverse(),I&&I.reverse(),G.join("")},O=function(F,I,K){var G,rt,at,gt,nt,E=-1,Y=F.length,J=0,k=[],R=x?n:l,N=[];for(y=!1,d=!1,p=!1,rt=0;rt<Y;rt++)N[rt]=_(F[rt]);for(at=0;at<Y;at++){if(nt=J,k[at]=M(F,N,k,at),G=240&(J=R[nt][h[k[at]]]),J&=15,I[at]=gt=R[J][5],G>0)if(G===16){for(rt=E;rt<at;rt++)I[rt]=1;E=-1}else E=-1;if(R[J][6])E===-1&&(E=at);else if(E>-1){for(rt=E;rt<at;rt++)I[rt]=gt;E=-1}N[at]==="B"&&(I[at]=0),K.hiLevel|=gt}p&&function(P,U,$){for(var tt=0;tt<$;tt++)if(P[tt]==="S"){U[tt]=x;for(var Q=tt-1;Q>=0&&P[Q]==="WS";Q--)U[Q]=x}}(N,I,Y)},B=function(F,I,K,G,rt){if(!(rt.hiLevel<F)){if(F===1&&x===1&&!d)return I.reverse(),void(K&&K.reverse());for(var at,gt,nt,E,Y=I.length,J=0;J<Y;){if(G[J]>=F){for(nt=J+1;nt<Y&&G[nt]>=F;)nt++;for(E=J,gt=nt-1;E<gt;E++,gt--)at=I[E],I[E]=I[gt],I[gt]=at,K&&(at=K[E],K[E]=K[gt],K[gt]=at);J=nt}J++}}},X=function(F,I,K){var G=F.split(""),rt={hiLevel:x};return K||(K=[]),O(G,K,rt),function(at,gt,nt){if(nt.hiLevel!==0&&u)for(var E,Y=0;Y<at.length;Y++)gt[Y]===1&&(E=f.indexOf(at[Y]))>=0&&(at[Y]=f[E+1])}(G,K,rt),B(2,G,I,K,rt),B(1,G,I,K,rt),G.join("")};return this.__bidiEngine__.doBidiReorder=function(F,I,K){if(function(rt,at){if(at)for(var gt=0;gt<rt.length;gt++)at[gt]=gt;o===void 0&&(o=A(rt)),c===void 0&&(c=A(rt))}(F,I),v||!r||c)if(v&&r&&o^c)x=o?1:0,F=T(F,I,K);else if(!v&&r&&c)x=o?1:0,F=X(F,I,K),F=T(F,I);else if(!v||o||r||c){if(v&&!r&&o^c)F=T(F,I),o?(x=0,F=X(F,I,K)):(x=1,F=X(F,I,K),F=T(F,I));else if(v&&o&&!r&&c)x=1,F=X(F,I,K),F=T(F,I);else if(!v&&!r&&o^c){var G=u;o?(x=1,F=X(F,I,K),x=0,u=!1,F=X(F,I,K),u=G):(x=0,F=X(F,I,K),F=T(F,I),x=1,u=!1,F=X(F,I,K),u=G,F=T(F,I))}}else x=0,F=X(F,I,K);else x=o?1:0,F=X(F,I,K);return F},this.__bidiEngine__.setOptions=function(F){F&&(v=F.isInputVisual,r=F.isOutputVisual,o=F.isInputRtl,c=F.isOutputRtl,u=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var d=a.text,p=(a.x,a.y,a.options||{}),v=(a.mutex,p.lang,[]);if(p.isInputVisual=typeof p.isInputVisual!="boolean"||p.isInputVisual,i.setOptions(p),Object.prototype.toString.call(d)==="[object Array]"){var o=0;for(v=[],o=0;o<d.length;o+=1)Object.prototype.toString.call(d[o])==="[object Array]"?v.push([i.doBidiReorder(d[o][0]),d[o][1],d[o][2]]):v.push([i.doBidiReorder(d[o])]);a.text=v}else a.text=i.doBidiReorder(d);i.setOptions({isInputVisual:!0})}])}(Kt),Kt.API.TTFFont=function(){function e(t){var i;if(this.rawData=t,i=this.contents=new Ln(t),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new Zg(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Bg(this.contents),this.head=new zg(this),this.name=new Yg(this),this.cmap=new id(this),this.toUnicode={},this.hhea=new qg(this),this.maxp=new Vg(this),this.hmtx=new Xg(this),this.post=new Wg(this),this.os2=new Ug(this),this.loca=new Jg(this),this.glyf=new Gg(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,i,a,d,p;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var v,o,r,c;for(c=[],v=0,o=(r=this.bbox).length;v<o;v++)t=r[v],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(a=255&(d=this.post.italic_angle),32768&(i=d>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(p=this.familyClass)===1||p===2||p===3||p===4||p===5||p===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var i;return((i=this.cmap.unicode)!=null?i.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*i},e.prototype.widthOfString=function(t,i,a){var d,p,v,o;for(v=0,p=0,o=(t=""+t).length;0<=o?p<o:p>o;p=0<=o?++p:--p)d=t.charCodeAt(p),v+=this.widthOfGlyph(this.characterToGlyph(d))+a*(1e3/i)||0;return v*(i/1e3)},e.prototype.lineHeight=function(t,i){var a;return i==null&&(i=!1),a=i?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e}();var xr,Ln=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var i,a;for(a=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)a[i]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var i,a,d;for(d=[],i=0,a=t.length;0<=a?i<a:i>a;i=0<=a?++i:--i)d.push(this.writeByte(t.charCodeAt(i)));return d},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,i,a,d,p,v,o,r;return t=this.readByte(),i=this.readByte(),a=this.readByte(),d=this.readByte(),p=this.readByte(),v=this.readByte(),o=this.readByte(),r=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^i)+1099511627776*(255^a)+4294967296*(255^d)+16777216*(255^p)+65536*(255^v)+256*(255^o)+(255^r)+1):72057594037927940*t+281474976710656*i+1099511627776*a+4294967296*d+16777216*p+65536*v+256*o+r},e.prototype.writeLongLong=function(t){var i,a;return i=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var i,a;for(i=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)i.push(this.readByte());return i},e.prototype.write=function(t){var i,a,d,p;for(p=[],a=0,d=t.length;a<d;a++)i=t[a],p.push(this.writeByte(i));return p},e}(),Bg=function(){var e;function t(i){var a,d,p;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},d=0,p=this.tableCount;0<=p?d<p:d>p;d=0<=p?++d:--d)a={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(i){var a,d,p,v,o,r,c,u,s,l,n,h,g;for(g in n=Object.keys(i).length,r=Math.log(2),s=16*Math.floor(Math.log(n)/r),v=Math.floor(s/r),u=16*n-s,(d=new Ln).writeInt(this.scalarType),d.writeShort(n),d.writeShort(s),d.writeShort(v),d.writeShort(u),p=16*n,c=d.pos+p,o=null,h=[],i)for(l=i[g],d.writeString(g),d.writeInt(e(l)),d.writeInt(c),d.writeInt(l.length),h=h.concat(l),g==="head"&&(o=c),c+=l.length;c%4;)h.push(0),c++;return d.write(h),a=2981146554-e(d.data),d.pos=o+8,d.writeUInt32(a),d.data},e=function(i){var a,d,p,v;for(i=rd.call(i);i.length%4;)i.push(0);for(p=new Ln(i),d=0,a=0,v=i.length;a<v;a=a+=4)d+=p.readUInt32();return 4294967295&d},t}(),Rg={}.hasOwnProperty,Br=function(e,t){for(var i in t)Rg.call(t,i)&&(e[i]=t[i]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};xr=function(){function e(t){var i;this.file=t,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var zg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="head",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},t.prototype.encode=function(i){var a;return(a=new Ln).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(i),a.writeShort(this.glyphDataFormat),a.data},t}(),Eu=function(){function e(t,i){var a,d,p,v,o,r,c,u,s,l,n,h,g,f,m,y,x;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=i+t.readInt(),s=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(r=0;r<256;++r)this.codeMap[r]=t.readByte();break;case 4:for(n=t.readUInt16(),l=n/2,t.pos+=6,p=function(){var _,A;for(A=[],r=_=0;0<=l?_<l:_>l;r=0<=l?++_:--_)A.push(t.readUInt16());return A}(),t.pos+=2,g=function(){var _,A;for(A=[],r=_=0;0<=l?_<l:_>l;r=0<=l?++_:--_)A.push(t.readUInt16());return A}(),c=function(){var _,A;for(A=[],r=_=0;0<=l?_<l:_>l;r=0<=l?++_:--_)A.push(t.readUInt16());return A}(),u=function(){var _,A;for(A=[],r=_=0;0<=l?_<l:_>l;r=0<=l?++_:--_)A.push(t.readUInt16());return A}(),d=(this.length-t.pos+this.offset)/2,o=function(){var _,A;for(A=[],r=_=0;0<=d?_<d:_>d;r=0<=d?++_:--_)A.push(t.readUInt16());return A}(),r=m=0,x=p.length;m<x;r=++m)for(f=p[r],a=y=h=g[r];h<=f?y<=f:y>=f;a=h<=f?++y:--y)u[r]===0?v=a+c[r]:(v=o[u[r]/2+(a-h)-(l-r)]||0)!==0&&(v+=c[r]),this.codeMap[a]=65535&v}t.pos=s}return e.encode=function(t,i){var a,d,p,v,o,r,c,u,s,l,n,h,g,f,m,y,x,_,A,M,T,O,B,X,F,I,K,G,rt,at,gt,nt,E,Y,J,k,R,N,P,U,$,tt,Q,ut,dt,St;switch(G=new Ln,v=Object.keys(t).sort(function(ot,st){return ot-st}),i){case"macroman":for(g=0,f=function(){var ot=[];for(h=0;h<256;++h)ot.push(0);return ot}(),y={0:0},p={},rt=0,E=v.length;rt<E;rt++)y[Q=t[d=v[rt]]]==null&&(y[Q]=++g),p[d]={old:t[d],new:y[t[d]]},f[d]=y[t[d]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(f),{charMap:p,subtable:G.data,maxGlyphID:g+1};case"unicode":for(I=[],s=[],x=0,y={},a={},m=c=null,at=0,Y=v.length;at<Y;at++)y[A=t[d=v[at]]]==null&&(y[A]=++x),a[d]={old:A,new:y[A]},o=y[A]-d,m!=null&&o===c||(m&&s.push(m),I.push(d),c=o),m=d;for(m&&s.push(m),s.push(65535),I.push(65535),X=2*(B=I.length),O=2*Math.pow(Math.log(B)/Math.LN2,2),l=Math.log(O/2)/Math.LN2,T=2*B-O,r=[],M=[],n=[],h=gt=0,J=I.length;gt<J;h=++gt){if(F=I[h],u=s[h],F===65535){r.push(0),M.push(0);break}if(F-(K=a[F].new)>=32768)for(r.push(0),M.push(2*(n.length+B-h)),d=nt=F;F<=u?nt<=u:nt>=u;d=F<=u?++nt:--nt)n.push(a[d].new);else r.push(K-F),M.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*B+2*n.length),G.writeUInt16(0),G.writeUInt16(X),G.writeUInt16(O),G.writeUInt16(l),G.writeUInt16(T),$=0,k=s.length;$<k;$++)d=s[$],G.writeUInt16(d);for(G.writeUInt16(0),tt=0,R=I.length;tt<R;tt++)d=I[tt],G.writeUInt16(d);for(ut=0,N=r.length;ut<N;ut++)o=r[ut],G.writeUInt16(o);for(dt=0,P=M.length;dt<P;dt++)_=M[dt],G.writeUInt16(_);for(St=0,U=n.length;St<U;St++)g=n[St],G.writeUInt16(g);return{charMap:a,subtable:G.data,maxGlyphID:x+1}}},e}(),id=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="cmap",t.prototype.parse=function(i){var a,d,p;for(i.pos=this.offset,this.version=i.readUInt16(),p=i.readUInt16(),this.tables=[],this.unicode=null,d=0;0<=p?d<p:d>p;d=0<=p?++d:--d)a=new Eu(i,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(i,a){var d,p;return a==null&&(a="macroman"),d=Eu.encode(i,a),(p=new Ln).writeUInt16(0),p.writeUInt16(1),d.table=p.data.concat(d.subtable),d},t}(),qg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="hhea",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},t}(),Ug=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="OS/2",t.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var a,d;for(d=[],a=0;a<10;++a)d.push(i.readByte());return d}(),this.charRange=function(){var a,d;for(d=[],a=0;a<4;++a)d.push(i.readInt());return d}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var a,d;for(d=[],a=0;a<2;a=++a)d.push(i.readInt());return d}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},t}(),Wg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="post",t.prototype.parse=function(i){var a,d,p;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var v;for(d=i.readUInt16(),this.glyphNameIndex=[],v=0;0<=d?v<d:v>d;v=0<=d?++v:--v)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],p=[];i.pos<this.offset+this.length;)a=i.readByte(),p.push(this.names.push(i.readString(a)));return p;case 151552:return d=i.readUInt16(),this.offsets=i.read(d);case 196608:break;case 262144:return this.map=(function(){var o,r,c;for(c=[],v=o=0,r=this.file.maxp.numGlyphs;0<=r?o<r:o>r;v=0<=r?++o:--o)c.push(i.readUInt32());return c}).call(this)}},t}(),Hg=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Yg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="name",t.prototype.parse=function(i){var a,d,p,v,o,r,c,u,s,l,n;for(i.pos=this.offset,i.readShort(),a=i.readShort(),r=i.readShort(),d=[],v=0;0<=a?v<a:v>a;v=0<=a?++v:--v)d.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+r+i.readShort()});for(c={},v=s=0,l=d.length;s<l;v=++s)p=d[v],i.pos=p.offset,u=i.readString(p.length),o=new Hg(u,p),c[n=p.nameID]==null&&(c[n]=[]),c[p.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),Vg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="maxp",t.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},t}(),Xg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="hmtx",t.prototype.parse=function(i){var a,d,p,v,o,r,c;for(i.pos=this.offset,this.metrics=[],a=0,r=this.file.hhea.numberOfMetrics;0<=r?a<r:a>r;a=0<=r?++a:--a)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(p=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,s;for(s=[],a=u=0;0<=p?u<p:u>p;a=0<=p?++u:--u)s.push(i.readInt16());return s}(),this.widths=(function(){var u,s,l,n;for(n=[],u=0,s=(l=this.metrics).length;u<s;u++)v=l[u],n.push(v.advance);return n}).call(this),d=this.widths[this.widths.length-1],c=[],a=o=0;0<=p?o<p:o>p;a=0<=p?++o:--o)c.push(this.widths.push(d));return c},t.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},t}(),rd=[].slice,Gg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(i){var a,d,p,v,o,r,c,u,s,l;return i in this.cache?this.cache[i]:(v=this.file.loca,a=this.file.contents,d=v.indexOf(i),(p=v.lengthOf(i))===0?this.cache[i]=null:(a.pos=this.offset+d,o=(r=new Ln(a.read(p))).readShort(),u=r.readShort(),l=r.readShort(),c=r.readShort(),s=r.readShort(),this.cache[i]=o===-1?new Kg(r,u,l,c,s):new $g(r,o,u,l,c,s),this.cache[i]))},t.prototype.encode=function(i,a,d){var p,v,o,r,c;for(o=[],v=[],r=0,c=a.length;r<c;r++)p=i[a[r]],v.push(o.length),p&&(o=o.concat(p.encode(d)));return v.push(o.length),{table:o,offsets:v}},t}(),$g=function(){function e(t,i,a,d,p,v){this.raw=t,this.numberOfContours=i,this.xMin=a,this.yMin=d,this.xMax=p,this.yMax=v,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Kg=function(){function e(t,i,a,d,p){var v,o;for(this.raw=t,this.xMin=i,this.yMin=a,this.xMax=d,this.yMax=p,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],v=this.raw;o=v.readShort(),this.glyphOffsets.push(v.pos),this.glyphIDs.push(v.readUInt16()),32&o;)v.pos+=1&o?4:2,128&o?v.pos+=8:64&o?v.pos+=4:8&o&&(v.pos+=2)}return e.prototype.encode=function(){var t,i,a;for(i=new Ln(rd.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)i.pos=this.glyphOffsets[t];return i.data},e}(),Jg=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Br(t,xr),t.prototype.tag="loca",t.prototype.parse=function(i){var a,d;return i.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var p,v;for(v=[],d=0,p=this.length;d<p;d+=2)v.push(2*i.readUInt16());return v}).call(this):(function(){var p,v;for(v=[],d=0,p=this.length;d<p;d+=4)v.push(i.readUInt32());return v}).call(this)},t.prototype.indexOf=function(i){return this.offsets[i]},t.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},t.prototype.encode=function(i,a){for(var d=new Uint32Array(this.offsets.length),p=0,v=0,o=0;o<d.length;++o)if(d[o]=p,v<a.length&&a[v]==o){++v,d[o]=p;var r=this.offsets[o],c=this.offsets[o+1]-r;c>0&&(p+=c)}for(var u=new Array(4*d.length),s=0;s<d.length;++s)u[4*s+3]=255&d[s],u[4*s+2]=(65280&d[s])>>8,u[4*s+1]=(16711680&d[s])>>16,u[4*s]=(4278190080&d[s])>>24;return u},t}(),Zg=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,i,a,d,p;for(i in d=this.font.cmap.tables[0].codeMap,t={},p=this.subset)a=p[i],t[i]=d[a];return t},e.prototype.glyphsFor=function(t){var i,a,d,p,v,o,r;for(d={},v=0,o=t.length;v<o;v++)d[p=t[v]]=this.font.glyf.glyphFor(p);for(p in i=[],d)(a=d[p])!=null&&a.compound&&i.push.apply(i,a.glyphIDs);if(i.length>0)for(p in r=this.glyphsFor(i))a=r[p],d[p]=a;return d},e.prototype.encode=function(t,i){var a,d,p,v,o,r,c,u,s,l,n,h,g,f,m;for(d in a=id.encode(this.generateCmap(),"unicode"),v=this.glyphsFor(t),n={0:0},m=a.charMap)n[(r=m[d]).old]=r.new;for(h in l=a.maxGlyphID,v)h in n||(n[h]=l++);return u=function(y){var x,_;for(x in _={},y)_[y[x]]=x;return _}(n),s=Object.keys(u).sort(function(y,x){return y-x}),g=function(){var y,x,_;for(_=[],y=0,x=s.length;y<x;y++)o=s[y],_.push(u[o]);return _}(),p=this.font.glyf.encode(v,g,n),c=this.font.loca.encode(p.offsets,g),f={cmap:this.font.cmap.raw(),glyf:p.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();Kt.API.PDFObject=function(){var e;function t(){}return e=function(i,a){return(Array(a+1).join("0")+i).slice(-a)},t.convert=function(i){var a,d,p,v;if(Array.isArray(i))return"["+function(){var o,r,c;for(c=[],o=0,r=i.length;o<r;o++)a=i[o],c.push(t.convert(a));return c}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i!=null&&i.isString)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(d in p=["<<"],i)v=i[d],p.push("/"+d+" "+t.convert(v));return p.push(">>"),p.join(`
`)}return""+i},t}();/*! https://mths.be/cssesc v3.0.0 by @mathias */var Qg={},t2=Qg.hasOwnProperty,e2=function(t,i){if(!t)return i;var a={};for(var d in i)a[d]=t2.call(t,d)?t[d]:i[d];return a},i2=/[ -,\.\/:-@\[-\^`\{-~]/,r2=/[ -,\.\/:-@\[\]\^`\{-~]/,n2=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,yh=function e(t,i){i=e2(i,e.options),i.quotes!="single"&&i.quotes!="double"&&(i.quotes="single");for(var a=i.quotes=="double"?'"':"'",d=i.isIdentifier,p=t.charAt(0),v="",o=0,r=t.length;o<r;){var c=t.charAt(o++),u=c.charCodeAt(),s=void 0;if(u<32||u>126){if(u>=55296&&u<=56319&&o<r){var l=t.charCodeAt(o++);(l&64512)==56320?u=((u&1023)<<10)+(l&1023)+65536:o--}s="\\"+u.toString(16).toUpperCase()+" "}else i.escapeEverything?i2.test(c)?s="\\"+c:s="\\"+u.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(c)?s="\\"+u.toString(16).toUpperCase()+" ":c=="\\"||!d&&(c=='"'&&a==c||c=="'"&&a==c)||d&&r2.test(c)?s="\\"+c:s=c;v+=s}return d&&(/^-[-\d]/.test(v)?v="\\-"+v.slice(1):/\d/.test(p)&&(v="\\3"+p+" "+v.slice(1))),v=v.replace(n2,function(n,h,g){return h&&h.length%2?n:(h||"")+g}),!d&&i.wrap?a+v+a:v};yh.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};yh.version="3.0.0";var s2=yh;const nd=ah(s2);var ja=0,Fc=1,Iu=2,Ko=3,ju=4,Du=5,Bu=6,Ec=/[a-z0-9_-]/i,Jo=/[\s\t]/,a2=function(e){for(var t=!0,i=ja,a="",d=0,p,v,o=[];;){if(v=e[d],i===ja){if(!v&&t)break;if(!v&&!t)throw new Error("Parse error");if(v==='"'||v==="'")p=v,i=Fc,t=!1;else if(!Jo.test(v))if(Ec.test(v))i=Ko,t=!1,d--;else throw new Error("Parse error")}else if(i===Fc)if(v)v==="\\"?i=Iu:v===p?(o.push(a),a="",i=ju):a+=v;else throw new Error("Parse Error");else if(i===Iu)if(v===p||v==="\\")a+=v,i=Fc;else throw new Error("Parse error");else if(i===Ko)if(v)Ec.test(v)?a+=v:v===","?(o.push(a),a="",i=ja):Jo.test(v)?i=Du:v==="\\"&&(i=Bu);else{o.push(a);break}else if(i===Bu){if(/[0-9a-f]/i.test(v))throw new Error("Parse error");a+=v,i=Ko}else if(i===Du)if(v){if(Ec.test(v))a+=" "+v,i=Ko;else if(v===",")o.push(a),a="",i=ja;else if(!Jo.test(v))throw new Error("Parse error")}else{o.push(a);break}else if(i===ju)if(v){if(v===",")i=ja;else if(!Jo.test(v))throw new Error("Parse error")}else break;d++}return o},o2=/[^a-z0-9_-]/i,l2=function(e,t){var i=t&&t.quote||'"';if(i!=='"'&&i!=="'")throw new Error("Quote must be `'` or `\"`");for(var a=new RegExp(i,"g"),d=[],p=0;p<e.length;++p){var v=e[p];o2.test(v)&&(v=v.replace(/\\/g,"\\\\").replace(a,"\\"+i),v=i+v+i),d.push(v)}return d.join(", ")},c2={parse:a2,stringify:l2};const h2=ah(c2);var nl={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},u2=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function f2(e){return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&u2.indexOf(e)>=0}function d2(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function p2(e){return(e|32)===97}function Ds(e){return e>=48&&e<=57}function g2(e){return e>=48&&e<=57||e===43||e===45||e===46}function m2(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function sl(e){for(;e.index<e.max&&f2(e.path.charCodeAt(e.index));)e.index++}function v2(e){var t=e.path.charCodeAt(e.index);if(t===48){e.param=0,e.index++;return}if(t===49){e.param=1,e.index++;return}e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")"}function b2(e){var t=e.index,i=t,a=e.max,d=!1,p=!1,v=!1,o=!1,r;if(i>=a){e.err="SvgPath: missed param (at pos "+i+")";return}if(r=e.path.charCodeAt(i),(r===43||r===45)&&(i++,r=i<a?e.path.charCodeAt(i):0),!Ds(r)&&r!==46){e.err="SvgPath: param should start with 0..9 or `.` (at pos "+i+")";return}if(r!==46){if(d=r===48,i++,r=i<a?e.path.charCodeAt(i):0,d&&i<a&&r&&Ds(r)){e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+t+")";return}for(;i<a&&Ds(e.path.charCodeAt(i));)i++,p=!0;r=i<a?e.path.charCodeAt(i):0}if(r===46){for(o=!0,i++;Ds(e.path.charCodeAt(i));)i++,v=!0;r=i<a?e.path.charCodeAt(i):0}if(r===101||r===69){if(o&&!p&&!v){e.err="SvgPath: invalid float exponent (at pos "+i+")";return}if(i++,r=i<a?e.path.charCodeAt(i):0,(r===43||r===45)&&i++,i<a&&Ds(e.path.charCodeAt(i)))for(;i<a&&Ds(e.path.charCodeAt(i));)i++;else{e.err="SvgPath: invalid float exponent (at pos "+i+")";return}}e.index=i,e.param=parseFloat(e.path.slice(t,i))+0}function Ic(e){var t,i;t=e.path[e.segmentStart],i=t.toLowerCase();var a=e.data;if(i==="m"&&a.length>2&&(e.result.push([t,a[0],a[1]]),a=a.slice(2),i="l",t=t==="m"?"l":"L"),i==="r")e.result.push([t].concat(a));else for(;a.length>=nl[i]&&(e.result.push([t].concat(a.splice(0,nl[i]))),!!nl[i]););}function y2(e){var t=e.max,i,a,d,p,v;if(e.segmentStart=e.index,i=e.path.charCodeAt(e.index),a=p2(i),!d2(i)){e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")";return}if(p=nl[e.path[e.index].toLowerCase()],e.index++,sl(e),e.data=[],!p){Ic(e);return}for(d=!1;;){for(v=p;v>0;v--){if(a&&(v===3||v===4)?v2(e):b2(e),e.err.length){Ic(e);return}e.data.push(e.param),sl(e),d=!1,e.index<t&&e.path.charCodeAt(e.index)===44&&(e.index++,sl(e),d=!0)}if(!d&&(e.index>=e.max||!g2(e.path.charCodeAt(e.index))))break}Ic(e)}var w2=function(t){var i=new m2(t),a=i.max;for(sl(i);i.index<a&&!i.err.length;)y2(i);return i.result.length&&("mM".indexOf(i.result[0][0])<0?(i.err="SvgPath: string should start with `M` or `m`",i.result=[]):i.result[0][0]="M"),{err:i.err,segments:i.result}};function x2(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function yr(){if(!(this instanceof yr))return new yr;this.queue=[],this.cache=null}yr.prototype.matrix=function(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0?this:(this.cache=null,this.queue.push(e),this)};yr.prototype.translate=function(e,t){return(e!==0||t!==0)&&(this.cache=null,this.queue.push([1,0,0,1,e,t])),this};yr.prototype.scale=function(e,t){return(e!==1||t!==1)&&(this.cache=null,this.queue.push([e,0,0,t,0,0])),this};yr.prototype.rotate=function(e,t,i){var a,d,p;return e!==0&&(this.translate(t,i),a=e*Math.PI/180,d=Math.cos(a),p=Math.sin(a),this.queue.push([d,p,-p,d,0,0]),this.cache=null,this.translate(-t,-i)),this};yr.prototype.skewX=function(e){return e!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this};yr.prototype.skewY=function(e){return e!==0&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this};yr.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=x2(this.cache,this.queue[e]);return this.cache};yr.prototype.calc=function(e,t,i){var a;return this.queue.length?(this.cache||(this.cache=this.toArray()),a=this.cache,[e*a[0]+t*a[2]+(i?0:a[4]),e*a[1]+t*a[3]+(i?0:a[5])]):[e,t]};var sd=yr,_2=sd,S2={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},C2=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,A2=/[\s,]+/,k2=function(t){var i=new _2,a,d;return t.split(C2).forEach(function(p){if(p.length){if(typeof S2[p]<"u"){a=p;return}switch(d=p.split(A2).map(function(v){return+v||0}),a){case"matrix":d.length===6&&i.matrix(d);return;case"scale":d.length===1?i.scale(d[0],d[0]):d.length===2&&i.scale(d[0],d[1]);return;case"rotate":d.length===1?i.rotate(d[0],0,0):d.length===3&&i.rotate(d[0],d[1],d[2]);return;case"translate":d.length===1?i.translate(d[0],0):d.length===2&&i.translate(d[0],d[1]);return;case"skewX":d.length===1&&i.skewX(d[0]);return;case"skewY":d.length===1&&i.skewY(d[0]);return}}}),i},za=Math.PI*2;function Ru(e,t,i,a){var d=e*a-t*i<0?-1:1,p=e*i+t*a;return p>1&&(p=1),p<-1&&(p=-1),d*Math.acos(p)}function L2(e,t,i,a,d,p,v,o,r,c){var u=c*(e-i)/2+r*(t-a)/2,s=-r*(e-i)/2+c*(t-a)/2,l=v*v,n=o*o,h=u*u,g=s*s,f=l*n-l*g-n*h;f<0&&(f=0),f/=l*g+n*h,f=Math.sqrt(f)*(d===p?-1:1);var m=f*v/o*s,y=f*-o/v*u,x=c*m-r*y+(e+i)/2,_=r*m+c*y+(t+a)/2,A=(u-m)/v,M=(s-y)/o,T=(-u-m)/v,O=(-s-y)/o,B=Ru(1,0,A,M),X=Ru(A,M,T,O);return p===0&&X>0&&(X-=za),p===1&&X<0&&(X+=za),[x,_,B,X]}function T2(e,t){var i=1.3333333333333333*Math.tan(t/4),a=Math.cos(e),d=Math.sin(e),p=Math.cos(e+t),v=Math.sin(e+t);return[a,d,a-d*i,d+a*i,p+v*i,v-p*i,p,v]}var P2=function(t,i,a,d,p,v,o,r,c){var u=Math.sin(c*za/360),s=Math.cos(c*za/360),l=s*(t-a)/2+u*(i-d)/2,n=-u*(t-a)/2+s*(i-d)/2;if(l===0&&n===0)return[];if(o===0||r===0)return[];o=Math.abs(o),r=Math.abs(r);var h=l*l/(o*o)+n*n/(r*r);h>1&&(o*=Math.sqrt(h),r*=Math.sqrt(h));var g=L2(t,i,a,d,p,v,o,r,u,s),f=[],m=g[2],y=g[3],x=Math.max(Math.ceil(Math.abs(y)/(za/4)),1);y/=x;for(var _=0;_<x;_++)f.push(T2(m,y)),m+=y;return f.map(function(A){for(var M=0;M<A.length;M+=2){var T=A[M+0],O=A[M+1];T*=o,O*=r;var B=s*T-u*O,X=u*T+s*O;A[M+0]=B+g[0],A[M+1]=X+g[1]}return A})},qa=1e-10,zu=Math.PI/180;function Ya(e,t,i){if(!(this instanceof Ya))return new Ya(e,t,i);this.rx=e,this.ry=t,this.ax=i}Ya.prototype.transform=function(e){var t=Math.cos(this.ax*zu),i=Math.sin(this.ax*zu),a=[this.rx*(e[0]*t+e[2]*i),this.rx*(e[1]*t+e[3]*i),this.ry*(-e[0]*i+e[2]*t),this.ry*(-e[1]*i+e[3]*t)],d=a[0]*a[0]+a[2]*a[2],p=a[1]*a[1]+a[3]*a[3],v=((a[0]-a[3])*(a[0]-a[3])+(a[2]+a[1])*(a[2]+a[1]))*((a[0]+a[3])*(a[0]+a[3])+(a[2]-a[1])*(a[2]-a[1])),o=(d+p)/2;if(v<qa*o)return this.rx=this.ry=Math.sqrt(o),this.ax=0,this;var r=a[0]*a[1]+a[2]*a[3];v=Math.sqrt(v);var c=o+v/2,u=o-v/2;return this.ax=Math.abs(r)<qa&&Math.abs(c-p)<qa?90:Math.atan(Math.abs(r)>Math.abs(c-p)?(c-d)/r:r/(c-p))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)):(this.ax+=90,this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)),this};Ya.prototype.isDegenerate=function(){return this.rx<qa*this.ry||this.ry<qa*this.rx};var O2=Ya,M2=w2,N2=k2,Nn=sd,F2=P2,E2=O2;function Re(e){if(!(this instanceof Re))return new Re(e);var t=M2(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}Re.from=function(e){if(typeof e=="string")return new Re(e);if(e instanceof Re){var t=new Re("");return t.err=e.err,t.segments=e.segments.map(function(i){return i.slice()}),t.__stack=e.__stack.map(function(i){return Nn().matrix(i.toArray())}),t}throw new Error("SvgPath.from: invalid param type "+e)};Re.prototype.__matrix=function(e){var t=this,i;e.queue.length&&this.iterate(function(a,d,p,v){var o,r,c,u;switch(a[0]){case"v":o=e.calc(0,a[1],!0),r=o[0]===0?["v",o[1]]:["l",o[0],o[1]];break;case"V":o=e.calc(p,a[1],!1),r=o[0]===e.calc(p,v,!1)[0]?["V",o[1]]:["L",o[0],o[1]];break;case"h":o=e.calc(a[1],0,!0),r=o[1]===0?["h",o[0]]:["l",o[0],o[1]];break;case"H":o=e.calc(a[1],v,!1),r=o[1]===e.calc(p,v,!1)[1]?["H",o[0]]:["L",o[0],o[1]];break;case"a":case"A":var s=e.toArray(),l=E2(a[1],a[2],a[3]).transform(s);if(s[0]*s[3]-s[1]*s[2]<0&&(a[5]=a[5]?"0":"1"),o=e.calc(a[6],a[7],a[0]==="a"),a[0]==="A"&&a[6]===p&&a[7]===v||a[0]==="a"&&a[6]===0&&a[7]===0){r=[a[0]==="a"?"l":"L",o[0],o[1]];break}l.isDegenerate()?r=[a[0]==="a"?"l":"L",o[0],o[1]]:r=[a[0],l.rx,l.ry,l.ax,a[4],a[5],o[0],o[1]];break;case"m":u=d>0,o=e.calc(a[1],a[2],u),r=["m",o[0],o[1]];break;default:for(c=a[0],r=[c],u=c.toLowerCase()===c,i=1;i<a.length;i+=2)o=e.calc(a[i],a[i+1],u),r.push(o[0],o[1])}t.segments[d]=r},!0)};Re.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(e=Nn(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}};Re.prototype.toString=function(){var e="",t="",i=!1;this.__evaluateStack();for(var a=0,d=this.segments.length;a<d;a++){var p=this.segments[a],v=p[0];v!==t||v==="m"||v==="M"?(v==="m"&&t==="z"&&(e+=" "),e+=v,i=!1):i=!0;for(var o=1;o<p.length;o++){var r=p[o];o===1?i&&r>=0&&(e+=" "):r>=0&&(e+=" "),e+=r}t=v}return e};Re.prototype.translate=function(e,t){return this.__stack.push(Nn().translate(e,t||0)),this};Re.prototype.scale=function(e,t){return this.__stack.push(Nn().scale(e,!t&&t!==0?e:t)),this};Re.prototype.rotate=function(e,t,i){return this.__stack.push(Nn().rotate(e,t||0,i||0)),this};Re.prototype.skewX=function(e){return this.__stack.push(Nn().skewX(e)),this};Re.prototype.skewY=function(e){return this.__stack.push(Nn().skewY(e)),this};Re.prototype.matrix=function(e){return this.__stack.push(Nn().matrix(e)),this};Re.prototype.transform=function(e){return e.trim()?(this.__stack.push(N2(e)),this):this};Re.prototype.round=function(e){var t=0,i=0,a=0,d=0,p;return e=e||0,this.__evaluateStack(),this.segments.forEach(function(v){var o=v[0].toLowerCase()===v[0];switch(v[0]){case"H":case"h":o&&(v[1]+=a),a=v[1]-v[1].toFixed(e),v[1]=+v[1].toFixed(e);return;case"V":case"v":o&&(v[1]+=d),d=v[1]-v[1].toFixed(e),v[1]=+v[1].toFixed(e);return;case"Z":case"z":a=t,d=i;return;case"M":case"m":o&&(v[1]+=a,v[2]+=d),a=v[1]-v[1].toFixed(e),d=v[2]-v[2].toFixed(e),t=a,i=d,v[1]=+v[1].toFixed(e),v[2]=+v[2].toFixed(e);return;case"A":case"a":o&&(v[6]+=a,v[7]+=d),a=v[6]-v[6].toFixed(e),d=v[7]-v[7].toFixed(e),v[1]=+v[1].toFixed(e),v[2]=+v[2].toFixed(e),v[3]=+v[3].toFixed(e+2),v[6]=+v[6].toFixed(e),v[7]=+v[7].toFixed(e);return;default:p=v.length,o&&(v[p-2]+=a,v[p-1]+=d),a=v[p-2]-v[p-2].toFixed(e),d=v[p-1]-v[p-1].toFixed(e),v.forEach(function(r,c){c&&(v[c]=+v[c].toFixed(e))});return}}),this};Re.prototype.iterate=function(e,t){var i=this.segments,a={},d=!1,p=0,v=0,o=0,r=0,c,u,s;if(t||this.__evaluateStack(),i.forEach(function(l,n){var h=e(l,n,p,v);Array.isArray(h)&&(a[n]=h,d=!0);var g=l[0]===l[0].toLowerCase();switch(l[0]){case"m":case"M":p=l[1]+(g?p:0),v=l[2]+(g?v:0),o=p,r=v;return;case"h":case"H":p=l[1]+(g?p:0);return;case"v":case"V":v=l[1]+(g?v:0);return;case"z":case"Z":p=o,v=r;return;default:p=l[l.length-2]+(g?p:0),v=l[l.length-1]+(g?v:0)}}),!d)return this;for(s=[],c=0;c<i.length;c++)if(typeof a[c]<"u")for(u=0;u<a[c].length;u++)s.push(a[c][u]);else s.push(i[c]);return this.segments=s,this};Re.prototype.abs=function(){return this.iterate(function(e,t,i,a){var d=e[0],p=d.toUpperCase(),v;if(d!==p)switch(e[0]=p,d){case"v":e[1]+=a;return;case"a":e[6]+=i,e[7]+=a;return;default:for(v=1;v<e.length;v++)e[v]+=v%2?i:a}},!0),this};Re.prototype.rel=function(){return this.iterate(function(e,t,i,a){var d=e[0],p=d.toLowerCase(),v;if(d!==p&&!(t===0&&d==="M"))switch(e[0]=p,d){case"V":e[1]-=a;return;case"A":e[6]-=i,e[7]-=a;return;default:for(v=1;v<e.length;v++)e[v]-=v%2?i:a}},!0),this};Re.prototype.unarc=function(){return this.iterate(function(e,t,i,a){var d,p,v,o=[],r=e[0];return r!=="A"&&r!=="a"?null:(r==="a"?(p=i+e[6],v=a+e[7]):(p=e[6],v=e[7]),d=F2(i,a,p,v,e[4],e[5],e[1],e[2],e[3]),d.length===0?[[e[0]==="a"?"l":"L",e[6],e[7]]]:(d.forEach(function(c){o.push(["C",c[2],c[3],c[4],c[5],c[6],c[7]])}),o))}),this};Re.prototype.unshort=function(){var e=this.segments,t,i,a,d,p;return this.iterate(function(v,o,r,c){var u=v[0],s=u.toUpperCase(),l;o&&(s==="T"?(l=u==="t",a=e[o-1],a[0]==="Q"?(t=a[1]-r,i=a[2]-c):a[0]==="q"?(t=a[1]-a[3],i=a[2]-a[4]):(t=0,i=0),d=-t,p=-i,l||(d+=r,p+=c),e[o]=[l?"q":"Q",d,p,v[1],v[2]]):s==="S"&&(l=u==="s",a=e[o-1],a[0]==="C"?(t=a[3]-r,i=a[4]-c):a[0]==="c"?(t=a[3]-a[5],i=a[4]-a[6]):(t=0,i=0),d=-t,p=-i,l||(d+=r,p+=c),e[o]=[l?"c":"C",d,p,v[1],v[2],v[3],v[4]]))}),this};var I2=Re,j2=I2;const D2=ah(j2);var qu=function(e){var t=e,i,a={a:0,b:0,c:0},d=[],p=/(\[[^\]]+\])/g,v=/(#[^\#\s\+>~\.\[:\)]+)/g,o=/(\.[^\s\+>~\.\[:\)]+)/g,r=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,u=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,s=/([^\s\+>~\.\[:]+)/g;return i=function(l,n){var h,g,f,m,y,x;if(l.test(t))for(h=t.match(l),g=0,f=h.length;g<f;g+=1)a[n]+=1,m=h[g],y=t.indexOf(m),x=m.length,d.push({selector:e.substr(y,x),type:n,index:y,length:x}),t=t.replace(m,Array(x+1).join(" "))},function(){var l=function(f){var m,y,x,_;if(f.test(t))for(m=t.match(f),y=0,x=m.length;y<x;y+=1)_=m[y],t=t.replace(_,Array(_.length+1).join("A"))},n=/\\[0-9A-Fa-f]{6}\s?/g,h=/\\[0-9A-Fa-f]{1,5}\s/g,g=/\\./g;l(n),l(h),l(g)}(),function(){var l=/{[^]*/gm,n,h,g,f;if(l.test(t))for(n=t.match(l),h=0,g=n.length;h<g;h+=1)f=n[h],t=t.replace(f,Array(f.length+1).join(" "))}(),i(p,"b"),i(v,"a"),i(o,"b"),i(r,"c"),i(c,"b"),i(u,"b"),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),t=t.replace(/:not/g,"    "),t=t.replace(/:local/g,"      "),t=t.replace(/:global/g,"       "),t=t.replace(/[\(\)]/g," "),i(s,"c"),d.sort(function(l,n){return l.index-n.index}),{selector:e,specificity:"0,"+a.a.toString()+","+a.b.toString()+","+a.c.toString(),specificityArray:[0,a.a,a.b,a.c],parts:d}},B2=function(e,t){var i,a,d;if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";i=qu(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(p){return typeof p=="number"}).length!==4)throw"Invalid specificity array";i=e}else throw"Invalid CSS selector or specificity array";if(typeof t=="string"){if(t.indexOf(",")!==-1)throw"Invalid CSS selector";a=qu(t).specificityArray}else if(Array.isArray(t)){if(t.filter(function(p){return typeof p=="number"}).length!==4)throw"Invalid specificity array";a=t}else throw"Invalid CSS selector or specificity array";for(d=0;d<4;d+=1){if(i[d]<a[d])return-1;if(i[d]>a[d])return 1}return 0},rh=function(e,t){return rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(i[d]=a[d])},rh(e,t)};function Le(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}rh(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var gl=function(){return gl=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var d in t=arguments[i])Object.prototype.hasOwnProperty.call(t,d)&&(e[d]=t[d]);return e},gl.apply(this,arguments)};function Ne(e,t,i,a){return new(i||(i=Promise))(function(d,p){function v(c){try{r(a.next(c))}catch(u){p(u)}}function o(c){try{r(a.throw(c))}catch(u){p(u)}}function r(c){var u;c.done?d(c.value):(u=c.value,u instanceof i?u:new i(function(s){s(u)})).then(v,o)}r((a=a.apply(e,t||[])).next())})}function Fe(e,t){var i,a,d,p,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return p={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function o(r){return function(c){return function(u){if(i)throw new TypeError("Generator is already executing.");for(;v;)try{if(i=1,a&&(d=2&u[0]?a.return:u[0]?a.throw||((d=a.return)&&d.call(a),0):a.next)&&!(d=d.call(a,u[1])).done)return d;switch(a=0,d&&(u=[2&u[0],d.value]),u[0]){case 0:case 1:d=u;break;case 4:return v.label++,{value:u[1],done:!1};case 5:v.label++,a=u[1],u=[0];continue;case 7:u=v.ops.pop(),v.trys.pop();continue;default:if(d=v.trys,!((d=d.length>0&&d[d.length-1])||u[0]!==6&&u[0]!==2)){v=0;continue}if(u[0]===3&&(!d||u[1]>d[0]&&u[1]<d[3])){v.label=u[1];break}if(u[0]===6&&v.label<d[1]){v.label=d[1],d=u;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(u);break}d[2]&&v.ops.pop(),v.trys.pop();continue}u=t.call(e,v)}catch(s){u=[6,s],a=0}finally{i=d=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([r,c])}}}var mr=function(){function e(t){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,t){for(var i in t.charAt(0)=="#"&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)t==i&&(t=this.simpleColors[i]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(r){return[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]}},{re:/^rgb\(([0-9.]+)%,\s*([0-9.]+)%,\s*([0-9.]+)%\)$/,example:["rgb(50.5%, 25.75%, 75.5%)","rgb(100%,0%,0%)"],process:function(r){return[Math.round(2.55*parseFloat(r[1])),Math.round(2.55*parseFloat(r[2])),Math.round(2.55*parseFloat(r[3]))]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(r){return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(r){return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]}}];for(var a=0;a<this.colorDefs.length;a++){var d=this.colorDefs[a].re,p=this.colorDefs[a].process,v=d.exec(t);if(v){var o=p(v);this.r=o[0],this.g=o[1],this.b=o[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return e.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},e.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},e.prototype.toHex=function(){var t=this.r.toString(16),i=this.g.toString(16),a=this.b.toString(16);return t.length==1&&(t="0"+t),i.length==1&&(i="0"+i),a.length==1&&(a="0"+a),"#"+t+i+a},e.prototype.getHelpXML=function(){for(var t=[],i=0;i<this.colorDefs.length;i++)for(var a=this.colorDefs[i].example,d=0;d<a.length;d++)t[t.length]=a[d];for(var p in this.simpleColors)t[t.length]=p;var v=document.createElement("ul");for(v.setAttribute("id","rgbcolor-examples"),i=0;i<t.length;i++)try{var o=document.createElement("li"),r=new e(t[i]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+r.toHex()+"; color:"+r.toHex(),c.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+t[i]+" -> "+r.toRGB()+" -> "+r.toHex());o.appendChild(c),o.appendChild(u),v.appendChild(o)}catch{}return v},e}(),gi=function(){function e(t){this.color=t}return e.prototype.getFillData=function(t,i){return Ne(this,void 0,void 0,function(){return Fe(this,function(a){return[2,void 0]})})},e}(),Zs=function(){function e(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null,this.contextFill=null,this.contextStroke=null,this.fillRule=null}return e.prototype.clone=function(){var t=new e;return t.xmlSpace=this.xmlSpace,t.fill=this.fill,t.fillOpacity=this.fillOpacity,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.fontStyle=this.fontStyle,t.fontWeight=this.fontWeight,t.opacity=this.opacity,t.stroke=this.stroke,t.strokeDasharray=this.strokeDasharray,t.strokeDashoffset=this.strokeDashoffset,t.strokeLinecap=this.strokeLinecap,t.strokeLinejoin=this.strokeLinejoin,t.strokeMiterlimit=this.strokeMiterlimit,t.strokeOpacity=this.strokeOpacity,t.strokeWidth=this.strokeWidth,t.textAnchor=this.textAnchor,t.alignmentBaseline=this.alignmentBaseline,t.visibility=this.visibility,t.color=this.color,t.fillRule=this.fillRule,t.contextFill=this.contextFill,t.contextStroke=this.contextStroke,t},e.default=function(){var t=new e;return t.xmlSpace="default",t.fill=new gi(new mr("rgb(0, 0, 0)")),t.fillOpacity=1,t.fontFamily="times",t.fontSize=16,t.fontStyle="normal",t.fontWeight="normal",t.opacity=1,t.stroke=null,t.strokeDasharray=null,t.strokeDashoffset=0,t.strokeLinecap="butt",t.strokeLinejoin="miter",t.strokeMiterlimit=4,t.strokeOpacity=1,t.strokeWidth=1,t.alignmentBaseline="baseline",t.textAnchor="start",t.visibility="visible",t.color=new mr("rgb(0, 0, 0)"),t.fillRule="nonzero",t.contextFill=null,t.contextStroke=null,t},e.getContextColors=function(t,i){i===void 0&&(i=!1);var a={};return t.attributeState.contextFill&&(a.contextFill=t.attributeState.contextFill),t.attributeState.contextStroke&&(a.contextStroke=t.attributeState.contextStroke),i&&t.attributeState.color&&(a.color=t.attributeState.color),a},e}(),Fn=function(){function e(t,i){var a,d,p;this.pdf=t,this.svg2pdfParameters=i.svg2pdfParameters,this.attributeState=i.attributeState?i.attributeState.clone():Zs.default(),this.viewport=i.viewport,this.refsHandler=i.refsHandler,this.styleSheets=i.styleSheets,this.textMeasure=i.textMeasure,this.transform=(a=i.transform)!==null&&a!==void 0?a:this.pdf.unitMatrix,this.withinClipPath=(d=i.withinClipPath)!==null&&d!==void 0&&d,this.withinUse=(p=i.withinUse)!==null&&p!==void 0&&p}return e.prototype.clone=function(t){var i,a,d,p;return t===void 0&&(t={}),new e(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:t.attributeState?t.attributeState.clone():this.attributeState.clone(),viewport:(i=t.viewport)!==null&&i!==void 0?i:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(a=t.transform)!==null&&a!==void 0?a:this.transform,withinClipPath:(d=t.withinClipPath)!==null&&d!==void 0?d:this.withinClipPath,withinUse:(p=t.withinUse)!==null&&p!==void 0?p:this.withinUse})},e}(),ad=function(){function e(t){this.renderedElements={},this.idMap=t,this.idPrefix=String(e.instanceCounter++)}return e.prototype.getRendered=function(t,i,a){return Ne(this,void 0,void 0,function(){var d,p;return Fe(this,function(v){switch(v.label){case 0:return d=this.generateKey(t,i),this.renderedElements.hasOwnProperty(d)?[2,this.renderedElements[t]]:(p=this.get(t),this.renderedElements[d]=p,[4,a(p)]);case 1:return v.sent(),[2,p]}})})},e.prototype.get=function(t){return this.idMap[nd(t,{isIdentifier:!0})]},e.prototype.generateKey=function(t,i){var a="";return i&&(a=["color","contextFill","contextStroke"].map(function(d){var p,v;return(v=(p=i[d])===null||p===void 0?void 0:p.toRGBA())!==null&&v!==void 0?v:""}).join("|")),this.idPrefix+"|"+t+"|"+a},e.instanceCounter=0,e}();function Uu(e,t){return Math.atan2(t[1]-e[1],t[0]-e[0])}var Wu=2/3;function Hu(e,t){return[Wu*(t[0]-e[0])+e[0],Wu*(t[1]-e[1])+e[1]]}function Da(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function Bs(e,t){return Da([t[0]-e[0],t[1]-e[1]])}function Zo(e,t){return[e[0]+t[0],e[1]+t[1]]}function jc(e,t){var i=e[0],a=e[1];return[t.a*i+t.c*a+t.e,t.b*i+t.d*a+t.f]}var Qs=function(){function e(){this.segments=[]}return e.prototype.moveTo=function(t,i){return this.segments.push(new ci(t,i)),this},e.prototype.lineTo=function(t,i){return this.segments.push(new Cn(t,i)),this},e.prototype.curveTo=function(t,i,a,d,p,v){return this.segments.push(new Fr(t,i,a,d,p,v)),this},e.prototype.close=function(){return this.segments.push(new nh),this},e.prototype.transform=function(t){this.segments.forEach(function(i){if(i instanceof ci||i instanceof Cn||i instanceof Fr){var a=jc([i.x,i.y],t);i.x=a[0],i.y=a[1]}if(i instanceof Fr){var d=jc([i.x1,i.y1],t),p=jc([i.x2,i.y2],t);i.x1=d[0],i.y1=d[1],i.x2=p[0],i.y2=p[1]}})},e.prototype.draw=function(t){var i=t.pdf;this.segments.forEach(function(a){a instanceof ci?i.moveTo(a.x,a.y):a instanceof Cn?i.lineTo(a.x,a.y):a instanceof Fr?i.curveTo(a.x1,a.y1,a.x2,a.y2,a.x,a.y):i.close()})},e}(),ci=function(e,t){this.x=e,this.y=t},Cn=function(e,t){this.x=e,this.y=t},Fr=function(e,t,i,a,d,p){this.x1=e,this.y1=t,this.x2=i,this.y2=a,this.x=d,this.y=p},nh=function(){};function Tn(e,t){return t.split(",").indexOf((e.nodeName||e.tagName).toLowerCase())>=0}function Et(e,t,i,a){var d;a===void 0&&(a=i);var p=(d=e.style)===null||d===void 0?void 0:d.getPropertyValue(a);if(p)return p;var v=t.getPropertyValue(e,a);return v||e.hasAttribute(i)&&e.getAttribute(i)||void 0}function sn(e,t,i){if(Et(e.element,i.styleSheets,"display")==="none")return!1;var a=t,d=Et(e.element,i.styleSheets,"visibility");return d&&(a=d!=="hidden"),a}function En(e,t,i){var a=sn(e,t,i);return e.element.childNodes.length!==0&&(e.children.forEach(function(d){d.isVisible(a,i)&&(a=!0)}),a)}var R2=function(){function e(){this.markers=[]}return e.prototype.addMarker=function(t){this.markers.push(t)},e.prototype.draw=function(t){return Ne(this,void 0,void 0,function(){var i,a,d,p,v,o,r,c;return Fe(this,function(u){switch(u.label){case 0:i=0,u.label=1;case 1:return i<this.markers.length?(a=this.markers[i],d=void 0,p=a.angle,v=a.anchor,o=Math.cos(p),r=Math.sin(p),d=t.pdf.Matrix(o,r,-r,o,v[0],v[1]),d=t.pdf.matrixMult(t.pdf.Matrix(t.attributeState.strokeWidth,0,0,t.attributeState.strokeWidth,0,0),d),d=t.pdf.matrixMult(d,t.transform),t.pdf.saveGraphicsState(),c=Zs.getContextColors(t),[4,t.refsHandler.getRendered(a.id,c,function(s){return s.apply(t)})]):[3,4];case 2:u.sent(),t.pdf.doFormObject(t.refsHandler.generateKey(a.id,c),d),t.pdf.restoreGraphicsState(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e}(),_n=function(e,t,i,a){a===void 0&&(a=!1),this.id=e,this.anchor=t,this.angle=i,this.isStartMarker=a},wh=/url\(["']?#([^"']+)["']?\)/,z2={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"},Yu="http://www.w3.org/2000/svg";function Qr(e,t){var i;return(i=e&&e.toString().match(/^([\-0-9.]+)em$/))?parseFloat(i[1])*t:(i=e&&e.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(i[1]):0}function od(e){return z2[e]||"alphabetic"}function Zi(e){for(var t,i=[],a=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;t=a.exec(e);)i.push(parseFloat(t[0]));return i}function Vs(e,t){if(e==="transparent"){var i=new mr("rgb(0,0,0)");return i.a=0,i}if(t&&e.toLowerCase()==="currentcolor")return t.color||new mr("rgb(0,0,0)");if(t&&e.toLowerCase()==="context-stroke")return t.contextStroke||new mr("rgb(0,0,0)");if(t&&e.toLowerCase()==="context-fill")return t.contextFill||new mr("rgb(0,0,0)");var a=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(e);if(a){var d=Zi(a[1]),p=new mr("rgb("+d.slice(0,3).join(",")+")");return p.a=d[3],p}return new mr(e)}var en={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},Dc,q2=(Dc=Kt.version.split("."),parseFloat(Dc[0])===2&&parseFloat(Dc[1])===3);function ld(e,t){return q2?t==400?e=="italic"?"italic":"normal":t==700&&e!=="italic"?"bold":e+""+t:t==400||t==="normal"?e==="italic"?"italic":"normal":t!=700&&t!=="bold"||e!=="normal"?(t==700?"bold":t)+""+e:"bold"}function xh(e,t){if(Et(t.element,e.styleSheets,"display")==="none")return[0,0,0,0];var i=[];return t.children.forEach(function(a){var d=a.getBoundingBox(e);if(d[0]!==0||d[1]!==0||d[2]!==0||d[3]!==0){var p=a.computeNodeTransform(e);d[0]=d[0]*p.sx+p.tx,d[1]=d[1]*p.sy+p.ty,d[2]=d[2]*p.sx,d[3]=d[3]*p.sy,i=i.length===0?d:[Math.min(i[0],d[0]),Math.min(i[1],d[1]),Math.max(i[0]+i[2],d[0]+d[2])-Math.min(i[0],d[0]),Math.max(i[1]+i[3],d[1]+d[3])-Math.min(i[1],d[1])]}}),i.length===0?[0,0,0,0]:i}function Va(e,t){var i=parseFloat,a=i(e.getAttribute("x1"))||i(Et(e,t.styleSheets,"x"))||i(Et(e,t.styleSheets,"cx"))-i(Et(e,t.styleSheets,"r"))||0,d=i(e.getAttribute("x2"))||a+i(Et(e,t.styleSheets,"width"))||i(Et(e,t.styleSheets,"cx"))+i(Et(e,t.styleSheets,"r"))||0,p=i(e.getAttribute("y1"))||i(Et(e,t.styleSheets,"y"))||i(Et(e,t.styleSheets,"cy"))-i(Et(e,t.styleSheets,"r"))||0,v=i(e.getAttribute("y2"))||p+i(Et(e,t.styleSheets,"height"))||i(Et(e,t.styleSheets,"cy"))+i(Et(e,t.styleSheets,"r"))||0;return[Math.min(a,d),Math.min(p,v),Math.max(a,d)-Math.min(a,d),Math.max(p,v)-Math.min(p,v)]}function Xa(e,t,i,a,d,p,v,o){o===void 0&&(o=!1);var r,c,u=t[0],s=t[1],l=t[2],n=t[3],h=d/l,g=p/n,f=e.getAttribute("preserveAspectRatio");if(f){var m=f.split(" ");m[0]==="defer"&&(m=m.slice(1)),r=m[0],c=m[1]||"meet"}else r="xMidYMid",c="meet";if(r!=="none"&&(c==="meet"?h=g=Math.min(h,g):c==="slice"&&(h=g=Math.max(h,g))),o)return v.pdf.Matrix(h,0,0,g,0,0);var y=i-u*h,x=a-s*g;r.indexOf("xMid")>=0?y+=(d-l*h)/2:r.indexOf("xMax")>=0&&(y+=d-l*h),r.indexOf("YMid")>=0?x+=(p-n*g)/2:r.indexOf("YMax")>=0&&(x+=p-n*g);var _=v.pdf.Matrix(1,0,0,1,y,x),A=v.pdf.Matrix(h,0,0,g,0,0);return v.pdf.matrixMult(A,_)}function xl(e,t){if(!e||e==="none")return t.pdf.unitMatrix;for(var i,a,d=/^[\s,]*matrix\(([^)]+)\)\s*/,p=/^[\s,]*translate\(([^)]+)\)\s*/,v=/^[\s,]*rotate\(([^)]+)\)\s*/,o=/^[\s,]*scale\(([^)]+)\)\s*/,r=/^[\s,]*skewX\(([^)]+)\)\s*/,c=/^[\s,]*skewY\(([^)]+)\)\s*/,u=t.pdf.unitMatrix;e.length>0&&e.length!==a;){a=e.length;var s=d.exec(e);if(s&&(i=Zi(s[1]),u=t.pdf.matrixMult(t.pdf.Matrix(i[0],i[1],i[2],i[3],i[4],i[5]),u),e=e.substr(s[0].length)),s=v.exec(e)){i=Zi(s[1]);var l=Math.PI*i[0]/180;if(u=t.pdf.matrixMult(t.pdf.Matrix(Math.cos(l),Math.sin(l),-Math.sin(l),Math.cos(l),0,0),u),i[1]||i[2]){var n=t.pdf.Matrix(1,0,0,1,i[1],i[2]),h=t.pdf.Matrix(1,0,0,1,-i[1],-i[2]);u=t.pdf.matrixMult(h,t.pdf.matrixMult(u,n))}e=e.substr(s[0].length)}(s=p.exec(e))&&(i=Zi(s[1]),u=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,i[0],i[1]||0),u),e=e.substr(s[0].length)),(s=o.exec(e))&&((i=Zi(s[1]))[1]||(i[1]=i[0]),u=t.pdf.matrixMult(t.pdf.Matrix(i[0],0,0,i[1],0,0),u),e=e.substr(s[0].length)),(s=r.exec(e))&&(i=parseFloat(s[1]),i*=Math.PI/180,u=t.pdf.matrixMult(t.pdf.Matrix(1,0,Math.tan(i),1,0,0),u),e=e.substr(s[0].length)),(s=c.exec(e))&&(i=parseFloat(s[1]),i*=Math.PI/180,u=t.pdf.matrixMult(t.pdf.Matrix(1,Math.tan(i),0,1,0,0),u),e=e.substr(s[0].length))}return u}var _h=function(){function e(t,i){this.element=t,this.children=i,this.parent=null}return e.prototype.setParent=function(t){this.parent=t},e.prototype.getParent=function(){return this.parent},e.prototype.getBoundingBox=function(t){return Et(this.element,t.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(t)},e.prototype.computeNodeTransform=function(t){var i=this.computeNodeTransformCore(t),a=Et(this.element,t.styleSheets,"transform");return a?t.pdf.matrixMult(i,xl(a,t)):i},e}(),Ga=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.render=function(i){return Promise.resolve()},t.prototype.getBoundingBoxCore=function(i){return[]},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t}(_h),cd=function(e){function t(i,a,d){var p=e.call(this,a,d)||this;return p.pdfGradientType=i,p.contextColor=void 0,p}return Le(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o,r;return Fe(this,function(c){return(a=this.element.getAttribute("id"))?(d=this.getStops(i.styleSheets),p=0,v=!1,d.forEach(function(u){var s=u.opacity;s&&s!==1&&(p+=s,v=!0)}),v&&(o=new ts({opacity:p/d.length})),r=new Sn(this.pdfGradientType,this.getCoordinates(),d,o),i.pdf.addShadingPattern(a,r),[2]):[2]})})},t.prototype.getStops=function(i){var a=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var d=this;d;){var p=Et(d.element,i,"color");if(p){this.contextColor=Vs(p,null);break}d=d.getParent()}}var v=[];return this.children.forEach(function(o){if(o.element.tagName.toLowerCase()==="stop"){var r=Et(o.element,i,"color"),c=Vs(Et(o.element,i,"stop-color")||"",r?{color:Vs(r,null)}:{color:a.contextColor}),u=parseFloat(Et(o.element,i,"stop-opacity")||"1");v.push({offset:t.parseGradientOffset(o.element.getAttribute("offset")||"0"),color:[c.r,c.g,c.b],opacity:u})}}),this.stops=v},t.prototype.getBoundingBoxCore=function(i){return Va(this.element,i)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,a){return En(this,i,a)},t.parseGradientOffset=function(i){var a=parseFloat(i);return!isNaN(a)&&i.indexOf("%")>=0?a/100:a},t}(Ga),hd=function(e){function t(i,a){return e.call(this,"axial",i,a)||this}return Le(t,e),t.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},t}(cd),ud=function(e){function t(i,a){return e.call(this,"radial",i,a)||this}return Le(t,e),t.prototype.getCoordinates=function(){var i=this.element.getAttribute("cx"),a=this.element.getAttribute("cy"),d=this.element.getAttribute("fx"),p=this.element.getAttribute("fy");return[parseFloat(d||i||"0.5"),parseFloat(p||a||"0.5"),0,parseFloat(i||"0.5"),parseFloat(a||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},t}(cd),U2=function(){function e(t,i){this.key=t,this.gradient=i}return e.prototype.getFillData=function(t,i){return Ne(this,void 0,void 0,function(){var a,d,p;return Fe(this,function(v){switch(v.label){case 0:return[4,i.refsHandler.getRendered(this.key,null,function(o){return o.apply(new Fn(i.pdf,{refsHandler:i.refsHandler,textMeasure:i.textMeasure,styleSheets:i.styleSheets,viewport:i.viewport,svg2pdfParameters:i.svg2pdfParameters}))})];case 1:return v.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?a=i.pdf.unitMatrix:(d=t.getBoundingBox(i),a=i.pdf.Matrix(d[2],0,0,d[3],d[0],d[1])),p=xl(Et(this.gradient.element,i.styleSheets,"gradientTransform","transform"),i),[2,{key:this.key,matrix:i.pdf.matrixMult(p,a)}]}})})},e}(),fd=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:if(!(a=this.element.getAttribute("id")))return[2];d=this.getBoundingBox(i),p=new Kn([d[0],d[1],d[0]+d[2],d[1]+d[3]],d[2],d[3]),i.pdf.beginTilingPattern(p),v=0,o=this.children,r.label=1;case 1:return v<o.length?[4,o[v].render(new Fn(i.pdf,{attributeState:i.attributeState,refsHandler:i.refsHandler,styleSheets:i.styleSheets,viewport:i.viewport,svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure}))]:[3,4];case 2:r.sent(),r.label=3;case 3:return v++,[3,1];case 4:return i.pdf.endTilingPattern(a,p),[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Va(this.element,i)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,a){return En(this,i,a)},t}(Ga),W2=function(){function e(t,i){this.key=t,this.pattern=i}return e.prototype.getFillData=function(t,i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o,r,c,u,s,l,n,h;return Fe(this,function(g){switch(g.label){case 0:return[4,i.refsHandler.getRendered(this.key,null,function(f){return f.apply(new Fn(i.pdf,{refsHandler:i.refsHandler,textMeasure:i.textMeasure,styleSheets:i.styleSheets,viewport:i.viewport,svg2pdfParameters:i.svg2pdfParameters}))})];case 1:return g.sent(),a={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},p=i.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(d=t.getBoundingBox(i),p=i.pdf.Matrix(1,0,0,1,d[0],d[1]),o=this.pattern.getBoundingBox(i),r=o[0]*d[0]||0,c=o[1]*d[1]||0,u=o[2]*d[2]||0,s=o[3]*d[3]||0,a.boundingBox=[r,c,r+u,c+s],a.xStep=u,a.yStep=s),v=i.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(d||(d=t.getBoundingBox(i)),v=i.pdf.Matrix(d[2],0,0,d[3],0,0),o=a.boundingBox||this.pattern.getBoundingBox(i),r=o[0]/d[0]||0,c=o[1]/d[1]||0,u=o[2]/d[2]||0,s=o[3]/d[3]||0,a.boundingBox=[r,c,r+u,c+s],a.xStep=u,a.yStep=s),l=i.pdf.unitMatrix,(n=Et(this.pattern.element,i.styleSheets,"patternTransform","transform"))&&(l=xl(n,i)),h=v,h=i.pdf.matrixMult(h,p),h=i.pdf.matrixMult(h,l),h=i.pdf.matrixMult(h,i.transform),a.matrix=h,[2,a]}})})},e}();function H2(e,t){var i=wh.exec(e);if(i){var a=i[1],d=t.refsHandler.get(a);return d&&(d instanceof hd||d instanceof ud)?function(v,o,r){var c=o.getStops(r.styleSheets);if(c.length===0)return null;if(c.length===1){var u=c[0].color,s=new mr;return s.ok=!0,s.r=u[0],s.g=u[1],s.b=u[2],s.a=c[0].opacity,new gi(s)}return new U2(v,o)}(a,d,t):d&&d instanceof fd?new W2(a,d):new gi(new mr("rgb(0, 0, 0)"))}var p=Vs(e,t.attributeState);return p.ok?new gi(p):null}function Sh(e,t,i){var a=i||t.element,d=Et(a,e.styleSheets,"color");if(d){var p=Vs(d,e.attributeState);p.ok?e.attributeState.color=p:e.attributeState.color=new mr("rgb(0,0,0)")}var v=Et(a,e.styleSheets,"visibility");v&&(e.attributeState.visibility=v);var o=Et(a,e.styleSheets,"fill");o&&(e.attributeState.fill=H2(o,e));var r=Et(a,e.styleSheets,"fill-opacity");r&&(e.attributeState.fillOpacity=parseFloat(r));var c=Et(a,e.styleSheets,"stroke-opacity");c&&(e.attributeState.strokeOpacity=parseFloat(c));var u=Et(a,e.styleSheets,"opacity");u&&(e.attributeState.opacity=parseFloat(u));var s=Et(a,e.styleSheets,"stroke-width");s!==void 0&&s!==""&&(e.attributeState.strokeWidth=Math.abs(parseFloat(s)));var l=Et(a,e.styleSheets,"stroke");if(l)if(l==="none")e.attributeState.stroke=null;else{var n=Vs(l,e.attributeState);n.ok&&(e.attributeState.stroke=new gi(n))}l&&e.attributeState.stroke instanceof gi&&(e.attributeState.contextStroke=e.attributeState.stroke.color),o&&e.attributeState.fill instanceof gi&&(e.attributeState.contextFill=e.attributeState.fill.color);var h=Et(a,e.styleSheets,"stroke-linecap");h&&(e.attributeState.strokeLinecap=h);var g=Et(a,e.styleSheets,"stroke-linejoin");g&&(e.attributeState.strokeLinejoin=g);var f=Et(a,e.styleSheets,"stroke-dasharray");if(f){var m=parseInt(Et(a,e.styleSheets,"stroke-dashoffset")||"0");e.attributeState.strokeDasharray=Zi(f),e.attributeState.strokeDashoffset=m}var y=Et(a,e.styleSheets,"stroke-miterlimit");y!==void 0&&y!==""&&(e.attributeState.strokeMiterlimit=parseFloat(y));var x=a.getAttribute("xml:space");x&&(e.attributeState.xmlSpace=x);var _=Et(a,e.styleSheets,"font-weight");_&&(e.attributeState.fontWeight=_);var A=Et(a,e.styleSheets,"font-style");A&&(e.attributeState.fontStyle=A);var M=Et(a,e.styleSheets,"font-family");if(M){var T=h2.parse(M);e.attributeState.fontFamily=function(G,rt,at){var gt=ld(G.fontStyle,G.fontWeight),nt=at.pdf.getFontList(),E="";return rt.some(function(Y){var J=nt[Y];return J&&J.indexOf(gt)>=0?(E=Y,!0):(Y=Y.toLowerCase(),!!en.hasOwnProperty(Y)&&(E=Y,!0))})||(E="times"),E}(e.attributeState,T,e)}var O=Et(a,e.styleSheets,"font-size");if(O){var B=e.pdf.getFontSize();e.attributeState.fontSize=Qr(O,B)}var X=Et(a,e.styleSheets,"vertical-align")||Et(a,e.styleSheets,"alignment-baseline");if(X){var F=X.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);F&&(e.attributeState.alignmentBaseline=F[0])}var I=Et(a,e.styleSheets,"text-anchor");I&&(e.attributeState.textAnchor=I);var K=Et(a,e.styleSheets,"fill-rule");K&&(e.attributeState.fillRule=K)}function Ch(e,t,i){var a=1,d=1;a*=e.attributeState.fillOpacity,a*=e.attributeState.opacity,e.attributeState.fill instanceof gi&&e.attributeState.fill.color.a!==void 0&&(a*=e.attributeState.fill.color.a),d*=e.attributeState.strokeOpacity,d*=e.attributeState.opacity,e.attributeState.stroke instanceof gi&&e.attributeState.stroke.color.a!==void 0&&(d*=e.attributeState.stroke.color.a);var p,v,o=a<1,r=d<1;if(Tn(i,"use")?(o=!0,r=!0,a*=e.attributeState.fill?1:0,d*=e.attributeState.stroke?1:0):e.withinUse&&(e.attributeState.fill!==t.attributeState.fill?(o=!0,a*=e.attributeState.fill?1:0):o&&!e.attributeState.fill&&(a=0),e.attributeState.stroke!==t.attributeState.stroke?(r=!0,d*=e.attributeState.stroke?1:0):r&&!e.attributeState.stroke&&(d=0)),o||r){var c={};o&&(c.opacity=a),r&&(c["stroke-opacity"]=d),e.pdf.setGState(new ts(c))}if(e.attributeState.fill&&e.attributeState.fill!==t.attributeState.fill&&e.attributeState.fill instanceof gi&&e.attributeState.fill.color.ok&&!Tn(i,"text")&&e.pdf.setFillColor(e.attributeState.fill.color.r,e.attributeState.fill.color.g,e.attributeState.fill.color.b),e.attributeState.strokeWidth!==t.attributeState.strokeWidth&&e.pdf.setLineWidth(e.attributeState.strokeWidth),e.attributeState.stroke!==t.attributeState.stroke&&e.attributeState.stroke instanceof gi&&e.pdf.setDrawColor(e.attributeState.stroke.color.r,e.attributeState.stroke.color.g,e.attributeState.stroke.color.b),e.attributeState.strokeLinecap!==t.attributeState.strokeLinecap&&e.pdf.setLineCap(e.attributeState.strokeLinecap),e.attributeState.strokeLinejoin!==t.attributeState.strokeLinejoin&&e.pdf.setLineJoin(e.attributeState.strokeLinejoin),e.attributeState.strokeDasharray===t.attributeState.strokeDasharray&&e.attributeState.strokeDashoffset===t.attributeState.strokeDashoffset||!e.attributeState.strokeDasharray||e.pdf.setLineDashPattern(e.attributeState.strokeDasharray,e.attributeState.strokeDashoffset),e.attributeState.strokeMiterlimit!==t.attributeState.strokeMiterlimit&&e.pdf.setLineMiterLimit(e.attributeState.strokeMiterlimit),e.attributeState.fontFamily!==t.attributeState.fontFamily&&(p=en.hasOwnProperty(e.attributeState.fontFamily)?en[e.attributeState.fontFamily]:e.attributeState.fontFamily),e.attributeState.fill&&e.attributeState.fill!==t.attributeState.fill&&e.attributeState.fill instanceof gi&&e.attributeState.fill.color.ok){var u=e.attributeState.fill.color;e.pdf.setTextColor(u.r,u.g,u.b)}e.attributeState.fontWeight===t.attributeState.fontWeight&&e.attributeState.fontStyle===t.attributeState.fontStyle||(v=ld(e.attributeState.fontStyle,e.attributeState.fontWeight)),p===void 0&&v===void 0||(p===void 0&&(p=en.hasOwnProperty(e.attributeState.fontFamily)?en[e.attributeState.fontFamily]:e.attributeState.fontFamily),e.pdf.setFont(p,v)),e.attributeState.fontSize!==t.attributeState.fontSize&&e.pdf.setFontSize(e.attributeState.fontSize*e.pdf.internal.scaleFactor)}function dd(e,t,i){var a=wh.exec(e);if(a){var d=a[1];return i.refsHandler.get(d)||void 0}}function pd(e,t,i){return Ne(this,void 0,void 0,function(){var a,d;return Fe(this,function(p){switch(p.label){case 0:return a=i.clone(),t.element.hasAttribute("clipPathUnits")&&t.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(d=e.getBoundingBox(i),a.transform=i.pdf.matrixMult(i.pdf.Matrix(d[2],0,0,d[3],d[0],d[1]),i.transform)),[4,t.apply(a)];case 1:return p.sent(),[2]}})})}var gd=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.render=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v;return Fe(this,function(o){switch(o.label){case 0:return this.isVisible(i.attributeState.visibility!=="hidden",i)?((a=i.clone()).transform=a.pdf.matrixMult(this.computeNodeTransform(a),i.transform),Sh(a,this),d=Et(this.element,a.styleSheets,"clip-path"),(p=d&&d!=="none")?(v=dd(d,0,a))?v.isVisible(!0,a)?(a.pdf.saveGraphicsState(),[4,pd(this,v,a)]):[3,2]:[3,4]:[3,5]):[2];case 1:return o.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:p=!1,o.label=5;case 5:return a.withinClipPath||a.pdf.saveGraphicsState(),Ch(a,i,this.element),[4,this.renderCore(a)];case 6:return o.sent(),a.withinClipPath||a.pdf.restoreGraphicsState(),p&&a.pdf.restoreGraphicsState(),[2]}})})},t}(_h),_l=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t}(gd),$a=function(e){function t(i,a,d){var p=e.call(this,a,d)||this;return p.cachedPath=null,p.hasMarkers=i,p}return Le(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var a;return Fe(this,function(d){switch(d.label){case 0:return(a=this.getCachedPath(i))===null||a.segments.length===0?[2]:(i.withinClipPath?a.transform(i.transform):i.pdf.setCurrentTransformationMatrix(i.transform),a.draw(i),[4,this.fillOrStroke(i)]);case 1:return d.sent(),this.hasMarkers?[4,this.drawMarkers(i,a)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}})})},t.prototype.getCachedPath=function(i){return this.cachedPath||(this.cachedPath=this.getPath(i))},t.prototype.drawMarkers=function(i,a){return Ne(this,void 0,void 0,function(){return Fe(this,function(d){switch(d.label){case 0:return[4,this.getMarkers(a,i).draw(i.clone({transform:i.pdf.unitMatrix}))];case 1:return d.sent(),[2]}})})},t.prototype.fillOrStroke=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:return i.withinClipPath?[2]:(a=i.attributeState.fill,d=i.attributeState.stroke&&i.attributeState.strokeWidth!==0,a?[4,a.getFillData(this,i)]:[3,2]);case 1:return v=r.sent(),[3,3];case 2:v=void 0,r.label=3;case 3:return p=v,o=i.attributeState.fillRule==="evenodd",a&&d||i.withinUse?o?i.pdf.fillStrokeEvenOdd(p):i.pdf.fillStroke(p):a?o?i.pdf.fillEvenOdd(p):i.pdf.fill(p):d?i.pdf.stroke():i.pdf.discardPath(),[2]}})})},t.prototype.getBoundingBoxCore=function(i){var a=this.getCachedPath(i);if(!a||!a.segments.length)return[0,0,0,0];for(var d=Number.POSITIVE_INFINITY,p=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,r=0,c=0,u=0;u<a.segments.length;u++){var s=a.segments[u];(s instanceof ci||s instanceof Cn||s instanceof Fr)&&(r=s.x,c=s.y),s instanceof Fr?(d=Math.min(d,r,s.x1,s.x2,s.x),v=Math.max(v,r,s.x1,s.x2,s.x),p=Math.min(p,c,s.y1,s.y2,s.y),o=Math.max(o,c,s.y1,s.y2,s.y)):(d=Math.min(d,r),v=Math.max(v,r),p=Math.min(p,c),o=Math.max(o,c))}return[d,p,v-d,o-p]},t.prototype.getMarkers=function(i,a){var d=Et(this.element,a.styleSheets,"marker-start"),p=Et(this.element,a.styleSheets,"marker-mid"),v=Et(this.element,a.styleSheets,"marker-end"),o=new R2;if(d||p||v){v&&(v=Bc(v)),d&&(d=Bc(d)),p&&(p=Bc(p));for(var r=i.segments,c=[1,0],u=void 0,s=!1,l=[1,0],n=!1,h=function(f){var m=r[f],y=d&&(f===1||!(r[f]instanceof ci)&&r[f-1]instanceof ci);y&&r.forEach(function(O,B){if(!n&&O instanceof nh&&B>f){var X=r[B-1];n=(X instanceof ci||X instanceof Cn||X instanceof Fr)&&X}});var x=v&&(f===r.length-1||!(r[f]instanceof ci)&&r[f+1]instanceof ci),_=p&&f>0&&!(f===1&&r[f-1]instanceof ci),A=r[f-1]||null;if(A instanceof ci||A instanceof Cn||A instanceof Fr)if(m instanceof Fr)y&&o.addMarker(new _n(d,[A.x,A.y],Uu(n?[n.x,n.y]:[A.x,A.y],[m.x1,m.y1]),!0)),x&&o.addMarker(new _n(v,[m.x,m.y],Uu([m.x2,m.y2],[m.x,m.y]))),_&&(u=Bs([A.x,A.y],[m.x1,m.y1]),u=A instanceof ci?u:Da(Zo(c,u)),o.addMarker(new _n(p,[A.x,A.y],Math.atan2(u[1],u[0])))),c=Bs([m.x2,m.y2],[m.x,m.y]);else if(m instanceof ci||m instanceof Cn){if(u=Bs([A.x,A.y],[m.x,m.y]),y){var M=n?Bs([n.x,n.y],[m.x,m.y]):u;o.addMarker(new _n(d,[A.x,A.y],Math.atan2(M[1],M[0]),!0))}x&&o.addMarker(new _n(v,[m.x,m.y],Math.atan2(u[1],u[0]))),_&&(M=m instanceof ci?c:A instanceof ci?u:Da(Zo(c,u)),o.addMarker(new _n(p,[A.x,A.y],Math.atan2(M[1],M[0])))),c=u}else m instanceof nh&&(u=Bs([A.x,A.y],[s.x,s.y]),_&&(M=A instanceof ci?u:Da(Zo(c,u)),o.addMarker(new _n(p,[A.x,A.y],Math.atan2(M[1],M[0])))),x&&(M=Da(Zo(u,l)),o.addMarker(new _n(v,[s.x,s.y],Math.atan2(M[1],M[0])))),c=u);else{s=m instanceof ci&&m;var T=r[f+1];(T instanceof ci||T instanceof Cn||T instanceof Fr)&&(l=Bs([s.x,s.y],[T.x,T.y]))}},g=0;g<r.length;g++)h(g)}return o.markers.forEach(function(f){var m=a.refsHandler.get(f.id);if(m){var y=Et(m.element,a.styleSheets,"orient");y!=null&&(f.isStartMarker&&y==="auto-start-reverse"&&(f.angle+=Math.PI),isNaN(Number(y))||(f.angle=parseFloat(y)/180*Math.PI))}}),o},t}(_l);function Bc(e){var t=wh.exec(e);return t&&t[1]||void 0}var Y2=function(e){function t(i,a){return e.call(this,!0,i,a)||this}return Le(t,e),t.prototype.getPath=function(i){if(i.withinClipPath||i.attributeState.stroke===null)return null;var a=parseFloat(this.element.getAttribute("x1")||"0"),d=parseFloat(this.element.getAttribute("y1")||"0"),p=parseFloat(this.element.getAttribute("x2")||"0"),v=parseFloat(this.element.getAttribute("y2")||"0");return a||p||d||v?new Qs().moveTo(a,d).lineTo(p,v):null},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,a){return sn(this,i,a)},t.prototype.fillOrStroke=function(i){return Ne(this,void 0,void 0,function(){return Fe(this,function(a){switch(a.label){case 0:return i.attributeState.fill=null,[4,e.prototype.fillOrStroke.call(this,i)];case 1:return a.sent(),[2]}})})},t}($a),md=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:return this.isVisible(i.attributeState.visibility!=="hidden",i)?((a=i.clone()).transform=a.pdf.unitMatrix,Sh(a,this),d=Et(this.element,a.styleSheets,"clip-path"),d&&d!=="none"&&(p=dd(d,0,a))?p.isVisible(!0,a)?[4,pd(this,p,a)]:[3,2]:[3,3]):[2];case 1:return r.sent(),[3,3];case 2:return[2];case 3:Ch(a,i,this.element),v=0,o=this.children,r.label=4;case 4:return v<o.length?[4,o[v].render(a)]:[3,7];case 5:r.sent(),r.label=6;case 6:return v++,[3,4];case 7:return[2]}})})},t.prototype.getBoundingBoxCore=function(i){return xh(i,this)},t.prototype.isVisible=function(i,a){return En(this,i,a)},t.prototype.computeNodeTransformCore=function(i){var a=parseFloat(Et(this.element,i.styleSheets,"x")||"0"),d=parseFloat(Et(this.element,i.styleSheets,"y")||"0"),p=this.element.getAttribute("viewBox");if(p){var v=Zi(p),o=parseFloat(Et(this.element,i.styleSheets,"width")||Et(this.element.ownerSVGElement,i.styleSheets,"width")||p[2]),r=parseFloat(Et(this.element,i.styleSheets,"height")||Et(this.element.ownerSVGElement,i.styleSheets,"height")||p[3]);return Xa(this.element,v,a,d,o,r,i)}return i.pdf.Matrix(1,0,0,1,a,d)},t}(Ga),Sl=function(e,t){this.width=e,this.height=t},V2=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o,r,c,u,s,l,n,h,g;return Fe(this,function(f){switch(f.label){case 0:return a=parseFloat,(d=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(p=d.substring(1),v=i.refsHandler.get(p),o=Tn(v.element,"symbol,svg")&&v.element.hasAttribute("viewBox"),r=a(Et(this.element,i.styleSheets,"x")||"0"),c=a(Et(this.element,i.styleSheets,"y")||"0"),u=void 0,s=void 0,o?(u=a(Et(this.element,i.styleSheets,"width")||Et(v.element,i.styleSheets,"width")||"0"),s=a(Et(this.element,i.styleSheets,"height")||Et(v.element,i.styleSheets,"height")||"0"),r+=a(Et(v.element,i.styleSheets,"x")||"0"),c+=a(Et(v.element,i.styleSheets,"y")||"0"),n=Zi(v.element.getAttribute("viewBox")),l=Xa(v.element,n,r,c,u,s,i)):l=i.pdf.Matrix(1,0,0,1,r,c),h=Zs.getContextColors(i,!0),g=new Fn(i.pdf,{refsHandler:i.refsHandler,styleSheets:i.styleSheets,withinUse:!0,viewport:o?new Sl(u,s):i.viewport,svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure,attributeState:Object.assign(Zs.default(),h)}),[4,i.refsHandler.getRendered(p,h,function(m){return t.renderReferencedNode(m,p,g)})]):[2];case 1:return f.sent(),i.pdf.saveGraphicsState(),i.pdf.setCurrentTransformationMatrix(i.transform),o&&Et(v.element,i.styleSheets,"overflow")!=="visible"&&(i.pdf.rect(r,c,u,s),i.pdf.clip().discardPath()),i.pdf.doFormObject(i.refsHandler.generateKey(p,h),l),i.pdf.restoreGraphicsState(),[2]}})})},t.renderReferencedNode=function(i,a,d){return Ne(this,void 0,void 0,function(){var p;return Fe(this,function(v){switch(v.label){case 0:return p=[(p=i.getBoundingBox(d))[0]-.5*p[2],p[1]-.5*p[3],2*p[2],2*p[3]],d.pdf.beginFormObject(p[0],p[1],p[2],p[3],d.pdf.unitMatrix),i instanceof md?[4,i.apply(d)]:[3,2];case 1:return v.sent(),[3,4];case 2:return[4,i.render(d)];case 3:v.sent(),v.label=4;case 4:return d.pdf.endFormObject(d.refsHandler.generateKey(a,d.attributeState)),[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Va(this.element,i)},t.prototype.isVisible=function(i,a){return sn(this,i,a)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t}(_l),X2=function(e){function t(i,a){return e.call(this,!1,i,a)||this}return Le(t,e),t.prototype.getPath=function(i){var a=parseFloat(Et(this.element,i.styleSheets,"width")||"0"),d=parseFloat(Et(this.element,i.styleSheets,"height")||"0");if(!isFinite(a)||a<=0||!isFinite(d)||d<=0)return null;var p=Et(this.element,i.styleSheets,"rx"),v=Et(this.element,i.styleSheets,"ry"),o=Math.min(parseFloat(p||v||"0"),.5*a),r=Math.min(parseFloat(v||p||"0"),.5*d),c=parseFloat(Et(this.element,i.styleSheets,"x")||"0"),u=parseFloat(Et(this.element,i.styleSheets,"y")||"0"),s=4/3*(Math.SQRT2-1);return o===0&&r===0?new Qs().moveTo(c,u).lineTo(c+a,u).lineTo(c+a,u+d).lineTo(c,u+d).close():new Qs().moveTo(c+=o,u).lineTo(c+=a-2*o,u).curveTo(c+o*s,u,c+o,u+(r-r*s),c+=o,u+=r).lineTo(c,u+=d-2*r).curveTo(c,u+r*s,c-o*s,u+r,c-=o,u+=r).lineTo(c+=2*o-a,u).curveTo(c-o*s,u,c-o,u-r*s,c-=o,u-=r).lineTo(c,u+=2*r-d).curveTo(c,u-r*s,c+o*s,u-r,c+=o,u-=r).close()},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,a){return sn(this,i,a)},t}($a),vd=function(e){function t(i,a){return e.call(this,!1,i,a)||this}return Le(t,e),t.prototype.getPath=function(i){var a=this.getRx(i),d=this.getRy(i);if(!isFinite(a)||d<=0||!isFinite(d)||d<=0)return null;var p=parseFloat(Et(this.element,i.styleSheets,"cx")||"0"),v=parseFloat(Et(this.element,i.styleSheets,"cy")||"0"),o=4/3*(Math.SQRT2-1)*a,r=4/3*(Math.SQRT2-1)*d;return new Qs().moveTo(p+a,v).curveTo(p+a,v-r,p+o,v-d,p,v-d).curveTo(p-o,v-d,p-a,v-r,p-a,v).curveTo(p-a,v+r,p-o,v+d,p,v+d).curveTo(p+o,v+d,p+a,v+r,p+a,v)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,a){return sn(this,i,a)},t}($a),G2=function(e){function t(i,a){return e.call(this,i,a)||this}return Le(t,e),t.prototype.getRx=function(i){return parseFloat(Et(this.element,i.styleSheets,"rx")||"0")},t.prototype.getRy=function(i){return parseFloat(Et(this.element,i.styleSheets,"ry")||"0")},t}(vd);function bd(e){var t="invisible",i=e.stroke&&e.strokeWidth!==0,a=e.fill;return a&&i?t="fillThenStroke":a?t="fill":i&&(t="stroke"),t}function Vu(e){return e.replace(/[\n\r]/g,"")}function Xu(e){return e.replace(/[\t]/g," ")}function Gu(e){return e.replace(/ +/g," ")}function $u(e,t,i){switch(Et(e,i.styleSheets,"text-transform")){case"uppercase":return t.toUpperCase();case"lowercase":return t.toLowerCase();default:return t}}var Rc=function(){function e(t,i,a,d){this.textNode=t,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=i,this.originX=a,this.originY=d,this.textMeasures=[]}return e.prototype.setX=function(t){this.originX=t},e.prototype.setY=function(t){this.originY=t},e.prototype.add=function(t,i,a){this.texts.push(i),this.textNodes.push(t),this.contexts.push(a)},e.prototype.rightTrimText=function(){for(var t=this.texts.length-1;t>=0;t--)if(this.contexts[t].attributeState.xmlSpace==="default"&&(this.texts[t]=this.texts[t].replace(/\s+$/,"")),this.texts[t].match(/[^\s]/))return!1;return!0},e.prototype.measureText=function(t){for(var i=0;i<this.texts.length;i++)this.textMeasures.push({width:t.textMeasure.measureTextWidth(this.texts[i],this.contexts[i].attributeState),length:this.texts[i].length})},e.prototype.put=function(t,i){var a,d,p,v,o=[],r=[],c=[],u=this.originX,s=this.originY,l=u,n=u;for(a=0;a<this.textNodes.length;a++){d=this.textNodes[a],p=this.contexts[a],v=this.textMeasures[a]||{width:t.textMeasure.measureTextWidth(this.texts[a],this.contexts[a].attributeState),length:this.texts[a].length};var h=u,g=s;if(d.nodeName!=="#text"&&!o.includes(d)){o.push(d);var f=e.resolveRelativePositionAttribute(d,"dx");f!==null&&(h+=Qr(f,p.attributeState.fontSize));var m=e.resolveRelativePositionAttribute(d,"dy");m!==null&&(g+=Qr(m,p.attributeState.fontSize))}r[a]=h,c[a]=g,u=h+v.width+v.length*i,s=g,l=Math.min(l,h),n=Math.max(n,u)}var y=0;switch(this.textAnchor){case"start":y=0;break;case"middle":y=(n-l)/2;break;case"end":y=n-l}for(a=0;a<this.textNodes.length;a++)if(d=this.textNodes[a],p=this.contexts[a],d.nodeName==="#text"||p.attributeState.visibility!=="hidden"){t.pdf.saveGraphicsState(),Ch(p,t,d);var x=p.attributeState.alignmentBaseline,_=bd(p.attributeState);t.pdf.text(this.texts[a],r[a]-y,c[a],{baseline:od(x),angle:t.transform,renderingMode:_==="fill"?void 0:_,charSpace:i===0?void 0:i}),t.pdf.restoreGraphicsState()}return[u,s]},e.resolveRelativePositionAttribute=function(t,i){for(var a,d=t;d&&Tn(d,"tspan");){if(d.hasAttribute(i))return d.getAttribute(i);if(((a=t.parentElement)===null||a===void 0?void 0:a.firstChild)!==t)break;d=d.parentElement}return null},e}(),$2=function(e){function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.boundingBox=[],i}return Le(t,e),t.prototype.processTSpans=function(i,a,d,p,v,o){for(var r=d.pdf.getFontSize(),c=d.attributeState.xmlSpace,u=!0,s=!1,l=0;l<a.childNodes.length;l++){var n=a.childNodes[l];if(n.textContent){var h=n.textContent;if(n.nodeName==="#text"){var g=Vu(h);g=Xu(g),c==="default"&&(g=Gu(g),u&&g.match(/^\s/)&&(s=!0),g.match(/[^\s]/)&&(u=!1),o.prevText.match(/\s$/)&&(g=g.replace(/^\s+/,"")));var f=$u(a,g,d);v.add(a,f,d),o.prevText=h,o.prevContext=d}else if(!Tn(n,"title")){if(Tn(n,"tspan")){var m=n,y=m.getAttribute("x");if(y!==null){var x=Qr(y,r);v=new Rc(this,Et(m,d.styleSheets,"text-anchor")||d.attributeState.textAnchor,x,0),p.push({type:"y",chunk:v})}var _=m.getAttribute("y");if(_!==null){var A=Qr(_,r);v=new Rc(this,Et(m,d.styleSheets,"text-anchor")||d.attributeState.textAnchor,0,A),p.push({type:"x",chunk:v})}var M=d.clone();Sh(M,i,m),this.processTSpans(i,m,M,p,v,o)}}}}return s},t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o,r,c,u,s,l,n,h,g,f,m,y,x,_,A,M,T,O,B;return Fe(this,function(X){if(i.pdf.saveGraphicsState(),a=0,d=0,p=1,v=i.pdf.getFontSize(),o=Qr(this.element.getAttribute("x"),v),r=Qr(this.element.getAttribute("y"),v),c=Qr(this.element.getAttribute("dx"),v),u=Qr(this.element.getAttribute("dy"),v),s=parseFloat(this.element.getAttribute("textLength")||"0"),l=i.attributeState.visibility,this.element.childElementCount===0)n=this.element.textContent||"",h=function(F,I){return F=Xu(F=Vu(F)),I.xmlSpace==="default"&&(F=Gu(F=F.trim())),F}(n,i.attributeState),g=$u(this.element,h,i),a=i.textMeasure.getTextOffset(g,i.attributeState),s>0&&(f=i.textMeasure.measureTextWidth(g,i.attributeState),i.attributeState.xmlSpace==="default"&&n.match(/^\s/)&&(p=0),d=(s-f)/(g.length-p)||0),l==="visible"&&(m=i.attributeState.alignmentBaseline,y=bd(i.attributeState),i.pdf.text(g,o+c-a,r+u,{baseline:od(m),angle:i.transform,renderingMode:y==="fill"?void 0:y,charSpace:d===0?void 0:d}),this.boundingBox=[o+c-a,r+u+.1*v,i.textMeasure.measureTextWidth(g,i.attributeState),v]);else{for(x=[],_=new Rc(this,i.attributeState.textAnchor,o+c,r+u),x.push({type:"",chunk:_}),A=this.processTSpans(this,this.element,i,x,_,{prevText:" ",prevContext:i}),p=A?0:1,M=!0,T=x.length-1;T>=0;T--)M&&(M=x[T].chunk.rightTrimText());s>0&&(O=0,B=0,x.forEach(function(F){var I=F.chunk;I.measureText(i),I.textMeasures.forEach(function(K){var G=K.width,rt=K.length;O+=G,B+=rt})}),d=(s-O)/(B-p)),x.reduce(function(F,I){var K=I.type,G=I.chunk;return K==="x"?G.setX(F[0]):K==="y"&&G.setY(F[1]),G.put(i,d)},[0,0])}return i.pdf.restoreGraphicsState(),[2]})})},t.prototype.isVisible=function(i,a){return En(this,i,a)},t.prototype.getBoundingBoxCore=function(i){return this.boundingBox.length>0?this.boundingBox:Va(this.element,i)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t}(_l),K2=function(e){function t(i,a){return e.call(this,!0,i,a)||this}return Le(t,e),t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,a){return sn(this,i,a)},t.prototype.getPath=function(i){var a,d,p=new D2(Et(this.element,i.styleSheets,"d")||"").unshort().unarc().abs(),v=new Qs;return p.iterate(function(o){switch(o[0]){case"M":v.moveTo(o[1],o[2]);break;case"L":v.lineTo(o[1],o[2]);break;case"H":v.lineTo(o[1],d);break;case"V":v.lineTo(a,o[1]);break;case"C":v.curveTo(o[1],o[2],o[3],o[4],o[5],o[6]);break;case"Q":var r=Hu([a,d],[o[1],o[2]]),c=Hu([o[3],o[4]],[o[1],o[2]]);v.curveTo(r[0],r[1],c[0],c[1],o[3],o[4]);break;case"Z":v.close()}switch(o[0]){case"M":case"L":a=o[1],d=o[2];break;case"H":a=o[1];break;case"V":d=o[1];break;case"C":a=o[5],d=o[6];break;case"Q":a=o[3],d=o[4]}}),v},t}($a),J2=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,Z2=function(e){function t(i,a){var d=e.call(this,i,a)||this;return d.imageLoadingPromise=null,d.imageUrl=d.element.getAttribute("xlink:href")||d.element.getAttribute("href"),d.imageUrl&&(d.imageLoadingPromise=t.fetchImageData(d.imageUrl)),d}return Le(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o,r,c,u,s,l,n,h,g,f,m,y,x,_;return Fe(this,function(A){switch(A.label){case 0:return this.imageLoadingPromise?(i.pdf.setCurrentTransformationMatrix(i.transform),a=parseFloat(Et(this.element,i.styleSheets,"width")||"0"),d=parseFloat(Et(this.element,i.styleSheets,"height")||"0"),p=parseFloat(Et(this.element,i.styleSheets,"x")||"0"),v=parseFloat(Et(this.element,i.styleSheets,"y")||"0"),!isFinite(a)||a<=0||!isFinite(d)||d<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return o=A.sent(),r=o.data,(c=o.format).indexOf("svg")!==0?[3,3]:(u=new DOMParser,s=u.parseFromString(r,"image/svg+xml").firstElementChild,(!(l=this.element.getAttribute("preserveAspectRatio"))||l.indexOf("defer")<0||!s.getAttribute("preserveAspectRatio"))&&s.setAttribute("preserveAspectRatio",l||""),s.setAttribute("x",String(p)),s.setAttribute("y",String(v)),s.setAttribute("width",String(a)),s.setAttribute("height",String(d)),[4,Ah(s,n={}).render(new Fn(i.pdf,{refsHandler:new ad(n),styleSheets:i.styleSheets,viewport:new Sl(a,d),svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure}))]);case 2:return A.sent(),[2];case 3:h="data:image/".concat(c,";base64,").concat(btoa(r)),A.label=4;case 4:return A.trys.push([4,6,,7]),[4,t.getImageDimensions(h)];case 5:return g=A.sent(),f=g[0],m=g[1],y=[0,0,f,m],x=Xa(this.element,y,p,v,a,d,i),i.pdf.setCurrentTransformationMatrix(x),i.pdf.addImage(h,"",0,0,f,m),[3,7];case 6:return _=A.sent(),typeof console=="object"&&console.warn&&console.warn("Could not load image ".concat(this.imageUrl,`. 
`).concat(_)),[3,7];case 7:return[2]}})})},t.prototype.getBoundingBoxCore=function(i){return Va(this.element,i)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,a){return sn(this,i,a)},t.fetchImageData=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:if(!(p=i.match(J2)))return[3,1];if(v=p[2],(o=v.split("/"))[0]!=="image")throw new Error("Unsupported image URL: ".concat(i));return d=o[1],a=p[5],p[4]==="base64"?(a=a.replace(/\s/g,""),a=atob(a)):a=decodeURIComponent(a),[3,3];case 1:return[4,t.fetchImage(i)];case 2:a=r.sent(),d=i.substring(i.lastIndexOf(".")+1),r.label=3;case 3:return[2,{data:a,format:d}]}})})},t.fetchImage=function(i){return new Promise(function(a,d){var p=new XMLHttpRequest;p.open("GET",i,!0),p.responseType="arraybuffer",p.onload=function(){if(p.status!==200)throw new Error("Error ".concat(p.status,": Failed to load image '").concat(i,"'"));for(var v=new Uint8Array(p.response),o="",r=0;r<v.length;r++)o+=String.fromCharCode(v[r]);a(o)},p.onerror=d,p.onabort=d,p.send(null)})},t.getMimeType=function(i){switch(i=i.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/".concat(i)}},t.getImageDimensions=function(i){return new Promise(function(a,d){var p=new Image;p.onload=function(){a([p.width,p.height])},p.onerror=d,p.src=i})},t}(_l),yd=function(e){function t(i,a,d){var p=e.call(this,!0,a,d)||this;return p.closed=i,p}return Le(t,e),t.prototype.getPath=function(i){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var a=t.parsePointsString(this.element.getAttribute("points")),d=new Qs;if(a.length<1)return d;d.moveTo(a[0][0],a[0][1]);for(var p=1;p<a.length;p++)d.lineTo(a[p][0],a[p][1]);return this.closed&&d.close(),d},t.prototype.isVisible=function(i,a){return sn(this,i,a)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.parsePointsString=function(i){for(var a=Zi(i),d=[],p=0;p<a.length-1;p+=2){var v=a[p],o=a[p+1];d.push([v,o])}return d},t}($a),Q2=function(e){function t(i,a){return e.call(this,!0,i,a)||this}return Le(t,e),t}(yd),tm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.render=function(i){return Promise.resolve()},t.prototype.getBoundingBoxCore=function(i){return[0,0,0,0]},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t.prototype.isVisible=function(i,a){return sn(this,i,a)},t}(_h),em=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o,r;return Fe(this,function(c){switch(c.label){case 0:a=this.computeNodeTransform(i),d=this.getBoundingBox(i),i.pdf.beginFormObject(d[0],d[1],d[2],d[3],a),p=Zs.getContextColors(i),function(u){var s=u.attributeState,l=u.pdf,n=1,h=1;n*=s.fillOpacity,n*=s.opacity,s.fill instanceof gi&&s.fill.color.a!==void 0&&(n*=s.fill.color.a),h*=s.strokeOpacity,h*=s.opacity,s.stroke instanceof gi&&s.stroke.color.a!==void 0&&(h*=s.stroke.color.a);var g,f={};if(f.opacity=n,f["stroke-opacity"]=h,l.setGState(new ts(f)),s.fill&&s.fill instanceof gi&&s.fill.color.ok?l.setFillColor(s.fill.color.r,s.fill.color.g,s.fill.color.b):l.setFillColor(0,0,0),l.setLineWidth(s.strokeWidth),s.stroke instanceof gi?l.setDrawColor(s.stroke.color.r,s.stroke.color.g,s.stroke.color.b):l.setDrawColor(0,0,0),l.setLineCap(s.strokeLinecap),l.setLineJoin(s.strokeLinejoin),s.strokeDasharray?l.setLineDashPattern(s.strokeDasharray,s.strokeDashoffset):l.setLineDashPattern([],0),l.setLineMiterLimit(s.strokeMiterlimit),g=en.hasOwnProperty(s.fontFamily)?en[s.fontFamily]:s.fontFamily,s.fill&&s.fill instanceof gi&&s.fill.color.ok){var m=s.fill.color;l.setTextColor(m.r,m.g,m.b)}else l.setTextColor(0,0,0);var y="";s.fontWeight==="bold"&&(y="bold"),s.fontStyle==="italic"&&(y+="italic"),y===""&&(y="normal"),g!==void 0||y!==void 0?(g===void 0&&(g=en.hasOwnProperty(s.fontFamily)?en[s.fontFamily]:s.fontFamily),l.setFont(g,y)):l.setFont("helvetica",y),l.setFontSize(s.fontSize*l.internal.scaleFactor)}(v=new Fn(i.pdf,{refsHandler:i.refsHandler,styleSheets:i.styleSheets,viewport:i.viewport,svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure,attributeState:Object.assign(Zs.default(),p)})),o=0,r=this.children,c.label=1;case 1:return o<r.length?[4,r[o].render(v)]:[3,4];case 2:c.sent(),c.label=3;case 3:return o++,[3,1];case 4:return i.pdf.endFormObject(v.refsHandler.generateKey(this.element.getAttribute("id"),p)),[2]}})})},t.prototype.getBoundingBoxCore=function(i){var a,d=this.element.getAttribute("viewBox");return d&&(a=Zi(d)),[a&&a[0]||0,a&&a[1]||0,a&&a[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),a&&a[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},t.prototype.computeNodeTransformCore=function(i){var a,d=parseFloat(this.element.getAttribute("refX")||"0"),p=parseFloat(this.element.getAttribute("refY")||"0"),v=this.element.getAttribute("viewBox");if(v){var o=Zi(v);a=Xa(this.element,o,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),i,!0),a=i.pdf.matrixMult(i.pdf.Matrix(1,0,0,1,-d,-p),a)}else a=i.pdf.Matrix(1,0,0,1,-d,-p);return a},t.prototype.isVisible=function(i,a){return En(this,i,a)},t}(Ga),im=function(e){function t(i,a){return e.call(this,i,a)||this}return Le(t,e),t.prototype.getR=function(i){var a;return(a=this.r)!==null&&a!==void 0?a:this.r=parseFloat(Et(this.element,i.styleSheets,"r")||"0")},t.prototype.getRx=function(i){return this.getR(i)},t.prototype.getRy=function(i){return this.getR(i)},t}(vd),rm=function(e){function t(i,a){return e.call(this,!1,i,a)||this}return Le(t,e),t}(yd),wd=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var a,d;return Fe(this,function(p){switch(p.label){case 0:a=0,d=this.children,p.label=1;case 1:return a<d.length?[4,d[a].render(i)]:[3,4];case 2:p.sent(),p.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},t.prototype.getBoundingBoxCore=function(i){return xh(i,this)},t}(gd),nm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.isVisible=function(i,a){return En(this,i,a)},t.prototype.render=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v,o;return Fe(this,function(r){switch(r.label){case 0:return this.isVisible(i.attributeState.visibility!=="hidden",i)?(a=this.getX(i),d=this.getY(i),p=this.getWidth(i),v=this.getHeight(i),i.pdf.saveGraphicsState(),o=i.transform,this.element.hasAttribute("transform")&&(o=i.pdf.matrixMult(xl(this.element.getAttribute("transform"),i),o)),i.pdf.setCurrentTransformationMatrix(o),i.withinUse||Et(this.element,i.styleSheets,"overflow")==="visible"||i.pdf.rect(a,d,p,v).clip().discardPath(),[4,e.prototype.render.call(this,i.clone({transform:i.pdf.unitMatrix,viewport:i.withinUse?i.viewport:new Sl(p,v)}))]):[2];case 1:return r.sent(),i.pdf.restoreGraphicsState(),[2]}})})},t.prototype.computeNodeTransform=function(i){return this.computeNodeTransformCore(i)},t.prototype.computeNodeTransformCore=function(i){if(i.withinUse)return i.pdf.unitMatrix;var a,d=this.getX(i),p=this.getY(i),v=this.getViewBox();if(v){var o=this.getWidth(i),r=this.getHeight(i);a=Xa(this.element,v,d,p,o,r,i)}else a=i.pdf.Matrix(1,0,0,1,d,p);return a},t.prototype.getWidth=function(i){if(this.width!==void 0)return this.width;var a,d,p=i.svg2pdfParameters;if(this.isOutermostSvg(i))if(p.width!=null)a=p.width;else if(d=Et(this.element,i.styleSheets,"width"))a=parseFloat(d);else{var v=this.getViewBox();if(v&&(p.height!=null||Et(this.element,i.styleSheets,"height"))){var o=v[2]/v[3];a=this.getHeight(i)*o}else a=Math.min(300,i.viewport.width,2*i.viewport.height)}else a=(d=Et(this.element,i.styleSheets,"width"))?parseFloat(d):i.viewport.width;return this.width=a},t.prototype.getHeight=function(i){if(this.height!==void 0)return this.height;var a,d,p=i.svg2pdfParameters;if(this.isOutermostSvg(i))if(p.height!=null)a=p.height;else if(d=Et(this.element,i.styleSheets,"height"))a=parseFloat(d);else{var v=this.getViewBox();if(v){var o=v[2]/v[3];a=this.getWidth(i)/o}else a=Math.min(150,i.viewport.width/2,i.viewport.height)}else a=(d=Et(this.element,i.styleSheets,"height"))?parseFloat(d):i.viewport.height;return this.height=a},t.prototype.getX=function(i){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(i))return this.x=0;var a=Et(this.element,i.styleSheets,"x");return this.x=a?parseFloat(a):0},t.prototype.getY=function(i){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(i))return this.y=0;var a=Et(this.element,i.styleSheets,"y");return this.y=a?parseFloat(a):0},t.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var i=this.element.getAttribute("viewBox");return this.viewBox=i?Zi(i):void 0},t.prototype.isOutermostSvg=function(i){return i.svg2pdfParameters.element===this.element},t}(wd),xd=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.isVisible=function(i,a){return En(this,i,a)},t.prototype.computeNodeTransformCore=function(i){return i.pdf.unitMatrix},t}(wd),sm=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.renderCore=function(i){return Ne(this,void 0,void 0,function(){var a,d,p,v;return Fe(this,function(o){switch(o.label){case 0:return[4,e.prototype.renderCore.call(this,i)];case 1:return o.sent(),(a=Et(this.element,i.styleSheets,"href"))&&(d=this.getBoundingBox(i),p=i.pdf.internal.scaleFactor,v=i.pdf.internal.pageSize.getHeight(),i.pdf.link(p*(d[0]*i.transform.sx+i.transform.tx),v-p*(d[1]*i.transform.sy+i.transform.ty),p*d[2],p*d[3],{url:a})),[2]}})})},t}(xd),am=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.apply=function(i){return Ne(this,void 0,void 0,function(){var a,d,p;return Fe(this,function(v){switch(v.label){case 0:if(!this.isVisible(!0,i))return[2];a=i.pdf.matrixMult(this.computeNodeTransform(i),i.transform),i.pdf.setCurrentTransformationMatrix(a),d=0,p=this.children,v.label=1;case 1:return d<p.length?[4,p[d].render(new Fn(i.pdf,{refsHandler:i.refsHandler,styleSheets:i.styleSheets,viewport:i.viewport,withinClipPath:!0,svg2pdfParameters:i.svg2pdfParameters,textMeasure:i.textMeasure}))]:[3,4];case 2:v.sent(),v.label=3;case 3:return d++,[3,1];case 4:return i.pdf.clip().discardPath(),i.pdf.setCurrentTransformationMatrix(a.inversed()),[2]}})})},t.prototype.getBoundingBoxCore=function(i){return xh(i,this)},t.prototype.isVisible=function(i,a){return En(this,i,a)},t}(Ga);function Ah(e,t){var i,a=[];switch(function(p,v){for(var o=[],r=0;r<p.childNodes.length;r++){var c=p.childNodes[r];c.nodeName.charAt(0)!=="#"&&o.push(c)}for(r=0;r<o.length;r++)v(r,o[r])}(e,function(p,v){return a.push(Ah(v,t))}),e.tagName.toLowerCase()){case"a":i=new sm(e,a);break;case"g":i=new xd(e,a);break;case"circle":i=new im(e,a);break;case"clippath":i=new am(e,a);break;case"ellipse":i=new G2(e,a);break;case"lineargradient":i=new hd(e,a);break;case"image":i=new Z2(e,a);break;case"line":i=new Y2(e,a);break;case"marker":i=new em(e,a);break;case"path":i=new K2(e,a);break;case"pattern":i=new fd(e,a);break;case"polygon":i=new Q2(e,a);break;case"polyline":i=new rm(e,a);break;case"radialgradient":i=new ud(e,a);break;case"rect":i=new X2(e,a);break;case"svg":i=new nm(e,a);break;case"symbol":i=new md(e,a);break;case"text":i=new $2(e,a);break;case"use":i=new V2(e,a);break;default:i=new tm(e,a)}if(t!=null&&i.element.hasAttribute("id")){var d=nd(i.element.id,{isIdentifier:!0});t[d]=t[d]||i}return i.children.forEach(function(p){return p.setParent(i)}),i}var om=function(){function e(t,i){this.rootSvg=t,this.loadExternalSheets=i,this.styleSheets=[]}return e.prototype.load=function(){return Ne(this,void 0,void 0,function(){var t;return Fe(this,function(i){switch(i.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return t=i.sent(),this.parseCssSheets(t),[2]}})})},e.prototype.collectStyleSheetTexts=function(){return Ne(this,void 0,void 0,function(){var t,i,a,d,p;return Fe(this,function(v){switch(v.label){case 0:if(t=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(d=0;d<this.rootSvg.ownerDocument.childNodes.length;d++)(i=this.rootSvg.ownerDocument.childNodes[d]).nodeName==="xml-stylesheet"&&typeof i.data=="string"&&t.push(e.loadSheet(i.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(a=this.rootSvg.querySelectorAll("style,link"),d=0;d<a.length;d++)Tn(p=a[d],"style")?t.push(p.textContent):this.loadExternalSheets&&Tn(p,"link")&&p.getAttribute("rel")==="stylesheet"&&p.hasAttribute("href")&&t.push(e.loadSheet(p.getAttribute("href")));return[4,Promise.all(t)];case 1:return[2,v.sent().filter(function(o){return o!==null})]}})})},e.prototype.parseCssSheets=function(t){for(var i=document.implementation.createHTMLDocument(""),a=0,d=t;a<d.length;a++){var p=d[a],v=i.createElement("style");v.textContent=p,i.body.appendChild(v);var o=v.sheet;if(o instanceof CSSStyleSheet){for(var r=o.cssRules.length-1;r>=0;r--){var c=o.cssRules[r];if(c instanceof CSSStyleRule){var u=c;if(u.selectorText.indexOf(",")>=0){o.deleteRule(r);for(var s=u.cssText.substring(u.selectorText.length),l=e.splitSelectorAtCommas(u.selectorText),n=0;n<l.length;n++)o.insertRule(l[n]+s,r+n)}}else o.deleteRule(r)}this.styleSheets.push(o)}}},e.splitSelectorAtCommas=function(t){for(var i,a=/,|["']/g,d=/[^\\]["]/g,p=/[^\\][']/g,v=[],o="initial",r=-1,c=d,u=0;u<t.length;)switch(o){case"initial":a.lastIndex=u,(i=a.exec(t))?(i[0]===","?(v.push(t.substring(r+1,a.lastIndex-1).trim()),r=a.lastIndex-1):(o="withinQuotes",c=i[0]==='"'?d:p),u=a.lastIndex):(v.push(t.substring(r+1).trim()),u=t.length);break;case"withinQuotes":c.lastIndex=u,(i=c.exec(t))&&(u=c.lastIndex,o="initial")}return v},e.loadSheet=function(t){return new Promise(function(i,a){var d=new XMLHttpRequest;d.open("GET",t,!0),d.responseType="text",d.onload=function(){d.status!==200&&a(new Error("Error ".concat(d.status,": Failed to load '").concat(t,"'"))),i(d.responseText)},d.onerror=a,d.onabort=a,d.send(null)}).catch(function(){return null})},e.prototype.getPropertyValue=function(t,i){for(var a=[],d=0,p=this.styleSheets;d<p.length;d++)for(var v=p[d],o=0;o<v.cssRules.length;o++){var r=v.cssRules[o];r.style.getPropertyValue(i)&&t.matches(r.selectorText)&&a.push(r)}if(a.length!==0)return a.reduce(function(c,u){return l=u,((n=(s=c).style.getPropertyPriority(i))!==l.style.getPropertyPriority(i)?n==="important"?1:-1:B2(s.selectorText,l.selectorText))===1?c:u;var s,l,n}).style.getPropertyValue(i)||void 0},e}(),lm=function(){function e(){this.measureMethods={}}return e.prototype.getTextOffset=function(t,i){var a=i.textAnchor;if(a==="start")return 0;var d=this.measureTextWidth(t,i),p=0;switch(a){case"end":p=d;break;case"middle":p=d/2}return p},e.prototype.measureTextWidth=function(t,i){if(t.length===0)return 0;var a=i.fontFamily;return this.getMeasureFunction(a).call(this,t,i.fontFamily,i.fontSize+"px",i.fontStyle,i.fontWeight)},e.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS(Yu,"text");var t=document.createElementNS(Yu,"svg");t.appendChild(this.textMeasuringTextElement),t.style.setProperty("position","absolute"),t.style.setProperty("visibility","hidden"),document.body.appendChild(t)}return this.textMeasuringTextElement},e.prototype.canvasTextMeasure=function(t,i,a,d,p){var v=document.createElement("canvas").getContext("2d");return v!=null?(v.font=[d,p,a,i].join(" "),v.measureText(t).width):0},e.prototype.svgTextMeasure=function(t,i,a,d,p,v){v===void 0&&(v=this.getMeasurementTextNode());var o=v;return o.setAttribute("font-family",i),o.setAttribute("font-size",a),o.setAttribute("font-style",d),o.setAttribute("font-weight",p),o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.textContent=t,o.getBBox().width},e.prototype.getMeasureFunction=function(t){var i=this.measureMethods[t];if(!i){var a="16px",d="normal",p="normal",v=this.canvasTextMeasure(e.testString,t,a,d,p),o=this.svgTextMeasure(e.testString,t,a,d,p);i=Math.abs(v-o)<e.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[t]=i}return i},e.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var t=this.textMeasuringTextElement.parentNode;t&&document.body.removeChild(t),this.textMeasuringTextElement=void 0}},e.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,e.epsilon=.1,e}();function cm(e,t){return Ne(this,arguments,void 0,function(i,a,d){var p,v,o,r,c,u,s,l,n,h,g,f,m,y;return d===void 0&&(d={}),Fe(this,function(x){switch(x.label){case 0:return p=(f=d.x)!==null&&f!==void 0?f:0,v=(m=d.y)!==null&&m!==void 0?m:0,o=(y=d.loadExternalStyleSheets)!==null&&y!==void 0&&y,c=new ad(r={}),[4,(u=new om(i,o)).load()];case 1:return x.sent(),s=new Sl(a.internal.pageSize.getWidth(),a.internal.pageSize.getHeight()),l=gl(gl({},d),{element:i}),n=new lm,h=new Fn(a,{refsHandler:c,styleSheets:u,viewport:s,svg2pdfParameters:l,textMeasure:n}),a.advancedAPI(),a.saveGraphicsState(),a.setCurrentTransformationMatrix(a.Matrix(1,0,0,1,p,v)),a.setLineWidth(h.attributeState.strokeWidth),g=h.attributeState.fill.color,a.setFillColor(g.r,g.g,g.b),a.setFont(h.attributeState.fontFamily),a.setFontSize(h.attributeState.fontSize*a.internal.scaleFactor),[4,Ah(i,r).render(h)];case 2:return x.sent(),a.restoreGraphicsState(),a.compatAPI(),h.textMeasure.cleanupTextMeasuring(),[2,a]}})})}Kt.API.svg=function(e,t){return t===void 0&&(t={}),cm(e,this,t)};const hm=(e,t)=>{switch(e){case"rect":return um(t);case"triangle":return fm(t);case"ellipse":return dm(t);case"line":return pm(t);case"text":return gm(t,"Tap to Type");default:return null}},um=e=>new Ti.fabric.Rect({left:e.x,top:e.y,width:100,height:100,fill:"#d9d9d9",objectId:Pn()}),fm=e=>new Ti.fabric.Triangle({left:e.x,top:e.y,width:100,height:100,fill:"#d9d9d9",objectId:Pn()}),dm=e=>new Ti.fabric.Ellipse({left:e.x,top:e.y,rx:100,ry:100,fill:"#d9d9d9",objectId:Pn()}),pm=e=>new Ti.fabric.Line([e.x,e.y,e.x+100,e.y+100],{stroke:"#d9d9d9",strokeWidth:2,objectId:Pn()}),gm=(e,t)=>new Ti.fabric.IText(t,{left:e.x,top:e.y,fill:"black",fontFamily:"Helvetica",fontSize:16,fontWeight:"400",objectId:Pn()}),Ku=(e,t,i,a)=>new Ti.fabric.Group(e,{left:t,top:i,objectId:a||Pn()}),mm=(e,t)=>e==="fill"||e==="stroke"?t:e==="opacity"?parseFloat(t):parseInt(t),_d=e=>fe(e).hex(),Ju=e=>e?e==="Mixed"?e:fe(e).hex().toUpperCase().slice(1):"",vm=e=>e?e==="Mixed"?e:""+ +e*100:"",bm=e=>""+ +e/100,Sd=(e,t)=>{e&&(e.type==="group"&&e.getObjects().forEach((i,a)=>{Sd(i,t.objects[a])}),t.objectId=e.objectId)},ym=({canvas:e,property:t,value:i,syncShapeInStorage:a})=>{if(!e)return;const d=e.getActiveObject();if(!(!d||(d==null?void 0:d.type)==="activeSelection")){if(i=mm(t,i),t==="width")d.set("scaleX",1),d.set("width",i);else if(t==="height")d.set("scaleY",1),d.set("height",i);else{if(d[t]===i)return;d.set(t,i)}a(d)}},wm=({canvas:e,objectId:t})=>{if(!e)return;const i=e.getObjects().find(a=>a.objectId===t);i&&(i.visible=!i.visible,e.renderAll())},xm=({canvas:e,objectId:t})=>{if(!e)return;const i=e.getObjects().find(a=>a.objectId===t);i&&(i.selectable=!i.selectable,e.renderAll())},_m=(e,t)=>{Ti.fabric.util.enlivenObjects(t,i=>{i.forEach(a=>{e.add(a)}),e.renderAll()},"fabric")},Sm=(e,t)=>{const i=e.getActiveObject();if(!i)return;const{left:a,top:d,width:p,height:v}=i.getBoundingRect(),o=0,r=e.toDataURL({format:t,left:a-o,top:d-o,width:p+o*2,height:v+o*2,multiplier:1}),c=document.createElement("a");c.href=r,c.download=`element.${t}`,c.click()},Cm=e=>{const t=e.getActiveObject();if(!t)return;const i=t.toSVG(),{left:a,top:d,width:p,height:v}=t.getBoundingRect(),o=0,r=`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      width="${p+o*2}"
      height="${v+o*2}"
      viewBox="${a-o} ${d-o} ${p+o*2} ${v+o*2}"
    >
      ${i}
    </svg>
  `,c=new Blob([r],{type:"image/svg+xml"}),u=URL.createObjectURL(c),s=document.createElement("a");s.href=u,s.download="element.svg",s.click(),URL.revokeObjectURL(u)},Am=e=>{const t=e.getActiveObject();if(!t)return;const i=t.toSVG(),{left:a,top:d,width:p,height:v}=t.getBoundingRect(),o=0,r=`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      width="${p+o*2}"
      height="${v+o*2}"
      viewBox="${a-o} ${d-o} ${p+o*2} ${v+o*2}"
    >
      ${i}
    </svg>
  `,c=new Kt({orientation:p>v?"l":"p",unit:"px",format:[p+o*2,v+o*2]}),u=new DOMParser().parseFromString(r,"image/svg+xml").documentElement;c.svg(u,{x:o,y:o,width:p,height:v}).then(()=>{c.save("element.pdf")})},km=(e,t)=>{e==="png"||e==="jpeg"?Sm(t,e):e==="svg"?Cm(t):e==="pdf"&&Am(t)},Lm={class:"custom-multi-input"},Tm={class:"multi-input-container"},Pm={class:"left-slot"},Om={class:"right-slot"},Mm=er({__name:"FillInput",props:{leftValue:{},rightValue:{},leftText:{},rightText:{},handleLeftChange:{type:Function},handleRightChange:{type:Function}},setup(e){const t=e,i=me(null),a=me(null),d=me(t.leftValue),p=me(t.rightValue);Qn(()=>t.leftValue,u=>{d.value=u}),Qn(()=>t.rightValue,u=>{p.value=u});const v=()=>{t.handleLeftChange(_d(d.value))},o=()=>{t.handleRightChange(bm(p.value))},r=()=>{v(),i.value&&i.value.blur()},c=()=>{o(),a.value&&a.value.blur()};return(u,s)=>(he(),ve("div",Lm,[Jt("div",Tm,[Jt("div",Pm,[Xs(u.$slots,"left",{},()=>[Jt("span",null,nn(u.leftText),1)])]),ol(Jt("input",{ref_key:"leftInputRef",ref:i,"onUpdate:modelValue":s[0]||(s[0]=l=>hl(d)?d.value=l:null),class:"left-input-field",onBlur:v,onKeydown:cl(r,["enter"])},null,544),[[ll,Xt(d)]]),ol(Jt("input",{ref_key:"rightInputRef",ref:a,"onUpdate:modelValue":s[1]||(s[1]=l=>hl(p)?p.value=l:null),class:"right-input-field",onBlur:o,onKeydown:cl(c,["enter"])},null,544),[[ll,Xt(p)]]),Jt("div",Om,[Xs(u.$slots,"right",{},()=>[Jt("span",null,nn(u.rightText),1)])])])]))}}),Nm=ir(Mm,[["__scopeId","data-v-c74f1c48"]]),Fm={class:"custom-input"},Em={class:"input-container"},Im={class:"left-slot"},jm=er({__name:"StrokeInput",props:{value:{},leftText:{},handleChange:{type:Function}},setup(e){const t=e,i=me(null),a=me(t.value);Qn(()=>t.value,v=>{a.value=v},{immediate:!0});const d=()=>{t.handleChange(_d(a.value))},p=()=>{d(),i.value&&i.value.blur()};return(v,o)=>(he(),ve("div",Fm,[Jt("div",Em,[Jt("div",Im,[Xs(v.$slots,"left",{},()=>[Jt("span",null,nn(v.leftText),1)])]),ol(Jt("input",{ref_key:"inputRef",ref:i,"onUpdate:modelValue":o[0]||(o[0]=r=>hl(a)?a.value=r:null),class:"input-field",onBlur:d,onKeydown:cl(p,["enter"])},null,544),[[ll,Xt(a)]])])]))}}),Dm=ir(jm,[["__scopeId","data-v-4b072cac"]]),Bm={class:"custom-select"},Rm={class:"selected-option"},zm={class:"arrow-icon"},qm={key:0,class:"dropdown"},Um=["onClick"],Wm=er({__name:"Select",props:{options:{},value:{},handleChange:{type:Function}},setup(e){var v;const t=e,i=me(!1),a=me((v=t.options.find(o=>o.value===t.value))==null?void 0:v.label);Qn(()=>t.value,o=>{var r;a.value=((r=t.options.find(c=>c.value===o))==null?void 0:r.label)||""});const d=()=>{i.value=!i.value},p=o=>{a.value=o.label,t.handleChange(o.value),i.value=!1};return(o,r)=>(he(),ve("div",Bm,[Jt("div",{class:"select-container",onClick:d},[Jt("div",Rm,[Jt("span",null,nn(Xt(a)),1)]),Jt("div",zm,[Oe(Xt(tf),{size:12,"stroke-width":1,color:"black"})])]),Xt(i)?(he(),ve("div",qm,[(he(!0),ve(Gs,null,$s(o.options,c=>(he(),ve("div",{key:c.value,class:"dropdown-item",onClick:u=>p(c)},nn(c.label),9,Um))),128))])):Ui("",!0)]))}}),zc=ir(Wm,[["__scopeId","data-v-8bbbee98"]]),Hm={class:"right-side-bar"},Ym={class:"block"},Vm={key:0,class:"pb-2 px-4 flex gap-2"},Xm={key:1,class:"pb-2 px-4 flex gap-2"},Gm={class:"block"},$m={key:0,class:"pb-2 px-4 flex gap-2"},Km={class:"block"},Jm={key:0,class:"pb-2 px-4 flex gap-2"},Zm={class:"block"},Qm={key:0,class:"pb-2 px-4 flex gap-2"},tv={class:"block"},ev={class:"flex justify-between items-center"},iv={key:0,class:"pb-2 px-4 flex gap-2"},rv={class:"block"},nv={key:0,class:"pb-2 px-4 flex gap-2"},sv=er({__name:"RightSideBar",props:{fabric:{},elAttrs:{},setElAttrs:{type:Function},syncShapeInStorage:{type:Function}},setup(e){Qu(B=>({"5a234147":Xt(d),"0e6afa04":Xt(p),"295fee90":Xt(v),"9176808e":Xt(o),"56a91112":Xt(r)}));const t=e,i=me("png"),a=B=>B===""||B==="Mixed"?"#ababab":B,d=Er(()=>t.elAttrs.stroke&&t.elAttrs.stroke!=="Mixed"?"#000":"#ababab"),p=Er(()=>t.elAttrs.fontWeight&&t.elAttrs.fontWeight!=="Mixed"?"#000":"#ababab"),v=Er(()=>t.elAttrs.left?"#000":"#ababab"),o=Er(()=>t.elAttrs.width?"#000":"#ababab"),r=Er(()=>t.elAttrs.fill?"#000":"#ababab"),c=({property:B,value:X})=>{ym({canvas:t.fabric,property:B,value:X,syncShapeInStorage:t.syncShapeInStorage})},u=B=>{t.setElAttrs({...t.elAttrs,left:B}),c({property:"left",value:B})},s=B=>{t.setElAttrs({...t.elAttrs,top:B}),c({property:"top",value:B})},l=B=>{t.setElAttrs({...t.elAttrs,width:B}),c({property:"width",value:B})},n=B=>{t.setElAttrs({...t.elAttrs,height:B}),c({property:"height",value:B})},h=B=>{t.setElAttrs({...t.elAttrs,angle:B}),c({property:"angle",value:B})},g=B=>{t.setElAttrs({...t.elAttrs,fill:B}),c({property:"fill",value:B})},f=B=>{t.setElAttrs({...t.elAttrs,opacity:B}),c({property:"opacity",value:B})},m=()=>{t.setElAttrs({...t.elAttrs,strokeWidth:"1",stroke:"#000000"}),c({property:"stroke",value:"#000000"}),c({property:"strokeWidth",value:"1"})},y=()=>{t.setElAttrs({...t.elAttrs,strokeWidth:"",stroke:""}),c({property:"stroke",value:null})},x=B=>{t.setElAttrs({...t.elAttrs,stroke:B}),c({property:"stroke",value:B})},_=B=>{t.setElAttrs({...t.elAttrs,strokeWidth:B}),c({property:"strokeWidth",value:B})},A=B=>{t.setElAttrs({...t.elAttrs,fontWeight:B}),c({property:"fontWeight",value:B})},M=B=>{t.setElAttrs({...t.elAttrs,fontSize:B}),c({property:"fontSize",value:B})},T=B=>{i.value=B},O=()=>{t.fabric&&km(i.value,t.fabric)};return(B,X)=>(he(),ve("div",Hm,[Jt("div",Ym,[X[0]||(X[0]=Jt("div",{class:"py-3 px-4 font-medium text-[12px] position-block"}," Position ",-1)),B.$props.elAttrs.left?(he(),ve("div",Vm,[Oe(Ms,{"left-text":"X",value:B.$props.elAttrs.left,"handle-change":u},null,8,["value"]),Oe(Ms,{"left-text":"Y",value:B.$props.elAttrs.top,"handle-change":s},null,8,["value"])])):Ui("",!0),B.$props.elAttrs.left?(he(),ve("div",Xm,[Oe(Ms,{"left-text":"",value:B.$props.elAttrs.angle,"handle-change":h},{left:qs(()=>[Oe(Xt(T0),{size:12,color:"#ababab"})]),_:1},8,["value"])])):Ui("",!0)]),Jt("div",Gm,[X[1]||(X[1]=Jt("div",{class:"py-3 px-4 font-medium text-[12px] layout-block"}," Layout ",-1)),B.$props.elAttrs.width?(he(),ve("div",$m,[Oe(Ms,{"left-text":"W",value:B.$props.elAttrs.width,"handle-change":l},null,8,["value"]),Oe(Ms,{"left-text":"H",value:B.$props.elAttrs.height,"handle-change":n},null,8,["value"])])):Ui("",!0)]),Jt("div",Km,[X[2]||(X[2]=Jt("div",{class:"py-3 px-4 font-medium text-[12px] typography-block"}," Typography ",-1)),B.$props.elAttrs.fontWeight&&B.$props.elAttrs.fontWeight!=="Mixed"?(he(),ve("div",Jm,[Jt("div",null,[Oe(zc,{value:B.$props.elAttrs.fontWeight,options:Xt(l0),"handle-change":A},null,8,["value","options"])]),Jt("div",null,[Oe(zc,{value:B.$props.elAttrs.fontSize,options:Xt(c0),"handle-change":M},null,8,["value","options"])])])):Ui("",!0)]),Jt("div",Zm,[X[3]||(X[3]=Jt("div",{class:"py-3 px-4 font-medium text-[12px] fill-block"}," Fill ",-1)),B.$props.elAttrs.fill?(he(),ve("div",Qm,[Oe(Nm,{"left-text":"","right-text":"%","left-value":Xt(Ju)(B.$props.elAttrs.fill),"right-value":Xt(vm)(B.$props.elAttrs.opacity),"handle-left-change":g,"handle-right-change":f},{left:qs(()=>[Oe(Xt(Ua),{size:12,color:a(B.$props.elAttrs.fill),fill:a(B.$props.elAttrs.fill)},null,8,["color","fill"])]),_:1},8,["left-value","right-value"])])):Ui("",!0)]),Jt("div",tv,[Jt("div",ev,[X[4]||(X[4]=Jt("div",{class:"py-3 px-4 font-medium text-[12px] stroke-block"}," Stroke ",-1)),B.$props.elAttrs.fill&&B.$props.elAttrs.stroke!=="Mixed"?(he(),ve("div",{key:0,class:"plus",onClick:m},[Oe(Xt(L0),{size:18,color:Xt(d),"stroke-width":"1"},null,8,["color"])])):Ui("",!0)]),B.$props.elAttrs.stroke&&B.$props.elAttrs.stroke!=="Mixed"?(he(),ve("div",iv,[Oe(Dm,{"left-text":"",value:Xt(Ju)(B.$props.elAttrs.stroke),"handle-change":x},{left:qs(()=>[Oe(Xt(Ua),{size:12,color:a(B.$props.elAttrs.stroke),fill:a(B.$props.elAttrs.stroke)},null,8,["color","fill"])]),_:1},8,["value"]),Oe(Ms,{"left-text":"",value:B.$props.elAttrs.strokeWidth,"handle-change":_},{left:qs(()=>[Oe(Xt(m0),{size:12,color:"#ababab"})]),_:1},8,["value"]),Jt("div",{class:"minus",onClick:y},[Oe(Xt(C0),{size:18,color:"#000","stroke-width":"1"})])])):Ui("",!0)]),Jt("div",rv,[X[6]||(X[6]=Jt("div",{class:"py-3 px-4 font-medium text-[12px] layout-block"}," Export ",-1)),B.$props.elAttrs.width?(he(),ve("div",nv,[Jt("div",null,[Oe(zc,{value:Xt(i),options:Xt(h0),"handle-change":T},null,8,["value","options"])]),Jt("div",{class:"export-button",onClick:O},X[5]||(X[5]=[Jt("div",null," Export ",-1)]))])):Ui("",!0)])]))}}),av=ir(sv,[["__scopeId","data-v-e6bb6c49"]]),kh=u0("main",{state:()=>({canvasObjects:[]}),getters:{getObjectById:e=>t=>e.canvasObjects.find(i=>i.objectId===t),getIndexById:e=>t=>e.canvasObjects.findIndex(i=>i.objectId===t)},actions:{loadCanvasFromStorage(){const e=localStorage.getItem("canvasObjects");if(e==null)return this.canvasObjects=[],localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects)),this.canvasObjects;const t=JSON.parse(e);return Array.isArray(t)?this.canvasObjects=t:(this.canvasObjects=[],localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))),this.canvasObjects},syncShapeInStorage(e){if(!e)return;const{objectId:t}=e,i=e.toJSON(["selectable"]);Sd(e,i);const a=this.getIndexById(t);a===-1?this.canvasObjects.push(i):this.canvasObjects[a]=i,localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))},frontShapeInStorage(e){const t=this.getIndexById(e);if(t===-1)return;const i=this.canvasObjects.splice(t,1)[0];this.canvasObjects.push(i),localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))},backShapeInStorage(e){const t=this.getIndexById(e);if(t===-1)return;const i=this.canvasObjects.splice(t,1)[0];this.canvasObjects.unshift(i),localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))},deleteShapeInStorage(e){this.canvasObjects=this.canvasObjects.filter(t=>t.objectId!==e),localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects))},modifyShapeInStorage(e,t,i){const a=this.getIndexById(e);a!==-1&&(this.canvasObjects[a][t]=i,localStorage.setItem("canvasObjects",JSON.stringify(this.canvasObjects)))}}}),ov={class:"type-text"},lv={class:"flex gap-3"},cv={key:0,class:"nested-items"},hv=er({__name:"LayerItem",props:{fabric:{},object:{},selectedObjectIds:{},grouped:{type:Boolean},visibility:{type:Boolean},selectablility:{type:Boolean}},setup(e){Qu(h=>({c365d220:Xt(r)}));const t=kh(),i=e,a=me(!1),d=me(!1),p=Er(()=>!i.grouped&&(d.value||!i.visibility)),v=Er(()=>!i.grouped&&(d.value||!i.selectablility)),o=Er(()=>i.selectedObjectIds.includes(i.object.objectId)),r=Er(()=>i.visibility?"#000":"#ababab"),c=()=>{a.value=!a.value},u=h=>{i.object.visible=!i.object.visible,wm({canvas:i.fabric,objectId:h}),t.modifyShapeInStorage(h,"visible",i.object.visible)},s=h=>{i.object.selectable=!i.object.selectable,xm({canvas:i.fabric,objectId:h}),t.modifyShapeInStorage(h,"selectable",i.object.selectable)},l=h=>o.value||h==="group"||h==="image"?"#000":"#ababab",n=h=>{switch(h){case"rect":return{icon:Ua,name:"Rectangle"};case"line":return{icon:nf,name:"Line"};case"ellipse":return{icon:ef,name:"Ellipse"};case"triangle":return{icon:sf,name:"Triangle"};case"i-text":return{icon:af,name:"Text"};case"path":return{icon:P0,name:"Path"};case"image":return{icon:rf,name:"Image"};case"group":return{icon:O0,name:"Group"};default:return{icon:Ua,name:h}}};return(h,g)=>{const f=f0("LayerItem",!0);return he(),ve("div",null,[Jt("div",{class:"shape-item",onMouseenter:g[2]||(g[2]=m=>d.value=!0),onMouseleave:g[3]||(g[3]=m=>d.value=!1)},[Jt("div",{onClick:Qo(c,["stop"])},[Oe(Xt(b0),{size:12,class:sh({rotated:Xt(a)}),color:h.$props.object.type==="group"?"#ababab":"#fff0"},null,8,["class","color"])]),Jt("div",null,[(he(),$n(Ba(n(h.object.type).icon),{size:12,"stroke-width":2,color:l(h.object.type)},null,8,["color"]))]),Jt("div",ov,nn(n(h.object.type).name),1),Jt("div",lv,[(he(),$n(Ba(h.$props.selectablility?Xt(_0):Xt(S0)),{style:al({visibility:Xt(v)?"visible":"hidden"}),size:12,"stroke-width":2,onClick:g[0]||(g[0]=Qo(m=>s(h.object.objectId),["stop"]))},null,8,["style"])),(he(),$n(Ba(h.$props.visibility?Xt(w0):Xt(y0)),{style:al({visibility:Xt(p)?"visible":"hidden"}),size:12,"stroke-width":2,onClick:g[1]||(g[1]=Qo(m=>u(h.object.objectId),["stop"]))},null,8,["style"]))])],32),h.object.type==="group"&&Xt(a)?(he(),ve("div",cv,[(he(!0),ve(Gs,null,$s(h.object.objects,m=>(he(),$n(f,{key:m.objectId,object:m,fabric:h.fabric,"selected-object-ids":h.selectedObjectIds,grouped:!0,visibility:h.$props.visibility,selectablility:h.$props.selectablility},null,8,["object","fabric","selected-object-ids","visibility","selectablility"]))),128))])):Ui("",!0)])}}}),uv=ir(hv,[["__scopeId","data-v-26eccb3b"]]),fv={class:"left-side-bar"},dv={class:"flex flex-col px-3"},pv=er({__name:"LeftSideBar",props:{fabric:{},selectedObjectIds:{},setSelectedObjectIds:{type:Function}},setup(e){const t=kh(),i=Er(()=>t.canvasObjects.toReversed()),a=e,d=p=>{a.setSelectedObjectIds([p])};return(p,v)=>(he(),ve("div",fv,[v[0]||(v[0]=Jt("div",{class:"pt-4 pb-2 px-4 font-medium text-[12px]"}," Layers ",-1)),Jt("div",dv,[(he(!0),ve(Gs,null,$s(Xt(i).map(o=>o.objectId),(o,r)=>(he(),$n(uv,{key:o,fabric:p.$props.fabric,object:Xt(i)[r],"selected-object-ids":p.$props.selectedObjectIds,class:sh([{selected:p.selectedObjectIds.includes(o)},"layer-item"]),grouped:!1,visibility:Xt(i)[r].visible,selectablility:Xt(i)[r].selectable,onClick:c=>d(o)},null,8,["fabric","object","selected-object-ids","class","visibility","selectablility","onClick"]))),128))])]))}}),gv=ir(pv,[["__scopeId","data-v-6f19a836"]]),Lh={type:"Mixed",left:"Mixed",top:"Mixed",width:"Mixed",height:"Mixed",angle:"Mixed",fill:"Mixed",opacity:"Mixed",stroke:"Mixed",strokeWidth:"Mixed",fontSize:"Mixed",fontWeight:"Mixed"},mv={type:"",left:"",top:"",width:"",height:"",angle:"",fill:"",opacity:"",stroke:"",strokeWidth:"",fontSize:"",fontWeight:""},vv=({fabricRef:e,canvasRef:t})=>{if(!t.value){console.error("Canvas element is not available.");return}const i=t.value;if(!i){console.error("Canvas is not available.");return}const a=new Ti.fabric.Canvas(t.value,{width:i.clientWidth,height:i.clientHeight,backgroundColor:"#f5f5f5",selectionBorderColor:"#0d99ff",selectionColor:"#0d99ff22"});return e.value=a,a},bv=({options:e,canvas:t,selectedToolRef:i,shapeRef:a})=>{const d=t.getPointer(e.e),p=t.findTarget(e.e,!1);p&&p.type===i.value?(t.setActiveObject(p),p.setCoords()):(a.value=hm(i.value,d),a.value&&(a.value.set({visible:!1}),t.add(a.value)))},yv=({options:e,canvas:t,selectedToolRef:i,shapeRef:a})=>{var p,v,o,r,c,u,s,l,n,h;if(i.value==="pencil")return;t.isDrawingMode=!1,a.value&&a.value.set({visible:!0});const d=t.getPointer(e.e);switch(i==null?void 0:i.value){case"rect":(o=a.value)==null||o.set({width:d.x-(((p=a.value)==null?void 0:p.left)||0),height:d.y-(((v=a.value)==null?void 0:v.top)||0)});break;case"ellipse":(u=a.value)==null||u.set({rx:Math.abs(d.x-(((r=a.value)==null?void 0:r.left)||0))/2,ry:Math.abs(d.y-(((c=a.value)==null?void 0:c.top)||0))/2});break;case"triangle":(n=a.value)==null||n.set({width:d.x-(((s=a.value)==null?void 0:s.left)||0),height:d.y-(((l=a.value)==null?void 0:l.top)||0)});break;case"line":(h=a.value)==null||h.set({x2:d.x,y2:d.y});break}t.renderAll()},wv=({shapeRef:e,syncShapeInStorage:t})=>{t(e.value),e.value&&e.value.set({visible:!0}),e.value=null},Zu=({options:e,setElAttrsRef:t,setSelectedObjectIdsRef:i,isProgrammaticSelectionRef:a})=>{var v,o,r,c,u,s,l,n,h;if(!(e!=null&&e.selected))return;a.value=!1;const d=e.selected.map(g=>g.objectId);i(d);const p=e==null?void 0:e.selected[0];if(console.log(p),p&&e.selected.length===1){const g=p!=null&&p.scaleX?(p==null?void 0:p.width)*(p==null?void 0:p.scaleX):p==null?void 0:p.width,f=p!=null&&p.scaleY?(p==null?void 0:p.height)*(p==null?void 0:p.scaleY):p==null?void 0:p.height;t({type:(p==null?void 0:p.type)||"",left:((v=p.left)==null?void 0:v.toFixed(0).toString())||"",top:((o=p.top)==null?void 0:o.toFixed(0).toString())||"",width:(g==null?void 0:g.toFixed(0).toString())||"",height:(f==null?void 0:f.toFixed(0).toString())||"",angle:((r=p.angle)==null?void 0:r.toFixed(0).toString())||"",fill:(p==null?void 0:p.type)==="group"?"Mixed":((c=p.fill)==null?void 0:c.toString())||"",opacity:(p==null?void 0:p.type)==="group"?"Mixed":((u=p.opacity)==null?void 0:u.toString())||"",stroke:((s=p.stroke)==null?void 0:s.toString())||"",strokeWidth:((l=p.strokeWidth)==null?void 0:l.toString())||"",fontSize:((n=p.fontSize)==null?void 0:n.toString())||"",fontWeight:((h=p.fontWeight)==null?void 0:h.toString())||""})}else e.selected.length>1&&t(Lh);a.value=!0},xv=({setElAttrsRef:e,setSelectedObjectIdsRef:t})=>{t([]),e(mv)},_v=({options:e,syncShapeInStorage:t})=>{const i=e.path;i&&(i.set({objectId:Pn()}),t(i))},Sv=({options:e,canvas:t,elAttrsRef:i,setElAttrsRef:a})=>{var v,o;if(!e.target)return;if(t.getActiveObjects().length>1){a(Lh);return}const p=e.target;p&&a({...i.value,left:((v=p.left)==null?void 0:v.toFixed(0).toString())||"",top:((o=p.top)==null?void 0:o.toFixed(0).toString())||""})},Cv=({options:e,canvas:t,elAttrsRef:i,setElAttrsRef:a})=>{var r,c,u,s,l,n,h,g;if(!e.target)return;if(t.getActiveObjects().length>1){a(Lh);return}const p=(r=e.target)!=null&&r.scaleX?((c=e.target)==null?void 0:c.width)*((u=e.target)==null?void 0:u.scaleX):(s=e.target)==null?void 0:s.width,v=(l=e.target)!=null&&l.scaleY?((n=e.target)==null?void 0:n.height)*((h=e.target)==null?void 0:h.scaleY):(g=e.target)==null?void 0:g.height;e.target&&a({...i.value,width:(p==null?void 0:p.toFixed(0).toString())||"",height:(v==null?void 0:v.toFixed(0).toString())||""})},Av=({options:e,syncShapeInStorage:t})=>{const i=e.target;i&&((i==null?void 0:i.type)=="activeSelection"||t(i))},kv=({canvas:e,objectIds:t,isProgrammaticSelectionRef:i})=>{if(!i.value)return;const d=e.getObjects().filter(p=>t.includes(p.objectId));d.length===0?e.discardActiveObject():d.length===1?e.setActiveObject(d[0]):d.length>1&&(e.discardActiveObject(),e.setActiveObject(new Ti.fabric.ActiveSelection(d,{canvas:e}))),e.renderAll()},Lv=({canvas:e,deleteShapeInStorage:t})=>{const i=e.getActiveObjects();i.length>0&&i.forEach(a=>{e.remove(a),e.discardActiveObject(),t(a==null?void 0:a.objectId)}),e.renderAll()},Tv=({canvas:e,syncShapeInStorage:t,deleteShapeInStorage:i})=>{const a=e.getActiveObjects();if(a.length>1){const d=Math.min(...a.map(r=>r.group.left)),p=Math.min(...a.map(r=>r.group.top)),v=a.map(r=>r.type==="group"?Ku(r.getObjects().map(c=>Ti.fabric.util.object.clone(c)),r.left,r.top,r.objectId):{...Ti.fabric.util.object.clone(r),objectId:r.objectId}),o=Ku(v,d,p);e.add(o),t(o),e.discardActiveObject(),e.remove(...a),a.forEach(r=>{i(r==null?void 0:r.objectId)}),e.setActiveObject(o),e.renderAll()}},Pv=({canvas:e,syncShapeInStorage:t,deleteShapeInStorage:i})=>{const a=e.getActiveObjects();if(a.length===1&&a[0].type==="group"){const d=a[0],p=d.getObjects();d.destroy(),e.remove(d),i(d==null?void 0:d.objectId),p.forEach(v=>{e.add(v),t(v)}),e.discardActiveObject(),e.renderAll()}},Ov=({canvas:e,frontShapeInStorage:t})=>{const i=e.getActiveObjects();if(i.length===1){const a=i[0];e.bringToFront(a),t(a==null?void 0:a.objectId),e.renderAll()}},Mv=({canvas:e,backShapeInStorage:t})=>{const i=e.getActiveObjects();if(i.length===1){const a=i[0];e.sendToBack(a),t(a==null?void 0:a.objectId),e.renderAll()}},Nv=({canvas:e,imgUrl:t,syncShapeInStorage:i})=>{Ti.fabric.Image.fromURL(t,a=>{a.set({left:0,top:0,objectId:Pn()}),e.add(a),e.setActiveObject(a),e.renderAll(),i(a)})},Fv={class:"canvas-container"},Ev=er({__name:"CanvasContainer",props:{onMounted:{type:Function}},setup(e){const t=me(null),i=e;return d0(()=>{i.onMounted(t.value)}),(a,d)=>(he(),ve("div",Fv,[Jt("canvas",{id:"canvas",ref_key:"canvasRef",ref:t,class:"canvas"},null,512)]))}}),Iv=ir(Ev,[["__scopeId","data-v-475042e3"]]),jv=["onClick"],Dv=er({__name:"ContextMenu",emits:["select"],setup(e,{expose:t,emit:i}){const a=me([{label:"Bring to front",value:"front"},{label:"Send to back",value:"back"},{label:"Group selection",value:"group"},{label:"Ungroup",value:"ungroup"}]),d=i,p=me(!1),v=me(0),o=me(0),r=s=>{p.value=!0,v.value=s.clientX,o.value=s.clientY,document.addEventListener("click",c)},c=()=>{p.value=!1,document.removeEventListener("click",c)},u=s=>{d("select",s.value),c()};return t({openMenu:r,closeMenu:c}),(s,l)=>Xt(p)?(he(),ve("div",{key:0,class:"context-menu",style:al({left:Xt(v)+"px",top:Xt(o)+"px"})},[(he(!0),ve(Gs,null,$s(Xt(a),(n,h)=>(he(),ve("div",{key:h,class:"menu-item",onClick:g=>u(n)},nn(n.label),9,jv))),128))],4)):Ui("",!0)}}),Bv=ir(Dv,[["__scopeId","data-v-eb1eb3df"]]),Rv=er({__name:"home",setup(e){const t=kh(),i=t.syncShapeInStorage,a=t.deleteShapeInStorage,d=t.frontShapeInStorage,p=t.backShapeInStorage,v=me(null),o=me(null),r=me(null),c=me("move");me(null);const u=me(!1),s=me({x:0,y:0}),l=me([]),n=me(!0),h=me({type:"",left:"",top:"",width:"",height:"",angle:"",fill:"",opacity:"",stroke:"",strokeWidth:"",fontSize:"",fontWeight:""}),g=me(null),f=T=>{o.value&&Nv({canvas:o.value,imgUrl:T,syncShapeInStorage:i})},m=T=>{var O;!o.value||o.value.getActiveObjects().length<1||(O=g.value)==null||O.openMenu(T)},y=T=>{o.value&&(T==="group"?Tv({canvas:o.value,syncShapeInStorage:i,deleteShapeInStorage:a}):T==="ungroup"?Pv({canvas:o.value,syncShapeInStorage:i,deleteShapeInStorage:a}):T=="front"?Ov({canvas:o.value,frontShapeInStorage:d}):T==="back"&&Mv({canvas:o.value,backShapeInStorage:p}))},x=T=>{c.value=T},_=T=>{h.value=T},A=T=>{o.value&&(l.value=T,kv({canvas:o.value,objectIds:T,isProgrammaticSelectionRef:n}))};Qn(()=>c.value,T=>{T==="pencil"&&o.value&&(o.value.isDrawingMode=!0,o.value.freeDrawingBrush.width=1)});const M=T=>{v.value=T;const O=vv({canvasRef:v,fabricRef:o});Ti.fabric.Object.prototype.set({borderColor:"#0d99ff",cornerStrokeColor:"#0d99ff",cornerColor:"white",cornerSize:8,transparentCorners:!1,strokeUniform:!0,borderOpacityWhenMoving:0,borderScaleFactor:1.5});const X=Ti.fabric.Object.prototype.controls.mtr;if(X.visible=!1,!O)return;const F=t.loadCanvasFromStorage();F&&_m(O,F),O.on("mouse:down",I=>{c.value==="hand"?(u.value=!0,O.selection=!1,s.value={x:I.e.clientX,y:I.e.clientY}):bv({options:I,canvas:O,shapeRef:r,selectedToolRef:c})}),O.on("mouse:move",I=>{if(u.value){const K=I.e,G=O.viewportTransform;if(!G)return;G[4]+=K.clientX-s.value.x,G[5]+=K.clientY-s.value.y,s.value={x:K.clientX,y:K.clientY},O.renderAll()}else yv({options:I,canvas:O,shapeRef:r,selectedToolRef:c})}),O.on("mouse:up",()=>{u.value=!1,O.selection=!0,wv({shapeRef:r,syncShapeInStorage:i}),["rect","line","ellipse","triangle","text"].includes(c.value)&&(c.value="move")}),O.on("mouse:wheel",function(I){const K=I.e.deltaY;if(I.e.ctrlKey){let rt=O.getZoom();rt*=.999**K,rt>20&&(rt=20),rt<.01&&(rt=.01);const at=O.getPointer(I.e);O.zoomToPoint({x:at.x,y:at.y},rt),I.e.preventDefault(),I.e.stopPropagation()}}),O.on("selection:created",I=>{Zu({options:I,setElAttrsRef:_,setSelectedObjectIdsRef:A,isProgrammaticSelectionRef:n})}),O.on("selection:updated",I=>{Zu({options:I,setElAttrsRef:_,setSelectedObjectIdsRef:A,isProgrammaticSelectionRef:n})}),O.on("selection:cleared",()=>{xv({setElAttrsRef:_,setSelectedObjectIdsRef:A})}),O.on("object:moving",I=>{Sv({options:I,elAttrsRef:h,canvas:O,setElAttrsRef:_})}),O.on("object:scaling",I=>{Cv({options:I,elAttrsRef:h,canvas:O,setElAttrsRef:_})}),O.on("object:modified",I=>{Av({options:I,syncShapeInStorage:i})}),O.on("path:created",I=>{_v({options:I,syncShapeInStorage:i})}),window.addEventListener("keydown",I=>{I.key==="Delete"&&Lv({canvas:O,deleteShapeInStorage:a})})};return(T,O)=>{const B=gv,X=av,F=U0;return he(),ve("div",{class:"container",onContextmenu:Qo(m,["prevent"])},[Oe(B,{fabric:Xt(o),selectedObjectIds:Xt(l),setSelectedObjectIds:A},null,8,["fabric","selectedObjectIds"]),Oe(Iv,{onMounted:M}),Oe(X,{fabric:Xt(o),setElAttrs:_,elAttrs:Xt(h),syncShapeInStorage:Xt(i)},null,8,["fabric","elAttrs","syncShapeInStorage"]),Oe(F,{fabric:Xt(o),selectedToolRef:Xt(c),setSelectedToolRef:x,addImage:f},null,8,["fabric","selectedToolRef"]),Oe(Bv,{ref_key:"contextMenuRef",ref:g,onSelect:y},null,512)],32)}}}),zv=ir(Rv,[["__scopeId","data-v-59633662"]]),Uv=Object.freeze(Object.defineProperty({__proto__:null,default:zv},Symbol.toStringTag,{value:"Module"}));export{Ae as _,Uv as h};
